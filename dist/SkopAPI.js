/*! For license information please see SkopAPI.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SkopAPI=t():e.SkopAPI=t()}(this,(()=>(()=>{var __webpack_modules__={8566:(module,__unused_webpack_exports,__webpack_require__)=>{var factory;window,factory=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=324)}([function(e,t,n){(function(t){e.exports=function(){"use strict";function e(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,o=void 0,i=void 0,s=function(e,t){h[r]=e,h[r+1]=t,2===(r+=2)&&(i?i(f):v())};var a="undefined"!=typeof window?window:void 0,c=a||{},u=c.MutationObserver||c.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(f,1)}}var h=new Array(1e3);function f(){for(var e=0;e<r;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;r=0}var m,g,b,y,v=void 0;function w(e,t){var n=this,r=new this.constructor(E);void 0===r[S]&&L(r);var o=n._state;if(o){var i=arguments[o-1];s((function(){return A(o,r,i,n._result)}))}else N(n,r,e,t);return r}function x(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(E);return _(t,e),t}v=l?function(){return t.nextTick(f)}:u?(g=0,b=new u(f),y=document.createTextNode(""),b.observe(y,{characterData:!0}),function(){y.data=g=++g%2}):d?((m=new MessageChannel).port1.onmessage=f,function(){return m.port2.postMessage(0)}):void 0===a?function(){try{var e=Function("return this")().require("vertx");return void 0!==(o=e.runOnLoop||e.runOnContext)?function(){o(f)}:p()}catch(e){return p()}}():p();var S=Math.random().toString(36).substring(2);function E(){}var T=void 0;function C(t,n,r){n.constructor===t.constructor&&r===w&&n.constructor.resolve===x?function(e,t){1===t._state?k(e,t._result):2===t._state?R(e,t._result):N(t,void 0,(function(t){return _(e,t)}),(function(t){return R(e,t)}))}(t,n):void 0===r?k(t,n):e(r)?function(e,t,n){s((function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?_(e,n):k(e,n))}),(function(t){r||(r=!0,R(e,t))}),e._label);!r&&o&&(r=!0,R(e,o))}),e)}(t,n,r):k(t,n)}function _(e,t){if(e===t)R(e,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(r=t),null===r||"object"!==o&&"function"!==o)k(e,t);else{var n=void 0;try{n=t.then}catch(t){return void R(e,t)}C(e,t,n)}var r,o}function I(e){e._onerror&&e._onerror(e._result),O(e)}function k(e,t){e._state===T&&(e._result=t,e._state=1,0!==e._subscribers.length&&s(O,e))}function R(e,t){e._state===T&&(e._state=2,e._result=t,s(I,e))}function N(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+1]=n,o[i+2]=r,0===i&&e._state&&s(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?A(n,r,o,i):o(i);e._subscribers.length=0}}function A(t,n,r,o){var i=e(r),s=void 0,a=void 0,c=!0;if(i){try{s=r(o)}catch(e){c=!1,a=e}if(n===s)return void R(n,new TypeError("A promises callback cannot return that same promise."))}else s=o;n._state!==T||(i&&c?_(n,s):!1===c?R(n,a):1===t?k(n,s):2===t&&R(n,s))}var D=0;function L(e){e[S]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var P=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[S]||L(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&k(this.promise,this._result))):R(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===T&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===x){var o=void 0,i=void 0,s=!1;try{o=e.then}catch(e){s=!0,i=e}if(o===w&&e._state!==T)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===V){var a=new n(E);s?R(a,i):C(a,e,o),this._willSettleAt(a,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===T&&(this._remaining--,2===e?R(r,n):this._result[t]=n),0===this._remaining&&k(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;N(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},e}();var V=function(){function t(e){this[S]=D++,this._result=this._state=void 0,this._subscribers=[],E!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){_(e,t)}),(function(t){R(e,t)}))}catch(t){R(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this,r=n.constructor;return e(t)?n.then((function(e){return r.resolve(t()).then((function(){return e}))}),(function(e){return r.resolve(t()).then((function(){throw e}))})):n.then(t,t)},t}();return V.prototype.then=w,V.all=function(e){return new P(this,e).promise},V.race=function(e){var t=this;return n(e)?new t((function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},V.resolve=x,V.reject=function(e){var t=new this(E);return R(t,e),t},V._setScheduler=function(e){i=e},V._setAsap=function(e){s=e},V._asap=s,V.polyfill=function(){var e=void 0;if(void 0!==(void 0!==typeof window?window:__webpack_require__.g))e=void 0!==typeof window?window:__webpack_require__.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=V},V.Promise=V,V}()}).call(this,n(43))},function(e,t,n){"use strict";const r=n(392),o=n(191),i=n(119),s=o((e=>{const t={};return Object.keys(i).forEach((n=>{const o=i[n].method,s=r(`OpenTok:${e}:${n.toLowerCase()}`);s.log=console[o].bind(console),t[n.toLowerCase()]=s})),t}));s.setLogLevel=e=>{let t;try{t=(void 0!==typeof window?window:__webpack_require__.g).localStorage.debug}catch(e){t=""}const n=[...Object.keys(i).map((t=>`${e>=i[t].priority?"":"-"}(autogen)?OpenTok:*:${t.toLowerCase()}`)),...(t||"").split(/[\s,]/).filter((e=>-1===e.indexOf("(autogen)?")))].filter((e=>e)).join(",");r.enable(n)},e.exports=s},function(e,t,n){"use strict";const r=n(531).parse();e.exports=r},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";e.exports={AUTHENTICATION_ERROR:"OT_AUTHENTICATION_ERROR",BADLY_FORMED_RESPONSE:"OT_BADLY_FORMED_RESPONSE",CHROME_MICROPHONE_ACQUISITION_ERROR:"OT_CHROME_MICROPHONE_ACQUISITION_ERROR",CONNECT_FAILED:"OT_CONNECT_FAILED",CONNECTION_LIMIT_EXCEEDED:"OT_CONNECTION_LIMIT_EXCEEDED",CONSTRAINTS_NOT_SATISFIED:"OT_CONSTRAINTS_NOT_SATISFIED",CREATE_PEER_CONNECTION_FAILED:"OT_CREATE_PEER_CONNECTION_FAILED",DISCONNECTED:"OT_DISCONNECTED",EMPTY_RESPONSE_BODY:"OT_EMPTY_RESPONSE_BODY",GET_RTC_STATS_REPORT_NOT_SUPPORTED:"OT_GET_RTC_STATS_REPORT_NOT_SUPPORTED",HARDWARE_UNAVAILABLE:"OT_HARDWARE_UNAVAILABLE",ICE_WORKFLOW_FAILED:"OT_ICE_WORKFLOW_FAILED",INVALID_HTTP_STATUS:"OT_INVALID_HTTP_STATUS",INVALID_PARAMETER:"OT_INVALID_PARAMETER",INVALID_SESSION_ID:"OT_INVALID_SESSION_ID",MEDIA_ERR_ABORTED:"OT_MEDIA_ERR_ABORTED",MEDIA_ERR_DECODE:"OT_MEDIA_ERR_DECODE",MEDIA_ERR_NETWORK:"OT_MEDIA_ERR_NETWORK",MEDIA_ERR_SRC_NOT_SUPPORTED:"OT_MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ENDED:"OT_MEDIA_ENDED",NO_DEVICES_FOUND:"OT_NO_DEVICES_FOUND",NO_VALID_CONSTRAINTS:"OT_NO_VALID_CONSTRAINTS",NOT_CONNECTED:"OT_NOT_CONNECTED",NOT_FOUND:"OT_NOT_FOUND",NOT_SUPPORTED:"OT_NOT_SUPPORTED",PEER_CONNECTION_NOT_CONNECTED:"OT_PEER_CONNECTION_NOT_CONNECTED",PERMISSION_DENIED:"OT_PERMISSION_DENIED",RATE_LIMIT_EXCEEDED:"OT_RATE_LIMIT_EXCEEDED",REPORT_ISSUE_FAILED:"OT_REPORT_ISSUE_FAILED",SCREEN_SHARING_EXTENSION_NOT_INSTALLED:"OT_SCREEN_SHARING_EXTENSION_NOT_INSTALLED",SCREEN_SHARING_EXTENSION_NOT_REGISTERED:"OT_SCREEN_SHARING_EXTENSION_NOT_REGISTERED",SCREEN_SHARING_NOT_SUPPORTED:"OT_SCREEN_SHARING_NOT_SUPPORTED",SET_REMOTE_DESCRIPTION_FAILED:"OT_SET_REMOTE_DESCRIPTION_FAILED",SOCKET_ALREADY_CONNECTED_CONNECTING:"OT_SOCKET_ALREADY_CONNECTED_CONNECTING",SOCKET_CLOSE_ABNORMAL:"OT_SOCKET_CLOSE_ABNORMAL",SOCKET_CLOSE_CONNECT_EXCEPTION:"OT_SOCKET_CLOSE_CONNECT_EXCEPTION",SOCKET_CLOSE_CONNECTIVITY_LOSS:"OT_SOCKET_CLOSE_CONNECTIVITY_LOSS",SOCKET_CLOSE_FALLBACK_CODE:"OT_SOCKET_CLOSE_FALLBACK_CODE",SOCKET_CLOSE_INCONSISTENT_DATA:"OT_SOCKET_CLOSE_INCONSISTENT_DATA",SOCKET_CLOSE_NO_STATUS:"OT_SOCKET_CLOSE_NO_STATUS",SOCKET_CLOSE_POLICY_VIOLATION:"OT_SOCKET_CLOSE_POLICY_VIOLATION",SOCKET_CLOSE_GOING_AWAY:"OT_SOCKET_CLOSE_GOING_AWAY",SOCKET_CLOSE_PROTOCOL_ERROR:"OT_SOCKET_CLOSE_PROTOCOL_ERROR",SOCKET_CLOSE_TIMEOUT:"OT_SOCKET_CLOSE_TIMEOUT",SOCKET_CLOSE_TOO_LARGE:"OT_SOCKET_CLOSE_TOO_LARGE",SOCKET_CLOSE_UNEXPECTED_CONDITION:"OT_SOCKET_CLOSE_UNEXPECTED_CONDITION",SOCKET_CLOSE_UNSUPPORTED:"OT_SOCKET_CLOSE_UNSUPPORTED",STREAM_CREATE_FAILED:"OT_STREAM_CREATE_FAILED",STREAM_DESTROYED:"OT_STREAM_DESTROYED",STREAM_LIMIT_EXCEEDED:"OT_STREAM_LIMIT_EXCEEDED",STREAM_NOT_FOUND:"OT_STREAM_NOT_FOUND",UNABLE_TO_SUBSCRIBE:"OT_UNABLE_TO_SUBSCRIBE",TERMS_OF_SERVICE_FAILURE:"OT_TERMS_OF_SERVICE_FAILURE",TIMEOUT:"OT_TIMEOUT",CANCEL:"OT_CANCEL",UNABLE_TO_CAPTURE_MEDIA:"OT_UNABLE_TO_CAPTURE_MEDIA",UNABLE_TO_CAPTURE_SCREEN:"OT_UNABLE_TO_CAPTURE_SCREEN",UNEXPECTED_ERROR_CODE:"OT_UNEXPECTED_ERROR_CODE",UNEXPECTED_HTTP_STATUS:"OT_UNEXPECTED_HTTP_STATUS",UNEXPECTED_SERVER_RESPONSE:"OT_UNEXPECTED_SERVER_RESPONSE",UNKNOWN_HTTP_ERROR:"OT_UNKNOWN_HTTP_ERROR",UNSUPPORTED_BROWSER:"OT_UNSUPPORTED_BROWSER",USER_MEDIA_ACCESS_DENIED:"OT_USER_MEDIA_ACCESS_DENIED",XDOMAIN_OR_PARSING_ERROR:"OT_XDOMAIN_OR_PARSING_ERROR",API_KEY_DISABLED:"OT_API_KEY_DISABLED",UNABLE_TO_ACCESS_MEDIA_ENGINE:"OT_UNABLE_TO_ACCESS_MEDIA_ENGINE",SET_PROXY_URL_TIMING_ERROR:"OT_SET_PROXY_URL_TIMING_ERROR",PROXY_URL_ALREADY_SET_ERROR:"OT_PROXY_URL_ALREADY_SET_ERROR",SET_VIDEO_SOURCE_FAILURE:"OT_SET_VIDEO_SOURCE_FAILURE",INVALID_VIDEO_SOURCE:"OT_INVALID_VIDEO_SOURCE",REQUESTED_DEVICE_PERMISSION_DENIED:"OT_REQUESTED_DEVICE_PERMISSION_DENIED",INVALID_AUDIO_OUTPUT_SOURCE:"OT_INVALID_AUDIO_OUTPUT_SOURCE"}},function(e,t,n){"use strict";const r=n(246),o=n(250),i=n(6),s=n(1);r.logging=s("OT.$"),r.ElementCollection=n(247),r.env=n(2),r.ajax=n(245),r.statable=n(540),r.Analytics=n(244),r.Collection=n(249),r.domExtras=n(541),r.Error=n(251),o(r,"useLogHelpers",{value(e){const t=s("useLogHelpersDeprecatedMixin");return Object.keys(t).forEach((n=>{e[n]=t[n]})),e},name:"OT.useLogHelpers",getWarning:"Please use an external library for your debugging needs"}),r.defaults=n(140),o(r,"eventing",{value:i,name:"OT.$.eventing",getWarning:"Please use an external library to create an event emitter."}),Object.keys(r).forEach((e=>{const t=r[e]._attachToOTHelpers||{};Object.keys(t).forEach((n=>{!Object.hasOwnProperty.call(r,n)||"util"===e&&"bind"===n||console.warn(`More than one module is trying to define ${n} on OTHelpers.`),r[n]=t[n]}))})),e.exports=r},function(e,t,n){"use strict";const r=n(42),o=n(15),i=n(1)("Events"),s=n(7),a=n(397);e.exports=function(e){const t=new r;t.on("newListener",(e=>{t.emit(`${e}:added`)})),t.on("removeListener",(e=>{t.emit(`${e}:removed`)}));const n={on(e,n,r){return"string"==typeof e&&n?e.split(" ").forEach((e=>{t.on(e,a(n,r))})):Object.keys(e).forEach((r=>{t.on(r,a(e[r],n))})),this},off(e,n,r){return"string"==typeof e?this.off(e.split(" "),n,r):Array.isArray(e)?e.forEach((e=>{n&&o(n)?t.removeListener(e,a(n,r)):t.removeAllListeners(e)})):e?Object.keys(e).forEach((r=>{t.removeListener(r,a(e[r],n))})):t.removeAllListeners(),this},once(e,n,r){return"string"==typeof e&&n?e.split(" ").forEach((e=>{t.once(e,a(n,r))})):Object.keys(e).forEach((r=>{t.once(r,a(e[r],n))})),this},dispatchEvent(e){if(!e.type)throw new Error("dispatchEvent: Event has no type");return e.target||(e.target=this),this.trigger(e.type,e),this},trigger(e){try{for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t.emit(e,...r)}catch(e){i.error("An error occurred in an event handler",e)}return this},emit(){return e.trigger(...arguments)},addEventListener:(t,n,r)=>(i.warn("The addEventListener() method is deprecated. Use on() or once() instead."),e.on(t,n,r)),removeEventListener:(t,n,r)=>(i.warn("The removeEventListener() method is deprecated. Use off() instead."),e.off(t,n,r)),listenerCount:e=>t.listenerCount(e)};return s(e,n)}},function(e,t,n){var r=n(83),o=n(40),i=n(192),s=n(25),a=n(69),c=n(30),u=Object.prototype.hasOwnProperty,l=i((function(e,t){if(a(t)||s(t))o(t,c(t),e);else for(var n in t)u.call(t,n)&&r(e,n,t[n])}));e.exports=l},function(e,t,n){"use strict";e.exports={JS_EXCEPTION:2e3,AUTHENTICATION_ERROR:1004,INVALID_SESSION_ID:1005,CONNECT_FAILED:1006,CONNECT_REJECTED:1007,CONNECTION_TIMEOUT:1008,NOT_CONNECTED:1010,INVALID_PARAMETER:1011,P2P_CONNECTION_FAILED:1013,API_RESPONSE_FAILURE:1014,PEER_CONNECTION_NOT_CONNECTED:1015,TERMS_OF_SERVICE_FAILURE:1026,CONNECTION_LIMIT_EXCEEDED:1027,UNABLE_TO_PUBLISH:1500,UNABLE_TO_SUBSCRIBE:1501,UNSUPPORTED_VIDEO_CODEC:1502,UNABLE_TO_FORCE_DISCONNECT:1520,UNABLE_TO_FORCE_UNPUBLISH:1530,UNABLE_TO_FORCE_MUTE:1540,PUBLISHER_ICE_WORKFLOW_FAILED:1553,SUBSCRIBER_ICE_WORKFLOW_FAILED:1554,STREAM_LIMIT_EXCEEDED:1605,UNEXPECTED_SERVER_RESPONSE:2001,REPORT_ISSUE_ERROR:2011,SET_PROXY_URL_TIMING_ERROR:2021,PROXY_URL_ALREADY_SET_ERROR:2022,GET_RTC_STATS_REPORT_NOT_SUPPORTED:2031,ANVIL_BADLY_FORMED_RESPONSE:3001,ANVIL_INVALID_HTTP_STATUS:3002,ANVIL_XDOMAIN_OR_PARSING_ERROR:3003,ANVIL_UNKNOWN_HTTP_ERROR:3004,ANVIL_UNEXPECTED_ERROR_CODE:3005,ANVIL_EMPTY_RESPONSE_BODY:3006,ANVIL_CONNECT_FAILED:3007,UNABLE_TO_ACCESS_MEDIA_ENGINE:5001}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";e.exports=function(e){void 0===e&&(e={});const t=e.Errors||n(4),r=e.OTErrorClass||n(22),o=Object.keys(t).map((e=>t[e]));return function(e,t,n){if(-1===o.indexOf(e))return new Error(`Attempt to use invalid error name (${e}). Original message: ${t.message}`);if(!(t instanceof Error||/^\[object .*Error\]$/.test(Object.prototype.toString.call(t))))return new Error(`Did not pass Error as second argument: ${t}`);const i=new r(void 0,t.message);if(i.name=e,!t.stack)try{throw t}catch(e){}return i.stack=t.stack,n&&(i.code=n),i}}},function(e,t,n){e.exports=n(603)},function(e,t,n){(function(t){function n(e,n,r,o,i,s,a){try{var c=e[s](a),u=c.value}catch(e){return void r(e)}c.done?n(u):t.resolve(u).then(o,i)}e.exports=function(e){return function(){var r=this,o=arguments;return new t((function(t,i){var s=e.apply(r,o);function a(e){n(s,t,i,a,c,"next",e)}function c(e){n(s,t,i,a,c,"throw",e)}a(void 0)}))}}}).call(this,n(0))},function(e,t,n){var r=n(174),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){var r=n(29),o=n(9);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";var r=n(208),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==o.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===o.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:c,isUndefined:s,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var r=n(526),o=n(527),i=o;i.v1=r,i.v4=o,e.exports=i},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){"use strict";const r=n(249),o={publishers:new r("guid"),subscribers:new r("widgetId"),sessions:new r};e.exports=o},function(e,t,n){"use strict";const r=n(1)("GlobalExceptionHandler"),o=n(6),i=n(26),s=n(539),a=n(23)(),c=function(e,t){Error.call(this),this.code=e,this.message=t};(c.prototype=Object.create(Error.prototype)).constructor=c,e.exports=c,o(c),c.getTitleByCode=function(e){return s[+e]},c.handleJsException=e=>{let t=e.error,n=e.errorMsg,o=e.code,s=e.target,u=e.analytics;if(!s)throw new Error("handleJsException requires target");const l=()=>void 0!==o?o:t&&t.code,d=()=>void 0!==n?n:t&&t.message,p=c.getTitleByCode(l());r.error(`OT.exception :: title: ${p} (${l()}) msg: ${d()}`);try{const e={partnerId:s.session?s.session.apiKey:s.apiKey,sessionId:s.session?s.session.sessionId:s.sessionId};u.logError(l(),"tb.exception",p,{details:d()},e);const n=new a.ExceptionEvent(i.EXCEPTION,d(),p,l(),s,s,t);if(t)n.stack=t.stack;else try{throw new Error}catch(e){n.stack=e.stack}c.dispatchEvent(n)}catch(e){r.error(`OT.exception :: Failed to dispatch exception - ${e.toString()}`)}}},function(e,t,n){"use strict";var r=n(3),o=r(n(46)),i=r(n(60));const s=n(126),a=n(26);e.exports=function(e){void 0===e&&(e={});const t=e.logging||n(1)("Events"),r={ExceptionEvent:function(e,t,n,r,o,i,a){return new s(e,!1,{error:a,message:t,title:n,code:r,component:o,target:i})},IssueReportedEvent:function(e,t){return new s(e,!1,{issueId:t})},EnvLoadedEvent:function(e){return new s(e,!1)}};let c=!1;r.ConnectionEvent=function(e){function n(t,n,r){return e.call(this,t,!1,{connection:n,reason:r})||this}return(0,i.default)(n,e),(0,o.default)(n,[{key:"connections",get:function(){return c||(t.warn("OT.ConnectionEvent connections property is deprecated, use connection instead."),c=!0),[this.connection]}}]),n}(s);let u=!1;r.StreamEvent=function(e){function n(t,n,r,o){return e.call(this,t,o,{stream:n,reason:r})||this}return(0,i.default)(n,e),(0,o.default)(n,[{key:"streams",get:function(){return u||(t.warn("OT.StreamEvent streams property is deprecated, use stream instead."),u=!0),[this.stream]}}]),n}(s);let l=!1,d=!1,p=!1;return r.SessionConnectEvent=function(e){function n(t){return e.call(this,t,!1)||this}return(0,i.default)(n,e),(0,o.default)(n,[{key:"connections",get:function(){return l||(t.warn("OT.SessionConnectedEvent no longer includes connections. Listen for connectionCreated events instead."),l=!0),[]}},{key:"streams",get:function(){return d||(t.warn("OT.SessionConnectedEvent no longer includes streams. Listen for streamCreated events instead."),d=!0),[]}},{key:"archives",get:function(){return p||(t.warn("OT.SessionConnectedEvent no longer includes archives. Listen for archiveStarted events instead."),p=!0),[]}}]),n}(s),r.SessionReconnectingEvent=function(){return new s(a.SESSION_RECONNECTING,!1)},r.SessionReconnectedEvent=function(){return new s(a.SESSION_RECONNECTED)},r.SessionDisconnectEvent=function(e,t,n){return new s(e,n,{reason:t})},r.StreamPropertyChangedEvent=function(e,t,n,r,o){return new s(e,!1,{stream:t,changedProperty:n,oldValue:r,newValue:o})},r.VideoDimensionsChangedEvent=function(e,t,n){return new s("videoDimensionsChanged",!1,{target:e,oldValue:t,newValue:n})},r.ArchiveEvent=function(e,t){return new s(e,!1,{id:t.id,name:t.name,status:t.status,archive:t})},r.ArchiveUpdatedEvent=function(e,t,n,r){return new s("updated",!1,{target:e,changedProperty:t,oldValue:n,newValue:r})},r.SignalEvent=function(e,t,n){return new s(e?`signal:${e}`:a.SIGNAL,!1,{data:t,from:n})},r.StreamUpdatedEvent=function(e,t,n,r){return new s("updated",!1,{target:e,changedProperty:t,oldValue:n,newValue:r})},r.DestroyedEvent=function(e,t,n){return new s(e,!1,{target:t,reason:n})},r.ConnectionStateChangedEvent=function(e,t){return new s(e,!1,{target:t})},r.VideoEnabledChangedEvent=function(e,t){return new s(e,!1,{reason:t.reason})},r.VideoDisableWarningEvent=function(e){return new s(e,!1)},r.AudioLevelUpdatedEvent=function(e){return new s(a.AUDIO_LEVEL_UPDATED,!1,{audioLevel:e})},r.MediaStoppedEvent=function(e,t){return new s(a.MEDIA_STOPPED,!0,{target:e,track:t})},r.MuteForcedEvent=function(e){return new s(a.MUTE_FORCED,!1,e)},r.VideoElementCreatedEvent=function(e){return new s(a.VIDEO_ELEMENT_CREATED,!1,{element:e})},r}},function(e,t,n){"use strict";(function(t){var r=n(3),o=r(n(12)),i=r(n(13));e.exports=function(e){void 0===e&&(e={});const r=e.getNativeEnumerateDevices||n(286)(),s=e.getNativeMediaDevices||n(627)(),a=(e.currentAudioOutputDevice||n(105)).getCurrentAudioOutputDeviceId,c=e.env||n(2),u=e.global||(void 0!==typeof window?window:__webpack_require__.g),l={},d={audio:"audioInput",video:"videoInput",audioinput:"audioInput",videoinput:"videoInput",audiooutput:"audioOutput",audioInput:"audioInput",videoInput:"videoInput",audioOutput:"audioOutput"};return l.getNativeMediaDevices=()=>s(),l.hasEnumerateDevicesCapability=()=>"function"==typeof r(),l.hasDeviceChangeCapability=()=>{const e=s();return!(!e||!("ondevicechange"in e))},l.hasSetSinkIdCapability=()=>"setSinkId"in(null==u?void 0:u.HTMLMediaElement.prototype),l.hasAudioOutputApiSupport=()=>l.hasSetSinkIdCapability()&&l.hasDeviceChangeCapability(),l.hasEnumerateDevicesBug=()=>c.isSafari&&13.1===c.version,l.getMediaDevices=()=>l.hasEnumerateDevicesCapability()?r()().then((e=>e.map((e=>({deviceId:e.deviceId||e.id,label:e.label,kind:d[e.kind]}))))):t.reject(new Error("This browser does not support enumerateDevices APIs")),l.getInputMediaDevices=()=>l.getMediaDevices().then((e=>e.filter((e=>/^(audio|video)Input$/.test(e.kind))))),l.getAudioOutputMediaDevices=()=>l.getMediaDevices().then((e=>e.filter((e=>"audioOutput"===e.kind)).map((e=>({deviceId:e.deviceId,label:e.label}))))),l.shouldAskForDevices=()=>l.hasEnumerateDevicesCapability()?l.getInputMediaDevices().then((e=>{if(0===e.length)return{video:!0,audio:!0};const t=e.filter((e=>"audioInput"===e.kind)),n=e.filter((e=>"videoInput"===e.kind));return l.hasEnumerateDevicesBug()&&0===n.length?{audio:!0,video:!0}:{video:n.length>0,audio:t.length>0,videoDevices:n,audioDevices:t}})).catch((()=>({video:!0,audio:!0}))):t.resolve({video:!0,audio:!0}),l.getDefaultAudioOutputDeviceId=e=>Array.isArray(e)&&0!==e.length?(e.find((e=>"default"===e.deviceId))||e[0]).deviceId:"",l.hasDevice=(e,t)=>{let n=e;return Array.isArray(n)||(n=[]),n.some((e=>e.deviceId===t))},l.getActiveAudioOutputDevice=(0,i.default)(o.default.mark((function e(){var t,n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.getAudioOutputMediaDevices();case 3:t=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:if(0!==t.length){e.next=11;break}return e.abrupt("return",{deviceId:null,label:null});case 11:return(n=t.find((e=>e.deviceId===a())))||(r=l.getDefaultAudioOutputDeviceId(t),n=t.find((e=>e.deviceId===r))),e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,null,[[0,6]])}))),l}}).call(this,n(0))},function(e,t,n){var r=n(15),o=n(112);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t,n){"use strict";e.exports={ACTIVE:"active",INACTIVE:"inactive",UNKNOWN:"unknown",PER_SESSION:"perSession",PER_STREAM:"perStream",EXCEPTION:"exception",ISSUE_REPORTED:"issueReported",SESSION_CONNECTED:"sessionConnected",SESSION_RECONNECTING:"sessionReconnecting",SESSION_RECONNECTED:"sessionReconnected",SESSION_DISCONNECTED:"sessionDisconnected",STREAM_CREATED:"streamCreated",STREAM_DESTROYED:"streamDestroyed",CONNECTION_CREATED:"connectionCreated",CONNECTION_DESTROYED:"connectionDestroyed",SIGNAL:"signal",STREAM_PROPERTY_CHANGED:"streamPropertyChanged",MICROPHONE_LEVEL_CHANGED:"microphoneLevelChanged",RESIZE:"resize",SETTINGS_BUTTON_CLICK:"settingsButtonClick",DEVICE_INACTIVE:"deviceInactive",INVALID_DEVICE_NAME:"invalidDeviceName",ACCESS_ALLOWED:"accessAllowed",ACCESS_DENIED:"accessDenied",ACCESS_DIALOG_OPENED:"accessDialogOpened",ACCESS_DIALOG_CLOSED:"accessDialogClosed",ECHO_CANCELLATION_MODE_CHANGED:"echoCancellationModeChanged",MEDIA_STOPPED:"mediaStopped",PUBLISHER_DESTROYED:"destroyed",MUTE_FORCED:"muteForced",SUBSCRIBER_DESTROYED:"destroyed",SUBSCRIBER_CONNECTED:"connected",SUBSCRIBER_DISCONNECTED:"disconnected",DEVICES_DETECTED:"devicesDetected",DEVICES_SELECTED:"devicesSelected",CLOSE_BUTTON_CLICK:"closeButtonClick",MICLEVEL:"microphoneActivityLevel",MICGAINCHANGED:"microphoneGainChanged",ENV_LOADED:"envLoaded",ENV_UNLOADED:"envUnloaded",AUDIO_LEVEL_UPDATED:"audioLevelUpdated",VIDEO_ELEMENT_CREATED:"videoElementCreated"}},function(e,t,n){"use strict";var r=n(3),o=r(n(20)),i=r(n(46)),s=r(n(18));const a=n(241),c=n(244),u=n(141),l=n(34)(),d=n(6),p=n(542);let h=function(){function e(e){let t=void 0===e?{}:e,n=t.staticConfig,r=void 0===n?l.onlyLocal():n,o=t.sessionInfo,i=void 0===o?new u:o,a=t.ajax,c=t.queue;(0,s.default)(this,"getTurnServerName",(e=>{let t,n;return e&&"object"==typeof e?((Array.isArray(e)?e:[e]).forEach((e=>{const r=e.urls||e.url;(Array.isArray(r)?r:[r]).forEach((e=>{const r=e.indexOf(":")+1,o=e.lastIndexOf(":");e.includes("turns")?n=e.substring(r,o):t=e.substring(r,o)}))})),n||t):t})),this.ajax=a,this.queue=c,this.sessionInfo=i,this.staticConfig=r}var t=e.prototype;return t._getCommon=function(){return{clientVersion:this.staticConfig.clientVersion,buildHash:this.staticConfig.buildHash,source:(void 0!==typeof window?window:__webpack_require__.g).location&&(void 0!==typeof window?window:__webpack_require__.g).location.href,logVersion:"2",apiServer:this.staticConfig.apiUrl,clientSystemTime:(new Date).getTime(),sessionId:this.sessionInfo.sessionId,mediaServerName:this.sessionInfo.mediaServerName,relayServer:this.getTurnServerName(this.sessionInfo.iceServers),p2p:this.sessionInfo.p2pEnabled,messagingServer:this.sessionInfo.messagingServer,messagingUrl:this.sessionInfo.messagingURL,version:this.staticConfig.version,partnerId:this.sessionInfo.partnerId}},t.logError=function(t,n,r,i,s){void 0===s&&(s={}),a.get(((a,c)=>{if(a)return;const u=[t,n,r,i,(0,o.default)({guid:c},this.combineWithCommon(s))];e.emit("logError",...u),this._analytics.logError(...u)}))},t.combineWithCommon=function(e){return(0,o.default)({},this._getCommon(),e)},t.logEvent=function(t,n,r){void 0===t&&(t={}),a.get(((i,s)=>{if(i)return;const a=(0,o.default)({guid:s},this.combineWithCommon(t));e.emit("logEvent",a),this._analytics.logEvent(a,!1,n,r)}))},t.logQOS=function(t){void 0===t&&(t={}),a.get(((n,r)=>{if(n)return;const i=(0,o.default)({guid:r,duration:0},this.combineWithCommon(t));p(i),e.emit("logQOS",i),this._analytics.logQOS(i)}))},(0,i.default)(e,[{key:"staticConfig",get:function(){return this._staticConfig},set:function(e){this._staticConfig=e,this._analytics=new c({loggingUrl:this.staticConfig.loggingUrl,ajax:this.ajax,queue:this.queue})}}]),e}();d(h),e.exports=h},function(e,t,n){"use strict";var r=!0,o=!0;function i(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}e.exports={extractVersion:i,wrapPeerConnectionEvent:function(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);var i=function(e){var t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=i,o.apply(this,[e,i])};var i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return i.apply(this,arguments);var r=this._eventMap[n];return delete this._eventMap[n],i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(o=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){o&&console.warn(e+" is deprecated, please use "+t+" instead.")},detectBrowser:function(e){var t=e&&e.navigator,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=i(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)n.browser="chrome",n.version=i(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=i(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=i(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return n}}},function(e,t,n){var r=n(39),o=n(353),i=n(354),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?o(e):i(e)}},function(e,t,n){var r=n(178),o=n(114),i=n(25);e.exports=function(e){return i(e)?r(e):o(e)}},function(e,t,n){"use strict";var r=n(44);e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,n){"use strict";var r=n(55),o=n(199),i=n(125),s=n(200),a=n(201),c=e.exports=function(e,t){var n,o,c,u,l;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],r(e)?(n=a.call(e,"c"),o=a.call(e,"e"),c=a.call(e,"w")):(n=c=!0,o=!1),l={value:t,configurable:n,enumerable:o,writable:c},u?i(s(u),l):l};c.gs=function(e,t,n){var c,u,l,d;return"string"!=typeof e?(l=n,n=t,t=e,e=null):l=arguments[3],r(t)?o(t)?r(n)?o(n)||(l=n,n=void 0):n=void 0:(l=t,t=n=void 0):t=void 0,r(e)?(c=a.call(e,"c"),u=a.call(e,"e")):(c=!0,u=!1),d={get:t,set:n,configurable:c,enumerable:u},l?i(s(l),d):d}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},function(e,t,n){"use strict";(function(t){var r=n(3),o=r(n(20)),i=r(n(46));const s=n(207),a=n(56),c=n(471),u=n(518),l=n(1)("StaticConfig"),d=n(138).prependProxyToUrlIfNeeded,p=a({version:"v2.22.2",buildHash:"eb4bb5146",minimumVersion:{firefox:52,chrome:49},debug:"false",websiteURL:"http://www.tokbox.com",configURL:"https://config.opentok.com",ipWhitelistConfigURL:"",cdnURL:"https://static.opentok.com",loggingURL:"https://hlg.tokbox.com/prod",apiURL:"https://anvil.opentok.com"}),h=c(["apiURL","assetURL","cdnURL","sessionInfoOverrides","loggingURL"]),f={apiUrl:"apiURL",loggingUrl:"loggingURL"},m=u((e=>f[e]));e.exports=function(e){let n=(void 0===e?{}:e).axios,r=void 0===n?s:n;return function(){function e(e){Object.defineProperty(this,"config",{value:Object.freeze(a(e))})}return e.onlyLocal=function(){const t=a((void 0!==typeof window?window:__webpack_require__.g).OTProperties);return new e((0,o.default)({},p,h(t)))},e.get=function(n){let i=n.partnerId,s=n.token,c=n.useIpWhitelistConfigUrl,u=n.proxyUrl;return(()=>{const e=this.onlyLocal();if(!e.configUrl)return t.resolve({});if(!0===c&&!e.ipWhitelistConfigUrl)return t.resolve({});let n=!0===c?e.ipWhitelistConfigUrl:e.configUrl;return n=d(n,u),r.get(`${n}/project/${i}/config.json`,{headers:{"X-TB-TOKEN-AUTH":s}}).then((e=>e.data))})().catch((e=>(l.error("could not reach live config service",e),{}))).then((t=>{const n=a((void 0!==typeof window?window:__webpack_require__.g).OTProperties);return new e((0,o.default)({},p,h(n),m(t)))}))},(0,i.default)(e,[{key:"configUrl",get:function(){return this.config.configURL}},{key:"ipWhitelistConfigUrl",get:function(){return this.config.ipWhitelistConfigURL}},{key:"apiUrl",get:function(){return this.config.apiURL}},{key:"loggingUrl",get:function(){return this.config.loggingURL}},{key:"apiEnabled",get:function(){return void 0===this.config.apiEnabled||this.config.apiEnabled}},{key:"version",get:function(){return this.config.version}},{key:"clientVersion",get:function(){return`js-${(this.version||"unknown").replace("v","")}`}},{key:"buildHash",get:function(){return this.config.buildHash}},{key:"minimumVersion",get:function(){return this.config.minimumVersion}},{key:"websiteUrl",get:function(){return this.config.websiteURL}},{key:"debug",get:function(){return"true"===this.config.debug||!0===this.config.debug}},{key:"sessionInfoOverrides",get:function(){return this.config.sessionInfoOverrides}},{key:"cdnUrl",get:function(){return this.config.cdnURL||`${(void 0!==typeof window?window:__webpack_require__.g).location.protocol}//${(void 0!==typeof window?window:__webpack_require__.g).location.host}`}},{key:"assetUrl",get:function(){return this.config.assetURL||`${this.cdnUrl}/webrtc/${this.version}`}}]),e}()}}).call(this,n(0))},function(e,t,n){var r=n(497),o=n(503),i=n(88),s=n(10),a=n(508);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?s(e)?o(e[0],e[1]):r(e):a(e)}},function(e,t,n){"use strict";const r=n(5);e.exports=function(e,t){let n;const o=t||{};e.setDisplayMode=function(e){const t=e||"auto";n!==t&&(r.removeClass(this.domElement,`OT_mode-${n}`),r.addClass(this.domElement,`OT_mode-${t}`),n=t)},e.getDisplayMode=function(){return n},e.showAfterLoading=function(){r.removeClass(this.domElement,"OT_hide-forced")},e.hideWhileLoading=function(){r.addClass(this.domElement,"OT_hide-forced")},e.destroy=function(){return o.onDestroy&&o.onDestroy(this.domElement),this.domElement&&r.removeElement(this.domElement),e},e.appendTo=function(t){return this.domElement=r.createElement(o.nodeName||"div",o.htmlAttributes,o.htmlContent),o.onCreate&&o.onCreate(this.domElement),e.setDisplayMode(o.mode),"auto"===o.mode&&(r.addClass(e.domElement,"OT_mode-on-hold"),setTimeout((()=>{r.removeClass(e.domElement,"OT_mode-on-hold")}),2e3)),t.appendChild(this.domElement),e}}},function(e,t,n){var r=n(77);e.exports=function(e){return r(e,4)}},function(e,t,n){var r=n(352),o=n(357);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(14).Symbol;e.exports=r},function(e,t,n){var r=n(83),o=n(64);e.exports=function(e,t,n,i){var s=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var u=t[a],l=i?i(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),s?o(n,u,l):r(n,u,l)}return n}},function(e,t,n){var r=n(381),o=n(109),i=n(382),s=n(186),a=n(187),c=n(29),u=n(175),l="[object Map]",d="[object Promise]",p="[object Set]",h="[object WeakMap]",f="[object DataView]",m=u(r),g=u(o),b=u(i),y=u(s),v=u(a),w=c;(r&&w(new r(new ArrayBuffer(1)))!=f||o&&w(new o)!=l||i&&w(i.resolve())!=d||s&&w(new s)!=p||a&&w(new a)!=h)&&(w=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case m:return f;case g:return l;case b:return d;case y:return p;case v:return h}return t}),e.exports=w},function(e,t,n){"use strict";(function(t){var n,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,n){return new t((function(t,r){function o(){void 0!==i&&e.removeListener("error",i),t([].slice.call(arguments))}var i;"error"!==n&&(i=function(t){e.removeListener(n,o),r(t)},e.once("error",i)),e.once(n,o)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var o,i,s,a;if(c(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]),void 0===s)s=i[t]=n,++e._eventsCount;else if("function"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(o=u(e))>0&&s.length>o&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=d.bind(r);return o.listener=n,r.wrapFn=o,o}function h(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):m(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,l=m(c,u);for(n=0;n<u;++n)o(l[n],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,o,i,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}}).call(this,n(0))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],l=!1,d=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&h())}function h(){if(!l){var e=a(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||l||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(400)();e.exports=function(e){return e!==r&&null!==e}},function(e,t,n){"use strict";e.exports=n(414)()?n(91).Symbol:n(417)},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(71);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){var r=n(515),o=n(137)((function(e,t){return null==e?{}:r(e,t)}));e.exports=o},function(e,t,n){"use strict";const r=(void 0!==typeof window?window:n.g).performance||{};e.exports=function(){return r.now?r.timing.navigationStart+r.now():Date.now()}},function(e,t,n){var r=n(575);e.exports=function(e){return r(2,e)}},function(e,t,n){"use strict";const r=n(7),o=n(62),i=n(272),s=n(127),a=n(273),c=n(1)("SDPHelpers"),u={getSections:e=>e.split(/\r\n|\r|\n/).reduce(((e,t)=>{const n=t.match(/^m=(\w+) \d+/);return n&&(e.sections[e.section=n[1]]=[]),e.sections[e.section].push(t),e}),{sections:{header:[]},section:"header"}).sections,getCodecsAndCodecMap(e,t){const n=u.getSections(e)[t];if(!n)throw new Error(`no mediaType ${t}`);return{codecs:n[0].match(/m=\w+ \d+ [A-Z/]+ ([\d ]+)$/)[1].split(" "),codecMap:r(...n.filter((e=>e.match(/^a=rtpmap:\d+/))).map((e=>e.match(/^a=rtpmap:(\d+) ([\w-]+)/).splice(1))).map((e=>({[e[0]]:e[1]}))))}},getCodecs(e,t){const n=u.getCodecsAndCodecMap(e,t);return n.codecs.map((e=>n.codecMap[e]||"Unknown codec"))},mediaDirections:{INACTIVE:"inactive",RECVONLY:"recvonly"}};e.exports=u,u.getMLineIndex=function(e,t){const n=`m=${t}`;return i(e,(e=>-1!==e.indexOf(n)))},u.getMLine=function(e,t){const n=u.getMLineIndex(e,t);return n>-1?e[n]:void 0},u.hasMediaType=(e,t)=>{const n=new RegExp(`^m=${t}`),r=e.split("\r\n");return i(r,(e=>n.test(e)))>=0},u.hasMLinePayloadType=function(e,t,n){const r=u.getMLine(e,t);return u.getMLinePayloadTypes(r,t).indexOf(n)>-1},u.getMLinePayloadTypes=function(e,t){const n=new RegExp(`^m=${t} \\d+(/\\d+)? [a-zA-Z0-9/]+(( [a-zA-Z0-9/]+)+)$`,"i"),r=e.match(n);return!r||r.length<2?[]:r[2].trim().split(" ")},u.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},u.changeMediaDirection=function(e,t){const n=u.splitSections(e);return n.shift()+(e=>{const n=t===u.mediaDirections.RECVONLY?"a=inactive":"a=recvonly",r=new RegExp(n,"g");return e.replace(r,`a=${t}`)})(n.join(""))},u.removeTypesFromMLine=function(e,t){const n=/[0-9 ]*$/.exec(e)[0],r=n.split(" ").filter((e=>""!==e&&-1===t.indexOf(e)));return e.replace(n,` ${r.join(" ")}`)},u.removeMediaEncoding=function(e,t,n){let r,o,i,s,a=e.split("\r\n");const c=u.getMLineIndex(a,t),l=c>-1?a[c]:void 0,d=[];if(-1===c)return a.join("\r\n");if(r=u.getMLinePayloadTypes(l,t),0===r.length)return a.join("\r\n");for(o=c;o<a.length;o++){const e=new RegExp(n,"i");0===a[o].indexOf("a=rtpmap:")&&(s=a[o].split(" "),2===s.length&&e.test(s[1])&&d.push(s[0].substr(9)))}if(!d.length)return a.join("\r\n");for(o=c;o<a.length;o++)if(0===a[o].indexOf("a=fmtp:"))for(s=a[o].split(" "),i=0;i<d.length;i++)2===s.length&&s[1]===`apt=${d[i]}`&&d.push(s[0].substr(7));return a=a.filter((e=>{for(let t=0;t<d.length;t++)if(0===e.indexOf(`a=rtpmap:${d[t]} `)||0===e.indexOf(`a=fmtp:${d[t]} `)||0===e.indexOf(`a=rtcp-fb:${d[t]} `))return!1;return!0})),d.length>0&&c>-1&&(a[c]=u.removeTypesFromMLine(l,d)),a.join("\r\n")},u.disableMediaType=function(e,t){const n=e.split("\r\n"),r=[];let o;n.forEach((e=>{let t=e;/^m=/.test(t)&&(o=void 0),o||(o=[],r.push(o)),o.push(t)}));const i=new RegExp(`^m=${t} \\d+ ([^ ]+) [0-9 ]+$`),s=r.map((e=>{const n=e[0].match(i);return n?[`m=${t} 0 ${n[1]} 0`,"a=inactive",...e.filter((e=>/^c=/.test(e)||/^a=mid:/.test(e)||""===e))]:e}));return[].concat(...s).join("\r\n")},u.removeVideoCodec=function(e,t){return u.removeMediaEncoding(e,"video",t)};const l=function(e,t){let n=t.filterByName("ssrc-group:FID");switch(n=0===n.length?[]:n[0].value.split(" "),n.length){case 0:case 1:var r=t.find((e=>0===e.name.indexOf("rtpmap:")&&e.value.indexOf("rtx/90000")>-1));if(!r)return!1;var o=r.name.split(":")[1];return o.indexOf("/")>-1&&(o=o.split("/")[0]),u.hasMLinePayloadType(e,"video",o);default:return c.debug("SDP Helpers: There are more than two FIDs, RTX is definitely enabled"),!0}};u.getAttributesForMediaType=function(e,t){let n,r,i,s,a,c,d,p,h,f;const m=u.getMLineIndex(e,t),g=new RegExp(`m=(?!${t}).+ `,"i"),b=new RegExp("a=ssrc:\\d+ .*","i"),y=new RegExp("a=ssrc-group:(SIM|FID) (\\d+).*?","i"),v=new RegExp("a=([a-z0-9:/-]+) (.*)","i"),w=[];for(let t=m+1;t<e.length;t++){if(g.test(e[t])){void 0!==n&&(r=t-1);break}a=e[t].match(y),c=e[t].match(b),void 0===n&&(a||c)&&(n=t,a&&(s=/^(FID|SIM)$/.test(a[1])?a[2]:a[1])),d=e[t].match(`a=ssrc:${s} msid:(.+)`),d&&(p=d[1]);const o=b.test(e[t]),u=y.test(e[t]);void 0!==n&&(void 0!==r||o||u?t===e.length-1&&(r=t):r=t-1);const l=e[t].match(/a=mid:(.+)/);l&&(h=l[1],f=t),i=v.exec(e[t]),i&&3===i.length&&w.push({lineIndex:t,name:i[1],value:i[2]})}return w.ssrcStartIndex=n,w.ssrcEndIndex=r,w.msid=p,w.mid=h,w.midIndex=f,w.isUsingRTX=l.bind(null,e,w),w.filterByName=function(e){return this.filter((t=>t.name===e))},w.getRtpNumber=e=>{const t=new RegExp("rtpmap:(.+)");return o(w.map((n=>{const r=n.name.match(t);return r&&n.value.indexOf(e)>=0?r[1]:null})),(e=>null!==e))},w},u.modifyDtx=(e,t)=>{const n=e.split("\r\n");if(!u.getMLine(n,"audio"))return c.debug("No audio m-line, not enabling dtx."),e;const r=u.getAttributesForMediaType(n,"audio"),o=r.getRtpNumber("opus");if(!o)return c.debug("Could not find rtp number for opus, not enabling dtx."),e;const i=r.find((e=>e.name===`fmtp:${o}`));if(!i)return c.debug("Could not find a=fmtp line for opus, not enabling dtx."),e;let s=n[i.lineIndex];const a=/usedtx=\d+([\s;]*)/;return a.test(i.value)?s=s.replace(a,t?"usedtx=1$1":""):t&&(s+="; usedtx=1"),s=s.replace(/[;\s]*$/,""),n[i.lineIndex]=s,n.join("\r\n")};const d=(e,t,n)=>{const r=t.split("\r\n");if(!u.getMLine(r,"audio"))return c.debug("No audio m-line, not enabling stereo."),t;const o=u.getAttributesForMediaType(r,"audio"),i=o.getRtpNumber("opus");if(!i)return c.debug("Could not find rtp number for opus, not enabling stereo."),t;const s=o.find((e=>e.name===`fmtp:${i}`));if(!s)return c.debug("Could not find a=fmtp line for opus, not enabling stereo."),t;let a,l=r[s.lineIndex];switch(e){case"send":a=/sprop-stereo=\d+([\s;]*)/,a.test(s.value)?l=l.replace(a,n?"sprop-stereo=1$1":""):n&&(l+="; sprop-stereo=1");break;case"receive":a=/([^-])stereo=\d+([\s;]*)/,a.test(s.value)?l=l.replace(a,n?"$1stereo=1$2":"$1"):n&&(l+="; stereo=1");break;default:throw new Error(`Invalid type ${e} passed into enableStereo`)}return l=l.replace(/[;\s]*$/,""),r[s.lineIndex]=l,r.join("\r\n")};u.modifySendStereo=d.bind(null,"send"),u.modifyReceiveStereo=d.bind(null,"receive"),u.setAudioBitrate=(e,t)=>{const n=u.getAudioBitrate(e);if(void 0!==n)return c.debug(`Audio bitrate already set to ${n}, not setting audio bitrate`),e;const r=e.split("\r\n");if(!u.getMLine(r,"audio"))return c.debug("No audio m-line, not setting audio bitrate"),e;const o=u.getAttributesForMediaType(r,"audio"),i=o.getRtpNumber("opus");if(!i)return c.debug("Could not find rtp number for opus, not setting audio bitrate."),e;const s=o.find((e=>e.name===`fmtp:${i}`));if(!s)return c.debug("Could not find a=fmtp line for opus, not setting audio bitrate."),e;let a=r[s.lineIndex];return a+=`; maxaveragebitrate=${t}`,a=a.replace(/[;\s]*$/,""),r[s.lineIndex]=a,r.join("\r\n")},u.hasSendStereo=e=>/[\s;]sprop-stereo=1/.test(e),u.hasSendDtx=e=>/[\s;]usedtx=1/.test(e),u.getAudioBitrate=e=>{const t=e.match(/[\s;]maxaveragebitrate=(\d+)/);if(t)return Number(t[1])},u.MAX_SSRCS=10,u.getSSRCGroupType=e=>["SIM","FID"].find((t=>e.filterByName(`ssrc-group:${t}`)[0])),u.getSSRCGroup=e=>{const t=u.getSSRCGroupType(e);return e.filterByName(`ssrc-group:${t}`)[0]},u.getSSRCGroupSSRCs=e=>{const t=u.getSSRCGroup(e);return t?t.value.split(" ").slice(0,u.MAX_SSRCS):[]},u.getAllowedSSRCs=(e,t)=>{const n=t.slice();return e.filterByName("ssrc-group:FID").forEach((e=>{const t=e.value.split(" ");s(n,t).length&&Array.prototype.push.apply(n,t)})),a(n)},u.filterExcessSSRCs=e=>{const t=e.split("\r\n"),n=u.getAttributesForMediaType(t,"video"),r=u.getSSRCGroupType(n),o=n.ssrcStartIndex;if(void 0===o)return e;let i;const s=e=>{let t=null;return e.match(/^a=ssrc:(\d+)/)&&(t=RegExp.$1),t};if(r){const e=u.getSSRCGroupSSRCs(n),o=[`a=ssrc-group:${r}`,...e].join(" ");t[n.find((e=>e.name.startsWith("ssrc-group:"))).lineIndex]=o,i=u.getAllowedSSRCs(n,e)}else i=[],n.ssrcStartIndex&&i.push(s(t[n.ssrcStartIndex]));return t.filter(((e,t)=>{if(t<o||t>n.ssrcEndIndex)return!0;if(t===o){if(!r){const t=s(e);return t?i.includes(t):!/^a=ssrc:(\d+)/.test(e)}return!0}const a=s(e);if(a)return i.includes(a);if(e.match(/^a=ssrc-group:FID (\d+)/)){const e=RegExp.$1;return i.includes(e)}return!e.match(/^a=ssrc-group:SIM /)})).join("\r\n")},u.enableSimulcast=function(e,t){let n,r;const o=e.split("\r\n");if(!u.getMLine(o,"video"))return c.debug("No video m-line, not enabling simulcast."),e;const i=u.getAttributesForMediaType(o,"video");if(i.filterByName("ssrc-group:SIM").length>0)return c.debug("Simulcast is already enabled in this SDP, not attempting to enable again."),u.filterExcessSSRCs(e);if(!i.msid)return c.debug("No local stream attached, not enabling simulcast."),e;const s=i.isUsingRTX(),a=[],l=[];for(r=0;r<t;++r)a.push(1e4+r),s&&l.push(2e4+r);if(n=[`a=ssrc-group:SIM ${a.join(" ")}`],s)for(r=0;r<t;++r)n.push(`a=ssrc-group:FID ${a[r]} ${l[r]}`);for(r=0;r<t;++r)n.push(`a=ssrc:${a[r]} cname:localCname`,`a=ssrc:${a[r]} msid:${i.msid}`);if(s)for(r=0;r<t;++r)n.push(`a=ssrc:${l[r]} cname:localCname`,`a=ssrc:${l[r]} msid:${i.msid}`);return n.unshift(i.ssrcStartIndex,i.ssrcEndIndex-i.ssrcStartIndex+1),o.splice(...n),o.join("\r\n")},u.reprioritizeVideoCodec=function(e,t,n){const r=e.split("\r\n"),o=u.getMLineIndex(r,"video");if(-1===o)return e;const i=u.getMLinePayloadTypes(r[o],"video"),s=new RegExp(`^a=rtpmap:(\\d+).* ${t}`,"i"),a=r.map((e=>e.match(s))).filter((e=>null!==e));if(0===a.length)return e;const l=a.map((e=>e[1]));let d=i.filter((e=>-1===l.indexOf(e)));"top"===n?d.unshift(...l):"bottom"===n?d.push(...l):(c.error(`Unexpected location param: ${n}; not changing ${t} priority`),d=i);const p=r[o].replace(i.join(" "),d.join(" "));return r[o]=p,r.join("\r\n")}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(178),o=n(376),i=n(25);e.exports=function(e){return i(e)?r(e,!0):o(e)}},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){"use strict";e.exports=function(e){return null!=e}},function(e,t,n){var r=n(77);e.exports=function(e){return r(e,5)}},function(e,t,n){var r=n(98);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},function(e,t,n){var r=n(10),o=n(136),i=n(236),s=n(59);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:i(s(e))}},function(e,t,n){var r=n(505);e.exports=function(e){return null==e?"":r(e)}},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,n){"use strict";const r=n(50),o=n(34)();t.check=function(e){void 0===e&&(e={});const t=e.env||n(2),r=e.hasGetUserMediaCapability||n(584),i=e.hasPeerConnectionCapability||n(585),s=e.logging||n(1)("hasOpenTokSupport"),a=((e.staticConfig||o.onlyLocal()).minimumVersion||{})[t.name.toLowerCase()];return a&&a>t.version?(s.debug("Support for",t.name,"is disabled because we require",a,"but this is",t.version),!1):"Node"===t.name||r()&&i()},t.once=r((()=>t.check()))},function(e,t,n){var r=n(599)(n(272));e.exports=r},function(e,t,n){"use strict";e.exports=function(e){const t=[];return{on(n,r){for(var o=arguments.length,i=new Array(o>2?o-2:0),s=2;s<o;s++)i[s-2]=arguments[s];if(t.push({eventName:n,handler:r,args:i}),e.on)e.on(n,r);else{if(!e.addEventListener)throw new Error("Object does not support events",e);e.addEventListener(n,r,...i)}},off(t,n){if(e.off)e.off(t,n);else{if(!e.removeEventListener)throw new Error("Object does not support events",e);for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];e.removeEventListener(t,n,...o)}},once(n,r){for(var o=arguments.length,i=new Array(o>2?o-2:0),s=2;s<o;s++)i[s-2]=arguments[s];t.push({eventName:n,handler:r,args:i}),e.once(n,r)},removeAll(){t.forEach((e=>{let t=e.eventName,n=e.handler,r=e.args;this.off(t,n,...r)})),t.splice(0,t.length)}}}},function(e,t,n){var r=n(176);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(371),o=n(16),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},function(e,t,n){(function(e){var r=n(14),o=n(372),i=t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===i?r.Buffer:void 0,c=(a?a.isBuffer:void 0)||o;e.exports=c}).call(this,n(84)(e))},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){var r=n(29),o=n(16);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},function(e,t,n){"use strict";if("Node"===n(5).env.name)e.exports={value:""};else{var r,o;const t=null==(r=Array.prototype.slice.call(document.getElementsByTagName("script")))||null==(o=r.pop())?void 0:o.getAttribute("src"),n=(t&&t.match(/[?&]apikey=([^&]+)/i)||[])[1];e.exports={value:n||""}}},function(e,t,n){"use strict";const r=n(2);e.exports=()=>!((r.isChrome||r.isElectron)&&r.version>=90||r.isOpera&&r.version>=76)&&(r.isChrome&&r.version>71||r.isChromiumEdge&&r.version<90||r.isOpera&&r.version>58)},function(e,t,n){"use strict";e.exports=function(e,t,r){void 0===r&&(r=1/0);let o=null,i=!1,s=1;const a=1e3/t,c=()=>{!i||s>r||(s+=1,e(),o=setTimeout(c,a))};this.start=()=>{i||(i=!0,setTimeout(c,a))},this.stop=()=>{(void 0!==typeof window?window:n.g).clearTimeout(o),i=!1}}},function(e,t,n){"use strict";const r=n(48),o=n(642),i=n(9),s=n(158),a={};function c(e){return Number(e.framerateMean||e.googFrameRateSent||e.googFrameRateReceived||e.googFrameRateInput||e.googFrameRateOutput||0)}function u(e){return Number(e.framesEncoded||e.framesDecoded)}function l(e,t){if(c(e))return c(e);if(!u(e))return;let n=0;const r=a[e.id]?a[e.id].frames:0,o=a[e.id]?a[e.id].timestamp:t;return n=s({currentStatFrames:u(e),currentTimestamp:e.timestamp,prevStatFrames:r,prevTimestamp:o}),a[e.id]={frames:u(e),timestamp:e.timestamp},n}function d(e,t){if(!t)return{};const n=t.filter((t=>t.id===e.mediaTrackId));return n.length?n[0]:{}}function p(e,t){return"packetsLost"in t?e+t.packetsLost:e}const h={isVideoStat(e,t){const n=d(e,t);return"video"===e.kind&&["outbound-rtp","inbound-rtp"].includes(e.type)||"video"===e.mediaType||"googFrameWidthReceived"in e||"googFrameWidthInput"in e||"inbound-rtp"===e.type&&-1!==e.id.indexOf("Video")||"inboundrtp"===e.type&&0!==n.frameWidth},isAudioStat(e,t){const n=d(e,t);return"audio"===e.kind&&["outbound-rtp","inbound-rtp"].includes(e.type)||"audio"===e.mediaType||"audioInputLevel"in e||"audioOutputLevel"in e||"inbound-rtp"===e.type&&-1!==e.id.indexOf("Audio")||"inboundrtp"===e.type&&0===n.frameWidth},isInboundStat:e=>"bytesReceived"in e||"packetsReceived"in e,isOutboundStat:e=>"bytesSent"in e||"packetsSent"in e,isVideoTrackStat:e=>"track"===e.type&&(e.frameHeight>0||e.frameWidth>0||e.framesCorrupted>0||e.framesDecoded>0||e.framesPerSecond>0||e.framesSent>0||e.framesReceived>0),isVideoRemoteInboundRtpStat:e=>"remote-inbound-rtp"===e.type&&"video"===e.kind,isAudioRemoteInboundRtpStat:e=>"remote-inbound-rtp"===e.type&&"audio"===e.kind,isVideoInboundRtpStat:e=>"inbound-rtp"===e.type&&"video"===e.kind,parseStatCategory(e){const t={packetsLost:0,packetsReceived:0,bytesReceived:0};return"packetsReceived"in e&&(t.packetsReceived=parseInt(e.packetsReceived,10)),"packetsLost"in e&&(t.packetsLost=parseInt(e.packetsLost,10)),"bytesReceived"in e&&(t.bytesReceived=parseInt(e.bytesReceived,10)),this.isVideoStat(e)&&("framerateMean"in e?t.frameRate=Number(e.framerateMean):"googFrameRateOutput"in e?t.frameRate=Number(e.googFrameRateOutput):"googFrameRateInput"in e&&(t.frameRate=Number(e.googFrameRateInput))),t},getVideoPacketsLost(e){return e.filter((t=>this.isVideoRemoteInboundRtpStat(t,e))).reduce(p,0)},getAudioPacketsLost(e){return e.filter((t=>this.isAudioRemoteInboundRtpStat(t,e))).reduce(p,0)},normalizeTimestamp:(e,t)=>(void 0===t&&(t=Date.now()),i(e)&&"getTime"in e?e.getTime():Math.abs(e/(1e3*t)-1)<.05?e/1e3:e),normalizeStats(e,t,n){void 0===t&&(t=!0);const i=e.filter((t=>h.isVideoStat(t,e))).filter((e=>h.isInboundStat(e)===t)),s=e.filter((t=>this.isAudioStat(t,e))).filter((e=>this.isInboundStat(e)===t))[0],a=i[0];if(!s&&!a)throw new Error("could not find stats for either audio or video");const c=h.normalizeTimestamp(a?a.timestamp:s.timestamp),u={timestamp:c};a&&!t&&void 0===a.packetsLost&&(a.packetsLost=this.getVideoPacketsLost(e)),s&&!t&&void 0===s.packetsLost&&(s.packetsLost=this.getAudioPacketsLost(e));const d=["packetsSent","packetsLost","bytesSent"],p=t?e=>r(e,["packetsReceived","packetsLost","bytesReceived"]):e=>r(e,d);if(i&&i.length>0){const e=(e=>{const t=d.concat(["framerateMean","googFrameRateSent","googFrameRateReceived","googFrameRateInput","googFrameRateOutput","framesEncoded","framesDecoded"]),n={timestamp:c,id:a.id};return t.forEach((t=>{n[t]=e.map((e=>Number(e[t]||0))).reduce(((e,t)=>e+t),0)})),n})(i);u.video=Object.assign({frameRate:l(e,n)},o(p(e),Number))}return s&&(u.audio=o(p(s),Number)),u}};e.exports=h},function(e,t,n){"use strict";t.__esModule=!0,t.codes=t.messages=void 0,t.messages={1001:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.",1002:"The endpoint is terminating the connection due to a protocol error. (CLOSE_PROTOCOL_ERROR)",1003:"The connection is being terminated because the endpoint has indicated that reconnections are not available. (CLOSE_UNSUPPORTED)",1005:"Indicates that no status code was provided even though one was expected. (CLOSE_NO_STATUS)",1006:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected. (CLOSE_ABNORMAL)",1007:"Indicates that an endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [RFC3629] data within a text message)",1008:"Indicates that an endpoint is terminating the connection because it has received a message that violates its policy.  This is a generic status code that can be returned when there is no other more suitable status code (e.g., 1003 or 1009) or if there is a need to hide specific details about the policy",1009:"Indicates that an endpoint is terminating the connection because it has received a message that is too big for it to process (CLOSE_TOO_LARGE)",1011:"Indicates that a server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request",4001:"Connectivity loss was detected as it was too long since the socket received the last PONG message",4010:"Timed out while waiting for the Rumor socket to connect.",4020:"Error code unavailable.",4030:"Exception was thrown during Rumor connection, possibly because of a blocked port."},t.codes={CLOSE_NORMAL:1e3,CLOSE_GOING_AWAY:1001,CLOSE_PROTOCOL_ERROR:1002,CLOSE_UNSUPPORTED:1003,CLOSE_NO_STATUS:1005,CLOSE_ABNORMAL:1006,CLOSE_INCONSISTENT_DATA:1007,CLOSE_POLICY_VIOLATION:1008,CLOSE_TOO_LARGE:1009,CLOSE_UNEXPECTED_CONDITION:1011,CLOSE_CONNECTIVITY_LOSS:4001,CLOSE_TIMEOUT:4010,CLOSE_FALLBACK_CODE:4020,CLOSE_CONNECT_EXCEPTION:4030,ALREADY_CONNECTED_CONNECTING:null}},function(e,t,n){var r=n(78),o=n(111),i=n(83),s=n(177),a=n(375),c=n(180),u=n(54),l=n(378),d=n(380),p=n(183),h=n(185),f=n(41),m=n(383),g=n(384),b=n(190),y=n(10),v=n(66),w=n(388),x=n(9),S=n(390),E=n(30),T=n(53),C="[object Arguments]",_="[object Function]",I="[object Object]",k={};k[C]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k[I]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k[_]=k["[object WeakMap]"]=!1,e.exports=function e(t,n,R,N,O,A){var D,L=1&n,P=2&n,V=4&n;if(R&&(D=O?R(t,N,O,A):R(t)),void 0!==D)return D;if(!x(t))return t;var M=y(t);if(M){if(D=m(t),!L)return u(t,D)}else{var F=f(t),W=F==_||"[object GeneratorFunction]"==F;if(v(t))return c(t,L);if(F==I||F==C||W&&!O){if(D=P||W?{}:b(t),!L)return P?d(t,a(D,t)):l(t,s(D,t))}else{if(!k[F])return O?t:{};D=g(t,F,L)}}A||(A=new r);var Z=A.get(t);if(Z)return Z;A.set(t,D),S(t)?t.forEach((function(r){D.add(e(r,n,R,r,t,A))})):w(t)&&t.forEach((function(r,o){D.set(o,e(r,n,R,o,t,A))}));var B=M?void 0:(V?P?h:p:P?T:E)(t);return o(B||t,(function(r,o){B&&(r=t[o=r]),i(D,o,e(r,n,R,o,t,A))})),D}},function(e,t,n){var r=n(79),o=n(347),i=n(348),s=n(349),a=n(350),c=n(351);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=a,u.prototype.set=c,e.exports=u},function(e,t,n){var r=n(342),o=n(343),i=n(344),s=n(345),a=n(346);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,e.exports=c},function(e,t,n){var r=n(52);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(38)(Object,"create");e.exports=r},function(e,t,n){var r=n(366);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(64),o=n(52),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var s=e[t];i.call(e,t)&&o(s,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(373),o=n(68),i=n(113),s=i&&i.isTypedArray,a=s?o(s):r;e.exports=a},function(e,t,n){var r=n(9),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},function(e,t,n){var r=n(88),o=n(193),i=n(121);e.exports=function(e,t){return i(o(e,t,r),e+"")}},function(e,t){e.exports=function(e){return e}},function(e,t,n){"use strict";var r=Object.prototype.toString,o=r.call(function(){return arguments}());e.exports=function(e){return r.call(e)===o}},function(e,t,n){"use strict";var r=Object.prototype.toString,o=r.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||r.call(e)===o)||!1}},function(e,t,n){"use strict";e.exports=n(415)()?globalThis:n(416)},function(e,t,n){var r=n(110),o=n(448),i=n(449);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=o,s.prototype.has=i,e.exports=s},function(e,t,n){var r=n(450);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(86),o=n(9);e.exports=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=r(e.prototype),i=e.apply(n,t);return o(i)?i:n}}},function(e,t,n){var r=n(490);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t,n){var r=n(58),o=n(47);e.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},function(e,t,n){var r=n(239),o=n(30);e.exports=function(e,t){return e&&r(e,t,o)}},function(e,t,n){"use strict";t.adaptIceServers=function(e){return e.map((e=>({url:e.url,urls:e.urls||[e.url],username:e.username,credential:e.credential})))},t.parseIceServers=function(e){let n;try{n=JSON.parse(e.data).content.iceServers}catch(e){return[]}return t.adaptIceServers(n)}},function(e,t,n){"use strict";(function(t){const r=n(154),o=n(49),i=n(7),s=n(56),a=n(127),c=n(147),u=n(271),l=n(19),d=n(6),p=n(251),h=n(155),f=n(51),m=n(73);e.exports=function(e){void 0===e&&(e={});const g=e.hasValidPeerConnection||n(602),b=e.applySdpTransform||n(156),y=e.createPeerConnection||n(605),v=e.env||n(2),w=e.sdpTransformDefaults||n(607),x=e.getStatsAdapter||n(274),S=e.getRtcStatsReportAdapter||n(277),E=e.getSynchronizationSources||n(611),T=e.IceCandidateProcessor||n(612),C=e.logging||n(1),_=e.offerProcessor||n(614),I=e.PeerConnectionChannels||n(616),k=e.subscribeProcessor||n(618),R=e.changeMediaDirection||n(619),N=R.changeMediaDirectionToInactive,O=R.changeMediaDirectionToRecvOnly,A=e.Qos||n(278).default,D=e.global||(void 0!==typeof window?window:__webpack_require__.g),L=e.debounce||n(623),P=e.needsToSwapH264Profiles||n(625).once,V=e.NativeRTCIceCandidate||D.RTCIceCandidate,M=e.NativeRTCSessionDescription||D.RTCSessionDescription,F=e.Errors||n(4),W=e.OTErrorClass||n(22),Z=e.ExceptionCodes||n(8),B=()=>{};return function(e){void 0===e&&(e={});let n=!1;const R=e,G=R.iceConfig,U=void 0===G?{servers:[]}:G,$=R.isPublisher,X=R.logAnalyticsEvent,j=void 0===X?B:X,z=R.offerOverrides,H=R.answerOverrides,Y=R.sdpTransformOptions,K=R.sendMessage,J=R.p2p,q=R.codecFlags,Q=R.sourceStreamId;let ee,te=!1,ne=!1,re=!1;const oe=P();let ie=0,se=!1;const ae=h();function ce(e,t){if(!n&&["candidate","offer","answer","pranswer"].indexOf(e)>-1){const r="candidate"===e?t.candidate:t.sdp;n=-1!==r.indexOf("typ relay")}K(e,t)}const ue=o();j("createPeerConnection","Attempt");const le={};le.id=l();const de=C(`PeerConnection:${le.id}`);de.debug("construct",{id:le.id,options:e});const pe=c({},w,Y),he=e=>"relay"===U.transportPolicy&&null!=e&&-1===e.candidate.indexOf("typ relay"),fe=u(e,["isPublisher","logAnalyticsEvent","offerOverrides","answerOverrides","sendMessage","sdpTransformOptions"]);let me,ge,be,ye,ve,we=[];const xe=(()=>{let e=fe.overrideSimulcastEnabled||!1;return{get:()=>e,set(t){const n=Boolean(t)&&fe.capableSimulcastStreams>1;n!==e&&void 0===fe.overrideSimulcastEnabled&&(e=n,le.generateOffer())}}})(),Se=(()=>{let e=!1;return{get:()=>e,set(t){const n=Boolean(t);n!==e&&(e=n,e&&!le.iceConnectionStateIsConnected()?le.generateOffer():de.debug("iceRestart is going to wait until we disconnect and then restart ice"))}}})(),Ee={clean(){delete this.promise,delete this.resolve,delete this.reject}};Ee.promise=new t(((e,t)=>{Ee.resolve=e,Ee.reject=t}));let Te=new T,Ce="new";Object.defineProperty(le,"signalingState",{get:()=>me.signalingState,set:e=>(me.signalingState=e,e)}),d(le),le.once("iceConnected",(()=>{const e={pcc:parseInt(o()-ue,10),hasRelayCandidates:n,proxyInfo:""};me&&me.proxyInfo&&(e.proxyInfo=me.proxyInfo),j("createPeerConnection","Success",e)})),Ee.resolve();const _e=e=>{if(de.debug("internalCreatePeerConnection: called"),me)return de.debug("internalCreatePeerConnection: resolving synchronously"),void e.call(null,null,me);if(we.push(e),we.length>1)return;const t={optional:[{DtlsSrtpKeyAgreement:!0}]};if(de.debug(`Creating peer connection config "${JSON.stringify(fe)}".`),0===U.servers.length&&(de.error("No ice servers present"),j("Error","noIceServers")),"relay"===U.transportPolicy){const e=e=>e&&0===e.indexOf("turn");U.servers=U.servers.map((t=>{const n=s(t);return Array.isArray(n.urls)||(n.urls=[n.urls]),n.urls=n.urls.filter(e),0===n.urls.length?void 0:n})).filter((e=>void 0!==e))}fe.iceTransportPolicy=U.transportPolicy,fe.iceServers=U.servers,g(D.RTCPeerConnection).then((e=>{if(!e)throw de.error("createPeerConnection: Invalid RTCPeerConnection object"),new Error("Failed to create valid RTCPeerConnection object");return y({window:D,config:fe,constraints:t})})).then((e=>Ie(null,e)),(e=>Ie(e)))},Ie=(e,t)=>{if(e)return Ve({reason:`Failed to create PeerConnection, exception: ${e}`,prefix:"NewPeerConnection"}),void(we=[]);de.debug("OT attachEventsToPeerConnection"),me=t,Te&&Te.setPeerConnection(t),ge=new I(me),fe.channels&&ge.addMany(fe.channels);const n=(e=>{let t=e.sendMessage,n=e.logging;const r={};return e=>{e.candidate?(r[e.candidate.sdpMid]=e.candidate.sdpMLineIndex,t("candidate",{candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid||"",sdpMLineIndex:e.candidate.sdpMLineIndex||0})):n.debug("IceCandidateForwarder: No more ICE candidates.")}})({sendMessage:ce,logging:de}),r=e=>{Ee.resolve(),he(e.candidate)?de.debug("Ignore candidate",e.candidate.candidate):n(e)};let o=me.iceConnectionState;const i=e=>{me?(de.debug("iceconnectionstatechange",me.iceConnectionState),"connected"===me.iceConnectionState?("disconnected"===o&&le.clearFailedTimeout(),le.emit("iceConnected"),Se.set(!1)):"completed"===me.iceConnectionState&&v.isLegacyEdge&&setTimeout((()=>We.startCollecting(me)),1e3)):de.debug("iceconnectionstatechange on peerConnection that no longer exists",le);const t=e.target.iceConnectionState;le.trigger("iceConnectionStateChange",t),j("attachEventsToPeerConnection","iceconnectionstatechange",t),"disconnected"===t&&(Se.get()?(de.debug("Restarting ice!"),le.generateOffer()):m()||(ve=setTimeout((()=>{const e="failed";j("attachEventsToPeerConnection","iceconnectionstatechange",e),o=e,le.trigger("iceConnectionStateChange",e)}),1e4))),"disconnected"!==o&&"failed"===t&&Ve({reason:"The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.",prefix:"ICEWorkflow"}),o=t},s=()=>{j("peerConnection:negotiationNeeded","Event"),$&&le.generateOffer()};me.onaddstream=B,me.addEventListener("icecandidate",r),me.addEventListener("addstream",Ae),me.addEventListener("removestream",De),me.addEventListener("signalingstatechange",Ne),me.addEventListener("negotiationneeded",s),me.addEventListener("iceconnectionstatechange",i),ae.add((()=>{me&&(me.onaddstream=null,me.removeEventListener("icecandidate",r),me.removeEventListener("addstream",Ae),me.removeEventListener("removestream",De),me.removeEventListener("signalingstatechange",Ne),me.removeEventListener("negotiationneeded",s),me.removeEventListener("iceconnectionstatechange",i))})),ke(null)},ke=()=>{for(;we.length;)we.shift().call(null)},Re=()=>{Te&&(Te.destroy(),Te=null),we=[],We.stopCollecting(),ae.releaseAll(),Ee.clean(),null!==me&&(me.destroy&&me.destroy(),me=null,le.trigger("close")),le.off()},Ne=e=>{const t=e.target.signalingState;le.emit("signalingStateChange",t),"stable"===t&&le.emit("signalingStateStable"),t&&t!==Ce&&(Ce=t,de.debug(`stateChange: ${Ce}`),"closed"===Ce)&&Re()},Oe=()=>{let e;if(me.getRemoteStreams)e=me.getRemoteStreams();else{if(!me.remoteStreams)throw new Error("Invalid Peer Connection object implements no method for retrieving remote streams");e=me.remoteStreams}return Array.prototype.slice.call(e)},Ae=e=>{j("createPeerConnection","StreamAdded"),le.trigger("streamAdded",e.stream)},De=e=>{j("peerConnection:streamRemoved","Event"),le.trigger("streamRemoved",e.stream)},Le=(e,t,n)=>{re=!1,Ve({reason:`PeerConnection.offerProcessor ${e}: ${t}`,prefix:n})},Pe=e=>{if(re)return void(ee=e);re=!0,j("peerConnection:processOffer","Event");const t=new M({type:"offer",sdp:e.content.sdp}),n=e=>{re=!1,Te&&Te.process(),ce("answer",e),v.isLegacyEdge||We.startCollecting(me,$),ee&&(Pe(ee),ee=null)},r=e=>le.trigger("remoteVideoSupported",e);_e((()=>{_(me,D.RTCPeerConnection,D.RTCSessionDescription,M,pe,t,q,J,n,Le,r,oe)}))};le.generateOffer=L((()=>{te?ne=!0:(()=>{var e,t;if("closed"===(null==(e=me)||null==(t=e.signalingState)?void 0:t.toLowerCase()))return;te=!0,j("peerConnection:processSubscribe","Event"),de.debug("processSubscribe: Sending offer to subscriber.");let n=xe.get()?fe.capableSimulcastStreams:1;"P2P"===Q&&!J&&(n=1),_e((()=>{k({peerConnection:me,NativeRTCSessionDescription:M,sdpTransforms:pe,numSimulcastStreams:n,offerOverrides:z,offerConstraints:{iceRestart:Se.get()},replaceBaselineProfile:oe}).then((e=>{de.debug("processSubscribe: got offer, waiting for _readyToSendOffer"),be=e,Ee.promise.then((()=>{de.debug("processSubscribe: sending offer"),ce("offer",be)}))}),(e=>{Ve({reason:`subscribeProcessor ${e.message}: ${e.reason}`,prefix:e.prefix})})),Se.set(!1)}))})()}),100);const Ve=e=>{let t=e.reason,n=e.prefix;de.error(t,"in state",me?{connectionState:me.connectionState,iceConnectionState:me.iceConnectionState,iceGatheringState:me.iceGatheringState,signalingState:me.signalingState}:"(none)"),le.trigger("error",{reason:t,prefix:n})};function Me(e){this.track=e}le.addTrack=(e,n)=>{const o=new t(((e,t)=>{_e((n=>{if(n)return t(n);e()}))})).then((()=>{if(me.addTrack)return me.addTrack(e,n);const t=me.getLocalStreams()[0];if(void 0===t)throw new Error("PeerConnection has no existing streams, cannot addTrack");t.addTrack(e),le.generateOffer()})).then((()=>new t((e=>{le.once("signalingStateStable",(()=>{e()}))}))));return r(o,15e3,"Renegotiation timed out")},le.removeTrack=e=>{const n=t.resolve().then((()=>e instanceof Me?(me.getLocalStreams()[0].removeTrack(e.track),void le.generateOffer()):me.removeTrack(e))).then((()=>new t((e=>{le.once("signalingStateStable",(()=>{e()}))}))));return r(n,15e3,"Renegotiation timed out")},le.addLocalStream=e=>new t(((t,n)=>{_e((r=>{if(r)n(r);else{try{me.addStream(e)}catch(e){return void n(e)}t()}}))})),le.getLocalStreams=()=>me.getLocalStreams(),le.getSenders=()=>me.getSenders?me.getSenders():me.getLocalStreams()[0].getTracks().map((e=>new Me(e))),le.disconnect=()=>{var e;Te&&(Te.destroy(),Te=null),(null==(e=me)?void 0:e.signalingState)&&"closed"!==me.signalingState.toLowerCase()&&(me.close(),setTimeout(Re))},le.iceRestart=()=>Se.set(!0),le.clearFailedTimeout=()=>clearTimeout(ve),le.changeMediaDirectionToRecvOnly=()=>O(me),le.changeMediaDirectionToInactive=()=>N(me),le.processMessage=(e,t)=>{switch(de.debug(`processMessage: Received ${e} from ${t.fromAddress}`,t),de.debug(t),e){case"generateoffer":t.content&&void 0!==t.content.simulcastEnabled&&xe.set(t.content.simulcastEnabled),le.generateOffer(),r();break;case"offer":Pe(t),r();break;case"answer":case"pranswer":(e=>{j("peerConnection:processAnswer","Event");const t=e=>{Ve({reason:`Error while setting RemoteDescription ${e}`,prefix:"SetRemoteDescription"})};e.content.sdp?(ye=new M({type:"answer",sdp:b(pe,"remote","answer",i({replaceBaselineProfile:oe},H),e.content.sdp).local}),me.setRemoteDescription(ye).then((()=>{de.debug("processAnswer: setRemoteDescription Success"),Te&&Te.process()})).catch(t),te=!1,ne&&(ne=!1,le.generateOffer()),v.isLegacyEdge||We.startCollecting(me,$)):t("Weird answer message, no SDP.")})(t);break;case"candidate":var n=new V(t.content);if(he(n))return de.debug("Ignore candidate",n.candidate),le;Te&&Te.addIceCandidate(n).catch((e=>{de.warn(`Error while adding ICE candidate: ${JSON.stringify(n)}: ${e.toString()}`)}));break;default:de.debug(`processMessage: Received an unexpected message of type ${e} from ${t.fromAddress}: ${JSON.stringify(t)}`)}function r(){ie+=1,We.handleOfferMessageReceived(),ie>1&&(j("Renegotiation","Attempt"),se=!0)}return le},le.remoteStreams=()=>me?Oe():[],le.remoteTracks=()=>me?me.getReceivers?Array.prototype.slice.apply(me.getReceivers()).map((e=>e.track)):Array.prototype.concat.apply([],Oe().map((e=>e.getTracks()))):[],le.remoteDescription=()=>me.remoteDescription,le.getStats=e=>{if(me)x(me,e);else{const t=Z.PEER_CONNECTION_NOT_CONNECTED;e(new p(W.getTitleByCode(t),F.PEER_CONNECTION_NOT_CONNECTED,{code:t}))}},le.getRtcStatsReport=e=>{if(me)S(me,e);else{const t=Z.PEER_CONNECTION_NOT_CONNECTED;e(new p(W.getTitleByCode(t),F.PEER_CONNECTION_NOT_CONNECTED,{code:t}))}},le.getSynchronizationSources=e=>{if(!$){if(!me){const t=Z.PEER_CONNECTION_NOT_CONNECTED;return void e(new p(W.getTitleByCode(t),F.PEER_CONNECTION_NOT_CONNECTED,{code:t}))}E(me,e)}};const Fe=function e(t,n,r,o){let i;const s=ge.get(n,r);if(!s){if(t>0)return void setTimeout(e.bind(null,t-1,n,r,o),200);i=new p(`A channel with that label and options could not be found. Label:${n}. Options: ${JSON.stringify(r)}`)}o(i,s)};le.getDataChannel=(e,t,n)=>{me?Fe(100,e,t,n):n(new p("Cannot create a DataChannel before there is a connection."))},le.getSourceStreamId=()=>Q,le.iceConnectionStateIsConnected=()=>me&&["connected","completed"].indexOf(me.iceConnectionState)>-1,le.findAndReplaceTrack=(e,n)=>t.resolve().then((()=>{const r=me.getSenders().filter((t=>t.track===e))[0];if(!r)return t.resolve();if("function"!=typeof r.replaceTrack)throw new Error("Sender does not support replaceTrack");return r.replaceTrack(n)})),le.hasRelayCandidates=()=>n,le.getNegotiatedCodecs=()=>{if(!me.localDescription||!me.remoteDescription)return null;const e=e=>a(f.getCodecs(me.localDescription.sdp,e),f.getCodecs(me.remoteDescription.sdp,e));return{audio:e("audio"),video:e("video")}},le.on("signalingStateStable",(()=>{se&&(se=!1,j("Renegotiation","Success",le.getNegotiatedCodecs()))})),le.on("error",(e=>{let t=e.prefix;se&&-1!==["CreateOffer","SetRemoteDescription"].indexOf(t)&&(se=!1,j("Renegotiation","Failure"))})),le.on("close",(()=>{se&&(se=!1,j("Renegotiation","Cancel"))}));const We=new A;return We.on("stats",(e=>{e.dataChannels=ge.sampleQos(),le.trigger("qos",{parsedStats:e,simulcastEnabled:xe.get()})})),le}}}).call(this,n(0))},function(e,t,n){"use strict";const r=n(2);e.exports=()=>"Chrome"===r.name&&r.version>=58||-1!==["Firefox","Edge","Safari","Opera"].indexOf(r.name)},function(e,t,n){"use strict";e.exports=function(e){let t=null,n=!1;const r=()=>{n&&(e(),t=window.requestAnimationFrame(r))};this.start=()=>{n||(n=!0,window.requestAnimationFrame(r))},this.stop=()=>{window.cancelAnimationFrame(t),n=!1}}},function(e,t,n){"use strict";const r=n(7);e.exports=(e,t)=>{const n={};Object.keys(t).forEach((r=>{n[r]=((e,t,n)=>t&&!n?()=>t.call(e):t&&n?r=>(void 0!==r&&n.call(e,r),t.call(e)):t=>{void 0!==t&&n.call(e,t)})(e,t[r].get,t[r].set)})),r(e,n)}},function(e,t,n){"use strict";let r="";e.exports={getCurrentAudioOutputDeviceId:()=>r,setCurrentAudioOutputDeviceId:e=>{r=e}}},function(e,t,n){"use strict";(function(t){e.exports=function(e){return new t((t=>setTimeout(t,e)))}}).call(this,n(0))},function(e,t,n){"use strict";const r=n(293);e.exports=function(e){let t=(void 0===e?{}:e).NativeVideoElementWrapper;const n=void 0===t?r():t;return function(e){let t=void 0===e?{}:e,r=t.fallbackText,o=void 0===r?"Sorry, Web RTC is not available in your browser":r,i=t.fitMode,s=t.muted,a=t._inject,c=t.widgetType;return new n({fallbackText:o,fitMode:i,muted:s,defaultAudioVolume:50,_inject:a,widgetType:c})}}},function(e,t){e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}},function(e,t,n){var r=n(38)(n(14),"Map");e.exports=r},function(e,t,n){var r=n(358),o=n(365),i=n(367),s=n(368),a=n(369);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,e.exports=c},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){(function(e){var r=n(174),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o&&r.process,a=function(){try{return i&&i.require&&i.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a}).call(this,n(84)(e))},function(e,t,n){var r=n(69),o=n(374),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(379),o=n(181),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return i.call(e,t)})))}:o;e.exports=a},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(179)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(188);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){"use strict";e.exports={error:{priority:1,method:"error"},warn:{priority:2,method:"warn"},info:{priority:3,method:"info"},log:{priority:4,method:"log"},debug:{priority:5,method:"debug"},spam:{priority:6,method:"log"}}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(395),o=n(194)(r);e.exports=o},function(e,t,n){var r=n(52),o=n(25),i=n(67),s=n(9);e.exports=function(e,t,n){if(!s(n))return!1;var a=typeof t;return!!("number"==a?o(n)&&i(t,n.length):"string"==a&&t in n)&&r(n[t],e)}},function(e,t,n){"use strict";e.exports=n(196)()?Object.setPrototypeOf:n(197)},function(e,t,n){"use strict";var r=n(55),o={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!r(e)&&hasOwnProperty.call(o,typeof e)}},function(e,t,n){"use strict";e.exports=n(406)()?Object.assign:n(407)},function(e,t,n){"use strict";const r=n(1)("Event"),o=n(7),i=n(127);e.exports=function(){function e(e,t,n){void 0===t&&(t=!0),void 0===n&&(n={}),this.type=e,this.cancelable=t,this._defaultPrevented=!1;const r=i(Object.keys(this),Object.keys(n));if(r.length>0)throw new Error(`Cannot used reserved property names: ${r.join(",")}`);o(this,n)}var t=e.prototype;return t.preventDefault=function(){this.cancelable?this._defaultPrevented=!0:r.warn("Event.preventDefault :: Trying to preventDefault on an event that isn't cancelable")},t.isDefaultPrevented=function(){return this._defaultPrevented},e}()},function(e,t,n){var r=n(33),o=n(447),i=n(87),s=n(453),a=i((function(e){var t=r(e,s);return t.length&&t[0]===e[0]?o(t):[]}));e.exports=a},function(e,t){e.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){var r=n(25),o=n(16);e.exports=function(e){return o(e)&&r(e)}},function(e,t){e.exports={}},function(e,t,n){var r=n(217),o=n(476),i=n(477),s=n(219),a=n(488),c=n(223),u=n(489),l=n(226),d=n(227),p=n(96),h=Math.max;e.exports=function(e,t,n,f,m,g,b,y){var v=2&t;if(!v&&"function"!=typeof e)throw new TypeError("Expected a function");var w=f?f.length:0;if(w||(t&=-97,f=m=void 0),b=void 0===b?b:h(p(b),0),y=void 0===y?y:p(y),w-=m?m.length:0,64&t){var x=f,S=m;f=m=void 0}var E=v?void 0:c(e),T=[e,t,n,f,m,x,S,g,b,y];if(E&&u(T,E),e=T[0],t=T[1],n=T[2],f=T[3],m=T[4],!(y=T[9]=void 0===T[9]?v?0:e.length:h(T[9]-w,0))&&24&t&&(t&=-25),t&&1!=t)C=8==t||16==t?i(e,t,y):32!=t&&33!=t||m.length?s.apply(void 0,T):a(e,t,n,f);else var C=o(e,t,n);return d((E?r:l)(C,T),e,t)}},function(e,t,n){var r=n(86),o=n(133);function i(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}i.prototype=r(o.prototype),i.prototype.constructor=i,e.exports=i},function(e,t){e.exports=function(){}},function(e,t){var n="__lodash_placeholder__";e.exports=function(e,t){for(var r=-1,o=e.length,i=0,s=[];++r<o;){var a=e[r];a!==t&&a!==n||(e[r]=n,s[i++]=r)}return s}},function(e,t,n){var r=n(29),o=n(117),i=n(16),s=Function.prototype,a=Object.prototype,c=s.toString,u=a.hasOwnProperty,l=c.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}},function(e,t,n){var r=n(10),o=n(71),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||s.test(e)||!i.test(e)||null!=t&&e in Object(t)}},function(e,t,n){var r=n(512),o=n(193),i=n(121);e.exports=function(e){return i(o(e,void 0,r),e+"")}},function(e,t,n){"use strict";const r=n(240),o=e=>e.replace(/\/$/,"");e.exports={prependProxyToUrlIfNeeded:(e,t)=>{if(!t)return e;const n=r.parse(t),i=r.parse(e);if(!n.protocol||!i.protocol)return e;const s=n.protocol.match(/^https/),a=i.protocol.match(/^ws/i);return`${o(`${(a?"ws":"http")+(s?"s":"")}://${n.host}${n.pathname}`)}/${o(`${i.host}${i.pathname}${i.search||""}`)}`}}},function(e,t,n){"use strict";const r=n(21),o=n(11),i=n(4),s=n(8),a=n(22);let c;const u={SET_PROXY_URL_TIMING_ERROR:"The proxyUrl was set after a session or publisher was created.",PROXY_URL_ALREADY_SET_ERROR:"The proxyUrl has already been set. Setting it again will not have any effect."};e.exports={errorMessages:u,setProxyUrl:e=>{const t=n(27),l=n(72),d=new t,p=r.sessions.length()>0,h=r.publishers.length()>0;let f;if(p){const e=r.sessions.find((e=>"connected"===e.currentState));f=e?e.sessionId:r.sessions.find().sessionId}else f="";const m={sessionId:f,apiKey:l.value};if(h||p){const e=o()(i.SET_PROXY_URL_TIMING_ERROR,new Error(u.SET_PROXY_URL_TIMING_ERROR),s.SET_PROXY_URL_TIMING_ERROR);a.handleJsException({error:e,target:m,analytics:d})}else if(c){const e=o()(i.PROXY_URL_ALREADY_SET_ERROR,new Error(u.PROXY_URL_ALREADY_SET_ERROR),s.PROXY_URL_ALREADY_SET_ERROR);a.handleJsException({error:e,target:m,analytics:d})}else c=e},getProxyUrl:()=>c,clearProxyUrl:()=>{c=null}}},function(e,t,n){var r=n(87),o=n(52),i=n(122),s=n(53),a=Object.prototype,c=a.hasOwnProperty,u=r((function(e,t){e=Object(e);var n=-1,r=t.length,u=r>2?t[2]:void 0;for(u&&i(t[0],t[1],u)&&(r=1);++n<r;)for(var l=t[n],d=s(l),p=-1,h=d.length;++p<h;){var f=d[p],m=e[f];(void 0===m||o(m,a[f])&&!c.call(e,f))&&(e[f]=l[f])}return e}));e.exports=u},function(e,t,n){"use strict";var r=n(3)(n(46));const o=n(57),i=n(56);let s=function(){function e(e){void 0===e&&(e={}),Object.defineProperty(this,"_rawSessionInfo",{value:i(e)})}return(0,r.default)(e,[{key:"sessionId",get:function(){return this._rawSessionInfo.session_id}},{key:"partnerId",get:function(){return this._rawSessionInfo.partner_id}},{key:"messagingServer",get:function(){return this._rawSessionInfo.messaging_server_url}},{key:"mediaServerName",get:function(){return this._rawSessionInfo.media_server_hostname}},{key:"messagingURL",get:function(){return this._rawSessionInfo.messaging_url}},{key:"symphonyAddress",get:function(){return this._rawSessionInfo.symphony_address}},{key:"iceServers",get:function(){return this._rawSessionInfo.ice_servers}},{key:"simulcast",get:function(){return o(this._rawSessionInfo,"properties.simulcast")}},{key:"reconnection",get:function(){return o(this._rawSessionInfo,"properties.reconnection",!1)}},{key:"renegotiation",get:function(){return o(this._rawSessionInfo,"properties.renegotiation",!1)}},{key:"p2pEnabled",get:function(){return"enabled"===o(this._rawSessionInfo,"properties.p2p.preference.value")}},{key:"hybridSession",get:function(){return o(this._rawSessionInfo,"properties.hybridSession",!1)}},{key:"isAdaptiveEnabled",get:function(){return"adaptive"===o(this._rawSessionInfo,"properties.p2p.preference.value")}},{key:"priorityVideoCodec",get:function(){return o(this._rawSessionInfo,"properties.priorityVideoCodec","")}},{key:"h264",get:function(){return o(this._rawSessionInfo,"properties.h264",!0)}},{key:"vp8",get:function(){return o(this._rawSessionInfo,"properties.vp8",!0)}},{key:"vp9",get:function(){return o(this._rawSessionInfo,"properties.vp9",!0)}},{key:"clientCandidates",get:function(){const e=o(this._rawSessionInfo,"properties.clientCandidates");return"relayed"===e?"relay":e}}]),e}();e.exports=s},function(module,exports,__nested_webpack_require_373185__){"use strict";const extendES5Native=__nested_webpack_require_373185__(548),webrtcAdapter=__nested_webpack_require_373185__(549),logging=__nested_webpack_require_373185__(1)("createWindowMock"),env=__nested_webpack_require_373185__(2),windowKeys=[{key:"location",type:"object"},{key:"setTimeout",type:"function"},{key:"requestAnimationFrame",type:"function"},{key:"URL",type:"function"},{key:"MediaStream",type:"class"},{key:"webkitMediaStream",type:"class"},{key:"RTCIceCandidate",type:"class"},{key:"mozRTCIceCandidate",type:"class"},{key:"RTCSessionDescription",type:"class"},{key:"mozRTCSessionDescription",type:"class"},{key:"RTCIceGatherer",type:"class"},{key:"RTCIceTransport",type:"class"},{key:"RTCDtlsTransport",type:"class"},{key:"RTCSctpTransport",type:"class"},{key:"RTCRtpReceiver",type:"class"},{key:"HTMLMediaElement",type:"class"},{key:"RTCPeerConnection",type:"class"},{key:"webkitRTCPeerConnection",type:"class"},{key:"mozRTCPeerConnection",type:"class"},{key:"MediaStreamTrack",type:"class"},{key:"RTCRtpSender",type:"class"},{key:"RTCTrackEvent",type:"class"},{key:"RTCTransceiver",type:"class"},{key:"RTCDtmfSender",type:"class"},{key:"RTCDTMFSender",type:"class"},{key:"MediaStreamTrackEvent",type:"class"}],navigatorKeys=[{key:"userAgent",type:"string"},{key:"getUserMedia",type:"function"},{key:"getDisplayMedia",type:"function"},{key:"webkitGetUserMedia",type:"function"},{key:"mozGetUserMedia",type:"function"}],mediaDevicesKeys=[{key:"getUserMedia",type:"function"},{key:"getDisplayMedia",type:"function"},{key:"enumerateDevices",type:"function"},{key:"getSupportedConstraints",type:"function"},{key:"addEventListener",type:"function"},{key:"removeEventListener",type:"function"}],bindWithStaticProperties=(e,t)=>{if("function"!=typeof t)return logging.warn("Non-function passed into bindWithStaticProperties()"),t;const n=t.bind(e);return Object.keys(t).forEach((e=>{n[e]=t[e]})),n},extendParentClass=ParentClass=>{try{const ChildClass=eval('\n      "use strict"; // Chrome<49 requires strict mode\n\n      const getOwnProperties = (target) => {\n        const properties = {};\n        Object.getOwnPropertyNames(target).forEach((key) => {\n          properties[key] = Object.getOwnPropertyDescriptor(target, key);\n        });\n        return properties;\n      };\n\n      class ChildClass extends ParentClass {\n        constructor(...args) {\n          super(...args);\n          try {\n            this.__proto__ = ChildClass.prototype;\n          } catch (e) {}\n        }\n      };\n\n      Object.defineProperties(ChildClass.prototype, getOwnProperties(ParentClass.prototype));\n      Object.keys(ParentClass)\n        .forEach((staticKey) => {\n          ChildClass[staticKey] = ParentClass[staticKey];\n        });\n\n      ChildClass; // Ensure the final statement is returned in FF\n    ');if(ChildClass&&ChildClass.prototype instanceof ParentClass)return ChildClass}catch(e){}return null},canUseES6Class=e=>{const t=e.RTCPeerConnection||e.webkitRTCPeerConnection||e.mozRTCPeerConnection,n=extendParentClass(t);if(n)try{n.prototype.foo="bar";const e=new n({iceServers:[]}),t="bar"===e.foo;try{e.close()}catch(e){}return t}catch(e){}return!1},extendClass=(e,t,n)=>{if("function"!=typeof e)return logging.warn("Non-function passed into extendClass()"),e;let r=n&&extendParentClass(e);return r||(r=extendES5Native(e)),r},getCopyProperties=e=>(t,n,r)=>{r.forEach((r=>{let o=r.key,i=r.type,s=n[o];if(void 0!==s){switch(i){case"function":s=bindWithStaticProperties(n,s);break;case"class":s=extendClass(s,o,e);break;case"string":case"object":break;default:throw new Error(`Invalid type of window key: ${i}`)}t[o]=s}}))},cloneWindow=e=>{const t={},n=getCopyProperties(canUseES6Class(e));return n(t,e,windowKeys),void 0!==e.navigator&&(t.navigator={},n(t.navigator,e.navigator,navigatorKeys),void 0!==e.navigator.mediaDevices&&(t.navigator.mediaDevices={},n(t.navigator.mediaDevices,e.navigator.mediaDevices,mediaDevicesKeys))),t};module.exports=function(e){if(void 0!==e.adapter||env.isLegacyEdge)return e;const t=cloneWindow(e);return webrtcAdapter({window:t}),t}},function(e,t,n){"use strict";e.exports=function(){let e=null;this.transform=t=>{e=null===e||t>=e?t:.3*t+.7*e;const n=Math.log(e)/Math.LN10/1.5+1;return Math.min(Math.max(n,0),1)}}},function(e,t,n){"use strict";const r=n(6),o=e=>Object.keys(e).map((t=>e[t])),i=n(7);e.exports=function(e){const t={},n=(n,r)=>{i(r,{parent:this}),r.appendTo(e.parent),t[n]=r,this[n]=r};e.parent&&(r(this),this.destroy=()=>{this.off(),this.hideWhileLoading(),o(t).forEach((e=>e.destroy()))},this.showAfterLoading=()=>{o(t).forEach((e=>e.showAfterLoading()))},this.hideWhileLoading=()=>{o(t).forEach((e=>e.hideWhileLoading()))},this.set=(e,t)=>("string"==typeof e&&t?n(e,t):Object.keys(e).forEach((t=>{n(t,e[t])})),this))}},function(e,t,n){"use strict";var r=n(3)(n(18));e.exports=function(){function e(e){(0,r.default)(this,"_analyser",null),(0,r.default)(this,"_timeDomainData",null),(0,r.default)(this,"_sourceNode",null),this._audioContext=e}var t=e.prototype;return t._initAudioAnalyser=function(e){this._analyser=this._audioContext.createAnalyser(),this._sourceNode=this._audioContext.createMediaStreamSource(e),this._sourceNode.connect(this._analyser),this._timeDomainData=new Uint8Array(this._analyser.frequencyBinCount)},t.webRTCStream=function(e){this._sourceNode&&this._sourceNode.disconnect(this._analyser),"suspended"===this._audioContext.state&&this._audioContext.resume(),this._initAudioAnalyser(e)},t.destroy=function(){this._sourceNode&&this._sourceNode.disconnect(this._analyser),this._timeDomainData=null},t.sample=function(e){if("function"==typeof e)throw new Error("sample no longer takes a callback");if(this._analyser&&this._timeDomainData){this._analyser.getByteTimeDomainData(this._timeDomainData);let e=0;for(let t=this._timeDomainData.length-1;t>=0;t-=1)e=Math.max(e,Math.abs(this._timeDomainData[t]-128));return e/128}return null},e}()},function(e,t,n){"use strict";const r=n(560),o=n(26),i=n(6),s=n(23)();e.exports=new function(){const e=this;function t(){return r.isDomLoaded()&&!r.isDomUnloaded()}function n(){e.dispatchEvent(new s.EnvLoadedEvent(o.ENV_UNLOADED))}i(e),r.whenLoaded.then((function(){r.whenUnloaded.then(n),t()&&e.dispatchEvent(new s.EnvLoadedEvent(o.ENV_LOADED))})),this.onLoad=function(n,r){t()?n.call(r):e.on(o.ENV_LOADED,n,r)},this.onUnload=function(t,n){this.isUnloaded()?t.call(n):e.on(o.ENV_UNLOADED,t,n)},this.isUnloaded=function(){return r.isDomUnloaded()}}},function(e,t,n){var r=n(561),o=n(192)((function(e,t,n){r(e,t,n)}));e.exports=o},function(e,t,n){"use strict";var r=n(565);function o(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0}function i(e){return(void 0!==typeof window?window:__webpack_require__.g).Buffer&&"function"==typeof(void 0!==typeof window?window:__webpack_require__.g).Buffer.isBuffer?(void 0!==typeof window?window:__webpack_require__.g).Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var s=n(566),a=Object.prototype.hasOwnProperty,c=Array.prototype.slice,u="foo"===function(){}.name;function l(e){return Object.prototype.toString.call(e)}function d(e){return!i(e)&&"function"==typeof(void 0!==typeof window?window:__webpack_require__.g).ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var p=e.exports=y,h=/\s*function\s+([^\(\s]*)\s*/;function f(e){if(s.isFunction(e)){if(u)return e.name;var t=e.toString().match(h);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function g(e){if(u||!s.isFunction(e))return s.inspect(e);var t=f(e);return"[Function"+(t?": "+t:"")+"]"}function b(e,t,n,r,o){throw new p.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function y(e,t){e||b(e,!0,t,"==",p.ok)}function v(e,t,n,r){if(e===t)return!0;if(i(e)&&i(t))return 0===o(e,t);if(s.isDate(e)&&s.isDate(t))return e.getTime()===t.getTime();if(s.isRegExp(e)&&s.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(d(e)&&d(t)&&l(e)===l(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===o(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var a=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==a&&a===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(s.isPrimitive(e)||s.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=w(e),i=w(t);if(o&&!i||!o&&i)return!1;if(o)return v(e=c.call(e),t=c.call(t),n);var a,u,l=E(e),d=E(t);if(l.length!==d.length)return!1;for(l.sort(),d.sort(),u=l.length-1;u>=0;u--)if(l[u]!==d[u])return!1;for(u=l.length-1;u>=0;u--)if(!v(e[a=l[u]],t[a],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function x(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function S(e,t,n,r){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&b(o,n,"Missing expected exception"+r);var i="string"==typeof r,a=!e&&o&&!n;if((!e&&s.isError(o)&&i&&x(o,n)||a)&&b(o,n,"Got unwanted exception"+r),e&&o&&n&&!x(o,n)||!e&&o)throw o}p.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return m(g(e.actual),128)+" "+e.operator+" "+m(g(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||b;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,o=f(t),i=r.indexOf("\n"+o);if(i>=0){var s=r.indexOf("\n",i+1);r=r.substring(s+1)}this.stack=r}}},s.inherits(p.AssertionError,Error),p.fail=b,p.ok=y,p.equal=function(e,t,n){e!=t&&b(e,t,n,"==",p.equal)},p.notEqual=function(e,t,n){e==t&&b(e,t,n,"!=",p.notEqual)},p.deepEqual=function(e,t,n){v(e,t,!1)||b(e,t,n,"deepEqual",p.deepEqual)},p.deepStrictEqual=function(e,t,n){v(e,t,!0)||b(e,t,n,"deepStrictEqual",p.deepStrictEqual)},p.notDeepEqual=function(e,t,n){v(e,t,!1)&&b(e,t,n,"notDeepEqual",p.notDeepEqual)},p.notDeepStrictEqual=function e(t,n,r){v(t,n,!0)&&b(t,n,r,"notDeepStrictEqual",e)},p.strictEqual=function(e,t,n){e!==t&&b(e,t,n,"===",p.strictEqual)},p.notStrictEqual=function(e,t,n){e===t&&b(e,t,n,"!==",p.notStrictEqual)},p.throws=function(e,t,n){S(!0,e,t,n)},p.doesNotThrow=function(e,t,n){S(!1,e,t,n)},p.ifError=function(e){if(e)throw e},p.strict=r((function e(t,n){t||b(t,!0,n,"==",e)}),p,{equal:p.strictEqual,deepEqual:p.deepStrictEqual,notEqual:p.notStrictEqual,notDeepEqual:p.notDeepStrictEqual}),p.strict.strict=p.strict;var E=Object.keys||function(e){var t=[];for(var n in e)a.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";const r=n(573),o=n(265),i=n(2);e.exports=e=>i.isElectron?"screen"===e||o(e):r.indexOf(e)>-1},function(e,t,n){"use strict";const r=n(268),o=n(6),i=n(1)("StreamChannel"),s=n(151)();e.exports=function(e){this.id=e.id,this.type=e.type,this.active=r(e.active),this.orientation=e.orientation||s.ROTATED_NORMAL,e.frameRate&&(this.frameRate=parseFloat(e.frameRate)),e.preferredFrameRate&&(this.preferredFrameRate=parseFloat(e.preferredFrameRate)),e.preferredWidth&&(this.preferredWidth=parseInt(e.preferredWidth,10)),e.preferredHeight&&(this.preferredHeight=parseInt(e.preferredHeight,10)),this.width=parseInt(e.width,10),this.height=parseInt(e.height,10),this.source=e.source||"camera",this.fitMode=e.fitMode||"cover",o(this),this.update=function(e){const t={},n={};for(const o in e){if(!e.hasOwnProperty(o))continue;const s=this[o];switch(o){case"active":this.active=r(e[o]);break;case"disableWarning":this.disableWarning=r(e[o]);break;case"frameRate":this.frameRate=parseFloat(e[o],10);break;case"width":case"height":this[o]=parseInt(e[o],10),t[o]=this[o],n[o]=s;break;case"orientation":this[o]=e[o],t[o]=this[o],n[o]=s;break;case"fitMode":case"source":this[o]=e[o];break;default:return i.warn(`Tried to update unknown key ${o} on ${this.type} channel ${this.id}`),!1}this.trigger("update",this,o,s,this[o])}return Object.keys(t).length&&this.trigger("update",this,"videoDimensions",n,t),!0}}},function(e,t,n){"use strict";e.exports=function(){return{ROTATED_NORMAL:0,ROTATED_LEFT:270,ROTATED_RIGHT:90,ROTATED_UPSIDE_DOWN:180}}},function(e,t,n){"use strict";const r=n(581),o=n(1)("StylableComponent"),i=n(582),s=n(583);e.exports=function(e,t,n,a){if(!e.trigger)throw new Error("OT.StylableComponent is dependent on the eventing mixin. Ensure that this is included in the object before StylableComponent.");a=a||function(){};let c=!1;!1===n&&(t={buttonDisplayMode:"off",nameDisplayMode:"off",audioLevelDisplayMode:"off",videoDisabledDisplayMode:"off",audioBlockedDisplayMode:"off"},c=!0,a({showControls:!1}));const u=new i(t,(function(t,n,r){r?e.trigger("styleValueChanged",t,n,r):e.trigger("styleValueChanged",t,n)}));e.getStyle=function(e){return u.get(e)},e.setStyle=function(e,t,n){if(c)return o.warn("Calling setStyle() has no effect because theshowControls option was set to false"),this;let i;return"string"!=typeof e?i=e:(i={},i[e]=t),i.backgroundImageURI&&(i.backgroundImageURI=r(i.backgroundImageURI)),u.setAll(i,n),a(s(i)),this}}},function(e,t,n){"use strict";const r=n(50),o=n(34)(),i=n(27),s=n(72),a=n(146),c=n(61).once,u=n(586),l=n(5),d=n(1)("systemRequirements"),p=n(587),h=n(588),f=o.onlyLocal(),m=new i,g=r((()=>{m.logEvent({action:"checkSystemRequirements",variation:"notHasRequirements",partnerId:s.value,payload:{userAgent:l.env.userAgent}})})),b=r((()=>{n(589)()}));let y=!1;e.exports={check(){d.debug("OT.checkSystemRequirements()");const e=Number(u&&c());return b(),e||g(),e},upgrade(e){let t=void 0===e?{}:e,n=t.isSupportedButOld,r=void 0===n?l.env.name.toLowerCase()in f.minimumVersion:n,o=t.userAgent,i=void 0===o?navigator.userAgent:o;a.onLoad((()=>{if(y)return;const e=new h(p);let t;y=!0,e.on("close",(()=>{y=!1})),e.open(),t=i.match(/(iPad|iPhone|iPod|android|webOS)/i)?(r?"supported-":"")+"mobile-browser":(r?"upgrade":"normal")+"-install",e.el(`#section-${t}`).style.display="block"}))}}},function(e,t,n){"use strict";(function(t){var r=n(3),o=r(n(60)),i=r(n(590));const s=n(594);let a=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="TimeoutError",n}return(0,o.default)(t,e),t}((0,i.default)(Error));e.exports=(e,n,r)=>new t(((t,o)=>{if("number"!=typeof n||n<0)throw new TypeError("Expected `ms` to be a positive number");const i=setTimeout((()=>{if("function"==typeof r){try{t(r())}catch(i){o(i)}return}const i=r instanceof Error?r:new a("string"==typeof r?r:`Promise timed out after ${n} milliseconds`);"function"==typeof e.cancel&&e.cancel(),o(i)}),n);s(e.then(t,o),(()=>{clearTimeout(i)}))})),e.exports.TimeoutError=a}).call(this,n(0))},function(e,t,n){"use strict";e.exports=function(){const e=[];return{add(t){e.push(t)},remove(t){const n=e.indexOf(t);n>=0&&e.splice(n,1)},releaseAll(){const t=[];for(;e.length>0;){const n=e.pop();try{n()}catch(e){t.push(e)}}const n=t.length;if(n>0)throw new Error(`Failed to complete ${n} cleanup job${1===n?"":"s"}: ${t.map((e=>`<${e}>`)).join(", ")}`)}}}},function(e,t,n){"use strict";const r=n(1)("applySdpTransform");e.exports=(e,t,n,o,i)=>{const s=e[t][n],a=`${t} ${n}`,c=`sdpTransforms (${"local offer"===a||"remote answer"===a?"publisher":"subscriber"}): ${t} ${n}`,u="local"===t?"created":"received";r.debug(`${c}: ${u}:\n${i}`);const l=s(o,i);return l.local===i?r.debug(`${c}: not modified`):r.debug(`${c}: modified to:\n${l.local}`),l}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";e.exports=function(e){if(void 0===e&&(e={}),!e)return 0;const t=e,n=t.currentStatFrames,r=void 0===n?0:n,o=t.prevStatFrames,i=void 0===o?0:o,s=t.currentTimestamp,a=void 0===s?0:s,c=t.prevTimestamp,u=void 0===c?0:c;if(r>=i&&a>u){const e=(r-i)/((a-u)/1e3);return Math.round(100*e)/100}return 0}},function(e,t,n){"use strict";let r;e.exports=function(e){void 0===e&&(e={});const t=e.AudioContext||(void 0!==typeof window?window:n.g).AudioContext||(void 0!==typeof window?window:n.g).webkitAudioContext;return function(){if(r=r||t&&new t,null==r)throw new Error("AudioContext could not be created, hardware limit reached.");return r}}},function(e,t,n){"use strict";var r=n(3);t.__esModule=!0,t.default=void 0;var o=r(n(57)),i="function"==typeof(0,o.default)(void 0!==typeof window?window:__webpack_require__.g,"navigator.getDisplayMedia",(0,o.default)(void 0!==typeof window?window:__webpack_require__.g,"navigator.mediaDevices.getDisplayMedia"));t.default=i},function(e,t,n){"use strict";const r=n(37);e.exports=function(){return function(e,t,n){const o=t.slice(),i=r(n);return function(t){let n=e,r=null;function s(e,o){t({message:e,newState:o,currentState:n,previousState:r})}this.current=n,this.set=function(e){(function(e){return t=e,-1===o.indexOf(t)?(s(`'${e}' is not a valid state`,e),!1):(a=e,!(!i[r=n]||-1===i[r].indexOf(a))||(s(`'${n}' cannot transition to '${e}'`,e),!1));var t,r,a})(e)&&(r=n,this.current=e,n=e)}}}}},function(e,t,n){"use strict";(function(t){const r=n(62);e.exports=function(e){void 0===e&&(e={});const o=e.chromeExtensionHelper||n(280)(),i=e.electronExtensionHelper||n(630)(),s=e.Errors||n(4),a=e.firefoxExtensionHelper||n(632),c=e.getDisplayMediaExtensionHelper||n(287),u=e.otError||n(11)(),l=e.OTHelpers||n(5),d={extensionByKind:{},extensionClasses:{},registerExtensionHelper:(e,t)=>{d.extensionClasses[e]=t,t.autoRegisters&&t.isSupportedInThisBrowser&&d.registerExtension(e)},registerExtension:function(e){if(null==d.extensionClasses[e])throw new Error("Unsupported kind passed to OT.registerScreenSharingExtension");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=d.extensionClasses[e].register(...n);d.extensionByKind[e]=o}},p=()=>{const e=r(Object.keys(d.extensionClasses).sort((e=>"electron"===e?-1:1)),(e=>d.extensionClasses[e].isSupportedInThisBrowser));return void 0===e?{}:{name:e,proto:d.extensionClasses[e],instance:d.extensionByKind[e]}};d.pickHelper=()=>p(),d.checkCapability=e=>{const t={supported:!1,extensionRequired:void 0,extensionRegistered:void 0,extensionInstalled:void 0,supportedSources:{}},n=p();if(void 0!==n.name){if(t.supported=!0,t.extensionRequired=n.proto.extensionRequired?n.name:void 0,t.supportedSources={screen:n.proto.sources.screen,application:n.proto.sources.application,window:n.proto.sources.window,browser:n.proto.sources.browser},!n.instance)return t.extensionRegistered=!1,t.extensionRequired&&(t.extensionInstalled=!1),void setTimeout(e.bind(null,t));t.extensionRegistered=!!t.extensionRequired||void 0,n.instance.isInstalled((n=>{t.extensionInstalled=t.extensionRequired||"Firefox"===l.env.name?n:void 0,e(t)}))}else setTimeout(e.bind(null,t))},d.registerExtensionHelper("electron",i),d.registerExtensionHelper("getDisplayMedia",c),d.registerExtensionHelper("chrome",o),d.registerExtensionHelper("firefox",a);const h=()=>{};return d.getConstraints=e=>{const n=e.onAccessDialogOpened,r=void 0===n?h:n,o=e.onAccessDialogClosed,i=void 0===o?h:o,a=e.videoSource,c=e.constraints;return new t(((e,t)=>{d.checkCapability((n=>{if(n.supported)if(!1===n.extensionRegistered)t(u(s.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,new Error("Screen Sharing support in this browser requires an extension, but one has not been registered.")));else if(n.extensionRequired&&!1===n.extensionInstalled)t(u(s.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Screen Sharing support in this browser requires an extension, but the extension is not installed.")));else{const n=d.pickHelper();n.proto.getConstraintsShowsPermissionUI&&r(),n.instance.getConstraints(a,c,((r,o)=>{n.proto.getConstraintsShowsPermissionUI&&i(),r?t(r):e(o)}))}else{let e="Screen Sharing is not supported in this browser";l.env.isElectron?e="Set the webPreferences.contextIsolation option of the Electron BrowserWindow to false or use a preload script to access the desktop capturer. For more information, see https://tokbox.com/developer/guides/screen-sharing/js/.":"Chrome"===l.env.name&&l.env.version>73&&"https:"!==(void 0!==typeof window?window:__webpack_require__.g).location.protocol&&(e="https:// is required for screen sharing"),t(u(s.SCREEN_SHARING_NOT_SUPPORTED,new Error(e)))}}))}))},d}}).call(this,n(0))},function(e,t,n){"use strict";e.exports=function(e){void 0===e&&(e={});const t=e.Errors||n(4),r=e.ExceptionCodes||n(8),o=e.otError||n(11)(),i={ICEWorkflow:t.ICE_WORKFLOW_FAILED,NewPeerConnection:t.CREATE_PEER_CONNECTION_FAILED,SetRemoteDescription:t.SET_REMOTE_DESCRIPTION_FAILED,Subscribe:{404:t.STREAM_NOT_FOUND,[r.STREAM_LIMIT_EXCEEDED]:t.STREAM_LIMIT_EXCEEDED}};return function(e,n,s,a,c){const u=`${(s?`${s}: `:"")+c} PeerConnection with connection ${a} failed: ${n}`,l=i[s]||{},d="string"==typeof l?l:l[e],p="Publisher"===c?r.UNABLE_TO_PUBLISH:r.UNABLE_TO_SUBSCRIBE;if(!d){const e=new Error(u);return e.code=p,e}const h="ICEWorkflow"===s?"Publisher"===c?r.PUBLISHER_ICE_WORKFLOW_FAILED:r.SUBSCRIBER_ICE_WORKFLOW_FAILED:d===t.STREAM_LIMIT_EXCEEDED?r.STREAM_LIMIT_EXCEEDED:p;return o(d,new Error(u),h)}}},function(e,t,n){"use strict";e.exports=function(e){void 0===e&&(e={});const t=e.OTHelpers||n(5),r=(e.global||(void 0!==typeof window?window:__webpack_require__.g)).RTCPeerConnection;return function(e,n){"Firefox"===t.env.name&&r&&r.generateCertificate?r.generateCertificate({name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])}).catch((e=>{n(e)})).then((t=>{e.certificates=[t],n(void 0,e)})):setTimeout((()=>{n(void 0,e)}))}}},function(e,t,n){"use strict";var r=n(3),o=r(n(12)),i=r(n(13)),s=r(n(46)),a=r(n(18));const c=n(6),u=n(646),l=n(1)("WidgetView"),d=n(5),p=n(2),h=n(166),f=h.default,m=h.CancellationError,g=n(167),b=n(648),y=n(649),v=n(650),w=n(651),x=n(652),S=n(63),E=n(107);E(),e.exports=function(e){let t=void 0===e?{}:e,n=t.logging,r=void 0===n?l:n,h=t.OTHelpers,T=void 0===h?d:h,C=t.waitForVideoToBePlaying,_=void 0===C?y:C,I=t.VideoElementFacade,k=void 0===I?E():I,R=t.env,N=void 0===R?p:R;const O=u({window:void 0!==typeof window?window:__webpack_require__.g}),A=e=>{if(e.isCanceled())throw r.debug("bindVideo bailing due to cancellation"),new m("CANCEL")};let D=function(){function e(e,t){let n=void 0===t?{}:t,o=n.insertDefaultUI,i=void 0===o||o,s=n.width,u=void 0===s?264:s,l=n.height,d=void 0===l?198:l,p=n.fitMode,h=void 0===p?"cover":p,f=n.mirror,m=void 0!==f&&f,g=n.insertMode,b=n.classNames,y=n.style,E=n.widgetType;(0,a.default)(this,"_videoElementFacade",void 0),(0,a.default)(this,"_container",void 0),(0,a.default)(this,"_posterContainer",document.createElement("div")),(0,a.default)(this,"_widgetContainer",document.createElement("div")),(0,a.default)(this,"_loading",!0),(0,a.default)(this,"_audioOnly",!1),(0,a.default)(this,"_showPoster",void 0),(0,a.default)(this,"_poster",void 0),(0,a.default)(this,"_cancelBind",void 0),c(this),!1===/^(contain|cover)$/.test(h)&&r.warn(`Invalid fit value "${h}" passed. Only "contain" and "cover" can be used.`),this._widgetType=E,this._fitMode=h,this._insertDefaultUI=i;const C=S(this._widgetContainer);if(C.on("click",this.userGesture.bind(this)),C.on("touchstart",this.userGesture.bind(this),!!O&&{passive:!0}),this.once("destroy",(()=>C.removeAll())),this._widgetContainer.classList.add("OT_widget-container"),this._widgetContainer.style.width="100%",this._widgetContainer.style.height="100%",!1!==i){this._container=w(e,g),N.isSafari&&N.isiOS&&N.iOSVersion&&N.iOSVersion<11.2&&this._container.classList.add("OT_ForceContain"),this._container.style.width=x(u),this._container.style.height=x(d),this._container.style.overflow="hidden",v(this._container),m&&T.addClass(this._container,"OT_mirrored"),b&&b.trim().split(/\s+/).forEach((e=>this._container.classList.add(e))),this._container.classList.add("OT_loading"),this._container.classList.add(`OT_fit-mode-${h}`),this._container.appendChild(this._widgetContainer);const t=T(this._container).observeSize((()=>v(this._container)))[0],n=T.observeNodeOrChildNodeRemoval(this._container,(e=>{this._videoElementFacade&&e.some((e=>e===this._widgetContainer||e===this._videoElementFacade.domElement()))&&this.destroyVideo()}));this.once("destroy",(()=>{r.debug("disconnecting observers"),t.disconnect(),n.disconnect()}))}this._posterContainer.classList.add("OT_video-poster"),this._widgetContainer.appendChild(this._posterContainer);const _=document.createElement("div");_.classList.add("OT_video-loading");const I=document.createElement("div");I.classList.add("OT_video-loading-spinner"),_.appendChild(I),this._widgetContainer.appendChild(_),y&&y.backgroundImageURI&&this.setBackgroundImageURI(y.backgroundImageURI)}var t=e.prototype;return t.addError=function(e,t,n){this._container&&(this._container.innerHTML=`<p>${e}${t?` <span class="ot-help-message">${t}</span>`:""}</p>`,T.addClass(this._container,n||"OT_subscriber_error"),this._container.querySelector("p").offsetHeight>this._container.offsetHeight&&(this._container.querySelector("span").style.display="none"))},t.destroy=function(){this.emit("destroy"),this.destroyVideo(),this._container&&(T.removeElement(this._container),this._container=null)},t.setBackgroundImageURI=function(e){T.css(this._posterContainer,"backgroundImage",`url(${e})`),T.css(this._posterContainer,"backgroundSize","contain"),T.css(this._posterContainer,"opacity","1.0")},t.isAudioBlocked=function(){return Boolean(this._videoElementFacade&&this._videoElementFacade.isAudioBlocked())},t.unblockAudio=function(){return this._videoElementFacade.unblockAudio()},t.userGesture=function(){this.isAudioBlocked()&&g().then((()=>r.debug("Successfully unblocked audio")),(e=>r.error("Error retrying audio on user interaction:",e)))},t.setAudioBlockedUi=function(e){this._container&&(e?this._container.classList.add("OT_container-audio-blocked"):this._container.classList.remove("OT_container-audio-blocked"))},t.rebindSrcObject=function(){this._videoElementFacade&&this._videoElementFacade._rebindSrcObject()},t.pauseAndPlayVideoElement=function(){this._videoElementFacade&&this._videoElementFacade._pauseAndPlay()},t._createVideoElementFacade=function(e){let t=e._inject,n=e.audioVolume,o=e.fallbackText,i=e.muted;this._videoElementFacade=new k({defaultAudioVolume:parseFloat(n),fallbackText:o,fitMode:this._fitMode,_inject:t,muted:i,widgetType:this._widgetType});const s=S(this._videoElementFacade);if(this._videoFacadeEvents=s,s.on("error",(()=>{this.trigger("error")})),s.on("videoDimensionsChanged",((e,t)=>{this.trigger("videoDimensionsChanged",e,t)})),s.on("mediaStopped",(e=>{this.trigger("mediaStopped",e)})),s.on("audioBlocked",(()=>this.trigger("audioBlocked"))),s.on("audioUnblocked",(()=>this.trigger("audioUnblocked"))),this._videoElementFacade.audioChannelType("telephony"),r.debug("Appending the video facade"),this._videoElementFacade.appendTo(this._widgetContainer),void 0!==n)try{this._videoElementFacade.setAudioVolume(n)}catch(e){r.warn(`bindVideo ${e}`)}},t._bindToStream=function(){var e=(0,i.default)(o.default.mark((function e(t,n){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._videoElementFacade.bindToStream(t);case 3:e.next=14;break;case 5:if(e.prev=5,e.t0=e.catch(0),!n.isCanceled()){e.next=12;break}throw r.debug("Refusing to destroyVideo as bindVideo was cancelled"),new m("CANCEL");case 12:throw this.destroyVideo(),e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),t._getNewBindCancellation=function(){this._cancelBind&&(r.debug("Cancelling last bindVideo request"),this._cancelBind.cancel());const e=new f;return this._cancelBind=e,this.once("destroy",(()=>e.cancel())),e},t._triggerVideoElementCreated=function(){const e=e=>{this.trigger("videoElementCreated",e),this._insertDefaultUI&&T.addClass(e,"OT_video-element")};this._videoElementFacade.domElement()?e(this._videoElementFacade.domElement()):this._videoFacadeEvents.on("videoElementCreated",(t=>{e(t)}))},t._waitForVideoResolution=function(){var e=(0,i.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.audioOnly()&&"subscriber"===this._widgetType||!(t.getVideoTracks().length>0)){e.next=6;break}return r.debug("Waiting for correct resolution"),e.next=5,b(this._videoElementFacade,5e3);case 5:r.debug(`Resolution: ${this._videoElementFacade.videoWidth()}x${this._videoElementFacade.videoHeight()}`);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.bindVideo=function(){var e=(0,i.default)(o.default.mark((function e(t,n){var i,s,a,c,u,l,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.audioVolume,s=n.muted,a=n.fallbackText,c=n._inject,r.debug("bindVideo ",{webRTCStream:t}),u=!!this._videoElementFacade,l=this._getNewBindCancellation(),u||this._createVideoElementFacade({_inject:c,audioVolume:i,fallbackText:a,muted:s}),e.next=7,this._bindToStream(t,l);case 7:return u||this._triggerVideoElementCreated(),A(l),d=_(this._videoElementFacade,5e3),e.next=12,this._waitForVideoResolution(t);case 12:return r.debug("Waiting for video to be playing"),e.next=15,d;case 15:r.debug("Video is playing"),A(l);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.bindAudioTrackOnly=function(){this._videoElementFacade&&this._videoElementFacade.bindAudioTrackOnly()},t.destroyVideo=function(){this._videoElementFacade&&(this._videoElementFacade.destroy(),this._videoElementFacade=null)},t.video=function(){return this._videoElementFacade},t.showPoster=function(e){return void 0===e?!T.isDisplayNone(this._posterContainer):(this._showPoster=e,T[e?"show":"hide"](this._posterContainer),this.showPoster())},t.poster=function(e){return void 0===e?T.css(this._posterContainer,"backgroundImage"):(this._poster=e,T.css(this._posterContainer,"backgroundImage",`url(${e})`),this.poster())},t.loading=function(e){return void 0===e?this._loading:(this._loading=Boolean(e),this._container&&this._container.classList[e?"add":"remove"]("OT_loading"),this.loading())},t.audioOnly=function(e){return void 0===e?this._audioOnly:(this._audioOnly=e,this._container&&this._container.classList[e?"add":"remove"]("OT_audio-only"),this.audioOnly())},t.domId=function(){return this._container&&this._container.getAttribute("id")},t.setSinkId=function(e){if(this._videoElementFacade)return this._videoElementFacade.setSinkId(e)},(0,s.default)(e,[{key:"domElement",get:function(){return this._container}},{key:"videoElement",get:function(){return this._videoElementFacade&&this._videoElementFacade.domElement()||void 0}},{key:"width",get:function(){return this.videoElement&&this.videoElement.offsetWidth}},{key:"height",get:function(){return this.videoElement&&this.videoElement.offsetHeight}}]),e}();return D}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationError=t.default=void 0;var r=i(n(647)),o=i(n(298));function i(e){return e&&e.__esModule?e:{default:e}}t.default=r.default,t.CancellationError=o.default},function(e,t,n){"use strict";(function(t){const r=n(21);e.exports=()=>t.all(r.subscribers.where().map((e=>{if(e.isAudioBlocked())return e._.unblockAudio()})))}).call(this,n(0))},function(e,t,n){"use strict";e.exports=e=>"P2P"===e?"RELAYED":"ROUTED"},function(e,t,n){"use strict";(function(t){var r=n(3),o=r(n(12)),i=r(n(13)),s=r(n(20));const a=n(57),c=n(148),u=n(7),l=n(56),d=n(62),p=n(275),h=n(48),f=n(50),m=n(666),g=n(19),b=n(259),y=n(195),v=n(166),w=v.CancellationError,x=v.default,S=n(2),E=n(676),T=n(307),C=n(75),_=n(26),I=n(6),k=n(106),R=n(126),N=n(27),O=n(74),A=n(155),D=n(677),L=n(165)(),P=n(678),V=n(679),M=n(167),F=n(24)().getInputMediaDevices,W=n(680),Z=n(269),B=n(306),G=n(681),U=n(682),$=n(290),X=$.setVideoContentHint,j=$.getVideoContentHint,z=n(168);e.exports=function(e){void 0===e&&(e={});let r=e,v=(0,s.default)({},r);["processPubOptions"].forEach((e=>{c(v[e],`${e} dependency must be injected into Publisher`)}));const $=v.AnalyticsHelper||N,H=v.calculateCapableSimulcastStreams||n(253),Y=v.createChromeMixin||n(281)(),K=v.deviceHelpers||n(24)(),J=v.EnvironmentLoader||n(146),q=v.Errors||n(4),Q=v.Events||n(23)(),ee=v.ExceptionCodes||n(8),te=v.interpretPeerConnectionError||n(163)(),ne=v.IntervalRunner||O,re=v.logging||n(1)("Publisher"),oe=v.Microphone||n(291)(),ie=v.otError||n(11)(),se=v.OTErrorClass||n(22),ae=v.OTHelpers||n(5),ce=v.parseIceServers||n(100).parseIceServers,ue=v.PUBLISH_MAX_DELAY||n(267),le=v.PublisherPeerConnection||n(295)(),de=v.PublishingState||n(297)(),pe=v.StreamChannel||n(150),he=v.systemRequirements||n(153),fe=v.VideoOrientation||n(151)(),me=v.WidgetView||L,ge=v.global||(void 0!==typeof window?window:__webpack_require__.g),be=v.createSendMethod||n(304),ye=v.setEncodersActiveState||E,ve=v.MediaProcessor||n(683),we=v.processPubOptions;return function(e){var n=this;void 0===e&&(e={});let r=I({});const c=new y,v=e=>c.get(e);I(this);const E=A();let N,O,L,xe,Se,Ee,Te,Ce,_e,Ie,ke,Re,Ne=new $;he.check()||he.upgrade();let Oe,Ae,De,Le=!1;const Pe={},Ve={};let Me,Fe,We;const Ze=()=>this.session||We||{isConnected:()=>!1},Be=[],Ge=new ve;function Ue(){return{connectionId:Ze().isConnected()?Ze().connection.connectionId:null,streamId:O,widgetType:"Publisher"}}this.once("publishComplete",(e=>{var t;e||(Le=!0,Oe=(null==(t=this.session)?void 0:t.sessionInfo.p2pEnabled)?"P2P":"MANTIS")})),this.on("sourceStreamIdChanged",(e=>{Oe=e})),this.on("audioAcquisitionProblem",(e=>{let t=e.method;pt("publisher:audioAcquisitionProblem","Event",{didPublishComplete:Le,method:t})}));const $e=e=>{const t=Object.keys(q).map((e=>q[e])),n=ie(t.indexOf(e.name)>-1?e.name:q.MEDIA_ERR_ABORTED,e,ee.UNABLE_TO_PUBLISH);re.error(`onStreamAvailableError ${n.name}: ${n.message}`),Ee.set("Failed"),N&&(N.destroy(),N=null);const r={failureReason:"GetUserMedia",failureCode:ee.UNABLE_TO_PUBLISH,failureMessage:`OT.Publisher failed to access camera/mic: ${n.message}`};ht("Failure",{},r),se.handleJsException({error:n,errorMsg:r.failureReason,code:r.failureCode,target:this,analytics:Ne}),this.trigger("publishComplete",n)},Xe=e=>{const t=l(e);t.code=ee.UNABLE_TO_PUBLISH,re.error(`OT.Publisher.onScreenSharingError ${t.message}`),Ee.set("Failed"),t.message=`Screensharing: ${t.message}`,this.trigger("publishComplete",t),ht("Failure",{},{failureReason:"ScreenSharing",failureMessage:t.message}),N&&(N.destroy(),N=null)},je=e=>{const t=l(e);let n;try{n=window.self!==window.top}catch(e){}"https:"!==(void 0!==typeof window?window:__webpack_require__.g).location.protocol&&(rt?t.message+=" Note: https:// is required for screen sharing.":Z()&&"localhost"!==ae.env.hostName&&(t.message+=` Note: ${ae.env.name} requires HTTPS for camera and microphone access.`)),n&&!rt&&(t.message+=" Note: Check that the iframe has the allow attribute for camera and microphone"),re.error(t.message),Ee.set("Failed"),t.message=`OT.Publisher Access Denied: Permission Denied: ${t.message}`,t.code=ee.UNABLE_TO_PUBLISH,N&&(N.destroy(),N=null),ht("Cancel",{reason:"AccessDenied"}),this.trigger("publishComplete",t),this.dispatchEvent(new R(_.ACCESS_DENIED))},ze=e=>{throw e.name===q.USER_MEDIA_ACCESS_DENIED||e.name===q.NOT_SUPPORTED&&e.originalMessage.match(/Only secure origins/)?je(e):we.isScreenSharing?Xe(e):$e(e),e},He=()=>{pt("accessDialog","Opened"),this.dispatchEvent(new R(_.ACCESS_DIALOG_OPENED,!0))},Ye=()=>{pt("accessDialog","Closed"),this.dispatchEvent(new R(_.ACCESS_DIALOG_CLOSED,!1))},Ke=g(),Je={};let qe=!1,Qe={},et=!1,tt=we(e,"OT.Publisher",(()=>Ee&&Ee.isDestroyed()));tt.on({accessDialogOpened:He,accessDialogClosed:Ye});const nt=tt,rt=nt.isScreenSharing,ot=nt.isCustomAudioTrack,it=nt.isCustomVideoTrack,st=nt.shouldAllowAudio,at=nt.properties,ct=nt.getUserMedia;function ut(e){e.forEach((e=>e()))}Object.defineProperty(this,"loudness",{writable:!1,value:void 0,configurable:!0});const lt=(e,t,n)=>e.addEventListener?(e.addEventListener(t,n),()=>e.removeEventListener(t,n)):()=>{};(function(){const e=[];r.on("streamDestroy",(()=>ut(e))),r.on("streamChange",(()=>{ut(e);const t=L.getAudioTracks().map((e=>lt(e,"ended",(()=>{et=!0,this.trigger("audioAcquisitionProblem",{method:"trackEndedEvent"})}))));e.splice(0,e.length,...t)}))}).call(this),function(){const e=[];r.on("streamDestroy",(()=>ut(e))),r.on("streamChange",(()=>{ut(e),dt()||L.getTracks().forEach((t=>{t.addEventListener&&(e.push(lt(t,"mute",(()=>{jt()}))),e.push(lt(t,"unmute",(()=>{jt()}))))}))}))}();const dt=()=>{if(rt)return!0;const e=["text","detail"].includes(at.videoContentHint);return it&&e},pt=e.logAnalyticsEvent||((e,t,n,r,o)=>{let i=u({action:e,variation:t,payload:n},Ue(),r);"Failure"===t&&(i=u(Qe,i)),Qe=h(i,"sessionId","connectionId","partnerId"),Ne.logEvent(i,o)}),ht=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={}),"Non-fatal"!==n.failureReason&&("Attempt"===e&&(Ce=(new Date).getTime(),Fe&&(Fe.stop(),re.error("_connectivityAttemptPinger should have been cleaned up")),Fe=new ne((()=>{pt("Publish","Attempting",t,(0,s.default)({},Ue(),n))}),.2,6)),"Failure"===e||"Success"===e||"Cancel"===e?(Fe?(Fe.stop(),Fe=void 0):re.warn(`Received connectivity event: "${e}" without "Attempt"`),pt("Publish",e,(0,s.default)({videoInputDevices:Ie,audioInputDevices:_e,videoInputDeviceCount:Ie?Ie.length:void 0,audioInputDeviceCount:_e?_e.length:void 0,selectedVideoInputDeviceId:ke,selectedAudioInputDeviceId:Re},t),(0,s.default)({attemptDuration:(new Date).getTime()-Ce},n))):pt("Publish",e,t,n))},ft=(e,t)=>{pt("ICERestart",e,t)},mt=(e,t,n)=>{"Attempt"===t?(Pe[e]=(new Date).getTime(),pt(e,t,n)):"Failure"!==t&&"Success"!==t||pt(e,t,n,{attemptDuration:(new Date).getTime()-Pe[e]})},gt=function(e,t){void 0===t&&(t={}),mt("RoutedToRelayedTransition",e,t)},bt=function(e,t){void 0===t&&(t={}),mt("RelayedToRoutedTransition",e,t)},yt=f((()=>{pt("GetStats","Called")})),vt=f((()=>{pt("GetRtcStatsReport","Called")})),wt=t=>{let n=t.parsedStats,r=t.simulcastEnabled,o=t.remoteConnectionId,i=t.peerId,s=t.sourceStreamId;const a={peerId:i,widgetType:"Publisher",connectionId:this.session&&this.session.isConnected()?this.session.connection.connectionId:null,streamId:O,width:N.width,height:N.height,audioTrack:L&&L.getAudioTracks().length>0,hasAudio:Xt(),publishAudio:at.publishAudio,videoTrack:L&&L.getVideoTracks().length>0,hasVideo:$t(),publishVideo:at.publishVideo,audioSource:ot?"Custom":void 0,duration:xe?Math.round(((new Date).getTime()-xe.getTime())/1e3):0,remoteConnectionId:o,scalableVideo:r,sourceStreamId:z(s)};let c=(rt&&it?"Screen":rt&&e.videoSource)||it&&"Custom"||at.constraints.video&&"Camera"||null;p(c)&&(c=m(c)),a.videoSource=c;const l={videoWidth:this.videoWidth(),videoHeight:this.videoHeight()},d=u({},a,n,l);Ne.logQOS(d),this.trigger("qos",d)},xt=()=>{let e,t;const n=N&&N.video();return at.videoDimensions?(e=Math.min(at.videoDimensions.width,n&&n.videoWidth()||640),t=Math.min(at.videoDimensions.height,n&&n.videoHeight()||480)):(e=n&&n.videoWidth()||640,t=n&&n.videoHeight()||480),{width:e,height:t}},St=()=>{Ee.isDestroyed()?N&&N.destroyVideo():(re.debug("OT.Publisher.onLoaded; resolution:",`${this.videoWidth()}x${this.videoHeight()}`),Ee.set("MediaBound"),M().catch(re.error),N.loading(!!this.session&&!this.stream),qe=!0)},Et=e=>{const t=ie(q.CONNECT_FAILED,e,ee.P2P_CONNECTION_FAILED);t.message=`OT.Publisher PeerConnection Error: ${t.message}`,ht("Failure",{},{failureReason:"PeerConnectionError",failureCode:t.code,failureMessage:t.message}),Ee.set("Failed"),this.trigger("publishComplete",t),se.handleJsException({error:t,target:this,analytics:Ne})},Tt=()=>{L&&(r.emit("streamDestroy"),ge.MediaStreamTrack&&ge.MediaStreamTrack.prototype.stop?L.getTracks().forEach((e=>e.stop())):L.stop())},Ct=()=>{const e=S.isiOS&&S.iOSVersion>=15,t=L.getVideoTracks()[0];e&&t&&document.addEventListener("visibilitychange",(()=>{!document.hidden&&N&&N.rebindSrcObject()}))},_t=()=>{const e=S.isiOS&&S.iOSVersion>=13.3,t=L.getAudioTracks()[0];e&&t&&(t.onmute=()=>yn(t),t.onunmute=()=>vn(t))},It=function(){var e=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={muted:!0},N){e.next=3;break}throw new Error("Cannot bind video after widget view has been destroyed");case 3:return e.abrupt("return",N.bindVideo(L,t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),kt=function(){var e=(0,i.default)(o.default.mark((function e(t){var i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re.debug("OT.Publisher.onStreamAvailable"),Ee.set("BindingMedia"),void 0!==at.videoContentHint&&X(t,at.videoContentHint),Tt(),L=t,!at.videoFilter){e.next=14;break}return e.prev=6,e.next=9,n.applyVideoFilter(at.videoFilter);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),re.error(`Error applying video filter: ${e.t0}`);case 14:r.emit("streamChange"),_t(),Ct(),ke=(i=(e,t)=>{let n;return e.forEach((e=>{if(e.deviceId)n=e.deviceId.toString();else if(e.label&&t){const r=d(t,(t=>t.label===e.label));r&&(n=r.deviceId)}})),n})(L.getVideoTracks(),Ie),Re=i(L.getAudioTracks(),_e),Se=new oe(L,!at.publishAudio),sn(),nn(),n.accessAllowed=!0,n.dispatchEvent(new R(_.ACCESS_ALLOWED,!1));case 25:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}(),Rt=e=>{let t,n;re.error("OT.Publisher.onPublishingTimeout"),et?(t=q.CHROME_MICROPHONE_ACQUISITION_ERROR,n="Unable to publish because your browser failed to get access to your microphone. You may need to fully quit and restart your browser to get it to work. See https://bugs.chromium.org/p/webrtc/issues/detail?id=4799 for more details."):(t=q.TIMEOUT,n="Could not publish in a reasonable amount of time");const r={failureReason:"ICEWorkflow",failureCode:ee.UNABLE_TO_PUBLISH,failureMessage:"OT.Publisher failed to publish in a reasonable amount of time (timeout)"};ht("Failure",{},r),se.handleJsException({errorMsg:r.failureReason,code:r.failureCode,target:this,analytics:Ne}),e.isConnected()&&this.streamId&&e._.streamDestroy(this.streamId),this.disconnect(),this.session=null,Ee.isDestroyed()||Ee.set("MediaBound"),this.trigger("publishComplete",ie(t,new Error(n),ee.UNABLE_TO_PUBLISH))},Nt=e=>{const t=ie(q.MEDIA_ERR_DECODE,e,ee.UNABLE_TO_PUBLISH);t.message=`OT.Publisher while playing stream: ${t.message}`,re.error("OT.Publisher.onVideoError:",t),pt("stream",null,{reason:t.message});const n=Ee.isAttemptingToPublish();Ee.set("Failed"),n?this.trigger("publishComplete",t):this.trigger("error",t.message),se.handleJsException({error:t,target:this,analytics:Ne})};this._setWebRTCStream=e=>{L=e},this._setCurrentVideoFilter=e=>{un=e},this._getCurrentVideoFilter=()=>un,this._removePeerConnection=e=>{const t=v(e).peerConnectionId;delete Je[t],e.destroy()},this._removeSubscriber=e=>{this.session.sessionInfo.isAdaptiveEnabled&&"P2P"===Oe&&this._.startRelayedToRoutedTransition(),Mt(e).then((e=>{e.forEach((e=>this._removePeerConnection(e)))}))};const Ot=e=>{const t=v(e),n=t.remoteSubscriberId,r=t.peerConnectionId;re.debug("Subscriber has been disconnected from the Publisher's PeerConnection"),pt("disconnect","PeerConnection",{subscriberConnection:r}),this._removeSubscriber(n)},At=function(){var e=(0,i.default)(o.default.mark((function e(t,r){var i,s,a,c,u,l,d,p,h,f;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.reason,s=r.prefix,a=n.session&&n.session.sessionInfo,!("ICEWorkflow"===s&&a&&a.reconnection&&qe)){e.next=5;break}return re.debug("Ignoring peer connection failure due to possibility of reconnection."),e.abrupt("return");case 5:return c=v(t)||{},u=c.remoteConnectionId,l=void 0===u?"(not found)":u,d=c.peerConnectionId,p=te(void 0,i,s,l,"Publisher"),h={hasRelayCandidates:t&&t.hasRelayCandidates()},f={failureReason:s||"PeerConnectionError",failureCode:p.code,failureMessage:p.message},Ee.isPublishing()?f.reason="Non-fatal":n.trigger("publishComplete",p),ht("Failure",h,f),se.handleJsException({errorMsg:`OT.Publisher PeerConnection Error: ${i}`,code:p.code,target:n,analytics:Ne}),e.next=14,Je[d];case 14:e.sent.destroy(),delete Je[d];case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Dt=e=>this.session.sessionInfo.isAdaptiveEnabled&&"P2P"===e.getSourceStreamId(),Lt=function(){var e=(0,i.default)(o.default.mark((function e(t,r){var i,s,a,c,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.session.sessionInfo.isAdaptiveEnabled,s=r.getSourceStreamId(),Ve[s]=t,"disconnected"===t&&setTimeout((()=>{const e=n.session._.isSocketReconnecting,t=n.session._.getSocket().is("connected")&&!e();if("disconnected"===Ve[s]&&t){const e=v(r).remoteConnectionId;ft("Attempt",{remoteConnectionId:e}),r.iceRestart()}}),2e3),"connected"!==t){e.next=14;break}if(clearTimeout(Me),!i){e.next=14;break}return e.next=9,Zt();case 9:return a=e.sent.iceConnectionStateIsConnected(),e.next=12,Bt();case 12:c=e.sent.iceConnectionStateIsConnected(),a&&c&&Yt();case 14:if("failed"!==t){e.next=21;break}if(u=n.session._.isSocketReconnecting,n.session._.getSocket().is("connected")&&!u()){e.next=20;break}return e.abrupt("return");case 20:i&&s===Oe&&"P2P"===s?n._.startRelayedToRoutedTransition():Me=setTimeout((()=>{n.session._.streamDestroy(n.streamId,s)}),5e3);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Pt=n=>{let r=n.peerConnectionId,o=n.send,i=n.log,s=n.logQoS,a=n.sourceStreamId;if(Ft(r))return t.reject(new Error("PeerConnection already exists"));const c=H({isChromiumEdge:ae.env.isChromiumEdge,browserName:ae.env.name,isScreenSharing:rt,isCustomVideoTrack:it,sessionInfo:this.session.sessionInfo,constraints:at.constraints,videoDimensions:xt(),capableSimulcastScreenshare:at.capableSimulcastScreenshare});return Je[r]=t.all([this.session._.getIceConfig(),this.session._.getVideoCodecsCompatible(L)]).then((n=>{let r=n[0],u=n[1],l=L;if(!u){l=L.clone();const e=l.getVideoTracks()[0];e&&(e.stop(),l.removeTrack(e))}const d=new le({iceConfig:r,sendMessage:(e,t)=>{"offer"===e&&this.trigger("connected"),o(e,t)},webRTCStream:l,channels:at.channels,capableSimulcastStreams:c,overrideSimulcastEnabled:e._enableSimulcast,logAnalyticsEvent:i,offerOverrides:{enableDtx:at.enableDtx,enableStereo:at.enableStereo,audioBitrate:at.audioBitrate,priorityVideoCodec:at._priorityVideoCodec||this.session.sessionInfo.priorityVideoCodec,codecFlags:at._codecFlags||this.session._.getCodecFlags()},answerOverrides:this.session.sessionInfo.p2pEnabled?void 0:{audioBitrate:at.audioBitrate},sourceStreamId:a,isP2pEnabled:this.session.sessionInfo.p2pEnabled});return d.on({disconnected:()=>Ot(d),error:e=>{let t=e.reason,n=e.prefix;return At(d,{reason:t,prefix:n})},qos:s,iceRestartSuccess:()=>(e=>{const t=v(e).remoteConnectionId;ft("Success",{remoteConnectionId:t})})(d),iceRestartFailure:()=>(e=>{const t=v(e).remoteConnectionId;ft("Failure",{reason:"ICEWorkflow",message:"OT.Publisher PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.",remoteConnectionId:t})})(d),iceConnectionStateChange:e=>Lt(e,d),audioAcquisitionProblem:()=>{et=!0,this.trigger("audioAcquisitionProblem",{method:"getStats"})}}),d.once("connected",(()=>(e=>{Dt(e)&&gt("Success")})(d))),new t(((e,t)=>{const n=e=>{t(e)};d.once("error",n),d.init(Te,(r=>{if(r)return t(r);d.off("error",n),e(d)}))}))})),Ft(r)},Vt=()=>t.all(Object.keys(Je).map(Ft)),Mt=e=>Vt().then((t=>t.filter((t=>v(t).remoteSubscriberId===e)))),Ft=e=>Je[e],Wt=e=>{const t=Object.keys(Je).find((t=>t.endsWith(`~${e}`)));return Je[t]},Zt=()=>Wt("MANTIS"),Bt=()=>Wt("P2P");let Gt=Y(this,{name:at.name,publishAudio:at.publishAudio,publishVideo:at.publishVideo,audioSource:at.audioSource,showControls:at.showControls,shouldAllowAudio:st,logAnalyticsEvent:pt});const Ut=()=>{this.off("publishComplete",jt),Gt&&Gt.reset(),E.releaseAll(),this.disconnect(),Se=null,Tt(),L=null,N&&(N.destroy(),N=null),this.session&&this._.unpublishFromSession(this.session,"reset"),this.id=null,this.stream=null,qe=!1,this.session=null,Ee.isDestroyed()||Ee.set("NotPublishing")},$t=()=>{if(!L||0===L.getVideoTracks().length)return!1;const e=["text","detail"].includes(at.videoContentHint),t=it&&e,n=ae.env.isChrome&&(rt||t);return L.getVideoTracks().reduce(((e,t)=>e&&(!t.muted||!!n)&&t.enabled&&"ended"!==t.readyState),at.publishVideo)},Xt=()=>!(!L||0===L.getAudioTracks().length)&&L.getAudioTracks().length>0&&L.getAudioTracks().reduce(((e,t)=>e&&!t.muted&&t.enabled&&"ended"!==t.readyState),at.publishAudio),jt=e=>{N&&(N.audioOnly(!$t()),N.showPoster(!$t())),Gt&&Gt.setAudioOnly(!$t()&&Xt()),this.stream?(this.stream.setChannelActiveState("audio",Xt(),e),this.stream.setChannelActiveState("video",$t(),e)):this.once("publishComplete",jt)},zt=(e,n)=>{let r=!1;if("function"==typeof e?n=e:r="rtcStatsReport"===e,r?vt():yt(),!r||B)Vt().then((e=>{if(0===e.length){const e=ee.PEER_CONNECTION_NOT_CONNECTED;throw ie(q.PEER_CONNECTION_NOT_CONNECTED,new Error(se.getTitleByCode(e)),e)}return e})).then((e=>this.session.sessionInfo.isAdaptiveEnabled?e.filter((e=>e.getSourceStreamId()===Oe)):e)).then((e=>t.all(e.map((e=>T(r?e.getRtcStatsReport.bind(e):e.getStats.bind(e))().then((t=>({pc:e,stats:t})))))))).then((e=>{const t=xe?xe.getTime():Date.now(),o=e.map((e=>{let n=e.pc,o=e.stats;const i=v(n),s=i.remoteConnectionId,a=i.remoteSubscriberId;return u(s.match(/^symphony\./)?{}:{subscriberId:a,connectionId:s},r?{rtcStatsReport:o}:{stats:C.normalizeStats(o,!1,t)})}));n(null,o)})).catch(n);else{const e=ee.GET_RTC_STATS_REPORT_NOT_SUPPORTED;n(ie(q.GET_RTC_STATS_REPORT_NOT_SUPPORTED,new Error(se.getTitleByCode(e)),e))}},Ht=(e,t)=>{this.session._.streamCreate(at.name||"",this.streamId,at.audioFallbackEnabled,Be,at.minVideoBitrate,e,t)},Yt=function(){var e=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return De=!1,e.next=3,Zt();case 3:if(!(t=e.sent)){e.next=16;break}return n.trigger("sourceStreamIdChanged","P2P"),e.next=8,k(3e3);case 8:if(!De){e.next=11;break}return re.debug("Cancelling stop sending RTP to MANTIS."),e.abrupt("return");case 11:return e.next=13,t.changeMediaDirectionToInactive();case 13:if(!(ae.env.isFirefox&&ae.env.version<96)){e.next=16;break}return e.next=16,Jt();case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Kt=function(){var e=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return De=!0,e.next=3,Zt();case 3:if(!(t=e.sent)){e.next=9;break}return e.next=7,t.changeMediaDirectionToRecvOnly();case 7:Ae&&clearTimeout(Ae),n.trigger("sourceStreamIdChanged","MANTIS");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Jt=function(){var e=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zt();case 2:(t=e.sent)&&(Ae=setTimeout((0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("P2P"!==Oe){e.next=9;break}return e.next=3,t.changeMediaDirectionToRecvOnly();case 3:return e.next=5,k(3e3);case 5:return e.next=7,t.changeMediaDirectionToInactive();case 7:return e.next=9,Jt();case 9:case"end":return e.stop()}}),e)}))),3e4));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();this.publish=e=>(re.debug("OT.Publisher: publish"),(Ee.isAttemptingToPublish()||Ee.isPublishing())&&Ut(),Ee.set("GetUserMedia"),at.style&&this.setStyle(at.style,null,!0),at.classNames="OT_root OT_publisher",J.onLoad((()=>{re.debug("OT.Publisher: publish: environment loaded"),N=new me(e,(0,s.default)({},at,{widgetType:"publisher"})),st&&P({publisher:this,widgetView:N}),N.on("error",Nt),this.id=N.domId(),this.element=N.domElement,this.element&&Gt&&Gt.init(N),N.on("videoDimensionsChanged",((e,t)=>{this.stream&&this.stream.setVideoDimensions(t.width,t.height),this.dispatchEvent(new Q.VideoDimensionsChangedEvent(this,e,t))})),N.on("mediaStopped",(e=>{const t=new Q.MediaStoppedEvent(this,e);if(this.dispatchEvent(t),!t.isDefaultPrevented())if(e){const t=String(e.kind).toLowerCase();"audio"===t?nn():"video"===t?sn():re.warn(`Track with invalid kind has ended: ${e.kind}`)}else this.session?this._.unpublishFromSession(this.session,"mediaStopped"):this.destroy("mediaStopped")})),N.on("videoElementCreated",(e=>{const t=new Q.VideoElementCreatedEvent(e);this.dispatchEvent(t)})),ct().catch(ze).then(function(){var e=(0,i.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _e=tt.audioDevices,Ie=tt.videoDevices,(r=!!at.videoFilter)&&(cn=G(t,Ie)),e.next=6,kt(t);case 6:return at.publishVideo||n._toggleVideo(at.publishVideo),rt||it||r||(cn=G(t,Ie)),e.abrupt("return",It().catch((e=>{if(!(e instanceof w))throw e})).then((()=>{St(),Ee.isDestroyed()||(n.trigger("initSuccess"),n.trigger("loaded",n))}),(e=>{re.error(`OT.Publisher.publish failed to bind video: ${e}`),Et(e)})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),this),this._setScalableValues=function(){var e=(0,i.default)(o.default.mark((function e(t,n){var r,i,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt().then((e=>e[0].getSenders().filter((e=>"video"===e.track.kind))));case 2:return r=e.sent,i=r[0],(s=i.getParameters()).encodings.forEach(((e,r)=>{e[t]=n[r]})),e.next=8,i.setParameters(s);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this._setScalableFramerates=function(){var e=(0,i.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=en(t))||!qt(r)){e.next=4;break}return e.next=4,n._setScalableValues("maxFramerate",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._setScalableVideoLayers=function(){var e=(0,i.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=en(t))||!Qt(r)){e.next=4;break}return e.next=4,n._setScalableValues("scaleResolutionDownBy",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const qt=e=>{let t=0;return e.every((e=>!(15!==e&&30!==e||e<t||(t=e,0))))},Qt=e=>{let t=17;return e.every((e=>!(e<1||e>=t||(t=e,0))))},en=e=>{let t;if("string"!=typeof e)return t;const n=e.split(":");return 0===n.length||n.length>3?t:n.every((e=>!isNaN(e)))?(t=n.map((e=>parseInt(e,10))).reverse(),t):t},tn=e=>L&&L[`get${b(e)}Tracks`]().length>0&&L[`get${b(e)}Tracks`]().every((e=>"ended"!==e.readyState)),nn=e=>{const t=tn("audio")&&at.publishAudio;Gt&&Gt.setMuted(!t),Se&&Se.muted(!t),jt(e)};let rn;this.publishAudio=e=>{pt("publishAudio","Attempt",{publishAudio:e}),at.publishAudio=e;try{nn(),pt("publishAudio","Success",{publishAudio:e})}catch(e){pt("publishAudio","Failure",{message:e.message})}return this};let on=!1;const sn=()=>{const e=tn("video")&&at.publishVideo;"Chrome"===S.name&&S.version>=69&&(0,i.default)(o.default.mark((function t(){var n,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return rn&&rn.cancel(),rn=new x,n=rn,t.next=5,Vt();case 5:r=t.sent,n.isCanceled()||r.forEach((t=>{ye(t,e)}));case 7:case"end":return t.stop()}}),t)})))(),L&&L.getVideoTracks().forEach((t=>{t.enabled=e,t.isCreatedCanvas&&(t.enabled=!1)})),jt()},an=function(){var e=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ge.getOriginalVideoTrack().stop(),e.next=3,Ge.destroy();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();let cn,un;this._toggleVideo=V(function(){var e=(0,i.default)(o.default.mark((function e(t){var n,i,s,a,c,u,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(rt||it||on)){e.next=2;break}return e.abrupt("return");case 2:if(n=fn()){e.next=5;break}throw ie(q.NOT_SUPPORTED,new Error("Publisher._toggleVideo cannot toggleVideo when you have no video source."));case 5:if("ended"!==n.readyState){e.next=8;break}return on=!0,e.abrupt("return");case 8:i=at.videoDimensions,s=void 0===i?xt():i,e.prev=9,a=W(s),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(9),e.abrupt("return");case 16:return e.next=18,mn();case 18:if(c=e.sent,t&&ae.env.isAndroid&&ae.env.isChrome&&n&&n.stop&&n.stop(),t){e.next=27;break}try{cn=c.find((e=>e.label===n.label)).deviceId}catch(e){}if(!(u=Ge.getVideoFilter())){e.next=27;break}return un=u,e.next=27,an();case 27:if(!cn||-1!==c.findIndex((e=>e.deviceId===cn))){e.next=29;break}throw ie(q.NO_DEVICES_FOUND,new Error("Previous device no longer available - deviceId not found"));case 29:if(r.emit("streamDestroy"),l=a,!t){e.next=43;break}return e.next=34,hn(cn);case 34:if(l=e.sent,!un){e.next=43;break}return e.next=38,Ge.setVideoFilter(un);case 38:return e.next=40,Ge.setMediaStream(L);case 40:return e.next=42,Ge.setVideoTrack(l);case 42:l=e.sent;case 43:return e.prev=43,e.next=46,pn(n,l);case 46:e.next=51;break;case 48:throw e.prev=48,e.t1=e.catch(43),e.t1;case 51:case"end":return e.stop()}}),e,null,[[9,13],[43,48]])})));return function(t){return e.apply(this,arguments)}}()),this.publishVideo=e=>{pt("publishVideo","Attempt",{publishVideo:e}),at.publishVideo=e;try{this._toggleVideo(at.publishVideo),sn(),pt("publishVideo","Success",{publishVideo:e})}catch(e){pt("publishVideo","Failure",{message:e.message})}return this},this.setVideoContentHint=e=>X(L,e),this.getVideoContentHint=()=>j(L),this.destroy=function(e,t){return Ee.isAttemptingToPublish()&&this.session&&ht("Cancel",{reason:"destroy"}),Ee.isDestroyed()||(Ee.set("Destroyed"),Ut(),tt&&(tt.off(),tt=null),Gt&&(Gt.destroy(),Gt=null),r&&(r.off(),r=null),!0!==t&&this.dispatchEvent(new Q.DestroyedEvent(_.PUBLISHER_DESTROYED,this,e)),this.off()),this},this.disconnect=()=>{Object.keys(Je).forEach((e=>{const t=Ft(e);delete Je[e],t.then((e=>this._removePeerConnection(e)))}))},this.processMessage=(e,t,n)=>{const r=a(n,"params.subscriber",t).replace(/^INVALID-STREAM$/,t),o=a(n,"content.peerId"),i=a(n,"content.sourceStreamId","MANTIS"),u=`${r}~${o}~${i}`;re.debug(`OT.Publisher.processMessage: Received ${e} from ${t} for ${u}`),re.debug(n);const l=Ft(u),d=()=>{const a=be({socket:this.session._.getSocket(),uri:n.uri,content:{peerId:o,sourceStreamId:i}});Pt({peerConnectionId:u,send:a,log:function(e,t,n,r,a){void 0===r&&(r={});const c=(0,s.default)({peerId:o,sourceStreamId:z(i)},r);return pt(e,t,n,c,a)},logQoS:e=>{i===Oe&&wt((0,s.default)({},e,{peerId:o,remoteConnectionId:t,sourceStreamId:i}))},sourceStreamId:i}).then((s=>(((e,t)=>{c.set(e,t)})(s,{remoteConnectionId:t,remoteSubscriberId:r,peerId:o,sourceStreamId:i,peerConnectionId:u}),s.processMessage(e,n),null))).catch((e=>{re.error("OT.Publisher failed to create a peerConnection",e)}))},p=this.session.sessionInfo.isAdaptiveEnabled;if("unsubscribe"===e)this._removeSubscriber(r);else if(l)l.then((t=>t.processMessage(e,n)));else{if(p&&Bt())return;d()}},this.getImgData=function(){if(!qe)return re.error("OT.Publisher.getImgData: Cannot getImgData before the Publisher is publishing."),null;const e=N&&N.video();return e?e.imgData():null};const ln=e=>{e.getSenders().forEach((e=>"audio"===e.track.kind&&L.getAudioTracks().length?e.replaceTrack(L.getAudioTracks()[0]):"video"===e.track.kind&&L.getVideoTracks().length?e.replaceTrack(L.getVideoTracks()[0]):void 0))},dn=function(e){return void 0===e&&(e=ln),Vt().then((n=>(n.map(e),t.all([]))))};{let e=0;const t=function(){var t=(0,i.default)(o.default.mark((function t(){var n,i,s,a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!ae.env.isLegacyEdge&&ge.RTCRtpSender&&"function"==typeof ge.RTCRtpSender.prototype.replaceTrack){t.next=2;break}throw ie(q.UNSUPPORTED_BROWSER,new Error("Publisher#cycleVideo is not supported in your browser."),ee.UNABLE_TO_PUBLISH);case 2:if(!it&&!rt){t.next=4;break}throw ie(q.NOT_SUPPORTED,new Error("Publisher#cycleVideo: The publisher is not using a camera video source"));case 4:if(n=fn()){t.next=7;break}throw ie(q.NOT_SUPPORTED,new Error("Publisher#cycleVideo cannot cycleVideo when you have no video source."));case 7:return e+=1,t.next=10,mn();case 10:if((i=t.sent).filter((e=>e.label!==n.label)).length>0)for(;i[e%i.length].label===n.label;)e+=1;return r.emit("streamDestroy"),s=i[e%i.length],a=s.deviceId,t.next=18,En(a);case 18:return t.abrupt("return",cn);case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();this.cycleVideo=V((0,i.default)(o.default.mark((function e(){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:n=e.sent,e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),re.error(`Publisher#cycleVideo: could not cycle video: ${e.t0}`),e.t0;case 10:return e.abrupt("return",{deviceId:n});case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))))}const pn=function(){var e=(0,i.default)(o.default.mark((function e(i,s){var a,c,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt();case 2:return a=e.sent,e.next=5,t.all(a.map((e=>e.findAndReplaceTrack(i,s))));case 5:if(L.addTrack(s),L.removeTrack(i),i&&i.stop){try{c=s instanceof MediaStreamTrackGenerator}catch(e){c=!1}c||i.stop()}"Firefox"!==ae.env.name&&"Safari"!==ae.env.name||(n.videoElement().srcObject=null,n.videoElement().srcObject=L),(u=N&&N.video())&&u.refreshTracks(),r.emit("streamChange"),sn();case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),hn=function(){var t=(0,i.default)(o.default.mark((function t(n){var r,i,s;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=l(e)).audioSource=null,r.videoSource=n,tt=we(r,"OT.Publisher.getTrackFromDeviceId",(()=>Ee&&Ee.isDestroyed())),tt.on({accessDialogOpened:He,accessDialogClosed:Ye}),i=tt.getUserMedia,t.prev=6,t.next=9,i();case 9:s=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),re.error(t.t0);case 15:return t.abrupt("return",s&&s.getVideoTracks()[0]);case 16:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),fn=()=>L.getVideoTracks()[0],mn=function(){var e=(0,i.default)(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.shouldAskForDevices();case 2:if(t=e.sent,n=t.videoDevices,t.video&&n&&n.length){e.next=6;break}throw ie(q.NO_DEVICES_FOUND,new Error("No video devices available"),ee.UNABLE_TO_PUBLISH);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),gn=(e,t)=>{t&&L.addTrack(t),e&&L.removeTrack(e);const n=N&&N.video();n&&n.refreshTracks(),Gt&&(t&&!e&&Gt.addAudioTrack(),e&&!t&&Gt.removeAudioTrack()),e&&e.stop&&e.stop(),t&&(nn(),Se=new oe(L,!at.publishAudio)),r.emit("streamChange"),jt()},bn=function(){var e=(0,i.default)(o.default.mark((function e(t){var r,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getSettings().deviceId,e.prev=1,e.next=4,n.setAudioSource(r);case 4:(i=L.getAudioTracks()[0])&&(i.onmute=()=>yn(i),i.onunmute=()=>vn(i)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),re.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),yn=e=>{let t=!1;at.publishVideo&&document.hidden&&(t=!0,this.publishVideo(!1));const r=function(){var s=(0,i.default)(o.default.mark((function i(){return o.default.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(document.hidden){o.next=5;break}return o.next=3,bn(e);case 3:t&&n.publishVideo(!0),document.removeEventListener("visibilitychange",r);case 5:case"end":return o.stop()}}),i)})));return function(){return s.apply(this,arguments)}}();document.addEventListener("visibilitychange",r)},vn=e=>{Xt()&&($t()?this.videoElement().pause():bn(e)),this.session.trigger("gsmCallEnded")};let wn;const xn=function(){var r=(0,i.default)(o.default.mark((function r(i){var s,a,c,u,d,p,h,f,m,g,b,y;return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s="Operation did not succeed due to a new request.",wn&&wn.cancel(),wn=new x,a=wn,c=e=>{if(a.isCanceled())throw e.getTracks((e=>e.stop())),ie(q.CANCEL,new Error(s));return xn(e.getAudioTracks()[0])},!ae.env.isLegacyEdge&&ge.RTCRtpSender&&"function"==typeof ge.RTCRtpSender.prototype.replaceTrack){r.next=7;break}throw ie(q.UNSUPPORTED_BROWSER,new Error("Publisher#setAudioSource is not supported in your browser."));case 7:if(u=n.getAudioSource()){r.next=10;break}throw ie(q.NOT_SUPPORTED,new Error("Publisher#setAudioSource cannot add an audio source when you started without one."));case 10:if(!(i instanceof MediaStreamTrack)){r.next=21;break}return r.next=13,Vt();case 13:if(d=r.sent,!a.isCanceled()){r.next=16;break}throw ie(q.CANCEL,new Error(s));case 16:return r.next=18,t.all(d.map((e=>e.findAndReplaceTrack(u,i))));case 18:return r.abrupt("return",gn(u,i));case 21:if("string"!=typeof i){r.next=68;break}return(p=l(e)).audioSource=i,p.videoSource=null,tt=we(p,"OT.Publisher.setAudioSource",(()=>a.isCanceled()||Ee&&Ee.isDestroyed())),tt.on({accessDialogOpened:He,accessDialogClosed:Ye}),h=u.label,f=u.getConstraints&&u.getSettings().deviceId||void 0,u&&u.stop(),m=tt.getUserMedia,r.prev=31,r.t0=c,r.next=35,m();case 35:return r.t1=r.sent,r.next=38,(0,r.t0)(r.t1);case 38:return r.abrupt("return",r.sent);case 41:if(r.prev=41,r.t2=r.catch(31),!a.isCanceled()){r.next=45;break}throw ie(q.CANCEL,new Error(s));case 45:if((g=l(e)).videoSource=null,g.audioSource=f,g.audioSource||!h){r.next=55;break}return r.next=51,F();case 51:if(b=r.sent.find((e=>e.label===h)),!a.isCanceled()){r.next=54;break}throw ie(q.CANCEL,new Error(s));case 54:b&&(g.audioSource=b.deviceId);case 55:if(g.audioSource){r.next=58;break}throw r.t2.message+=" (could not determine previous audio device)",ie(q.NOT_FOUND,r.t2);case 58:return tt=we(g,"OT.Publisher.setAudioSource",(()=>a.isCanceled()||Ee&&Ee.isDestroyed())),r.next=61,tt.getUserMedia().catch((e=>{throw e.message+=" (could not obtain previous audio device)",e}));case 61:return y=r.sent,r.next=64,c(y);case 64:throw r.t2.message+=" (reverted to previous audio device)",r.t2;case 66:r.next=69;break;case 68:throw ie(q.INVALID_PARAMETER,new Error("Invalid parameter passed to OT.Publisher.setAudioSource(). Expected string or MediaStreamTrack."));case 69:case"end":return r.stop()}}),r,null,[[31,41]])})));return function(e){return r.apply(this,arguments)}}();this.setAudioSource=xn,this.getAudioSource=()=>L&&L.getAudioTracks().length>0?L.getAudioTracks()[0]:null;const Sn=function(){var e=(0,i.default)(o.default.mark((function e(t){var n,r,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ie(q.INVALID_VIDEO_SOURCE,new Error("Invalid video source. Video source must be a valid video input deviceId"),1041),r=ie(q.SET_VIDEO_SOURCE_FAILURE,new Error("You cannot reset the video source on a publisher that does not currently use a camera source."),1040),!ae.env.isLegacyEdge&&ge.RTCRtpSender&&"function"==typeof ge.RTCRtpSender.prototype.replaceTrack){e.next=4;break}throw ie(q.UNSUPPORTED_BROWSER,new Error("setVideoSource is not supported in your browser."),ee.UNABLE_TO_PUBLISH);case 4:if("string"==typeof t){e.next=6;break}throw n;case 6:if(i=!L||0===L.getVideoTracks().length,!(it||rt||i)){e.next=9;break}throw r;case 9:return e.next=11,F();case 11:if(e.sent.find((e=>"videoInput"===e.kind&&e.deviceId===t))){e.next=15;break}throw n;case 15:return e.next=17,En(t);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();this.setVideoSource=Sn;const En=function(){var e=(0,i.default)(o.default.mark((function e(t){var n,r,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=cn,cn=t,at.publishVideo){e.next=4;break}return e.abrupt("return");case 4:return r=fn(),at.publishVideo&&ae.env.isAndroid&&(ae.env.isChrome||ae.env.isFirefox)&&r&&r.stop&&r.stop(),e.prev=6,e.next=9,hn(t);case 9:i=e.sent,e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(6),cn=n,re.error(e.t0),e.abrupt("return");case 17:if(i){e.next=20;break}return console.warn("Unable to aquire video track. Moving to next device."),e.abrupt("return");case 20:if(!un){e.next=24;break}return e.next=23,Ge.setVideoTrack(i);case 23:i=e.sent;case 24:return e.next=26,pn(r,i);case 26:at.publishVideo&&(on=!1);case 27:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var Tn;this.getVideoSource=()=>{const e={},t=!L||0===L.getVideoTracks().length;return e.track=L&&at.publishVideo&&L.getVideoTracks()[0]||null,e.deviceId=rt||it||!cn?null:cn,e.type=it?"custom":rt?"screen":t?null:"camera",e},this._={publishToSession:(e,n)=>{n&&(Ne=n),We=e,this.session=e;const r=g();O=r,this.streamId=r,ht("Attempt",{dataChannels:at.channels,properties:D(at)});const o=new t(((e,t)=>{qe?e():(this.once("initSuccess",e),this.once("destroyed",(e=>{let n=e.reason,r="";n&&(r=` Reason: ${n}`),t(new Error(`Publisher destroyed before it finished loading.${r}`))})))}));re.debug("publishToSession: waiting for publishComplete, which is triggered by stream#created from rumor");const i=new t(((e,t)=>{this.once("publishComplete",(n=>{n?t(n):(this._setScalableFramerates(at.scalableFramerates),this._setScalableVideoLayers(at.scalableVideoLayers),re.debug("publishToSession: got publishComplete"),e())}))})),s=e=>{const t=U(e);throw ht("Failure",{},{failureReason:"Publish",failureCode:t.code,failureMessage:t.message}),Ee.isAttemptingToPublish()&&this.trigger("publishComplete",t),se.handleJsException({errorMsg:e.message,code:t.code,target:this,error:e,analytics:Ne}),t};re.debug("publishToSession: waiting for loaded");const a=o.then((()=>e._.getVideoCodecsCompatible(L))).then((n=>{if(re.debug("publishToSession: loaded"),!this.session)return;const r=setTimeout((()=>{Rt(e)}),ue);this.once("publishComplete",(()=>{clearTimeout(r)})),Ee.set("PublishingToSession");const o=n&&N&&N.video(),i=L.getVideoTracks().length>0,a=null!==at.videoSource&&!1!==at.videoSource;o&&i&&a&&Be.push(new pe({id:"video1",type:"video",active:at.publishVideo,orientation:fe.ROTATED_NORMAL,frameRate:at.frameRate,width:o.videoWidth(),height:o.videoHeight(),source:rt?"screen":it?"custom":"camera",fitMode:at.fitMode}));const c=L.getAudioTracks().length>0;return null!==at.audioSource&&!1!==at.audioSource&&c&&Be.push(new pe({id:"audio1",type:"audio",active:at.publishAudio})),re.debug("publishToSession: creating rumor stream id"),new t(((e,t)=>{Ht(null,((n,r,o)=>{n?t(s(n)):e({streamId:r,message:o})}))}))})).then((e=>{if(void 0===e)return;const t=e.streamId,n=e.message;if(re.debug("publishToSession: rumor stream id created:",t,"(this is different from stream#created, which requires media to actually be flowing for mantis sessions)"),t!==r)throw new Error("streamId response does not match request");this.streamId=t,Te=ce(n)})).catch((e=>{throw this.trigger("publishComplete",e),e}));return t.all([a,i])},unpublishFromSession:(e,t)=>{if(!this.session||e.id!==this.session.id){if("unpublished"===t){const t=this.session&&this.session.id||"no session";re.warn(`The publisher ${Ke} is trying to unpublish from a session ${e.id} it is not attached to (it is attached to ${t})`)}return this}if(e.isConnected()&&(this.stream||Ee.isAttemptingToPublish())&&e._.streamDestroy(this.streamId),E.releaseAll(),this.disconnect(),Ee.isAttemptingToPublish()){ht("Cancel",{reason:"unpublish"});const e=new Error((()=>{switch(t){case"mediaStopped":return"The video element fired the ended event, indicating there is an issue with the media";case"unpublished":return"The publisher was unpublished before it could be published";case"reset":return"The publisher was reset";default:return`The publisher was destroyed due to ${t}`}})());this.trigger("publishComplete",ie("mediaStopped"===t?q.MEDIA_ENDED:q.CANCEL,e))}return this.session=null,pt("unpublish","Success"),this._.streamDestroyed(t),this},unpublishStreamFromSession:(e,t,n)=>O&&e.id===O?this._.unpublishFromSession(t,n):(re.warn(`The publisher ${Ke} is trying to destroy a stream ${e.id} that is not attached to it (it has ${O||"no stream"} attached to it)`),this),streamDestroyed:e=>{["reset"].indexOf(e)<0&&(Ee.isDestroyed()||Ee.set("MediaBound"));const t=new Q.StreamEvent("streamDestroyed",this.stream,e,!0);this.dispatchEvent(t),t.isDefaultPrevented()||this.destroy()},archivingStatus:e=>(Gt&&Gt.setArchivingStatus(e),e),webRtcStream:()=>L,switchTracks:()=>(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct().catch(ze);case 3:t=e.sent,e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),re.error(`OT.Publisher.switchTracks failed to getUserMedia: ${e.t0}`),e.t0;case 10:n=t,Tt(),L=n,r.emit("streamChange"),Se=new oe(L,!at.publishAudio),e.prev=11,It(),e.next=21;break;case 15:if(e.prev=15,e.t1=e.catch(11),!(e.t1 instanceof w)){e.next=19;break}return e.abrupt("return");case 19:throw re.error("Error while binding video",e.t1),e.t1;case 21:e.prev=21,dn(),e.next=29;break;case 25:throw e.prev=25,e.t2=e.catch(21),re.error("Error replacing tracks",e.t2),e.t2;case 29:case"end":return e.stop()}var n}),e,null,[[0,6],[11,15],[21,25]])})))(),getDataChannel(e,t,n){const r=Ft(Object.keys(Je)[0]);r?r.then((r=>{r.getDataChannel(e,t,n)})):n(new ae.Error("Cannot create a DataChannel before there is a subscriber."))},iceRestart(){Vt().then((e=>{e.forEach((e=>{const t=v(e).remoteConnectionId;ft("Attempt",{remoteConnectionId:t}),re.debug("Publisher: ice restart attempt"),e.iceRestart()}))}))},getState:()=>Ee,demoOnlyCycleVideo:this.cycleVideo,testOnlyGetFramesEncoded:()=>(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt();case 2:if((t=e.sent).length){e.next=5;break}throw new Error("No established PeerConnections yet");case 5:return e.abrupt("return",t[0]._testOnlyGetFramesEncoded());case 6:case"end":return e.stop()}}),e)})))(),onStreamAvailable:kt,startRoutedToRelayedTransition:()=>{gt("Attempt");const e=e=>{const t=U(e);this.trigger("streamCreateForP2PComplete",t),gt("Failure",{reason:t.message})};if(!this.session)return void gt("Failure",{reason:"Not connected to the session."});const t=setTimeout((()=>{gt("Failure",{reason:"Timeout"})}),ue);this.once("streamCreateForP2PComplete",(()=>{clearTimeout(t)})),re.debug(`streamCreateWithSource: send a message to RUMOR for creating the stream with the sourceStreaId P2P and stream ${this.streamId}`),Ht("P2P",(t=>{t?e(t):this.trigger("streamCreateForP2PComplete")}))},startRelayedToRoutedTransition:(Tn=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bt("Attempt"),n.session){e.next=4;break}return bt("Failure",{reason:"Not connected to the session."}),e.abrupt("return");case 4:if(n.streamId){e.next=7;break}return bt("Failure",{reason:"No streamId available"}),e.abrupt("return");case 7:if(Bt()){e.next=10;break}return bt("Failure",{reason:"There is no Relayed Peer connection created."}),e.abrupt("return");case 10:return n.session._.streamDestroy(n.streamId,"P2P"),e.t0=n,e.next=14,Bt();case 14:return e.t1=e.sent,e.t0._removePeerConnection.call(e.t0,e.t1),e.next=18,Kt();case 18:bt("Success"),n.trigger("streamDestroyForP2PComplete");case 20:case"end":return e.stop()}}),e)}))),function(){return Tn.apply(this,arguments)}),forceMuteAudio:function(){pt("publishAudio","Attempt",{publishAudio:!1}),at.publishAudio=!1;try{nn("auto"),this.dispatchEvent(new Q.MuteForcedEvent),pt("publishAudio","Success",{publishAudio:!1})}catch(e){pt("publishAudio","Failure",{message:e.message})}}.bind(this)},this.detectDevices=function(){re.warn("Publisher.detectDevices() is not implemented.")},this.detectMicActivity=function(){re.warn("Publisher.detectMicActivity() is not implemented.")},this.getEchoCancellationMode=function(){return re.warn("Publisher.getEchoCancellationMode() is not implemented."),"fullDuplex"},this.setMicrophoneGain=function(){re.warn("Publisher.setMicrophoneGain() is not implemented.")},this.getMicrophoneGain=function(){return re.warn("Publisher.getMicrophoneGain() is not implemented."),.5},this.setCamera=function(){re.warn("Publisher.setCamera() is not implemented.")},this.setMicrophone=function(){re.warn("Publisher.setMicrophone() is not implemented.")},this.guid=function(){return Ke},this.videoElement=function(){const e=N&&N.video();return e?e.domElement():null},this.setStream=e=>{if("PublishingToSession"!==Ee.current)throw new Error("assignStream called when publisher is not successfully publishing");E.releaseAll(),this.stream=e,this.stream.on("destroyed",this.disconnect,this),E.add((()=>{this.stream&&this.stream.off("destroyed",this.disconnect,this)})),Ee.set("Publishing"),N.loading(!qe),xe=new Date,this.dispatchEvent(new Q.StreamEvent("streamCreated",e,null,!1)),ht("Success"),this.trigger("publishComplete",null,this)},this.isWebRTC=!0,this.isLoading=function(){return N&&N.loading()},this.videoWidth=function(){const e=N&&N.video();return e?e.videoWidth():void 0},this.videoHeight=function(){const e=N&&N.video();return e?e.videoHeight():void 0},this.getStats=function(e){(e=>{zt(e)})(((t,n)=>{t?e(t):e(null,n)}))},this.getRtcStatsReport=()=>new t(((e,t)=>{zt("rtcStatsReport",((n,r)=>{n?t(n):e(r)}))})),Ee=new de((e=>{re.error("OT.Publisher State Change Failed: ",e.message),re.debug(e)})),this.accessAllowed=!1,this.applyVideoFilter=function(){var e=(0,i.default)(o.default.mark((function e(t){var r,i,s,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pt("applyVideoFilter","Attempt",{videoFilter:t}),e.prev=1,ve.isSupported()){e.next=5;break}throw ie(q.NOT_SUPPORTED,new Error("Browser does not support video filters (Insertable Streams and Worker APIs are required)"));case 5:if(Ge.isValidVideoFilter(t)){e.next=7;break}throw ie(q.INVALID_PARAMETER,new Error("Video filter has invalid configuration"));case 7:if(L){e.next=12;break}return pt("applyVideoFilter","Failure",{message:r="Ignoring. No mediaStream"}),re.warn(r),e.abrupt("return");case 12:if(!rt&&!it){e.next=14;break}throw ie(q.INVALID_PARAMETER,new Error("Video filters can not be applied to screen shares or custom video sources"));case 14:if(!n.getVideoFilter()){e.next=17;break}return e.next=17,n.clearVideoFilter();case 17:if(i=L.getVideoTracks(),s=i[0]){e.next=23;break}return pt("applyVideoFilter","Failure",{message:r="Ignoring. No video"}),re.warn(r),e.abrupt("return");case 23:return e.next=25,Ge.setVideoFilter(t);case 25:return e.next=27,Ge.setMediaStream(L);case 27:if(!(a=e.sent)){e.next=31;break}return e.next=31,pn(s,a);case 31:e.next=38;break;case 33:throw e.prev=33,e.t0=e.catch(1),re.error(`Error applying video filter: ${e.t0}`),pt("applyVideoFilter","Failure",{message:e.t0.message}),e.t0;case 38:un=t,pt("applyVideoFilter","Success",{videoFilter:t});case 40:case"end":return e.stop()}}),e,null,[[1,33]])})));return function(t){return e.apply(this,arguments)}}(),this.getVideoFilter=()=>{pt("getVideoFilter","Attempt");const e=Ge.getVideoFilter();return pt("getVideoFilter","Success"),e},this.clearVideoFilter=(0,i.default)(o.default.mark((function e(){var t,r,i,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pt("clearVideoFilter","Attempt"),n.getVideoFilter()){e.next=6;break}return pt("clearVideoFilter","Success",{message:t="Ignoring. No video filter applied"}),re.debug(t),e.abrupt("return");case 6:if(ve.isSupported()){e.next=11;break}return pt("clearVideoFilter","Success",{message:t='Ignoring. "clearVideoFilter" not supported.'}),re.warn(t),e.abrupt("return");case 11:if(L){e.next=16;break}return pt("clearVideoFilter","Success",{message:t="Ignoring. No mediaStream"}),re.warn(t),e.abrupt("return");case 16:if(!un){e.next=26;break}return r=L.getVideoTracks(),i=r[0],e.next=20,hn(cn);case 20:return s=e.sent,e.next=23,pn(i,s);case 23:return e.next=25,an();case 25:un=null;case 26:case"end":return e.stop()}}),e)})))}}}).call(this,n(0))},function(e,t,n){"use strict";const r=n(61).once;e.exports=function(e){this.publish=-1!==e.indexOf("publish")?1:0,this.subscribe=-1!==e.indexOf("subscribe")?1:0,this.forceUnpublish=-1!==e.indexOf("forceunpublish")?1:0,this.forceDisconnect=-1!==e.indexOf("forcedisconnect")?1:0,this.forceMute=-1!==e.indexOf("forcemute")?1:0,this.supportsWebRTC=r()?1:0,this.permittedTo=e=>Object.prototype.hasOwnProperty.call(this,e)&&1===this[e]}},function(e,t,n){"use strict";const r=n(1)("Stream"),o=n(5),i=n(21),s=n(6),a=n(23)(),c=["name","archiving"];e.exports=function(e,t,n,u,l,d){const p=this;let h;this.id=e,this.streamId=e,this.name=t,this.creationTime=Number(n),this.connection=u,this.channel=d,this.publisher=i.publishers.find({streamId:this.id}),s(this);const f=function(e,t,n,r){let o=t;switch(o){case"active":o="audio"===e.type?"hasAudio":"hasVideo",p[o]=r;break;case"disableWarning":if(o="audio"===e.type?"audioDisableWarning":"videoDisableWarning",p[o]=r,!p["audio"===e.type?"hasAudio":"hasVideo"])return;break;case"fitMode":o="defaultFitMode",p[o]=r;break;case"source":o="audio"===e.type?"audioType":"videoType",p[o]=r;break;case"videoDimensions":p.videoDimensions=r;break;case"orientation":case"width":case"height":return}"screen"===p.videoType&&"hasVideo"===o&&!1===r||p.dispatchEvent(new a.StreamUpdatedEvent(p,o,n,r))},m=function(){return p.publisher?p.publisher:i.subscribers.find((e=>e.stream&&e.stream.id===p.id&&e.session.id===l.id))},g=function(){return!p.publisher};this.getChannelsOfType=function(e){return p.channel.filter((t=>t.type===e))},this.getChannel=function(e){for(let t=0;t<p.channel.length;++t)if(p.channel[t].id===e)return p.channel[t];return null};const b=this.getChannelsOfType("audio")[0],y=this.getChannelsOfType("video")[0];this.hasAudio=null!=b&&b.active,this.hasVideo=null!=y&&y.active,this.videoType=y&&y.source,this.defaultFitMode=y&&y.fitMode,this.videoDimensions={},y&&(this.videoDimensions.width=y.width,this.videoDimensions.height=y.height,this.videoDimensions.orientation=y.orientation,y.on("update",f),this.frameRate=y.frameRate),b&&b.on("update",f),this.setChannelActiveState=function(e,t,n){const r={active:t};n&&(r.activeReason=n),v(e,r)},this.setVideoDimensions=function(e,t){v("video",{width:e,height:t,orientation:0})},this.setRestrictFrameRate=function(e){v("video",{restrictFrameRate:e})},this.setPreferredResolution=function(e){if(!g())return void r.warn("setPreferredResolution has no affect when called by a publisher");if(l.sessionInfo.p2pEnabled)return void r.warn("Stream.setPreferredResolution will not work in a P2P Session");if(e&&void 0===e.width&&void 0===e.height)return;const t=p.getChannelsOfType("video")[0];if(t){if(e&&e.width){if(isNaN(parseInt(e.width,10)))throw new o.Error("stream preferred width must be an integer","Subscriber");t.preferredWidth=parseInt(e.width,10)}else t.preferredWidth=void 0;if(e&&e.height){if(isNaN(parseInt(e.height,10)))throw new o.Error("stream preferred height must be an integer","Subscriber");t.preferredHeight=parseInt(e.height,10)}else t.preferredHeight=void 0;l._.subscriberChannelUpdate(p,m(),t,{preferredWidth:t.preferredWidth||0,preferredHeight:t.preferredHeight||0})}},this.getPreferredResolution=function(){const e=p.getChannelsOfType("video")[0];if(e&&(e.preferredWidth||e.preferredHeight))return{width:e.preferredWidth,height:e.preferredHeight}},this.setPreferredFrameRate=function(e){if(!g())return void r.warn("setPreferredFrameRate has no affect when called by a publisher");if(l.sessionInfo.p2pEnabled)return void r.warn("Stream.setPreferredFrameRate will not work in a P2P Session");if(e&&isNaN(parseFloat(e)))throw new o.Error("stream preferred frameRate must be a number","Subscriber");const t=p.getChannelsOfType("video")[0];t&&(t.preferredFrameRate=e?parseFloat(e):null,l._.subscriberChannelUpdate(p,m(),t,{preferredFrameRate:t.preferredFrameRate||0}))},this.getPreferredFrameRate=function(){const e=p.getChannelsOfType("video")[0];return e?e.preferredFrameRate:null};let v=function(e,t){let n;if(p.publisher)n=e=>l._.streamChannelUpdate(p,e,t);else{const e=m();n=n=>l._.subscriberChannelUpdate(p,e,n,t)}p.getChannelsOfType(e).forEach(n)};this.destroyed=!1,this.destroyedReason=void 0,this.destroy=function(e,t){void 0===e&&(e="clientDisconnected"),h=e,p.destroyed=!0,p.destroyedReason=h,!0!==t&&p.dispatchEvent(new a.DestroyedEvent("destroyed",p,h))},this._={},this._.updateProperty=function(e,t){if(-1===c.indexOf(e))return void r.warn(`Unknown stream property "${e}" was modified to "${t}".`);const n=p[e],o=t;switch(e){case"name":p[e]=o;break;case"archiving":var i=m();p.publisher&&i&&i._.archivingStatus(o),p[e]=o}const s=new a.StreamUpdatedEvent(p,e,n,o);p.dispatchEvent(s)},this._.update=function(e){for(const t in e)e.hasOwnProperty(t)&&p._.updateProperty(t,e[t])},this._.forceMute=function(e){e.hasOwnProperty("channels")&&e.channels.includes("audio")&&p.publisher&&p.publisher._.forceMuteAudio()},this._.updateChannel=function(e,t){const n=p.getChannel(e);n&&n.update(t)}}},function(e,t,n){"use strict";t.__esModule=!0,t.STATUS=t.PONG=t.PING=t.DISCONNECT=t.CONNECT=t.MESSAGE=t.UNSUBSCRIBE=t.SUBSCRIBE=void 0,t.SUBSCRIBE=0,t.UNSUBSCRIBE=1,t.MESSAGE=2,t.CONNECT=3,t.DISCONNECT=4,t.PING=7,t.PONG=8,t.STATUS=9},function(e,t,n){"use strict";const r=n(7),o=n(170),i=n(6),s=n(23)(),a=n(719);function c(e,t,n,r,c){let u;this.id=e,this.connectionId=e,this.creationTime=t?Number(t):null,this.data=n,this.capabilities=a(r),this.permissions=new o(c),this.quality=null,i(this),this.destroy=(e,t)=>{u=e||"clientDisconnected",!0!==t&&this.dispatchEvent(new s.DestroyedEvent("destroyed",this,u))},this.destroyed=()=>void 0!==u,this.destroyedReason=()=>u}c.fromHash=e=>{let t=e.id,n=e.creationTime,o=e.data,i=e.capablities,s=e.permissions;return new c(t,n,o,r(i||{},{supportsWebRTC:!0}),s||[])},e.exports=c},function(e,t){var n="object"==typeof(void 0!==typeof window?window:__webpack_require__.g)&&(void 0!==typeof window?window:__webpack_require__.g)&&(void 0!==typeof window?window:__webpack_require__.g).Object===Object&&(void 0!==typeof window?window:__webpack_require__.g);e.exports=n},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(38),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){var r=n(40),o=n(30);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t,n){var r=n(370),o=n(65),i=n(10),s=n(66),a=n(67),c=n(85),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),l=!n&&o(e),d=!n&&!l&&s(e),p=!n&&!l&&!d&&c(e),h=n||l||d||p,f=h?r(e.length,String):[],m=f.length;for(var g in e)!t&&!u.call(e,g)||h&&("length"==g||d&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||f.push(g);return f}},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){(function(e){var r=n(14),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(84)(e))},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(116),o=n(117),i=n(115),s=n(181),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,i(e)),e=o(e);return t}:s;e.exports=a},function(e,t,n){var r=n(184),o=n(115),i=n(30);e.exports=function(e){return r(e,i,o)}},function(e,t,n){var r=n(116),o=n(10);e.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},function(e,t,n){var r=n(184),o=n(182),i=n(53);e.exports=function(e){return r(e,i,o)}},function(e,t,n){var r=n(38)(n(14),"Set");e.exports=r},function(e,t,n){var r=n(38)(n(14),"WeakMap");e.exports=r},function(e,t,n){var r=n(14).Uint8Array;e.exports=r},function(e,t,n){var r=n(118);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(86),o=n(117),i=n(69);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},function(e,t,n){var r=n(110);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},function(e,t,n){var r=n(87),o=n(122);e.exports=function(e){return r((function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(i--,s):void 0,a&&o(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var c=n[r];c&&e(t,c,r,s)}return t}))}},function(e,t,n){var r=n(120),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,s=-1,a=o(i.length-t,0),c=Array(a);++s<a;)c[s]=i[t+s];s=-1;for(var u=Array(t+1);++s<t;)u[s]=i[s];return u[t]=n(c),r(e,this,u)}}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var o=n(),i=16-(o-r);if(r=o,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){"use strict";e.exports=n(398)()?WeakMap:n(399)},function(e,t,n){"use strict";var r=Object.create,o=Object.getPrototypeOf,i={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||r;return"function"==typeof e&&o(e(t(null),i))===i}},function(e,t,n){"use strict";var r,o,i,s,a=n(198),c=n(31),u=Object.prototype.isPrototypeOf,l=Object.defineProperty,d={configurable:!0,enumerable:!1,writable:!0,value:void 0};r=function(e,t){if(c(e),null===t||a(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=(o=function(){var e,t=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{(e=r.set).call(t,n)}catch(e){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:((t={}).__proto__=n,Object.getPrototypeOf(t)===n&&{level:1})}(),o?(2===o.level?o.set?(s=o.set,i=function(e,t){return s.call(r(e,t),t),e}):i=function(e,t){return r(e,t).__proto__=t,e}:i=function e(t,n){var o;return r(t,n),(o=u.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,o&&l(e.nullPolyfill,"__proto__",d),t},Object.defineProperty(i,"level",{configurable:!1,enumerable:!1,writable:!1,value:o.level})):null),n(401)},function(e,t,n){"use strict";var r=n(44),o={function:!0,object:!0};e.exports=function(e){return r(e)&&o[typeof e]||!1}},function(e,t,n){"use strict";var r=n(404),o=/^\s*class[\s{/}]/,i=Function.prototype.toString;e.exports=function(e){return!!r(e)&&!o.test(i.call(e))}},function(e,t,n){"use strict";var r=n(44),o=Array.prototype.forEach,i=Object.create,s=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=i(null);return o.call(arguments,(function(e){r(e)&&s(Object(e),t)})),t}},function(e,t,n){"use strict";e.exports=n(411)()?String.prototype.contains:n(412)},function(e,t,n){"use strict";var r=n(89),o=n(90),i=n(413),s=n(442),a=n(443),c=n(45).iterator;e.exports=function(e){return"function"==typeof a(e)[c]?e[c]():r(e)?new i(e):o(e)?new s(e):new i(e)}},function(e,t,n){"use strict";var r=n(418);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},function(e,t,n){"use strict";var r,o=n(422),i=n(125),s=n(70),a=n(31),c=n(32),u=n(423),l=n(45),d=Object.defineProperty,p=Object.defineProperties;e.exports=r=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");p(this,{__list__:c("w",a(e)),__context__:c("w",t),__nextIndex__:c("w",0)}),t&&(s(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete r.prototype.constructor,p(r.prototype,i({_next:c((function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()})),next:c((function(){return this._createResult(this._next())})),_createResult:c((function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}})),_resolve:c((function(e){return this.__list__[e]})),_unBind:c((function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)})),toString:c((function(){return"[object "+(this[l.toStringTag]||"Object")+"]"}))},u({_onAdd:c((function(e){e>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach((function(t,n){t>=e&&(this.__redo__[n]=++t)}),this),this.__redo__.push(e)):d(this,"__redo__",c("c",[e])))})),_onDelete:c((function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(t=this.__redo__.indexOf(e))&&this.__redo__.splice(t,1),this.__redo__.forEach((function(t,n){t>e&&(this.__redo__[n]=--t)}),this)))})),_onClear:c((function(){this.__redo__&&o.call(this.__redo__),this.__nextIndex__=0}))}))),d(r.prototype,l.iterator,c((function(){return this})))},function(e,t,n){"use strict";var r=n(55),o=n(124),i=n(425),s=n(426),a=function(e,t){return e.replace("%v",s(t))};e.exports=function(e,t,n){if(!o(n))throw new TypeError(a(t,e));if(!r(e)){if("default"in n)return n.default;if(n.isOptional)return null}var s=i(n.errorMessage);throw r(s)||(s=t),new TypeError(a(s,e))}},function(e,t){e.exports=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},function(e,t,n){e.exports=n(454)},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(17);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(o(t)+"="+o(e))})))})),i=s.join("&")}if(i){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(17),o=n(459),i={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(a=n(212)),a),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(i)})),e.exports=c}).call(this,n(43))},function(e,t,n){"use strict";(function(t){var r=n(17),o=n(460),i=n(462),s=n(209),a=n(463),c=n(466),u=n(467),l=n(213);e.exports=function(e){return new t((function(t,n){var d=e.data,p=e.headers;r.isFormData(d)&&delete p["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";p.Authorization="Basic "+btoa(f+":"+m)}var g=a(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),s(g,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?c(h.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};o(t,n,i),h=null}},h.onabort=function(){h&&(n(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){n(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var b=(e.withCredentials||u(g))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;b&&(p[e.xsrfHeaderName]=b)}if("setRequestHeader"in h&&r.forEach(p,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete p[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),n(e),h=null)})),d||(d=null),h.send(d)}))}}).call(this,n(0))},function(e,t,n){"use strict";var r=n(461);e.exports=function(e,t,n,o,i){var s=new Error(e);return r(s,t,n,o,i)}},function(e,t,n){"use strict";var r=n(17);e.exports=function(e,t){t=t||{};var n={},o=["url","method","data"],i=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(n[o]=c(void 0,e[o])):n[o]=c(e[o],t[o])}r.forEach(o,(function(e){r.isUndefined(t[e])||(n[e]=c(void 0,t[e]))})),r.forEach(i,u),r.forEach(s,(function(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(n[o]=c(void 0,e[o])):n[o]=c(void 0,t[o])})),r.forEach(a,(function(r){r in t?n[r]=c(e[r],t[r]):r in e&&(n[r]=c(void 0,e[r]))}));var l=o.concat(i).concat(s).concat(a),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return r.forEach(d,u),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){var r=n(472),o=n(474);e.exports=function(e,t,n){return r(o,e,t,n)}},function(e,t,n){var r=n(88),o=n(218),i=o?function(e,t){return o.set(e,t),e}:r;e.exports=i},function(e,t,n){var r=n(187),o=r&&new r;e.exports=o},function(e,t,n){var r=n(220),o=n(221),i=n(478),s=n(95),a=n(222),c=n(228),u=n(487),l=n(134),d=n(14);e.exports=function e(t,n,p,h,f,m,g,b,y,v){var w=128&n,x=1&n,S=2&n,E=24&n,T=512&n,C=S?void 0:s(t);return function _(){for(var I=arguments.length,k=Array(I),R=I;R--;)k[R]=arguments[R];if(E)var N=c(_),O=i(k,N);if(h&&(k=r(k,h,f,E)),m&&(k=o(k,m,g,E)),I-=O,E&&I<v){var A=l(k,N);return a(t,n,e,_.placeholder,p,k,A,b,y,v-I)}var D=x?p:this,L=S?D[t]:t;return I=k.length,b?k=u(k,b):T&&I>1&&k.reverse(),w&&y<I&&(k.length=y),this&&this!==d&&this instanceof _&&(L=C||s(L)),L.apply(D,k)}}},function(e,t){var n=Math.max;e.exports=function(e,t,r,o){for(var i=-1,s=e.length,a=r.length,c=-1,u=t.length,l=n(s-a,0),d=Array(u+l),p=!o;++c<u;)d[c]=t[c];for(;++i<a;)(p||i<s)&&(d[r[i]]=e[i]);for(;l--;)d[c++]=e[i++];return d}},function(e,t){var n=Math.max;e.exports=function(e,t,r,o){for(var i=-1,s=e.length,a=-1,c=r.length,u=-1,l=t.length,d=n(s-c,0),p=Array(d+l),h=!o;++i<d;)p[i]=e[i];for(var f=i;++u<l;)p[f+u]=t[u];for(;++a<c;)(h||i<s)&&(p[f+r[a]]=e[i++]);return p}},function(e,t,n){var r=n(479),o=n(226),i=n(227);e.exports=function(e,t,n,s,a,c,u,l,d,p){var h=8&t;t|=h?32:64,4&(t&=~(h?64:32))||(t&=-4);var f=[e,t,a,h?c:void 0,h?u:void 0,h?void 0:c,h?void 0:u,l,d,p],m=n.apply(void 0,f);return r(e)&&o(m,f),m.placeholder=s,i(m,e,t)}},function(e,t,n){var r=n(218),o=n(224),i=r?function(e){return r.get(e)}:o;e.exports=i},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(86),o=n(133);function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}i.prototype=r(o.prototype),i.prototype.constructor=i,e.exports=i},function(e,t,n){var r=n(217),o=n(194)(r);e.exports=o},function(e,t,n){var r=n(484),o=n(485),i=n(121),s=n(486);e.exports=function(e,t,n){var a=t+"";return i(e,o(a,s(r(a),n)))}},function(e,t){e.exports=function(e){return e.placeholder}},function(e,t,n){var r=n(491),o=n(9),i=n(71),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):s.test(e)?NaN:+e}},function(e,t,n){var r=n(499),o=n(16);e.exports=function e(t,n,i,s,a){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,i,s,e,a))}},function(e,t,n){var r=n(92),o=n(232),i=n(94);e.exports=function(e,t,n,s,a,c){var u=1&n,l=e.length,d=t.length;if(l!=d&&!(u&&d>l))return!1;var p=c.get(e),h=c.get(t);if(p&&h)return p==t&&h==e;var f=-1,m=!0,g=2&n?new r:void 0;for(c.set(e,t),c.set(t,e);++f<l;){var b=e[f],y=t[f];if(s)var v=u?s(y,b,f,t,e,c):s(b,y,f,e,t,c);if(void 0!==v){if(v)continue;m=!1;break}if(g){if(!o(t,(function(e,t){if(!i(g,t)&&(b===e||a(b,e,n,s,c)))return g.push(t)}))){m=!1;break}}else if(b!==y&&!a(b,y,n,s,c)){m=!1;break}}return c.delete(e),c.delete(t),m}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t,n){var r=n(9);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},function(e,t,n){var r=n(504),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,n,r,o){t.push(r?o.replace(i,"$1"):n||e)})),t}));e.exports=s},function(e,t,n){var r=n(506),o=n(507);e.exports=function(e,t){return null!=e&&o(e,t,r)}},function(e,t,n){var r=n(116),o=n(513);e.exports=function e(t,n,i,s,a){var c=-1,u=t.length;for(i||(i=o),a||(a=[]);++c<u;){var l=t[c];n>0&&i(l)?n>1?e(l,n-1,i,s,a):r(a,l):s||(a[a.length]=l)}return a}},function(e,t,n){var r=n(520)();e.exports=r},function(e,t,n){"use strict";var r=n(521),o=n(522);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=v,t.resolve=function(e,t){return v(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},t.format=function(e){return o.isString(e)&&(e=v(e)),e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),d=["%","/","?",";","#"].concat(l),p=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(523);function v(e,t,n){if(e&&o.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}i.prototype.parse=function(e,t,n){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),a=-1!==i&&i<e.indexOf("#")?"?":"#",u=e.split(a);u[0]=u[0].replace(/\\/g,"/");var v=e=u.join(a);if(v=v.trim(),!n&&1===e.split("#").length){var w=c.exec(v);if(w)return this.path=v,this.href=v,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=s.exec(v);if(x){var S=(x=x[0]).toLowerCase();this.protocol=S,v=v.substr(x.length)}if(n||x||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===v.substr(0,2);!E||x&&g[x]||(v=v.substr(2),this.slashes=!0)}if(!g[x]&&(E||x&&!b[x])){for(var T,C,_=-1,I=0;I<p.length;I++)-1!==(k=v.indexOf(p[I]))&&(-1===_||k<_)&&(_=k);for(-1!==(C=-1===_?v.lastIndexOf("@"):v.lastIndexOf("@",_))&&(T=v.slice(0,C),v=v.slice(C+1),this.auth=decodeURIComponent(T)),_=-1,I=0;I<d.length;I++){var k;-1!==(k=v.indexOf(d[I]))&&(-1===_||k<_)&&(_=k)}-1===_&&(_=v.length),this.host=v.slice(0,_),v=v.slice(_),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var N=this.hostname.split(/\./),O=(I=0,N.length);I<O;I++){var A=N[I];if(A&&!A.match(h)){for(var D="",L=0,P=A.length;L<P;L++)A.charCodeAt(L)>127?D+="x":D+=A[L];if(!D.match(h)){var V=N.slice(0,I),M=N.slice(I+1),F=A.match(f);F&&(V.push(F[1]),M.unshift(F[2])),M.length&&(v="/"+M.join(".")+v),this.hostname=V.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=r.toASCII(this.hostname));var W=this.port?":"+this.port:"",Z=this.hostname||"";this.host=Z+W,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!m[S])for(I=0,O=l.length;I<O;I++){var B=l[I];if(-1!==v.indexOf(B)){var G=encodeURIComponent(B);G===B&&(G=escape(B)),v=v.split(B).join(G)}}var U=v.indexOf("#");-1!==U&&(this.hash=v.substr(U),v=v.slice(0,U));var $=v.indexOf("?");if(-1!==$?(this.search=v.substr($),this.query=v.substr($+1),t&&(this.query=y.parse(this.query)),v=v.slice(0,$)):t&&(this.search="",this.query={}),v&&(this.pathname=v),b[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){W=this.pathname||"";var X=this.search||"";this.path=W+X}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||b[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(o.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(n[l]=e[l])}return b[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!b[e.protocol]){for(var d=Object.keys(e),p=0;p<d.length;p++){var h=d[p];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",y=n.search||"";n.path=m+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=w||v||n.host&&e.pathname,S=x,E=n.pathname&&n.pathname.split("/")||[],T=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!b[n.protocol]);if(T&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),x=x&&(""===f[0]||""===E[0])),w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=f;else if(f.length)E||(E=[]),E.pop(),E=E.concat(f),n.search=e.search,n.query=e.query;else if(!o.isNullOrUndefined(e.search))return T&&(n.hostname=n.host=E.shift(),(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift())),n.search=e.search,n.query=e.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=E.slice(-1)[0],_=(n.host||e.host||E.length>1)&&("."===C||".."===C)||""===C,I=0,k=E.length;k>=0;k--)"."===(C=E[k])?E.splice(k,1):".."===C?(E.splice(k,1),I++):I&&(E.splice(k,1),I--);if(!x&&!S)for(;I--;I)E.unshift("..");!x||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),_&&"/"!==E.join("/").substr(-1)&&E.push("");var R,N=""===E[0]||E[0]&&"/"===E[0].charAt(0);return T&&(n.hostname=n.host=N?"":E.length?E.shift():"",(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift())),(x=x||n.host&&E.length)&&!N&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";const r=n(15),o=n(19),i=n(1)("guidStorage"),s={};let a,c;e.exports=s,s.override=e=>{if(function(e){return!(r(e.get)&&r(e.set))}(e))throw new Error("The storageInterface argument does not seem to be valid, it must implement get and set methods");a!==e&&(a=e,c&&a.set(c,(e=>{e&&i.error(`Failed to send initial Guid value (${c}) to the newly assigned Guid Storage. The error was: ${e}`)})))},s.get=e=>{!function(e){c?e(null,c):a.get(e)}(((t,n)=>{t?e(t):(n?c||(c=n):(n=o(),a.set(n,(t=>{t?e(t):c=n}))),e(null,c))}))},s.override({get(e){let t;try{t=(void 0!==typeof window?window:__webpack_require__.g).localStorage.getItem("opentok_client_id")}catch(e){t||(t=o())}e(null,t)},set(e,t){try{(void 0!==typeof window?window:__webpack_require__.g).localStorage.setItem("opentok_client_id",e)}catch(e){}t(null)}}),s.set=e=>{c=e}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},function(e,t,n){"use strict";const r=n(7),o=n(1)("analytics"),i=n(528),s=n(19),a=n(245),c=n(138).prependProxyToUrlIfNeeded,u=n(139).getProxyUrl,l=s(),d=new i;e.exports=function(e){var t=this;let n=e.loggingUrl,i=e.queue,s=void 0===i?d:i,p=e.ajax,h=void 0===p?a:p;this.loggingUrl=n,this.updateEndPoints=()=>{if(!this.proxyUrl){this.proxyUrl=u();const e=c(this.loggingUrl,this.proxyUrl);this.loggingUrl=e}this.endPoint=`${this.loggingUrl}/logging/ClientEvent`,this.endPointQos=`${this.loggingUrl}/logging/ClientQos`},this.updateEndPoints();const f={};this.logError=function(e,n,o,i,s){void 0===i&&(i=null),void 0===s&&(s={});const a=s.partnerId;if(((e,t,n)=>{if(!n)return!1;const r=[n,t,e].join("_");return(f[r]||0)>=100})(e,n,a))return;const c=[a,n,e].join("_"),u=i;f[c]=void 0!==f[c]?f[c]+1:1,t.logEvent(r(s,{action:`${n}.${e}`,payload:u}),!1)},this.logEvent=function(e,n,r,i){if(void 0===n&&(n=!1),void 0===i&&(i=()=>{}),t.updateEndPoints(),e.clientInstanceId=l,r&&!isNaN(r)&&Math.random()>r)return void o.debug("skipping sending analytics due to throttle:",e);let a;o.debug("queueing analytics:",t.loggingUrl,e);try{a=JSON.stringify(e)}catch(e){return void i(e)}!function(e,n,r){void 0===n&&(n=()=>{}),s.add((i=>{o.debug("sending analytics:",t.loggingUrl,e),h.post(r?t.endPointQos:t.endPoint,{body:e,overrideMimeType:"text/plain",headers:{Accept:"text/plain","Content-Type":"application/json"}},(e=>{e&&o.debug("Failed to send ClientEvent, moving on to the next item."),n(e||void 0),i()}))}))}(a,i,n)},this.logQOS=e=>this.logEvent(e,!0)}},function(e,t,n){"use strict";const r=n(246),o=n(2),i=n(248),s=n(7),a={};e.exports=a,"Node"!==o.name&&(a.request=function(e,t,n){const o=new(void 0!==typeof window?window:__webpack_require__.g).XMLHttpRequest,i=t||{};if(i.method){t.overrideMimeType&&(o.overrideMimeType&&o.overrideMimeType(t.overrideMimeType),delete t.overrideMimeType),n&&(r(o).on("load",(e=>{const t=e.target.status;t>=200&&(t<300||304===t)?n(null,e):n(e)})),r(o).on("error",n)),o.open(t.method,e,!0),i.headers||(i.headers={});for(const e in i.headers)Object.prototype.hasOwnProperty.call(i.headers,e)&&o.setRequestHeader(e,i.headers[e]);o.send(t.body&&function(e){if("string"==typeof e)return e;const t=[];return Object.keys(e).forEach((n=>{t.push(`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`)})),t.join("&").replace(/\+/g,"%20")}(t.body))}else n(new Error("No HTTP method specified in options"))},a.get=function(e,t,n){const r=s(t||{},{method:"GET"});a.request(e,r,n)},a.post=function(e,t,n){const r=s(t||{},{method:"POST"});a.request(e,r,n)},a.getJSON=function(e,t,n){const r=s({Accept:"application/json"},(t=t||{}).headers||{});a.get(e,s(t||{},{headers:r}),(function(e,t){if(e)n(e,t&&t.target&&t.target.responseText);else{let e;try{e=JSON.parse(t.target.responseText)}catch(e){return void n(e,t&&t.target&&t.target.responseText)}n(null,e,t)}}))},i(a))},function(e,t,n){"use strict";const r=n(247);e.exports=function(e,t){return new r(e,t)}},function(e,t,n){"use strict";const r=n(15),o={attributes:n(529),css:n(530),classNames:n(535),observers:n(537)},i=/^#([\w-]*)$/,s=function(e){return Array.prototype.slice.call(e)},a=function(e,t){const n=function(e,t){let n;if(void 0===e)return[];if("string"==typeof e){n=[];const r=i.exec(e);if(t=t||document,r&&r[1]){const e=t.getElementById(r[1]);e&&n.push(e)}else n=t.querySelectorAll(e)}else e&&(e.nodeType||(void 0!==typeof window?window:__webpack_require__.g).XMLHttpRequest&&e instanceof(void 0!==typeof window?window:__webpack_require__.g).XMLHttpRequest||e===(void 0!==typeof window?window:__webpack_require__.g))?(n=[e],t=e):Array.isArray(e)?(n=e.slice(),t=null):n=s(n);return n}(e,t);this.context=t,this.toArray=function(){return n},this.length=n.length,this.first=n[0],this.last=n[n.length-1],this.get=function(e){return void 0===e?n:n[e]}};e.exports=a,(a._attachToOTHelpers={}).removeElement=function(e){return new a(e).remove()},a.prototype.getAsArray=function(){let e=this.get();return r(e.forEach)||(e=s(e)),e},a.prototype.some=function(e,t){return this.getAsArray().some(e,t)},a.prototype.forEach=function(e,t){return this.getAsArray().forEach(e,t),this},a.prototype.map=function(e,t){return new a(this.getAsArray().map(e,t),this.context)},a.prototype.filter=function(e,t){return new a(this.getAsArray().filter(e,t),this.context)},a.prototype.find=function(e){return new a(e,this.first)},a.prototype.on=function(e,t){return this.forEach((n=>{n.addEventListener(e,t,!1)}))},a.prototype.off=function(e,t){return this.forEach((n=>{n.removeEventListener(e,t,!1)}))},a.prototype.once=function(e,t){const n=function(){this.off(e,n),t(...arguments)}.bind(this);return this.on(e,n)},a.prototype.appendTo=function(e){if(!e)throw new Error("appendTo requires a DOMElement to append to.");return this.forEach((t=>{e.appendChild(t)}))},a.prototype.append=function(){const e=this.first;return e?(Array.prototype.forEach.call(arguments,(t=>{e.appendChild(t)})),this):this},a.prototype.prepend=function(){if(0===arguments.length)return this;const e=this.first;let t;return e?(t=Array.prototype.slice.call(arguments),e.firstElementChild||e.appendChild(t.shift()),t.forEach((t=>{e.insertBefore(t,e.firstElementChild)})),this):this},a.prototype.after=function(e){if(!e)throw new Error("after requires a DOMElement to insert after");return this.forEach((t=>{t.parentElement&&(e!==t.parentNode.lastChild?t.parentElement.insertBefore(t,e):t.parentElement.appendChild(t))}))},a.prototype.before=function(e){if(!e)throw new Error("before requires a DOMElement to insert before");return this.forEach((t=>{t.parentElement&&t.parentElement.insertBefore(t,e)}))},a.prototype.remove=function(){return this.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}))},a.prototype.empty=function(){return this.forEach((e=>{for(;e.firstChild;)e.removeChild(e.firstChild)}))},a.prototype.isDisplayNone=function(){return this.some((e=>(0===e.offsetWidth||0===e.offsetHeight)&&"none"===new a(e).css("display")||!(!e.parentNode||!e.parentNode.style)&&new a(e.parentNode).isDisplayNone()))};const c=function e(t){return 0!==t.offsetWidth&&0!==t.offsetHeight||"none"!==new a(t).css("display")?t.parentNode&&t.parentNode.style?e(t.parentNode):null:t};a._attachToOTHelpers.emptyElement=function(e){return new a(e).empty()},a._attachToOTHelpers._findElementWithDisplayNone=c,o.css(a,c),o.attributes(a),o.classNames(a),o.observers(a),["on","off","isDisplayNone","show","hide","css","makeVisibleAndYield","addClass","removeClass"].forEach((e=>{a._attachToOTHelpers[e]=function(){const t=Array.prototype.slice.apply(arguments),n=t.shift(),r=new a(n);return a.prototype[e].apply(r,t)}}))},function(e,t,n){"use strict";e.exports=function(e){const t={};Object.keys(e).forEach((n=>{t[n]=e[n]})),e._attachToOTHelpers=t}},function(e,t,n){"use strict";const r=n(15),o=n(6),i=n(1)("Collection");e.exports=function(e){let t=[],n={};const s=e||"id";o(this);const a=function(e,t){return r(e[t])?e[t]():e[t]},c=function(e){this.trigger("update",e),this.trigger(`update:${e.target.id}`,e)}.bind(this),u=function(e){this.remove(e.target,e.reason)}.bind(this);this.reset=function(){t.forEach((function(e){e.off("updated",c,this),e.off("destroyed",u,this)}),this),t=[],n={}},this.destroy=function(e){t.forEach((t=>{t&&"function"==typeof t.destroy&&t.destroy(e,!0)})),this.reset(),this.off()},this.get=function(e){return e&&void 0!==n[e]?t[n[e]]:void 0},this.has=function(e){return e&&void 0!==n[e]},this.toString=function(){return t.toString()},this.where=function(e,n){return r(e)?t.filter(e,n):t.filter((t=>{for(const n in e)if(e.hasOwnProperty(n)&&a(t,n)!==e[n])return!1;return!0}))},this.find=function(e,n){let o;o=r(e)?e:function(t){for(const n in e)if(e.hasOwnProperty(n)&&a(t,n)!==e[n])return!1;return!0},o=o.bind(n);for(let e=0;e<t.length;++e)if(!0===o(t[e]))return t[e];return null},this.forEach=function(e,n){return t.forEach(e,n),this},this.map=function(e){return t.map(e)},this.add=function(e){const r=a(e,s);return this.has(r)?(i.warn(`Model ${r} is already in the collection`,t),this):(n[r]=t.push(e)-1,e.on("updated",c,this),e.on("destroyed",u,this),this.trigger("add",e),this.trigger(`add:${r}`,e),this)},this.remove=function(e,r){const o=a(e,s);t.splice(n[o],1);for(let e=n[o];e<t.length;++e)n[a(t[e],s)]=e;return delete n[o],e.off("updated",c,this),e.off("destroyed",u,this),this.trigger("remove",e,r),this.trigger(`remove:${o}`,e,r),this},this._triggerAddEvents=function(){this.where.apply(this,arguments).forEach((function(e){this.trigger("add",e),this.trigger(`add:${a(e,s)}`,e)}),this)},this.length=function(){return t.length}}},function(e,t,n){"use strict";const r=n(1)("deprecation");e.exports=function(e,t,n){let o=void 0===n?{}:n,i=o.value,s=o.name,a=void 0===s?`${t}`:s,c=o.getWarning,u=void 0===c?"":c,l=o.setWarning,d=void 0===l?"":l,p=o.canSet,h=void 0!==p&&p,f=o.warnOnSet,m=i,g=!1,b=!(void 0!==f&&f);const y={get:()=>(g||(g=!0,r.warn(`${a} is deprecated, and will be removed in the future. ${u}`.trim())),m),set(e){h&&(m=e),b||(b=!0,h?r.warn(`${a} is deprecated. ${d}`.trim()):r.warn(`${a} is deprecated, and will be removed in the future. ${d}`.trim()))}};Object.defineProperty(e,t,y)}},function(e,t,n){"use strict";const r=n(2),o=n(9);let i;const s=["description","fileName","lineNumber","message","name","number","stack"],a=function(e,t,n){switch(arguments.length){case 1:o(e)&&(n=e,t=void 0,e=void 0);break;case 2:o(t)&&(n=t,t=void 0)}if(n instanceof Error)for(let e=0,t=s.length;e<t;++e)this[s[e]]=n[s[e]];else if(o(n))for(const e in n)n.hasOwnProperty(e)&&(this[e]=n[e]);if(!(this.fileName&&this.lineNumber&&this.columnNumber&&this.stack)){const e=i();!this.fileName&&e.fileName&&(this.fileName=e.fileName),!this.lineNumber&&e.lineNumber&&(this.lineNumber=e.lineNumber),!this.columnNumber&&e.columnNumber&&(this.columnNumber=e.columnNumber),!this.stack&&e.stack&&(this.stack=e.stack)}!this.message&&e&&(this.message=e),this.name&&"Error"!==this.name||!t||(this.name=t)};e.exports=a,(a.prototype=Object.create(Error.prototype)).toString=function(){let e="";return this.fileName&&(e+=` ${this.fileName}`),this.lineNumber&&(e+=` ${this.lineNumber}`,this.columnNumber&&(e+=`:${this.columnNumber}`)),`<${this.name?`${this.name} `:""}${this.message}${e}>`},a.prototype.valueOf=a.prototype.toString;const c=function(e,t){return t.slice(2).map((e=>{const t={fileName:e.getFileName(),linenumber:e.getLineNumber(),columnNumber:e.getColumnNumber()};return e.getFunctionName()&&(t.functionName=e.getFunctionName()),e.getMethodName()&&(t.methodName=e.getMethodName()),e.getThis()&&(t.self=e.getThis()),t}))};i=function(){const e={};let t,n,o;switch(r.name){case"Firefox":case"Safari":try{(void 0!==typeof window?window:__webpack_require__.g).call.js.is.explody()}catch(e){o=e}t=(o.stack||"").split("\n"),t.shift(),t.shift(),e.stack=t,n=/@(.+?):([0-9]+)(:([0-9]+))?$/.exec(t[0]),n&&(e.fileName=n[1],e.lineNumber=parseInt(n[2],10),n.length>3&&(e.columnNumber=parseInt(n[4],10)));break;case"Chrome":case"Node":case"Opera":var i=Error.prepareStackTrace;Error.prepareStackTrace=c,o=new Error,e.stack=o.stack,Error.prepareStackTrace=i;var s=e.stack[0];e.lineNumber=s.lineNumber,e.columnNumber=s.columnNumber,e.fileName=s.fileName,s.functionName&&(e.functionName=s.functionName),s.methodName&&(e.methodName=s.methodName),s.self&&(e.self=s.self);break;default:o=new Error,o.stack&&(e.stack=o.stack.split("\n"))}return o.message&&(e.message=o.message),e}},function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<r.length;o++)n[(t=r[o].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],o=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&o?{usernameFragment:n.substr(12),password:o.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),o=3;o<n.length;o++){var i=n[o],s=r.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){var a=r.parseRtpMap(s),c=r.matchPrefix(e,"a=fmtp:"+i+" ");switch(a.parameters=c.length?r.parseFmtp(c[0]):{},a.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(r.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var o=0;return t.codecs.forEach((function(e){e.maxptime>o&&(o=e.maxptime)})),o>0&&(n+="a=maxptime:"+o+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],o=r.parseRtpParameters(e),i=-1!==o.fecMechanisms.indexOf("RED"),s=-1!==o.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),o.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),i&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&c&&n.push({ssrc:c});var l=r.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=l}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var o=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=o.length>0,t.compound=0===o.length;var i=r.matchPrefix(e,"a=rtcp-mux");return t.mux=i.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var o=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return o.length>0?{stream:(t=o[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),o=r.matchPrefix(e,"a=max-message-size:");o.length>0&&(t=parseInt(o[0].substr(19),10)),isNaN(t)&&(t=65536);var i=r.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var s=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var o=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,o){var i=r.writeRtpDescription(e.kind,t);if(i+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var s="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+s,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),i},r.getDirection=function(e,t){for(var n=r.splitLines(e),o=0;o<n.length;o++)switch(n[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[o].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return-1===["Chrome","Safari","Edge","Opera"].indexOf(e.browserName)||"Edge"===e.browserName&&!e.isChromiumEdge||e.isScreenSharing&&!e.capableSimulcastScreenshare||e.sessionInfo.p2pEnabled||!e.constraints.video&&!e.isCustomVideoTrack?1:e.videoDimensions.width>640&&e.videoDimensions.height>480?3:2}},function(e,t,n){"use strict";var r=n(3)(n(18));const o=n(49);e.exports=function(){function e(e,t){var n;let i=(void 0===t?{}:t).requestAnimationFrame,s=void 0===i?(n=window).requestAnimationFrame.bind(n):i;(0,r.default)(this,"_lastCalled",o()),(0,r.default)(this,"_audioLevel",void 0),(0,r.default)(this,"_running",!1),this._requestAnimationFrame=s,this._getAudioLevel=e,this._startLoop()}var t=e.prototype;return t._startLoop=function(){this._running||(this._running=!0,this._requestAnimationFrame(this._loop.bind(this)))},t._loop=function(){this._getAudioLevel(((e,t)=>{let n=null;if(!e){for(let e=0;e<t.length;e+=1){const r=t[e];let o=null;if(void 0!==r.audioOutputLevel){const e=parseFloat(r.audioOutputLevel)/32768;isNaN(e)||(o=e)}else void 0!==r.audioLevel&&(o=r.audioLevel);null!==o&&(null===n||o>n)&&(n=o)}this._audioLevel=n,this._running&&o()-this._lastCalled<1e4?this._requestAnimationFrame(this._loop.bind(this)):this._running=!1}}))},t.destroy=function(){this._running=!1},t.sample=function(e){if("function"==typeof e)throw new Error("sample no longer takes a callback");return this._startLoop(),this._lastCalled=o(),this._audioLevel},e}()},function(e,t,n){"use strict";const r=n(147),o=n(564),i=n(149);function s(e,t,n){return!(!e.publish&&t)&&("boolean"==typeof e.source?e.source:n?{mandatory:{sourceId:e.source}}:i(e.source)?{}:{deviceId:{exact:e.source}})}function a(e){let t=s(e.audio,e.enableRenegotiation,e.usingOptionalMandatoryStyle);if(!1===t)return!1;const n=e.usingOptionalMandatoryStyle,o=e.enableStereo,i=e.echoCancellation,a=e.noiseSuppression,c=e.autoGainControl,u=e.disableAudioProcessing,l=e=>{"object"==typeof t&&(n?(r(t,{optional:[]}),t.optional.push(e)):r(t,e))};return!o&&!u&&i&&a&&c||!0!==t||(t={}),o&&l({channelCount:2}),["echoCancellation","autoGainControl","noiseSuppression"].forEach((t=>{const n=!u&&e[t];l({[t]:n})})),t}function c(e){let t=s(e.video,e.enableRenegotiation,e.usingOptionalMandatoryStyle);if(!1===t)return!1;const n=e.videoDimensions,o=e.frameRate,i=e.maxResolution,a=e.facingMode,c=e.usingOptionalMandatoryStyle;if((n||o||i||a)&&!0===t&&(t={}),n){const e=n.width,o=n.height;c?(r(t,{optional:[]}),t.optional.push({minWidth:e},{maxWidth:e},{minHeight:o},{maxHeight:o})):r(t,{width:{ideal:e},height:{ideal:o}})}return o&&(c?(r(t,{optional:[]}),t.optional.push({minFrameRate:o},{maxFrameRate:o})):r(t,{frameRate:{ideal:o}})),i&&r(t,c?{mandatory:{maxWidth:i.width,maxHeight:i.height}}:{width:{max:i.width},height:{max:i.height}}),a&&(c?(r(t,{optional:[]}),t.optional.push({facingMode:a})):r(t,{facingMode:{ideal:a}})),t}e.exports=function(e){const t=o(e),n=function(e){return{audio:a(e),video:c(e)}}(t);return{constraints:n,publishAudio:t.audio.publish,publishVideo:t.video.publish,frameRate:t.frameRate,videoDimensions:t.videoDimensions,audioDeviceId:"string"==typeof t.audio.source?t.audio.source:void 0,videoDeviceId:"string"==typeof t.video.source?t.video.source:void 0}}},function(e,t,n){var r=n(64),o=n(52);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t,n){"use strict";const r=n(2),o=r.name,i=r.version,s=r.isChromiumEdge;e.exports=s||"Chrome"===o&&i>=72||"Firefox"===o&&i>=66||"Opera"===o&&i>=60||"Safari"===o},function(e,t,n){var r=n(59),o=n(260);e.exports=function(e){return o(r(e).toLowerCase())}},function(e,t,n){var r=n(569)("toUpperCase");e.exports=r},function(e,t){e.exports=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}},function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},function(e,t,n){var r=n(571),o=n(262),i=n(572);e.exports=function(e){return o(e)?i(e):r(e)}},function(e,t,n){"use strict";const r=n(2);e.exports=Boolean(r.isChrome&&r.version>=74||r.isEdge&&r.version>=79)},function(e,t,n){"use strict";const r=n(2);e.exports=e=>!!r.isElectron&&e instanceof MediaStreamTrack&&"Screen"===e.label},function(e,t,n){var r=n(99),o=n(578)(r);e.exports=o},function(e,t,n){"use strict";e.exports=15e3},function(e,t,n){"use strict";e.exports=function(e,t){return void 0===t&&(t=!1),void 0===e?t:"true"===e||!0===e}},function(e,t,n){"use strict";const r=n(2);e.exports=()=>!r.isNode&&!r.isElectron&&((r.isChrome||r.isOpera||r.isChromiumEdge)&&r.version>=74||r.isFirefox&&r.version>=68||r.isSafari&&r.version>=11)},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){var r=n(33),o=n(77),i=n(595),s=n(58),a=n(40),c=n(598),u=n(137),l=n(185),d=u((function(e,t){var n={};if(null==e)return n;var u=!1;t=r(t,(function(t){return t=s(t,e),u||(u=t.length>1),t})),a(e,l(e),n),u&&(n=o(n,7,c));for(var d=t.length;d--;)i(n,t[d]);return n}));e.exports=d},function(e,t,n){var r=n(206),o=n(35),i=n(96),s=Math.max;e.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var c=null==n?0:i(n);return c<0&&(c=s(a+c,0)),r(e,o(t,3),c)}},function(e,t,n){var r=n(600);e.exports=function(e){return e&&e.length?r(e):[]}},function(e,t,n){"use strict";const r=n(608),o=n(277),i=n(102)();e.exports=(e,t)=>{o(e,((e,n)=>{let o=[];i?"function"==typeof n.values?o=r(n.values()):"function"!=typeof n.forEach?o=Object.keys(n).map((e=>n[e])):n.forEach((e=>{o.push(e)})):n.result().forEach((e=>{const t={};e.names().forEach((n=>{t[n]=e.stat(n)})),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,o.push(t)})),t(null,o)}))}},function(e,t,n){var r=n(29),o=n(10),i=n(16);e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&"[object String]"==r(e)}},function(e,t,n){var r=n(610),o=n(30);e.exports=function(e){return null==e?[]:r(e,o(e))}},function(e,t,n){"use strict";const r=n(102)(),o=(e,t)=>{e.getStats(null).then((e=>t(null,e))).catch(t)},i=(e,t)=>{e.getStats((e=>{t(null,e)}),t)};e.exports=(e,t)=>{(r?o:i)(e,t)}},function(e,t,n){"use strict";var r=n(3);t.__esModule=!0,t.default=void 0;var o=r(n(157)),i=r(n(60)),s=r(n(18)),a=n(42),c=r(n(37)),u=r(n(620)),l=r(n(622)),d=r(n(49));const p=(0,r(n(1)).default)("QoS");let h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call(this,...r)||this,(0,s.default)((0,o.default)(t),"_peerConnection",void 0),(0,s.default)((0,o.default)(t),"_isPublisher",void 0),(0,s.default)((0,o.default)(t),"timeoutId",void 0),(0,s.default)((0,o.default)(t),"_creationTime",(0,d.default)()),(0,s.default)((0,o.default)(t),"offerMessagesReceived",0),(0,s.default)((0,o.default)(t),"prevStats",{timeStamp:(0,d.default)()}),(0,s.default)((0,o.default)(t),"changeCounters",{videoCodec:new l.default,audioCodec:new l.default}),t}(0,i.default)(t,e);var n=t.prototype;return n.startCollecting=function(e,n){if(!e||!e.getStats)return;this._isPublisher=n;const r=Boolean(this._peerConnection);if(this._peerConnection=e,r)return;const o=e=>{const n=(0,d.default)(),r={timeStamp:n,duration:Math.round((n-this._creationTime)/1e3),period:Math.round((n-this.prevStats.timeStamp)/1e3)};(0,u.default)(this._peerConnection,this.prevStats,r,this._isPublisher,((n,r)=>{n?p.error("Failed to Parse QOS Stats:",n):(this.handleParsedStats(r),clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>o(t.INTERVAL)),e))}))};this.timeoutId=setTimeout((()=>o(t.INTERVAL-t.INITIAL_INTERVAL)),t.INITIAL_INTERVAL)},n.stopCollecting=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this._peerConnection=null},n.handleOfferMessageReceived=function(){this.offerMessagesReceived+=1},n.handleParsedStats=function(e){Object.keys(this.changeCounters).forEach((t=>{this.changeCounters[t].onValue(e[t]),e[`${t}ChangeCount`]=this.changeCounters[t].changeCount})),e.offerMessagesReceived=this.offerMessagesReceived;const t=(0,c.default)(e);if(["audioSentBytes","audioSentPackets","audioSentPacketsLost","videoSentBytes","videoSentPackets","videoSentPacketsLost","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost"].forEach((n=>{t[n]=this.prevStats&&this.prevStats[n]?e[n]-this.prevStats[n]:e[n]})),this.prevStats&&this.prevStats.videoFramesReceived){const n=e.videoFramesReceived-this.prevStats.videoFramesReceived,r=e.period;t.videoFrameRateReceived=Math.round(n/r)}this.prevStats=e,delete t.framesDecoded,delete t.framesEncoded,this.emit("stats",t)},t}(a.EventEmitter);h.INITIAL_INTERVAL=1e3,h.INTERVAL=3e4;var f=h;t.default=f},function(e,t,n){"use strict";e.exports=e=>{switch(e>>24){case 0:return"TURN/TLS";case 1:return"TURN/TCP";case 2:return"TURN/UDP";default:return""}}},function(e,t,n){"use strict";const r=n(19),o=n(160).default,i=n(4),s=n(11);e.exports=function(e){let t=void 0===e?{}:e,n=t.haveGetDisplayMedia,a=void 0===n?o:n,c=t.global,u=void 0===c?void 0!==typeof window?window:__webpack_require__.g:c,l=t.Errors,d=void 0===l?i:l,p=t.otError,h=void 0===p?s():p;const f=!a&&!!u.navigator.webkitGetUserMedia&&!u.navigator.userAgent.match(/android/i)&&void 0!==u.chrome;return{isSupportedInThisBrowser:f,autoRegisters:!1,extensionRequired:!0,getConstraintsShowsPermissionUI:!0,sources:{screen:!0,application:!1,window:!0,browser:!0},register(e,t){return 2===t?this.registerVersion2(e):this.registerVersion1(e)},registerVersion1(e){if(!e)throw new Error("initChromeScreenSharingExtensionHelper: extensionID is required.");const t=f,n={};let o;const i=`com.tokbox.screenSharing.${e}`,s=function(e,t){const n={payload:t,from:"jsapi"};return n[i]=e,n},a=function(e,t){let o;const i=r();return n[i]=function(){clearTimeout(o),o=null,e(...arguments)},t&&(o=setTimeout((()=>{delete n[i],e(h(d.TIMEOUT,new Error("Timeout waiting for response to screensharing request.")))}),t)),i},c=function(e){if(!e)throw new Error("isAvailable: callback is required.");if(t)if(void 0!==o)setTimeout(e.bind(null,o));else{const t=a((t=>{!0!==o&&(o="extensionLoaded"===t),e(o)}),2e3),n=s("isExtensionInstalled",{requestId:t});u.postMessage(n,"*")}else setTimeout(e.bind(null,!1))};return u.addEventListener("message",(e=>{if(e.origin!==u.location.origin)return;if(null==e.data||"object"!=typeof e.data)return;if("extension"!==e.data.from)return;const t=e.data[i],r=e.data.payload;if(r&&r.requestId){const e=n[r.requestId];delete n[r.requestId],e&&e(t,r)}"extensionLoaded"===t&&(o=!0)})),{extensionAPIVersion:1,extensionID:e,isInstalled:c,getConstraints:function(e,t,n){if(!n)throw new Error("getSourceId: callback is required");c((r=>{if(!r)return n(h(d.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")));const o=a(((e,r)=>{"object"==typeof e&&e.name&&e.stack?n(e):"permissionDenied"===e?n(h(d.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):(t.video||(t.video={}),t.video.mandatory||(t.video.mandatory={}),t.video.mandatory.chromeMediaSource="desktop",t.video.mandatory.chromeMediaSourceId=r.sourceId,n(void 0,t))}));u.postMessage(s("getSourceId",{requestId:o,source:e}),"*")}))}}},registerVersion2(e){const t=f&&void 0!==u.chrome.runtime,n=function(n){if(!n)throw new Error("isAvailable: callback is required.");t?u.chrome.runtime.sendMessage(e,{type:"isInstalled"},null,(e=>{setTimeout(n.bind(null,!!e))})):setTimeout(n.bind(null,!1))};return{extensionAPIVersion:2,extensionID:e,isInstalled:n,getConstraints:function(t,r,o){if(!o)throw new Error("getSourceId: callback is required");n((n=>{if(!n)return o(h(d.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")));u.chrome.runtime.sendMessage(e,{type:"getSourceId",source:t},null,(e=>{"permissionDenied"===e.error?o(h(d.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):e.error?o(new Error(`UnexpectError: ${e.error}`)):(r.video||(r.video={}),r.video.mandatory||(r.video.mandatory={}),r.video.mandatory.chromeMediaSource="desktop",r.video.mandatory.chromeMediaSourceId=e.sourceId,o(void 0,r))}))}))}}}}}},function(e,t,n){"use strict";(function(t){const r=n(155),o=n(103);e.exports=function(e){void 0===e&&(e={});const i=e.Archiving||n(626),s=e.AudioLevelMeter||n(282),a=e.AudioLevelTransformer||n(143),c=e.BackingBar||n(283),u=e.Chrome||n(144),l=e.MuteButton||n(284)(),d=e.NamePanel||n(285),p=e.StylableComponent||n(152),h=e.logging||n(1)("createChromeMixin");return function(e,n){let f,m,g,b=void 0===n?{}:n,y=b.name,v=b.publishAudio,w=b.publishVideo,x=b.audioSource,S=b.showControls,E=b.shouldAllowAudio,T=b.logAnalyticsEvent;const C={},_=r(),I=t=>{if(!1===t)return"off";const n=e.getStyle("buttonDisplayMode");return!1===n?"on":n};let k=new t(((t,n)=>{C.init=n=>{e.getStyle("showArchiveStatus")||T("showArchiveStatus","createChrome",{mode:"off"});const r={backingBar:new c({nameMode:y?e.getStyle("nameDisplayMode"):"off",muteMode:I(e.getStyle("buttonDisplayMode"))}),name:new d({name:y,mode:e.getStyle("nameDisplayMode")}),archive:new i({show:Boolean(e.getStyle("showArchiveStatus"))&&"off"!==e.getStyle("archiveStatusDisplayMode"),archiving:!1}),muteButton:new l({muted:!1===v,mode:I.call(null,e.getStyle("buttonDisplayMode"))})};f=new s({mode:e.getStyle("audioLevelDisplayMode")});const p=new a,h=new o((()=>{const t=v?p.transform(e.loudness):0;f.setValue(t)}));f.watchVisibilityChanged((e=>{e?h.start():h.stop()})),f.audioOnly(!w&&v),r.audioLevel=f,n&&n.domElement&&(g=n,m=new u({parent:g.domElement}).set(r).on({muted:()=>e.publishAudio(!1),unmuted:()=>e.publishAudio(!0)}),null!==x&&!1!==x||C.removeAudioTrack(),t())},C.reset=()=>{n(new Error("Chrome still being created")),m&&(m.destroy(),m=null)},C.destroy=()=>{C.reset(),_.releaseAll(),k=null}}));k.catch((e=>{e&&"Chrome still being created"===e.message||h.error("createChromeMixin failed to setup UI",e)})),C.setAudioOnly=e=>{f&&f.audioOnly(e)},C.setArchivingStatus=e=>{m&&m.archive.setArchiving(e)},C.setMuted=e=>{m&&m.muteButton&&m.muteButton.muted(e)},C.removeAudioTrack=()=>{m&&m.muteButton&&m.muteButton.remove()},C.addAudioTrack=()=>{m&&m.muteButton&&m.muteButton.add()},p(e,{showArchiveStatus:!0,nameDisplayMode:"auto",buttonDisplayMode:"auto",audioLevelDisplayMode:E?"auto":"off",archiveStatusDisplayMode:"auto",backgroundImageURI:null},S,(e=>{T("SetStyle","Publisher",e,null,.1)}));const R=(e,t)=>{k.then((()=>{switch(e){case"nameDisplayMode":m.name.setDisplayMode(t),m.backingBar.setNameMode(t);break;case"showArchiveStatus":T("showArchiveStatus","styleChange",{mode:t?"on":"off"}),m.archive.setShowArchiveStatus(Boolean(t));break;case"archiveStatusDisplayMode":m.archive.setShowArchiveStatus("off"!==t);break;case"buttonDisplayMode":m.muteButton.setDisplayMode(t),m.backingBar.setMuteMode(t);break;case"audioLevelDisplayMode":m.audioLevel.setDisplayMode(t);break;case"backgroundImageURI":g.setBackgroundImageURI(t)}}))};return e.on("styleValueChanged",R),_.add((()=>e.off("styleValueChanged",R))),C}}}).call(this,n(0))},function(e,t,n){"use strict";(function(t){const r=n(104),o=n(36),i=n(5),s=n(42);e.exports=function(e){const n=this,a=new s;let c,u,l,d,p=!0,h=!1,f="auto";const m=e.maxValue||1,g=e.minValue||0;function b(){const e=(h&&"auto"===f||"on"===f)&&p;d!==e&&(d=e,a.emit("visibilityChanged",e))}r(n,{audioOnly:{get:()=>h,set(e){h=e,b()}}}),n.setValue=function(e){l=e,function(){const e=(l-g)/(m-g);u.style.transform=`scale(${Math.sqrt(e)})`}()},n.watchVisibilityChanged=function(e){return a.on("visibilityChanged",e),t.resolve().then((()=>{e(d)})),function(){a.removeListener("visibilityChanged",e)}};const y={mode:e?e.mode:"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-level-meter"},onCreate:function(){u=i.createElement("div",{className:"OT_audio-level-meter__value"},""),c=i.createElement("div",{className:"OT_audio-level-meter__audio-only-img"},"");const e=n.domElement;e.appendChild(c),e.appendChild(u),n.watchVisibilityChanged((e=>{e?i.removeClass(n.domElement,"OT_hide-forced"):i.addClass(n.domElement,"OT_hide-forced")}))},onDestroy:function(){a.removeAllListeners("visibilityChanged")}};o(this,y),n.setDisplayMode=function(e){f=e,b()},n.getDisplayMode=function(){return f},n.showAfterLoading=function(){p=!0,b()},n.hideWhileLoading=function(){p=!1,b()},b()}}).call(this,n(0))},function(e,t,n){"use strict";const r=n(36);e.exports=function(e){let t=e.nameMode,n=e.muteMode;function o(){return"on"===t||"on"===n?"on":"mini"===t||"mini"===n?"mini":"mini-auto"===t||"mini-auto"===n?"mini-auto":"auto"===t||"auto"===n?"auto":"off"}r(this,{mode:o(),nodeName:"div",htmlContent:"",htmlAttributes:{className:"OT_bar OT_edge-bar-item"}}),this.setNameMode=function(e){t=e,this.setDisplayMode(o())},this.setMuteMode=function(e){n=e,this.setDisplayMode(o())}}},function(e,t,n){"use strict";const r=n(5),o=n(36),i=n(104);e.exports=function(e){void 0===e&&(e={});const t=e.OTHelpers||r,n=e.Widget||o;return function(e){let r=e.muted||!1;const o=()=>{r?t.addClass(this.domElement,"OT_active"):t.removeClass(this.domElement,"OT_active ")},s=()=>(r=!r,o(),r?this.parent.trigger("muted",this):this.parent.trigger("unmuted",this),!1);i(this,{muted:{get:()=>r,set(e){r=e,o()}}});const a=r?"OT_edge-bar-item OT_mute OT_active":"OT_edge-bar-item OT_mute";let c;n(this,{mode:e.mode,nodeName:"button",htmlContent:"Mute",htmlAttributes:{className:a,type:"button"},onCreate:e=>{t.on(e,"click",s)},onDestroy:e=>{t.off(e,"click",s)}}),this.remove=()=>{this.domElement&&this.domElement.parentNode&&(c=this.domElement.parentNode,this.domElement.parentNode.removeChild(this.domElement))},this.add=()=>{c&&this.domElement&&!this.domElement.parentNode&&c.appendChild(this.domElement)}}}},function(e,t,n){"use strict";const r=n(36),o=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML};e.exports=function(e){let t=e.name;t&&""!==t.trim().length||(t=null,e.mode="off"),this.setName=function(e){t||this.setDisplayMode("auto"),t=o(e),this.domElement.innerHTML=t}.bind(this),t=o(t),r(this,{mode:e.mode,nodeName:"h1",htmlContent:t,htmlAttributes:{className:"OT_name OT_edge-bar-item"}})}},function(e,t,n){"use strict";e.exports=function(e){void 0===e&&(e={});const t=e.global||(void 0!==typeof window?window:n.g);return function(){if(t.navigator.mediaDevices){const e=t.navigator.mediaDevices;return e.enumerateDevices&&e.enumerateDevices.bind(e)}}}},function(e,t,n){"use strict";const r=n(2),o=n(160).default;e.exports={isSupportedInThisBrowser:!r.isLegacyEdge&&!r.isElectron&&o&&!r.isAndroid,autoRegisters:!0,extensionRequired:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:"Safari"!==r.name,browser:"Safari"!==r.name},register:()=>({isInstalled(e){e(void 0)},getConstraints(e,t,n){n(void 0,{video:t.video,audio:t.audio})}})}},function(e,t,n){"use strict";t.isMediaStreamTrack=e=>e&&"object"==typeof e&&"string"==typeof e.kind&&"function"==typeof e.stop&&"boolean"==typeof e.enabled},function(e,t,n){"use strict";n.r(t),function(e){var n=function(t,n,r,o){return new(r||(r=e))((function(e,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(t){t.done?e(t.value):new r((function(e){e(t.value)})).then(s,a)}c((o=o.apply(t,n||[])).next())}))},r=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function o(){return"undefined"!=typeof window||void 0!==typeof window?window:__webpack_require__.g}var i="onFailure must return boolean, or delay in ms";t.default=function(t,s,a){return void 0===a&&(a=10),function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return n(this,void 0,void 0,(function(){var n,u,l;return r(this,(function(d){switch(d.label){case 0:n=0,u=function(){var u,l,d;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,6]),u={},[4,t.apply(void 0,c)];case 1:return[2,(u.value=r.sent(),u)];case 2:if(l=r.sent(),!1===(d=s(l,n))||null==d||n>=a)throw l;return"number"!=typeof d?[3,4]:[4,new e((function(e){return o().setTimeout(e,d)}))];case 3:return r.sent(),[3,5];case 4:if(!0!==d)throw new Error(i);r.label=5;case 5:return[3,6];case 6:return[2]}}))},d.label=1;case 1:return(n+=1)?[5,u()]:[3,3];case 2:return"object"==typeof(l=d.sent())?[2,l.value]:[3,1];case 3:return[2]}}))}))}}}.call(this,n(0))},function(e,t,n){"use strict";const r=n(1)("videoContentHint"),o=["","text","motion","detail"],i=e=>o.includes(e),s=e=>{var t;return null==e||null==(t=e.getVideoTracks())?void 0:t[0]};e.exports={isValidVideoContentHint:i,setVideoContentHint:(e,t)=>{if(!i(t))return void r.warn('Invalid content hint. Valid content hints are "text", "detail", "motion", or ""');const n=s(e);n?void 0!==n.contentHint?n.contentHint=t:r.warn("contentHint not supported by this browser"):r.warn("Tried to set contentHint but no video track is present")},getVideoContentHint:e=>{const t=s(e);return(null==t?void 0:t.contentHint)||""}}},function(e,t,n){"use strict";const r=n(104);e.exports=function(){return function(e,t){let n;r(this,{muted:{get:()=>n,set(t){if(n===t)return;n=t;const r=e.getAudioTracks();for(let e=0,t=r.length;e<t;++e)r[e].enabled=!n}}}),void 0!==t?this.muted(!0===t):e.getAudioTracks().length?this.muted(!e.getAudioTracks()[0].enabled):this.muted(!1)}}},function(e,t,n){"use strict";e.exports=function(e){void 0===e&&(e={});const t=e.Errors||n(4),r=e.otError||n(11)(),o={};return(void 0!==typeof window?window:__webpack_require__.g).MediaError&&(o[(void 0!==typeof window?window:__webpack_require__.g).MediaError.MEDIA_ERR_ABORTED]={name:t.MEDIA_ERR_ABORTED,message:"The fetching process for the media resource was aborted by the user agent at the user's request."},o[(void 0!==typeof window?window:__webpack_require__.g).MediaError.MEDIA_ERR_NETWORK]={name:t.MEDIA_ERR_NETWORK,message:"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable."},o[(void 0!==typeof window?window:__webpack_require__.g).MediaError.MEDIA_ERR_DECODE]={name:t.MEDIA_ERR_DECODE,message:"An error of some description occurred while decoding the media resource, after the resource was established to be usable."},o[(void 0!==typeof window?window:__webpack_require__.g).MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]={name:t.MEDIA_ERR_SRC_NOT_SUPPORTED,message:"The media resource indicated by the src attribute was not suitable."}),function(e){const t=o[e.code];return t?r(t.name,new Error(`There was an unexpected problem with the Video Stream: ${t.message}`)):new Error("An unknown error occurred"+(e.message?`: ${e.message}`:"."))}}},function(e,t,n){"use strict";(function(t){var r=n(3),o=r(n(20)),i=r(n(12)),s=r(n(13)),a=r(n(18));const c=n(6),u=n(63),l=n(637),d=n(638),p=n(639),h=n(106),f=n(2),m=n(24)().hasAudioOutputApiSupport,g=n(294),b=n(105).getCurrentAudioOutputDeviceId;function y(e,t){const n=document.createElement("video");return d(n),n.autoplay=!0,n.playsinline=!0,n.innerHTML=e,n.setAttribute("autoplay",""),n.setAttribute("playsinline",""),!0===t&&(n.muted="true"),n}function v(){const e=y("");return e.setAttribute("style","display:none"),e}e.exports=function(e){void 0===e&&(e={});const r=e.audioContext||n(159)(),d=e.canBeOrientatedMixin||n(640),w=e.document||(void 0!==typeof window?window:__webpack_require__.g).document,x=e.listenForTracksEnded||n(641)(),S=e.logging||n(1),E=e.OTHelpers||n(5),T=e.videoElementErrorMap||n(292)(),C=e.WebaudioAudioLevelSampler||n(145),_=e.global||(void 0!==typeof window?window:__webpack_require__.g);let I=1,k=function(){function e(e,t){var n=this;let r=e._inject,o=void 0===r?{}:r,l=o.createVideoElement,p=void 0===l?y:l,h=o.createAudioOnlyVideoElement,m=void 0===h?v:h,b=e.muted,w=e.fallbackText,x=e.widgetType;(0,a.default)(this,"_domElement",void 0),(0,a.default)(this,"_domAudioOnlyVideoElement",void 0),(0,a.default)(this,"_blockedVolume",void 0),(0,a.default)(this,"_mediaStoppedListener",void 0),(0,a.default)(this,"_audioLevelSampler",void 0),(0,a.default)(this,"_playInterrupts",0),(0,a.default)(this,"_isVideoLoadedMetaData",!1),(0,a.default)(this,"_audioOnlyVideoElementWatcher",void 0),this.logging=S(`NativeVideoElementWrapper:${I}`),I+=1,c(this),this._defaultAudioVolume=t,this._widgetType=x;let E=!1;this._domElement=p(w,b),this.trigger("videoElementCreated",this._domElement),this._domElementEvents=u(this._domElement),this._domElementEvents.on("loadstart",(()=>this._onDomElementLoadStart())),this._domElementEvents.on("timeupdate",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.trigger("timeupdate",...t)})),this._domElementEvents.on("loadedmetadata",(0,s.default)(i.default.mark((function e(){var t,r,o,s,a=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n._isVideoLoadedMetaData=!0,t=a.length,r=new Array(t),o=0;o<t;o++)r[o]=a[o];if(n.trigger("loadedmetadata",...r),!n._domAudioOnlyVideoElement){e.next=10;break}if(s=n._domAudioOnlyVideoElement.srcObject,n._removeAudioOnlyVideoElement(),!s){e.next=10;break}return e.next=9,g();case 9:n.play();case 10:case"end":return e.stop()}}),e)})))),this._domElementEvents.on("error",(e=>{this.trigger("error",T(e.target.error))}),!1),this._domElementEvents.on("pause",(()=>{E||(this.logging.warn("Video element paused, auto-resuming. If you intended to do this, use publishVideo(false) or subscribeToVideo(false) instead."),E=!0),this.play()})),this.on("destroyed",(()=>{this._domElementEvents.removeAll(),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll()})),d(this,(()=>this._domElement)),"Safari"===f.name&&"subscriber"===this._widgetType&&(this._domAudioOnlyVideoElement=m(),this._bindAudioOnlyVideoElementEvents())}var n=e.prototype;return n._onDomElementLoadStart=function(){var e=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("subscriber"!==this._widgetType||!m()){e.next=3;break}return e.next=3,this._setActiveAudioOutputDevice();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n._setActiveAudioOutputDevice=function(){var e=(0,s.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(t=b())&&"default"!==t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.setSinkId(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n._rebindSrcObject=function(){this._domElement&&(this._domElement.srcObject=this._domElement.srcObject)},n._pauseAndPlay=function(){this._domElement&&(this._domElement.pause(),this._domElement.play())},n._startAudioOnlyVideoElementWatcher=function(){var e=(0,s.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.isiOS,this._audioOnlyVideoElementWatcher=setInterval((()=>{this._domAudioOnlyVideoElement&&this._domAudioOnlyVideoElement.paused&&(this._domAudioOnlyVideoElement.srcObject=this._domAudioOnlyVideoElement.srcObject,t&&this._domAudioOnlyVideoElement.play())}),100),e.next=5,h(1e3);case 5:clearInterval(this._audioOnlyVideoElementWatcher),this._audioOnlyVideoElementWatcher=null;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n._removeAudioOnlyVideoElement=function(){var e=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._domAudioOnlyVideoElement.srcObject=null,this._domAudioOnlyVideoElement.parentNode.removeChild(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll(),this._domAudioOnlyVideoElement=null;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.bindAudioTrackOnly=function(){var e=(0,s.default)(i.default.mark((function e(){var t,n,r,o,s,a,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._stream.getVideoTracks(),n=this._stream.getAudioTracks(),r=t[0],o=void 0===r?{}:r,s=n[0],a=void 0===s?{}:s,e.next=6,g();case 6:c=!o.enabled&&a.enabled,!this._isVideoLoadedMetaData&&c&&this._domAudioOnlyVideoElement&&(this._domAudioOnlyVideoElement.srcObject=new _.MediaStream(n),this._startAudioOnlyVideoElementWatcher());case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n._bindAudioOnlyVideoElementEvents=function(){var e=this;this._domAudioOnlyVideoElementEvents=u(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElementEvents.on("pause",(()=>this.play())),this._domAudioOnlyVideoElementEvents.on("timeupdate",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.trigger("timeupdate",...n)})),this._domAudioOnlyVideoElementEvents.on("loadedmetadata",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.trigger("loadedmetadata",...n)}))},n.whenTimeIncrements=function(e,t){this.once("timeupdate",(()=>{e.call(t,this)}))},n.domElement=function(){return this._domElement},n.videoWidth=function(){return this._domElement?Number(this._domElement["video"+(this.isRotated()?"Height":"Width")]):0},n.videoHeight=function(){return this._domElement?Number(this._domElement["video"+(this.isRotated()?"Width":"Height")]):0},n.aspectRatio=function(){return this.videoWidth()/this.videoHeight()},n.imgData=function(){const e=E.createElement("canvas",{width:this.videoWidth(),height:this.videoHeight(),style:{display:"none"}});w.body.appendChild(e);let t=null;try{e.getContext("2d").drawImage(this._domElement,0,0,e.width,e.height),t=e.toDataURL("image/png")}catch(e){}return E.removeElement(e),null===t||"data:,"===t?(this.logging.warn("Cannot get image data yet"),null):t.replace("data:image/png;base64,","").trim()},n.appendTo=function(e){return e.appendChild(this._domElement),this._domAudioOnlyVideoElement&&e.appendChild(this._domAudioOnlyVideoElement),this},n.isAudioBlocked=function(){return void 0!==this._blockedVolume},n.unblockAudio=function(){var e=(0,s.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isAudioBlocked()){e.next=3;break}return this.logging.warn("Unexpected call to unblockAudio() without blocked audio"),e.abrupt("return");case 3:return t=this._blockedVolume,this._blockedVolume=void 0,this.setAudioVolume(t),e.prev=6,e.next=9,this.play();case 9:e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(6),this._blockedVolume=t,this._domElement.muted=!0,e.t0;case 16:this.trigger("audioUnblocked");case 17:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(){return e.apply(this,arguments)}}(),n.rebind=function(){var e=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._domElement){e.next=2;break}throw new Error("Can't rebind because _domElement no longer exists");case 2:this._playInterrupts++,this._domElement.srcObject=this._domElement.srcObject,this._hasAudioOnlyVideoElement()&&(this._domAudioOnlyVideoElement.srcObject=this._domAudioOnlyVideoElement.srcObject);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n._createAudioLevelSampler=function(){if(this._removeAudioLevelSampler(),this._stream.getAudioTracks().length>0){try{this._audioContext=r()}catch(e){this.logging.warn("Failed to get AudioContext(), audio level visualisation will not work",e)}this._audioContext&&(this._audioLevelSampler=new C(this._audioContext),this._audioLevelSampler.webRTCStream(this._stream))}},n._removeAudioLevelSampler=function(){this._audioContext&&(delete this._audioContext,delete this._audioLevelSampler)},n._toggleVideoTracks=function(){var e=(0,s.default)(i.default.mark((function e(){var t,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this._domElement.srcObject.getTracks().filter((e=>e.enabled))).length>1)){e.next=8;break}return(n=t.filter((e=>"video"===e.kind))).forEach((e=>{e.enabled=!1})),e.next=7,g();case 7:n.forEach((e=>{e.enabled=!0}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n._hasAudioOnlyVideoElement=function(){return this._domAudioOnlyVideoElement&&this._domAudioOnlyVideoElement.srcObject},n.play=function(){var e=(0,s.default)(i.default.mark((function e(){var t,n,r,o,s,a,c,u,l,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._playInterrupts,n="Safari"===f.name,r=this._hasAudioOnlyVideoElement()?this._domAudioOnlyVideoElement:this._domElement,!n){e.next=6;break}return e.next=6,g();case 6:if(!f.isiOS||!f.isSafari){e.next=16;break}if("publisher"!==this._widgetType){e.next=15;break}if(o=f.iOSVersion>=14&&f.iOSVersion<=14.2,s=this._stream.getVideoTracks(),a=s[0],c=void 0===a?{}:a,u=this._stream.getAudioTracks(),l=u[0],d=void 0===l?{}:l,!o||p(r)||!c.enabled){e.next=13;break}return e.abrupt("return");case 13:if(!d.muted){e.next=15;break}return e.abrupt("return");case 15:this._toggleVideoTracks();case 16:return e.prev=16,e.next=19,r.play();case 19:return e.abrupt("return");case 22:if(e.prev=22,e.t0=e.catch(16),"AbortError"===(e.t0||{}).name&&this._playInterrupts++,!(this._playInterrupts>t)){e.next=31;break}return e.next=30,this.play();case 30:return e.abrupt("return");case 31:throw e.t0;case 32:case"end":return e.stop()}}),e,this,[[16,22]])})));return function(){return e.apply(this,arguments)}}(),n._bindToStream=function(e){this._stream=e,this._domElement.srcObject=e,this._domAudioOnlyVideoElement&&this.bindAudioTrackOnly()},n.bindToStream=function(){var e=(0,s.default)(i.default.mark((function e(t){var n,r,a,c=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._domElement){e.next=2;break}throw new Error("Can't bind because _domElement no longer exists");case 2:return this._bindToStream(t),(0,s.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.play();case 3:e.next=26;break;case 5:if(e.prev=5,e.t0=e.catch(0),n=!!t.getAudioTracks().length,!c._hasAudioOnlyVideoElement()||"NotAllowedError"!==e.t0.name){e.next=15;break}return c._domAudioOnlyVideoElement.muted=!0,e.next=12,c.play();case 12:c._domAudioOnlyVideoElement.muted=!1,e.next=26;break;case 15:if(!n){e.next=23;break}return c._blockedVolume=c.getAudioVolume(),c._domElement.muted=!0,e.next=20,c.play();case 20:c.trigger("audioBlocked"),e.next=26;break;case 23:return c._domElement.muted=!0,e.next=26,c.play();case 26:case"end":return e.stop()}}),e,null,[[0,5]])})))().catch((e=>{this.logging.debug(".play() failed: ",e)})),n={width:this._domElement.videoWidth,height:this._domElement.videoHeight},this.trigger("videoDimensionsChanged",(0,o.default)({},n),(0,o.default)({},n)),this._domElementEvents.on("resize",(()=>{const e=this._domElement,t=e.videoWidth,r=e.videoHeight,i=t!==n.width,s=r!==n.height;(i||s)&&(this.trigger("videoDimensionsChanged",(0,o.default)({},n),{width:t,height:r}),n.width=t,n.height=r)})),r=()=>{this._mediaStoppedListener.stop(),this._domElement&&(this._domElement.onended=null),this.trigger("mediaStopped")},a=e=>{this.trigger("mediaStopped",e)},this._domElement.onended=()=>r(),this._mediaStoppedListener=x(t,r,a),this._createAudioLevelSampler(),e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.unbindStream=function(){return this._domElement&&(this._domElement.srcObject=null),this._domAudioOnlyVideoElement&&(this._domAudioOnlyVideoElement.srcObject=null),this._removeAudioLevelSampler(),this},n.setAudioVolume=function(e){if(this.isAudioBlocked())return void(this._blockedVolume=e);const t=parseFloat(e)/100,n=[this.domElement()];this._domAudioOnlyVideoElement&&n.push(this._domAudioOnlyVideoElement),n.forEach((e=>{e&&(e.volume=t,e.muted=0===t)}))},n.getAudioVolume=function(){if(this.isAudioBlocked())return this._blockedVolume;const e=this.domElement();return e?e.muted?0:100*e.volume:this._defaultAudioVolume},n.audioChannelType=function(e){const t=this.domElement();return void 0!==e&&(t.mozAudioChannelType=e),"mozAudioChannelType"in this._domElement?t.mozAudioChannelType:"unknown"},n.getAudioInputLevel=function(){return this._audioLevelSampler.sample()},n.refreshTracks=function(){this._mediaStoppedListener&&this._mediaStoppedListener.refresh(),this._createAudioLevelSampler()},n.destroy=function(){this._mediaStoppedListener&&this._mediaStoppedListener.stop(),this.logging.debug("removing domElementEvents"),this._domElementEvents.removeAll(),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll(),this._audioOnlyVideoElementWatcher&&clearInterval(this._audioOnlyVideoElementWatcher),this.unbindStream(),this._domElement&&(E.removeElement(this._domElement),this._domElement=null),this._domAudioOnlyVideoElement&&(E.removeElement(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElement=null),this.trigger("destroyed"),l("NativeVideoElementWrapper",this)},n.setSinkId=function(e){const n=[this._domElement,this._domAudioOnlyVideoElement].map((t=>{if(t)return t.setSinkId(e)}));return t.all(n)},e}();return k}}).call(this,n(0))},function(e,t,n){"use strict";(function(t){e.exports=()=>new t((e=>setTimeout(e)))}).call(this,n(0))},function(e,t,n){"use strict";(function(t){const r=n(7),o=n(48),i=n(62),s=n(6);e.exports=function(e){void 0===e&&(e={});const a=e.getStatsHelpers||n(75),c=e.OTHelpers||n(5),u=e.PeerConnection||n(101)(),l=e.setCertificates||n(164)(),d=e.watchAudioAcquisition||n(643);return function(e){let n,p,h=e.iceConfig,f=e.webRTCStream,m=e.channels,g=e.sendMessage,b=e.capableSimulcastStreams,y=e.overrideSimulcastEnabled,v=e.logAnalyticsEvent,w=e.offerOverrides,x=e.answerOverrides,S=e.sourceStreamId,E=e.isP2pEnabled,T=!1;const C=function(){this.destroy(),T&&(T=!1,this.trigger("iceRestartFailure")),this.trigger("disconnected")},_=function(e){let t=e.reason,n=e.prefix;this.trigger("error",{reason:t,prefix:n})},I=function(e){T&&n.iceConnectionStateIsConnected()&&(T=!1,this.trigger("iceRestartSuccess")),"connected"===e&&("Chrome"===c.env.name&&(p&&p(),p=d(n.getStats.bind(n),(()=>this.trigger("audioAcquisitionProblem")))),this.trigger("connected")),this.trigger("iceConnectionStateChange",e)};s(this),this.changeMediaDirectionToInactive=()=>{n&&n.changeMediaDirectionToInactive()},this.changeMediaDirectionToRecvOnly=()=>{n&&n.changeMediaDirectionToRecvOnly()},this.getDataChannel=function(e,t,r){n.getDataChannel(e,t,r)},this.getSourceStreamId=()=>n.getSourceStreamId(),this.destroy=function(){p&&(p(),p=null),n&&(n.disconnect(),n=null),this.off()},this.processMessage=function(e,t){n.processMessage(e,t)},this.addTrack=function(e,t,r){return n.addTrack(e,t,r)},this.removeTrack=function(e){return n.removeTrack(e)},this.getLocalStreams=function(){return n.getLocalStreams()},this.init=function(e,t){const o={iceConfig:h.needRumorIceServersFallback?r(h,{servers:[...e,...h.servers]}):h,channels:m,capableSimulcastStreams:b,overrideSimulcastEnabled:y};l(o,((e,o)=>{if(e)return void t(e);const i=r({logAnalyticsEvent:v,isPublisher:!0,offerOverrides:w,answerOverrides:x,sourceStreamId:S,p2p:E},o);n=new u(r({sendMessage:g},i)),n.on({close:C,error:_,qos:e=>this.trigger("qos",e),iceConnectionStateChange:I},this),n.addLocalStream(f).then((()=>{t(void 0)})).catch(t)}))},this.getSenders=function(){return n.getSenders()},this.iceRestart=function(){n&&(T=!0,n.iceRestart())},this.hasRelayCandidates=()=>n.hasRelayCandidates(),this.iceConnectionStateIsConnected=function(){return n.iceConnectionStateIsConnected()},this.findAndReplaceTrack=(e,t)=>n.findAndReplaceTrack(e,t),this._testOnlyGetFramesEncoded=()=>new t(((e,t)=>{n.getStats(((n,r)=>{if(n)return void t(n);const s=i(r,(e=>a.isVideoStat(e,r)&&a.isOutboundStat(e)));s?e(o(s,["timestamp","framesEncoded"])):t(new Error("Could not find framesEncoded in getStats report"))}))})),this.getStats=e=>n.getStats(e),this.getRtcStatsReport=e=>n.getRtcStatsReport(e)}}}).call(this,n(0))},function(e,t,n){"use strict";const r=n(7),o=n(6);e.exports=function(e){void 0===e&&(e={});const t=e.OTHelpers||n(5),i=e.PeerConnection||n(101)(),s=e.setCertificates||n(164)(),a=e.Errors||n(4),c=e.ExceptionCodes||n(8),u=e.OTErrorClass||n(22),l=e.watchSubscriberAudio||n(644);return function(e){let n=e.clientCandidates,d=e.iceConfig,p=e.send,h=e.logAnalyticsEvent,f=e.p2p,m=e.codecFlags,g=e.sourceStreamId;const b=this;let y,v=!1,w=!1,x=null;const S=function(){this.destroy(),w&&this.trigger("iceRestartFailure",this),this.trigger("disconnected",this)},E=function(e){this.trigger("remoteStreamAdded",e,this)},T=function(e){this.trigger("remoteStreamRemoved",e,this)},C=e=>{this.trigger("remoteVideoSupported",e)},_=function(e){let t=e.reason,n=e.prefix;this.trigger("error",null,t,this,n)},I=function(e){!w||"connected"!==e&&"completed"!==e||(w=!1,this.trigger("iceRestartSuccess")),"connected"===e&&this.trigger("connected"),this.trigger("iceConnectionStateChange",e)},k=function(e){this.trigger("signalingStateChange",e)},R=function(e){this.trigger("signalingStateStable",e)},N=(e,t)=>{"answer"!==e&&"pranswer"!==e||this.trigger("connected"),p(e,t)};o(this),this.close=function(){v||(v=!0,y&&(y.disconnect(),y=null),this.off())},this.destroy=function(){this.stopAudioStatsWatcher(),v||this.close()},this.getDataChannel=function(e,t,n){y.getDataChannel(e,t,n)},this.getSourceStreamId=()=>y.getSourceStreamId(),this.processMessage=function(e,t){y.processMessage(e,t)},this.remoteDescription=function(){return y.remoteDescription()},this.getStats=function(e){if(y)y.getStats(e);else{const n=c.PEER_CONNECTION_NOT_CONNECTED;e(new t.Error(u.getTitleByCode(n),a.PEER_CONNECTION_NOT_CONNECTED,{code:n}))}},this.getSynchronizationSources=function(e){if(y)y.getSynchronizationSources(e);else{const n=c.PEER_CONNECTION_NOT_CONNECTED;e(new t.Error(u.getTitleByCode(n),a.PEER_CONNECTION_NOT_CONNECTED,{code:n}))}},this.getRtcStatsReport=function(e){if(y)y.getRtcStatsReport(e);else{const n=c.PEER_CONNECTION_NOT_CONNECTED;e(new t.Error(u.getTitleByCode(n),a.PEER_CONNECTION_NOT_CONNECTED,{code:n}))}},this.startAudioStatsWatcher=function(e){x||(x=l(y.getStats.bind(y),(e=>{this.stopAudioStatsWatcher(),this.trigger("audioLevelStuckWarning",e)}),e))},this.stopAudioStatsWatcher=function(){x&&x.stop(),x=null};const O=function(e){return function(t){y&&y.remoteTracks().forEach((n=>{n.kind===e&&n.enabled!==t&&(n.enabled=t)}))}};this.subscribeToAudio=O("audio"),this.subscribeToVideo=O("video"),this.hasRelayCandidates=function(){return y.hasRelayCandidates()},this.iceRestart=function(){return w=!0,y.iceRestart()},this.iceConnectionStateIsConnected=function(){return y.iceConnectionStateIsConnected()},this.init=function(e){s({iceConfig:d},((t,o)=>{if(t)return void e(t);const s=r({logAnalyticsEvent:h,clientCandidates:n,codecFlags:m,sourceStreamId:g},o);y=new i(r({sendMessage:N,p2p:f},s)),y.on({iceConnected:()=>b.emit("iceConnected"),close:S,streamAdded:E,streamRemoved:T,signalingStateChange:k,signalingStateStable:R,error:_,qos:e=>this.trigger("qos",e),iceConnectionStateChange:I,remoteVideoSupported:C},b),y.remoteTracks().length>0?y.remoteStreams().forEach(E,b):e(void 0,b)}))}}}},function(e,t,n){"use strict";e.exports=function(e){void 0===e&&(e={});const t=(e.generateSimpleStateMachine||n(161)())("NotPublishing",["NotPublishing","GetUserMedia","BindingMedia","MediaBound","PublishingToSession","Publishing","Failed","Destroyed"],{NotPublishing:["NotPublishing","GetUserMedia","Destroyed"],GetUserMedia:["BindingMedia","Failed","NotPublishing","Destroyed"],BindingMedia:["MediaBound","Failed","NotPublishing","Destroyed"],MediaBound:["NotPublishing","PublishingToSession","Failed","Destroyed"],PublishingToSession:["NotPublishing","Publishing","Failed","Destroyed","MediaBound"],Publishing:["NotPublishing","MediaBound","Failed","Destroyed"],Failed:["Destroyed"],Destroyed:[]});return t.prototype.isDestroyed=function(){return"Destroyed"===this.current},t.prototype.isAttemptingToPublish=function(){return-1!==["GetUserMedia","BindingMedia","MediaBound","PublishingToSession"].indexOf(this.current)},t.prototype.isPublishing=function(){return"Publishing"===this.current},t}},function(e,t,n){"use strict";function r(e){this.message=e||"Operation has been canceled.",this.name="CancellationError",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.prototype=Object.create(Error.prototype),r.prototype.constructor=r},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return r.resolve(e).then((e=>r.resolve(t()).then((()=>e))),(e=>r.resolve(t()).then((()=>r.reject(e)))))}},function(e,t,n){"use strict";(function(t){var r=n(3),o=r(n(20)),i=r(n(12)),s=r(n(13));const a=n(140),c=n(147),u=n(7),l=n(276),d=n(57),p=n(50),h=n(166).CancellationError,f=n(19),m=n(42),g=n(49),b=n(268),y=n(26),v=n(6),w=n(653),x=n(103),S=n(63),E=n(654),T=n(4),C=n(165)(),_=n(655),I=n(282),k=n(143),R=n(283),N=n(144),O=n(2),A=n(4),D=n(23)(),L=n(8),P=n(75),V=n(301),M=n(302),F=n(656),W=n(163)(),Z=n(1)("Subscriber"),B=n(284)(),G=n(285),U=n(11)(),$=n(22),X=n(5),j=n(152),z=n(142)(void 0!==typeof window?window:__webpack_require__.g),H=n(101)({global:z}),Y=n(296)({PeerConnection:H}),K=n(303),J=n(659),q=n(660),Q=n(661),ee=n(662),te=n(304),ne=n(100).parseIceServers,re=n(663),oe=n(664),ie=n(665),se=n(306),ae=n(168),ce=(e,t)=>e.connection.id===t.connection.id;function ue(e,t){const n=t&&t.hasVideo&&e&&0===e.getVideoTracks().length,r=t&&t.hasAudio&&e&&0===e.getAudioTracks().length;return!(n||r)}e.exports=function(e){let n=void 0===e?{}:e,r=n.AudioLevelMeter,z=void 0===r?I:r,H=n.AudioLevelTransformer,le=void 0===H?k:H,de=n.BackingBar,pe=void 0===de?R:de,he=n.Chrome,fe=void 0===he?N:he,me=n.env,ge=void 0===me?O:me,be=n.Errors,ye=void 0===be?A:be,ve=n.Events,we=void 0===ve?D:ve,xe=n.ExceptionCodes,Se=void 0===xe?L:xe,Ee=n.audioLevelSampler,Te=void 0===Ee?F:Ee,Ce=n.getStatsHelpers,_e=void 0===Ce?P:Ce,Ie=n.hasAudioOutputLevelStatCapability,ke=void 0===Ie?V:Ie,Re=n.hasRemoteStreamsWithWebAudio,Ne=void 0===Re?M:Re,Oe=n.interpretPeerConnectionError,Ae=void 0===Oe?W:Oe,De=n.logging,Le=void 0===De?Z:De,Pe=n.MuteButton,Ve=void 0===Pe?B:Pe,Me=n.NamePanel,Fe=void 0===Me?G:Me,We=n.otError,Ze=void 0===We?U:We,Be=n.OTErrorClass,Ge=void 0===Be?$:Be,Ue=n.OTHelpers,$e=void 0===Ue?X:Ue,Xe=n.StylableComponent,je=void 0===Xe?j:Xe,ze=n.SubscriberPeerConnection,He=void 0===ze?Y:ze,Ye=n.SubscribingState,Ke=void 0===Ye?K:Ye,Je=n.VideoDisabledIndicator,qe=void 0===Je?J:Je,Qe=n.AudioBlockedIndicator,et=void 0===Qe?q:Qe,tt=n.VideoUnsupportedIndicator,nt=void 0===tt?Q:tt,rt=n.watchFrameRate,ot=void 0===rt?ee:rt,it=n.createSendMethod,st=void 0===it?te:it,at=n.parseIceServers,ct=void 0===at?ne:at,ut=n.document,lt=void 0===ut?(void 0!==typeof window?window:__webpack_require__.g).document:ut,dt=n.WidgetView,pt=void 0===dt?C:dt;const ht=function e(n,r,C){var I=this;if(void 0===r&&(r={}),void 0===C&&(C=()=>{}),void 0===r.analytics)throw new Error("Subscriber requires an instance of analytics");const k=r.analytics,R=f(),N=e.hasAudioOutputLevelStatCapability()||Ne(),O=this,A={},D={},L={},P={},V={};let M,F,W,Z,B,G,U,$,X,j,H,Y,K,J,q,Q,ee,te,ne=!1,de=n||R,he=r.session,me=r.stream,be=!1,ve={},xe=null,Ee=!1,Ce=!0,Ie=[],ke=a({},r,{showControls:!0,testNetwork:!1,fitMode:me.defaultFitMode||"cover",insertDefaultUI:!0});const Re={P2P:y.SUBSCRIBER_DISCONNECTED,MANTIS:y.SUBSCRIBER_DISCONNECTED},Oe="Chrome"===ge.name&&ge.version>=58||ge.isChromiumEdge||ge.isOpera,De=he._.getSocket(),Pe=()=>l(D),Me=e=>D[e],We=()=>D[te],Be=function(){var e=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D[t];case 2:e.sent.close(),delete D[t];case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=e=>{delete L[e]},Xe=function(){var e=(0,s.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n={error:mt,audioVolume:q},e.prev=3,e.next=6,M.bindVideo(t,n);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!(e.t0 instanceof h||G.isDestroyed())){e.next=12;break}return e.abrupt("return");case 12:throw mt(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=(0,s.default)(i.default.mark((function e(t,n){var r,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,"function"==typeof t?n=t:r="rtcStatsReport"===t,r?Rt():kt(),!r||se){e.next=7;break}return o=Se.GET_RTC_STATS_REPORT_NOT_SUPPORTED,n(Ze(T.GET_RTC_STATS_REPORT_NOT_SUPPORTED,new Error(Ge.getTitleByCode(o)),o)),e.abrupt("return");case 7:if(We()){e.next=11;break}return o=Se.PEER_CONNECTION_NOT_CONNECTED,n(Ze(ye.PEER_CONNECTION_NOT_CONNECTED,new Error(Ge.getTitleByCode(o)),o)),e.abrupt("return");case 11:return e.next=13,We();case 13:s=e.sent,(r?s.getRtcStatsReport:s.getStats)(((e,t)=>{e?(e.code===Se.PEER_CONNECTION_NOT_CONNECTED&&(e=Ze(ye.PEER_CONNECTION_NOT_CONNECTED,e,Se.PEER_CONNECTION_NOT_CONNECTED)),n(e)):n(null,t)}));case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),He=(e,t,n,r,o)=>{let i=u({action:e,variation:t,payload:n,streamId:me?me.id:null,sessionId:he?he.sessionId:null,connectionId:he&&he.isConnected()?he.connection.connectionId:null,partnerId:he&&he.sessionInfo?he.sessionInfo.partnerId:null,subscriberId:R,widgetType:"Subscriber"},r);("Failure"===t||"iceconnectionstatechange"===t&&"closed"===n)&&(i=u(i,ve));const s=[i];o&&s.push(o),k.logEvent(...s)},Ye=(e,t,n)=>{"Attempt"===t?(P[e]=(new Date).getTime(),He(e,t,n)):"Failure"!==t&&"Success"!==t||He(e,t,n,{attemptDuration:(new Date).getTime()-P[e]})},Je=function(e,t){void 0===t&&(t={}),Ye("RoutedToRelayedTransition",e,t)},Qe=function(e,t){void 0===t&&(t={}),Ye("RelayedToRoutedTransition",e,t)},tt=oe({onInvalidTransition(e,t){const n=`Invalid state transition: Event '${e}' not possible in state '${t}'`;Le.error(n),He("Subscriber:InvalidStateTransition","Event",{details:n})}});{const e="Unable to subscribe to stream in a reasonable amount of time";re({connectivityState:tt,onWarning(){rt("Warning",{})},onTimeout:()=>{if(M&&M.addError(e),G.isAttemptingToSubscribe()){G.set("Failed"),this._disconnect({noStateTransition:!0});const t=Ze(T.TIMEOUT,new Error(e),Se.UNABLE_TO_SUBSCRIBE);tt.fail({options:{failureReason:"Subscribe",failureMessage:e,failureCode:Se.UNABLE_TO_SUBSCRIBE},error:t})}},warningMs:15e3,timeoutMs:3e4})}if(A.promise=new t(((e,t)=>{A.resolve=e,A.reject=t})),ke.testNetwork&&he.sessionInfo.p2pEnabled&&Le.warn("You cannot test your network with a relayed session. Use a routed session."),this.id=de,this.widgetId=R,this.session=he,this.stream=ke.stream,me=ke.stream,this.streamId=me.id,!he)return Ge.handleJsException({errorMsg:"OT.Subscriber must be passed a session option",code:2e3,target:this,analytics:k}),null;v(this),O.once("subscribeComplete",(function(){try{C(...arguments)}catch(e){Le.error("Completion handler threw an exception",e)}})),tt.observe({onEnterConnecting(){rt("Attempt",null,{})},onEnterConnected(){rt("Success",null,{})},onEnterDisconnected(e,t){let n=void 0===t?{}:t,r=n.options,o=void 0===r?{}:r,i=n.payload,s=void 0===i?null:i;rt((e=>{let t=e.transition,n=e.from;return"fail"===t?"connected"===n?"Disconnect":"Failure":"disconnect"===t&&"connected"===n?"Disconnect":"Cancel"})(e),s,o)}}),tt.observe({onEnterConnected:()=>{this.trigger("subscribeComplete",void 0,this)},onEnterDisconnected:function(e,t){let n=e.from,r=(void 0===t?{}:t).error;"connecting"===n&&I.trigger("subscribeComplete",r||new Error("An unknown error occurred"),I)}}),ie({connectivityState:tt,logAttempt(){He("Subscribe","Attempting",null,{connectionId:he&&he.isConnected()?he.connection.connectionId:null})}});const rt=(e,t,n)=>{"Attempt"===e&&(Y=(new Date).getTime()),He("Subscribe",e,t,"Failure"===e||"Success"===e||"Cancel"===e?(0,o.default)({},n,{attemptDuration:(new Date).getTime()-Y}):n)},it=(e,t)=>{He("ICERestart",e,t)},at=e=>{var t,n;let r=e.parsedStats,o=e.remoteConnectionId,i=e.peerId,s=e.sourceStreamId;const a={widgetType:"Subscriber",width:M.width,height:M.height,audioTrack:X&&X.getAudioTracks().length>0,hasAudio:me&&me.hasAudio,subscribeToAudio:J,audioVolume:this.getAudioVolume(),videoTrack:X&&X.getVideoTracks().length>0,connectionId:he?he.connection.connectionId:null,hasVideo:me&&me.hasVideo,subscribeToVideo:ke.subscribeToVideo,congestionLevel:xe,streamId:me.id,subscriberId:R,duration:Math.round((g()-B)/1e3),remoteConnectionId:o,peerId:i,sourceStreamId:ae(s),preferredResolutionHeight:null==(t=ke.preferredResolution)?void 0:t.height,preferredResolutionWidth:null==(n=ke.preferredResolution)?void 0:n.width,preferredFrameRate:ke.preferredFrameRate,audioFallback:!j&&"auto"===H},c=u(a,r);k.logQOS(c),this.trigger("qos",k.combineWithCommon(c))},ut=()=>{!G.isSubscribing()&&M&&M.video()&&(ne=!0,Ee||(tt.connect(),Ee=!0),Le.debug("OT.Subscriber.onLoaded"),G.set("Subscribing"),B=g(),M.loading(!1),F&&F.showAfterLoading(),be&&me.setRestrictFrameRate(!0),Z&&Z.audioOnly(M.audioOnly()),this.setAudioVolume(q),this.trigger("loaded",this))},dt=()=>me&&me.hasAudio&&J&&this.getAudioVolume()>0&&!this.isAudioBlocked(),pt=e=>{let t=!1;if(("audioLevelStuckAt0"!==e||!(!dt()||me&&me.hasVideo))&&(He("subscriber:onAudioWarning","Event",{reason:e}),M)){if(M.rebindSrcObject(),He("subscriber:rebindSrcObject","Called"),"audioLevelStuck"===e)return;t=!0}ht(t)},ht=function(){var e=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),!Oe){e.next=6;break}return e.next=4,We();case 4:e.sent.startAudioStatsWatcher(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ft=()=>{Le.debug("OT.Subscriber has been disconnected from the Publisher's PeerConnection"),tt.fail({options:{failureReason:"PeerConnectionError",failureCode:Se.UNABLE_TO_PUBLISH,failureMessage:"PeerConnection disconnected"},error:Ze(ye.DISCONNECTED,new Error("ClientDisconnected"))}),this._disconnect({noStateTransition:!0}),(G.isAttemptingToSubscribe()||G.isSubscribing())&&G.set("Failed")},mt=e=>{const t=Ze(ye.MEDIA_ERR_DECODE,e,e.code||Se.P2P_CONNECTION_FAILED);t.message=`OT.Subscriber while playing stream: ${t.message}`,Le.error("OT.Subscriber.onVideoError"),tt.fail({options:{failureReason:"VideoElement",failureMessage:t.message,failureCode:t.code||Se.P2P_CONNECTION_FAILED},error:t});const n=G.isAttemptingToSubscribe();G.set("Failed"),n||O.trigger("error",t.message),Ge.handleJsException({error:t,code:Se.UNABLE_TO_SUBSCRIBE,target:O,analytics:k})},gt=e=>{const t=E(e);Ge.handleJsException({error:t,code:t.code,target:O,analytics:k}),this._disconnect({noStateTransition:!0});const n={failureReason:"Subscribe",failureMessage:`OT.Subscriber PeerConnection Error: ${t.message}`,failureCode:Se.P2P_CONNECTION_FAILED};_t(t.code),tt.fail({options:n,error:Ze(t.name,new Error(`Subscribe: Subscriber PeerConnection with connection (not found) failed: ${t.message}`),t.code)}),t.name===T.STREAM_NOT_FOUND&&this._destroy({reason:"streamNotFound",noStateTransition:!0})},bt=(e,t,n,r)=>{if("SetRemoteDescription"===r&&!Ce&&t.match(/Unsupported video without audio for fallback/)){let e;return M&&M.addError("The stream is unable to be played.","Your browser does not support the video format."),e="Safari"===$e.env.name?new Error("VP8 is not supported in this version of Safari. You might want to consider switching to an H264 project. See https://tokbox.com/safari for more information."):new Error("Video format not supported in this browser."),e.code=Se.UNSUPPORTED_VIDEO_CODEC,void mt(e)}if("ICEWorkflow"===r&&he.sessionInfo.reconnection&&ne)return void Le.debug("Ignoring peer connection failure due to possibility of reconnection.");let o;o="ICEWorkflow"===r?Se.SUBSCRIBER_ICE_WORKFLOW_FAILED:e===Se.STREAM_LIMIT_EXCEEDED?e:Se.P2P_CONNECTION_FAILED;const i={failureReason:r||"PeerConnectionError",failureMessage:`OT.Subscriber PeerConnection Error: ${t}`,failureCode:o},s=Ae(e,t,r,"(not found)","Subscriber");if(tt.fail({options:i,error:s}),G.isAttemptingToSubscribe()){const e={hasRelayCandidates:n&&n.hasRelayCandidates()};He("createPeerConnection","Failure",e,i),G.set("Failed")}else G.isSubscribing()&&(G.set("Failed"),this.trigger("error",t));this._disconnect({noStateTransition:!0}),404===Number(e)&&this._destroy({noStateTransition:!0}),Ge.handleJsException({errorMsg:`OT.Subscriber PeerConnection Error: ${t}`,errorCode:o,target:this,analytics:k}),_t(e)},yt=function(){var e=(0,s.default)(i.default.mark((function e(n,r){var o,s,a,c,u,l,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=1===Object.keys(L).length,s=null==r?void 0:r.getSourceStreamId(),a=he.sessionInfo,X=n,s&&(L[s]=n),Le.debug("OT.Subscriber.onRemoteStreamAdded with sourceStreamId",s),e.prev=6,e.next=9,w((()=>ue(X,me)));case 9:e.next=18;break;case 11:if(e.prev=11,e.t0=e.catch(6),"TIMEOUT"!==e.t0.message){e.next=17;break}Le.error("The expected tracks never arrived"),e.next=18;break;case 17:throw e.t0;case 18:return G.set("BindingRemoteStream"),I.subscribeToAudio(J),H="loading",I.subscribeToVideo(ke.subscribeToVideo,"loading"),a.p2pEnabled||"P2P"===s||(I.setPreferredResolution(ke.preferredResolution),I.setPreferredFrameRate(ke.preferredFrameRate)),n.getVideoTracks().forEach((e=>{(void 0!==typeof window?window:__webpack_require__.g).webkitMediaStream?e.enabled=!1:e.enabled=me.hasVideo&&ke.subscribeToVideo})),e.next=26,Xe(n);case 26:if(ht(),!G.isDestroyed()){e.next=29;break}throw new Error("Subscriber destroyed");case 29:return(void 0!==typeof window?window:__webpack_require__.g).webkitMediaStream&&n.getVideoTracks().forEach((e=>{e.enabled=me.hasVideo&&ke.subscribeToVideo})),(c=M&&M.video())&&c.orientation({width:me.videoDimensions.width,height:me.videoDimensions.height,videoOrientation:me.videoDimensions.orientation}),(u=F&&F.videoUnsupportedIndicator)&&u.setVideoUnsupported(!Ce),l=new t(((e,t)=>{const n=M&&M.video();n&&n.domElement()?e():(M.once("videoElementCreated",e),O.once("destroyed",t))})),e.next=37,l;case 37:return e.next=39,A.promise;case 39:if(o?G.set("Subscribing"):ut(),U&&"webRTCStream"in U&&n.getAudioTracks().length>0&&U.webRTCStream(n),!((d=$e.env).isSafari||d.isChromiumEdge||d.isOpera||"Chrome"===d.name&&d.version>=58||d.isFirefox&&d.version>=96)){e.next=48;break}return ee&&(ee.destroy(),ee=null),e.next=46,We();case 46:(r=e.sent)&&(ee=ot(r.getStats.bind(r)));case 48:o||I.trigger("streamAdded",I);case 49:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t,n){return e.apply(this,arguments)}}(),vt=e=>{X=null,Le.debug("OT.Subscriber.onStreamRemoved");const t=M&&M.video();t&&t.stream===e&&M.destroyVideo(),Ue(te),this.trigger("streamRemoved",this)},wt=e=>{Ce!==e&&this.dispatchEvent(new we.VideoEnabledChangedEvent(e?"videoEnabled":"videoDisabled",{reason:e?"codecChanged":"codecNotSupported"})),Ce=e},xt=e=>{M.setAudioBlockedUi(e);const t=F&&F.audioBlockedIndicator;t&&t.setAudioBlocked(e);const n=F&&F.videoUnsupportedIndicator;n&&n.setVideoUnsupported(!e&&!Ce)};this.on("audioBlocked",(()=>{xt(!0)})),this.on("audioUnblocked",(()=>{xt(!1)}));const St={new:y.SUBSCRIBER_DISCONNECTED,checking:y.SUBSCRIBER_DISCONNECTED,connected:y.SUBSCRIBER_CONNECTED,completed:y.SUBSCRIBER_CONNECTED,disconnected:y.SUBSCRIBER_DISCONNECTED},Et=(e,t)=>{const n=St[e],r=t.getSourceStreamId(),o=Re[r];n&&n!==o&&(Re[r]=n,"disconnected"===e&&"P2P"!==r&&setTimeout((0,s.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=he._.isSocketReconnecting,"disconnected"!==Re[r]||!De.is("connected")||t()){e.next=4;break}return e.next=4,I._.iceRestart("peer connection disconnected");case 4:case"end":return e.stop()}}),e)}))),2e3),M&&M.loading(n!==y.SUBSCRIBER_CONNECTED),Le.debug(`OT.Subscriber.connectionStateChanged to ${e}`),this.dispatchEvent(new we.ConnectionStateChangedEvent(n,this)))},Tt=()=>{it("Success")},Ct=()=>{it("Failure",{reason:"ICEWorkflow",message:"OT.Subscriber PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall."})};W={get:()=>me.getChannelsOfType("audio").length>0?O.getStyle("buttonDisplayMode"):"off",update(){const e=W.get();F&&(F.muteButton.setDisplayMode(e),F.backingBar.setMuteMode(e))}};const _t=e=>{let t,n;M&&(e===Se.STREAM_LIMIT_EXCEEDED?(t="The stream was unable to connect.",n="The limit for the number of media streams has been reached."):(t="The stream was unable to connect due to a network error.",n=Ee?"Ensure you have a stable connection and try again.":"Make sure you have a stable network connection and that it isn't blocked by a firewall."),M.addError(t,n))};function It(e){Pe().forEach(function(){var t=(0,s.default)(i.default.mark((function t(n){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:t.sent.subscribeToVideo(!e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),M&&(M.audioOnly(e),M.showPoster(e)),Z&&Z.audioOnly(e)}je(this,{nameDisplayMode:"auto",buttonDisplayMode:"auto",audioLevelDisplayMode:"auto",videoDisabledDisplayMode:"auto",audioBlockedDisplayMode:"auto",backgroundImageURI:null,showArchiveStatus:!0,showMicButton:!0},ke.showControls,(e=>{He("SetStyle","Subscriber",e,null,.1)}));const kt=p((()=>{He("GetStats","Called")})),Rt=p((()=>{He("GetRtcStatsReport","Called")})),Nt=e=>{$&&($.destroy(),$=void 0),X.getAudioTracks().length&&(U=Te(e),U?$=_({subscriber:this,audioLevelSampler:U}):Object.prototype.hasOwnProperty.call(this,"loudness")||(Object.defineProperty(this,"loudness",{value:void 0,configurable:!0,writable:!1}),Le.error("No suitable audio level samplers found, audio level visualisation will not work")))},Ot=(e,t)=>{if(V[t]){V[t].removeAll();const n=()=>{e.off("error",n),e.off("disconnected",n)};e.on("error",n),e.on("disconnected",n)}const n=S(e);n.once("connected",(()=>(e=>{he.sessionInfo.isAdaptiveEnabled&&"P2P"===e.getSourceStreamId()&&Je("Success")})(e))),n.on("disconnected",ft),n.on("error",bt),n.on("remoteStreamAdded",(0,s.default)(i.default.mark((function e(){var t=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yt(...t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Le.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))),n.on("audioLevelStuckWarning",pt),n.on("remoteStreamRemoved",vt),n.on("signalingStateStable",(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.trigger("signalingStateStable"),M&&M.video()&&X&&U&&"webRTCStream"in U&&X.getAudioTracks().length>0&&U.webRTCStream(X);case 3:case"end":return e.stop()}}),e)})))),n.on("iceConnectionStateChange",(t=>Et(t,e))),n.on("iceRestartSuccess",Tt),n.on("iceRestartFailure",Ct),n.on("remoteVideoSupported",wt),n.once("remoteStreamAdded",Nt.bind(this,e)),V[t]=V};this._destroy=e=>{let t=e.reason,n=void 0===t?"Unknown":t,r=e.quiet,o=e.noStateTransition,i=void 0!==o&&o;return G.isDestroyed()||(G.set("Destroyed"),ee&&(ee.destroy(),ee=null),ve={sessionId:he.sessionId,connectionId:he&&he.isConnected()?he.connection.connectionId:null,partnerId:he&&he.sessionInfo?he.sessionInfo.partnerId:null,streamId:me&&!me.destroyed?me.id:null},this._disconnect({reason:n,noStateTransition:i}),F&&(F.destroy(),F=null),M&&(M.destroy(),M.off(),M=null,this.element=null),me&&!me.destroyed&&He("unsubscribe",null,{streamId:me.id}),me.off(K,this),this.id=null,de=null,this.stream=null,me=null,this.streamId=null,this.session=null,he=null,ke=null,!0!==r&&(this.dispatchEvent(new we.DestroyedEvent(y.SUBSCRIBER_DESTROYED,this,n)),this.off())),this},this.destroy=function(e,t){void 0===e&&(e="Unsubscribe"),Le.warn("Subscriber#destroy is deprecated and will be removed. Please use Session#unsubscribe instead"),I._destroy({reason:e,quiet:t})},this._disconnect=function(e){let t=void 0===e?{}:e,n=t.reason,r=void 0===n?"Unknown":n;if(!t.noStateTransition&&!tt.is("disconnected")){const e="Unsubscribe"===r?void 0:Ze(ye.STREAM_DESTROYED,new Error("Stream was destroyed before it could be subscribed to"));tt.disconnect({payload:{reason:r},error:e})}G.isDestroyed()||G.isFailed()||G.set("NotSubscribing"),M&&M.destroyVideo(),Pe().forEach(function(){var e=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.destroy();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object.keys(D).forEach((e=>{delete D[e]})),De.is("connected")&&me&&!me.destroyed&&De.subscriberDestroy(me.id,I.widgetId)},this.disconnect=()=>{Le.warn("Subscriber#disconnect is deprecated and will be removed. Please use Session#unsubscribe instead"),this._disconnect({reason:"Unsubscribe"})};const At=function(){var e=(0,s.default)(i.default.mark((function e(t){var n,r,s,a,c,u,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.peerId,r=t.fromConnectionId,s=t.sourceStreamId,i={apiKey:he.apiKey,sessionId:he.sessionId,streamId:me.id,subscriberId:I.widgetId},a=["/v2/partner",i.apiKey,"session",i.sessionId,"stream",i.streamId,"subscriber",i.subscriberId].join("/"),c=st({socket:I.session._.getSocket(),uri:a,content:{peerId:n,sourceStreamId:s}}),u=function(e,t,r,i,a){void 0===i&&(i={});const c=(0,o.default)({peerId:n,sourceStreamId:ae(s)},i);return He(e,t,r,c,a)},l=e=>{te===s&&at((0,o.default)({},e,{peerId:n,remoteConnectionId:r,sourceStreamId:s}))},e.abrupt("return",I._setupPeerConnection({send:c,log:u,logQoS:l,sourceStreamId:s}));case 6:case"end":return e.stop()}var i}),e)})));return function(t){return e.apply(this,arguments)}}();function Dt(e){const t=M&&M.video();if(t)try{t.setAudioVolume(e)}catch(e){Le.warn(`setAudioVolume: ${e}`),0===q&&(Le.info("Using subscribeToAudio to mute Audio because setAudioVolume(0) failed"),O.subscribeToAudio(!1))}F&&F.muteButton.muted(0===e)}this.processMessage=function(){var e=(0,s.default)(i.default.mark((function e(t,n,r){var o,s,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Le.debug(`OT.Subscriber.processMessage: Received ${t} message from ${n}`),Le.debug(r),o=d(r,"content.peerId"),s=d(r,"content.sourceStreamId"),e.next=6,Me(s);case 6:if(!(a=e.sent)){e.next=11;break}a.processMessage(t,r),e.next=16;break;case 11:if("offer"!==t){e.next=16;break}return e.next=14,At({peerId:o,fromConnectionId:n,sourceStreamId:s});case 14:a=e.sent,I.session._.addSubscriberToPeerConnectionsQueue(a,r);case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.disableVideo=e=>{if(e){if("auto"!==H)return void Le.info("Video was not re-enabled because it was manually disabled");Le.info("Video has been re-enabled")}else Le.warn("Due to high packet loss and low bandwidth, video has been disabled");this.subscribeToVideo(e,"auto"),He("updateQuality","video",e?{videoEnabled:!0}:{videoDisabled:!0})},this.getImgData=()=>{if(!this.isSubscribing())return Le.error("OT.Subscriber.getImgData: Cannot getImgData before the Subscriber is subscribing."),null;const e=M&&M.video();return e?e.imgData():null},this.getStats=e=>{(e=>{ze(e)})(((t,n)=>{if(t)return void e(t);const r={timestamp:0};n.forEach((e=>{if(_e.isInboundStat(e)){const t=_e.isVideoStat(e,n),o=_e.isAudioStat(e,n);(o||t)&&(r.timestamp=_e.normalizeTimestamp(e.timestamp)),t?(c(r,{video:_e.parseStatCategory(e)}),ee&&c(r,{video:{frameRate:ee.getFrameRateFromStat(e)}})):o&&c(r,{audio:_e.parseStatCategory(e)})}})),e(null,r)}))},this.getRtcStatsReport=()=>new t(((e,t)=>{ze("rtcStatsReport",((n,r)=>{n?t(n):e(r)}))})),this.setAudioVolume=e=>{const t=function(e){return Math.max(0,Math.min(100,parseInt(e,10)))}(e);return He("setAudioVolume","Attempt",{audioVolume:t}),isNaN(t)?(Le.error("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),He("setAudioVolume","Failure",{message:"value should be an integer between 0 and 100"}),this):(t!==e&&Le.warn("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),t===q?(Dt(q),He("setAudioVolume","Success",{audioVolume:q,message:"Requested volume is same as already set audioVolume"}),this):(q>0&&(Q=q),q=t,Dt(q),q>0&&!J&&(Q=q,this.subscribeToAudio(!0)),He("setAudioVolume","Success",{audioVolume:q}),this))},this.getAudioVolume=()=>{const e=M&&M.video();if(e)try{return e.getAudioVolume()}catch(e){Le.warn(`getAudioVolume ${e}`)}return q},this.subscribeToAudio=e=>{const t=b(e,!0);Pe().forEach(function(){var e=(0,s.default)(i.default.mark((function e(n){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:e.sent.subscribeToAudio(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),me&&0!==Pe().length&&me.setChannelActiveState("audio",t);const n=J!==t;return J=t,n&&this.setAudioVolume(t?Q:0),He("subscribeToAudio","Event",{subscribeToAudio:t}),this};const Lt={auto:"quality",publishVideo:"publishVideo",subscribeToVideo:"subscribeToVideo"};if("Safari"===ge.name){const e=()=>{!lt.hidden&&ke.subscribeToVideo&&(Le.debug("document visibility restored in Safari - resubscribing to video"),this.subscribeToVideo(!1),this.subscribeToVideo(!0))};lt.addEventListener("visibilitychange",e),this.once("destroyed",(()=>{lt.removeEventListener("visibilitychange",e)}))}if(this.subscribeToVideo=(e,t)=>{const n=b(e,!0);return He("subscribeToVideo","Attempt",{subscribeToVideo:n,reason:t}),It(!n||!me.hasVideo||!(X&&X.getVideoTracks().length>0)),me.hasVideo&&X&&0===X.getVideoTracks().length?(n&&Le.info("Subscriber is audio-only due to incompatibility, can't subscribeToVideo."),ke.subscribeToVideo=!1,He("subscribeToVideo","Failure",{message:"No video tracks available"}),this):(F&&F.videoDisabledIndicator&&F.videoDisabledIndicator.disableVideo("auto"===t&&!n),Pe().length>0&&he&&me&&(n!==ke.subscribeToVideo||t!==H)&&me.setChannelActiveState("video",n,t),ke.subscribeToVideo=n,H=t,j=n,He("subscribeToVideo","Success",{subscribeToVideo:n,reason:t}),"loading"!==t&&(this.dispatchEvent(new we.VideoEnabledChangedEvent(n?"videoEnabled":"videoDisabled",{reason:Lt[t]||"subscribeToVideo"})),"videoDisabled"===n&&"auto"===t&&(xe=2)),this)},this.setPreferredResolution=e=>{if(G.isDestroyed()||0===Pe().length&&"Connecting"===!G.current)return void Le.warn("Cannot set the max Resolution when not subscribing to a publisher");if(ke.preferredResolution=e,he.sessionInfo.p2pEnabled)return void Le.warn("OT.Subscriber.setPreferredResolution will not work in a P2P Session");if(!G.isStreamAdded())return;const t=me.getPreferredResolution();t&&e&&t.width===e.width&&t.height===e.height||!t&&!e||me.setPreferredResolution(e)},this.setPreferredFrameRate=e=>{if(G.isDestroyed()||0===Pe().length&&"Connecting"===!G.current)return void Le.warn("Cannot set the max frameRate when not subscribing to a publisher");if(ke.preferredFrameRate=e,he.sessionInfo.p2pEnabled)return void Le.warn("OT.Subscriber.setPreferredFrameRate will not work in a P2P Session");const t=me.getPreferredFrameRate();e&&t&&t===e||!t&&!e||me.setPreferredFrameRate(e)},this.isSubscribing=()=>G.isSubscribing(),this.isWebRTC=!0,this.isLoading=()=>M&&M.loading(),this.isAudioBlocked=()=>Boolean(M&&M.isAudioBlocked()),this.videoElement=()=>{const e=M&&M.video();return e?e.domElement():null},this.videoWidth=()=>{const e=M&&M.video();return e?e.videoWidth():void 0},this.videoHeight=()=>{const e=M&&M.video();return e?e.videoHeight():void 0},this._subscribeToSelf=(0,s.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=he.getPublisherForStream(me))&&t._.webRtcStream()){e.next=5;break}tt.fail({payload:{reason:"streamNotFound"},error:Ze(ye.STREAM_DESTROYED,new Error("Tried to subscribe to a local publisher, but its stream no longer exists"))}),e.next=14;break;case 5:return A.resolve(),e.prev=6,e.next=9,yt(t._.webRtcStream());case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),Le.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])}))),this._setupPeerConnection=function(){var n=(0,s.default)(i.default.mark((function n(r){var o,s,a,c;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=r.send,s=r.log,a=r.logQoS,c=r.sourceStreamId,ke.testNetwork&&I.setAudioVolume(0),0===Pe().length&&G.set("Connecting"),te=c,D[c]=new t(((t,n)=>{he._.getIceConfig().then((r=>{r.needRumorIceServersFallback&&(r.servers=[...Ie||[],...r.servers||[]]);const i={iceConfig:r,subscriberId:I.widgetId,send:o,logAnalyticsEvent:s,p2p:he.sessionInfo.p2pEnabled,sourceStreamId:c};Object.prototype.hasOwnProperty.call(ke,"codecFlags")&&(i.codecFlags=ke.codecFlags);const u=new e.SubscriberPeerConnection(i);u.once("iceConnected",A.resolve),u.once("error",A.reject),u.on("qos",a),Ot(u,c),u.init((e=>{e?n(e):t(u)}))}))})),n.abrupt("return",D[c]);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),this.restrictFrameRate=e=>(Le.debug(`OT.Subscriber.restrictFrameRate(${e})`),He("restrictFrameRate",e.toString(),{streamId:me.id}),he.sessionInfo.p2pEnabled&&Le.warn("OT.Subscriber.restrictFrameRate: Cannot restrictFrameRate on a P2P session"),"boolean"!=typeof e?Le.error("OT.Subscriber.restrictFrameRate: expected a boolean value got a "+typeof e):(be=e,me.setRestrictFrameRate(e)),this),this.on("styleValueChanged",((e,t)=>{if(F)switch(e){case"nameDisplayMode":F.name.setDisplayMode(t),F.backingBar.setNameMode(t);break;case"videoUnsupportedDisplayMode":F.videoUnsupportedIndicator.setDisplayMode(t);break;case"videoDisabledDisplayMode":F.videoDisabledIndicator.setDisplayMode(t);break;case"audioBlockedDisplayMode":F.audioBlockedIndicator.setDisplayMode(t);break;case"showArchiveStatus":F.archive.setShowArchiveStatus(t);break;case"buttonDisplayMode":W.update();break;case"audioLevelDisplayMode":F.audioLevel.setDisplayMode(t);break;case"bugDisplayMode":break;case"backgroundImageURI":M.setBackgroundImageURI(t)}}),this),this._={getDataChannel:(e,t,n)=>(0,s.default)(i.default.mark((function r(){return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(We()){r.next=3;break}return n(new $e.Error("Cannot create a DataChannel before there is a publisher connection.")),r.abrupt("return");case 3:return r.next=5,We();case 5:r.sent.getDataChannel(e,t,n);case 6:case"end":return r.stop()}}),r)})))(),iceRestart:e=>(0,s.default)(i.default.mark((function t(){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Me("MANTIS");case 2:(n=t.sent)?(it("Attempt",{reason:e}),Le.debug("Subscriber: iceRestart attempt"),n.iceRestart()):Le.debug("Subscriber: Skipping ice restart, we have no peer connection");case 4:case"end":return t.stop()}}),t)})))(),unblockAudio:()=>M&&M.unblockAudio(),webRtcStream:()=>X,privateEvents:new m,startRoutedToRelayedTransition:()=>(0,s.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ke.testNetwork&&!ce(me,he)){e.next=2;break}return e.abrupt("return");case 2:return Je("Attempt"),e.next=5,Me("MANTIS");case 5:if(null==(t=e.sent)?void 0:t.iceConnectionStateIsConnected()){e.next=9;break}return Je("Failure",{reason:"Attempted to transition to Relayed without being connected in Routed mode."}),e.abrupt("return");case 9:De.subscriberCreate(me.id,R,Ft,"P2P",((e,t)=>{e&&!tt.is("disconnected")&&Je("Failure",e),Le.debug("message received when created a subscriber with source",t)}));case 10:case"end":return e.stop()}}),e)})))(),startRelayedToRoutedTransition:()=>(0,s.default)(i.default.mark((function e(){var t,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ke.testNetwork&&!ce(me,he)){e.next=2;break}return e.abrupt("return");case 2:return Qe("Attempt"),t=L.MANTIS,X=t,e.next=7,Xe(t);case 7:return M.loading(!1),Be("P2P"),te="MANTIS",Ue("P2P"),e.next=13,We();case 13:n=e.sent,Nt(n),Qe("Success");case 16:case"end":return e.stop()}}),e)})))(),setSinkId(e){if(M&&M.video())return M.setSinkId(e);Le.debug("Called setAudioOutputDevice on a subscriber without a video element")},pauseAndPlayVideoElement(){M&&M.pauseAndPlayVideoElement()}},G=new Ke((e=>{Le.error("OT.Subscriber State Change Failed: ",e.message),Le.debug(e)})),Le.debug(`OT.Subscriber: subscribe to ${me.id}`),G.set("Init"),!me)return Le.error("OT.Subscriber: No stream parameter."),!1;var Pt;K={updated:e=>{const t=M&&M.video();switch(e.changedProperty){case"videoDimensions":if(!t)break;t.orientation({width:e.newValue.width,height:e.newValue.height,videoOrientation:e.newValue.orientation}),this.dispatchEvent(new we.VideoDimensionsChangedEvent(this,e.oldValue,e.newValue));break;case"videoDisableWarning":F&&F.videoDisabledIndicator.setWarning(e.newValue),this.dispatchEvent(new we.VideoDisableWarningEvent(e.newValue?"videoDisableWarning":"videoDisableWarningLifted")),xe="videoDisableWarning"===e.newValue?1:null;break;case"hasVideo":It(!me.hasVideo||!ke.subscribeToVideo),"Safari"===ge.name&&!me.hasVideo&&M&&M.bindAudioTrackOnly(),this.dispatchEvent(new we.VideoEnabledChangedEvent(me.hasVideo?"videoEnabled":"videoDisabled",{reason:"publishVideo"}));break;case"hasAudio":W.update()}}},me.on(K,this),ke.name=ke.name||me.name,ke.classNames="OT_root OT_subscriber",ke.style&&this.setStyle(ke.style,null,!0),Q=100,ke.subscribeToVideo=b(ke.subscribeToVideo,!0),ke.subscribeToAudio=b(ke.subscribeToAudio,!0),this.subscribeToAudio(ke.subscribeToAudio),this.setAudioVolume(void 0!==(Pt=ke).audioVolume?Pt.audioVolume:!1===Pt.subscribeToAudio?0:100),M=new e.WidgetView(n,(0,o.default)({},ke,{widgetType:"subscriber"})),M.on("error",mt),M.on("audioBlocked",(()=>this.trigger("audioBlocked"))),M.on("audioUnblocked",(()=>this.trigger("audioUnblocked"))),this.id=M.domId(),de=M.domId(),this.element=M.domElement,M.on("videoElementCreated",(e=>{const t=new we.VideoElementCreatedEvent(e),n=this;ne?this.dispatchEvent(t):this.once("loaded",(()=>{n.dispatchEvent(t)}))})),this.element&&(()=>{const e={backingBar:new pe({nameMode:ke.name?this.getStyle("nameDisplayMode"):"off",muteMode:W.get()}),name:new Fe({name:ke.name,mode:this.getStyle("nameDisplayMode")}),muteButton:new Ve({muted:0===q,mode:W.get()})};if(N){const t=new le;Z=new z({mode:O.getStyle("audioLevelDisplayMode")});const n=new x((()=>{Z.setValue(t.transform(this.loudness))}));Z.watchVisibilityChanged((e=>{e?n.start():n.stop()})),Z.setDisplayMode(this.getStyle("audioLevelDisplayMode")),Z.audioOnly(!1),e.audioLevel=Z}e.videoDisabledIndicator=new qe({mode:this.getStyle("videoDisabledDisplayMode")}),e.audioBlockedIndicator=new et({mode:this.getStyle("audioBlockedDisplayMode")}),e.videoUnsupportedIndicator=new nt({mode:this.getStyle("videoUnsupportedDisplayMode")}),M&&M.domElement&&(F=new fe({parent:M.domElement}).set(e).on({muted(){O.setAudioVolume(0)},unmuted(){O.setAudioVolume(Q)}},this),F.hideWhileLoading())}).call(this);const Vt=me.getChannelsOfType("audio"),Mt=me.getChannelsOfType("video"),Ft=Vt.map((e=>({id:e.id,type:e.type,active:ke.subscribeToAudio}))).concat(Mt.map((e=>{const t={id:e.id,type:e.type,active:ke.subscribeToVideo,restrictFrameRate:void 0!==ke.restrictFrameRate&&ke.restrictFrameRate};return void 0!==ke.preferredFrameRate&&(t.preferredFrameRate=parseFloat(ke.preferredFrameRate)),void 0!==ke.preferredHeight&&(t.preferredHeight=parseInt(ke.preferredHeight,10)),void 0!==ke.preferredWidth&&(t.preferredWidth=parseInt(ke.preferredWidth,10)),t}))),Wt=!ke.testNetwork&&ce(me,he);return tt.beginConnect(),Wt?(this._subscribeToSelf(),this):(De.subscriberCreate(me.id,R,Ft,null,((e,t)=>{e&&!tt.is("disconnected")&&gt(e),Ie=ct(t)})),this)};return ht.hasAudioOutputLevelStatCapability=ke,ht.WidgetView=pt,ht.SubscriberPeerConnection=He,ht}}).call(this,n(0))},function(e,t,n){"use strict";const r=n(2);e.exports=()=>["Chrome","Opera","Safari"].indexOf(r.name)>-1},function(e,t,n){"use strict";const r=n(2).name;e.exports=()=>["Firefox","Safari","Edge","Chrome","Opera"].indexOf(r)>-1},function(e,t,n){"use strict";const r=n(161)()("NotSubscribing",["NotSubscribing","Init","Connecting","BindingRemoteStream","Subscribing","Failed","Destroyed"],{NotSubscribing:["NotSubscribing","Init","Destroyed"],Init:["NotSubscribing","Connecting","BindingRemoteStream","Destroyed"],Connecting:["NotSubscribing","BindingRemoteStream","Failed","Destroyed"],BindingRemoteStream:["NotSubscribing","Subscribing","Failed","Destroyed","BindingRemoteStream"],Subscribing:["NotSubscribing","Failed","Destroyed","BindingRemoteStream"],Failed:["Destroyed"],Destroyed:[]});r.prototype.isDestroyed=function(){return"Destroyed"===this.current},r.prototype.isFailed=function(){return"Failed"===this.current},r.prototype.isSubscribing=function(){return"Subscribing"===this.current},r.prototype.isAttemptingToSubscribe=function(){return-1!==["Init","Connecting","BindingRemoteStream"].indexOf(this.current)},r.prototype.isStreamAdded=function(){return"BindingRemoteStream"===this.current||this.isSubscribing()},e.exports=r},function(e,t,n){"use strict";var r=n(3)(n(20));e.exports=e=>{let t=e.socket,n=e.uri,o=e.content;return(e,i)=>t.send({uri:n,method:e,content:(0,r.default)({},o,i)})}},function(e,t,n){var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";e.exports=function(e,t){var n,r,o;for(n=1;n<arguments.length;n++)for(o in r=arguments[n])r.hasOwnProperty(o)&&(e[o]=r[o]);return e}},function(e,t,n){"use strict";var r=n(0);e.exports={build:function(e,t){var n,o,i,s=t.plugins;for(n=0,o=s.length;n<o;n++)(i=s[n]).methods&&r(e,i.methods),i.properties&&Object.defineProperties(e,i.properties)},hook:function(e,t,n){var r,o,i,s,a=e.config.plugins,c=[e.context];for(n&&(c=c.concat(n)),r=0,o=a.length;r<o;r++)s=a[r],(i=a[r][t])&&i.apply(s,c)}}},function(e,t,n){"use strict";function r(e){if(0===e.length)return e;var t,n,r=e.split(/[_-]/);if(1===r.length&&r[0][0].toLowerCase()===r[0][0])return e;for(n=r[0].toLowerCase(),t=1;t<r.length;t++)n=n+r[t].charAt(0).toUpperCase()+r[t].substring(1).toLowerCase();return n}r.prepended=function(e,t){return e+(t=r(t))[0].toUpperCase()+t.substring(1)},e.exports=r},function(e,t,n){"use strict";var r=n(0),o=n(2);function i(e,t){e=e||{},this.options=e,this.defaults=t.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(e.init),this.data=this.configureData(e.data),this.methods=this.configureMethods(e.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(e.transitions||[]),this.plugins=this.configurePlugins(e.plugins,t.plugin)}r(i.prototype,{addState:function(e){this.map[e]||(this.states.push(e),this.addStateLifecycleNames(e),this.map[e]={})},addStateLifecycleNames:function(e){this.lifecycle.onEnter[e]=o.prepended("onEnter",e),this.lifecycle.onLeave[e]=o.prepended("onLeave",e),this.lifecycle.on[e]=o.prepended("on",e)},addTransition:function(e){this.transitions.indexOf(e)<0&&(this.transitions.push(e),this.addTransitionLifecycleNames(e))},addTransitionLifecycleNames:function(e){this.lifecycle.onBefore[e]=o.prepended("onBefore",e),this.lifecycle.onAfter[e]=o.prepended("onAfter",e),this.lifecycle.on[e]=o.prepended("on",e)},mapTransition:function(e){var t=e.name,n=e.from,r=e.to;return this.addState(n),"function"!=typeof r&&this.addState(r),this.addTransition(t),this.map[n][t]=e,e},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(e){return"string"==typeof e?this.mapTransition(r({},this.defaults.init,{to:e,active:!0})):"object"==typeof e?this.mapTransition(r({},this.defaults.init,e,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(e){return"function"==typeof e?e:"object"==typeof e?function(){return e}:function(){return{}}},configureMethods:function(e){return e||{}},configurePlugins:function(e,t){var n,r,o;for(n=0,r=(e=e||[]).length;n<r;n++)"function"==typeof(o=e[n])&&(e[n]=o=o()),o.configure&&o.configure(this);return e},configureTransitions:function(e){var t,n,r,o,i,s=this.defaults.wildcard;for(n=0;n<e.length;n++)for(r=e[n],o=Array.isArray(r.from)?r.from:[r.from||s],i=r.to||s,t=0;t<o.length;t++)this.mapTransition({name:r.name,from:o[t],to:i})},transitionFor:function(e,t){var n=this.defaults.wildcard;return this.map[e][t]||this.map[n][t]},transitionsFor:function(e){var t=this.defaults.wildcard;return Object.keys(this.map[e]).concat(Object.keys(this.map[t]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),e.exports=i},function(e,t,n){var r=n(0),o=n(6),i=n(1),s=[null,[]];function a(e,t){this.context=e,this.config=t,this.state=t.init.from,this.observers=[e]}r(a.prototype,{init:function(e){if(r(this.context,this.config.data.apply(this.context,e)),i.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(e){return Array.isArray(e)?e.indexOf(this.state)>=0:this.state===e},isPending:function(){return this.pending},can:function(e){return!this.isPending()&&!!this.seek(e)},cannot:function(e){return!this.can(e)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(e,t){var n=this.config.defaults.wildcard,r=this.config.transitionFor(this.state,e),o=r&&r.to;return"function"==typeof o?o.apply(this.context,t):o===n?this.state:o},fire:function(e,t){return this.transit(e,this.state,this.seek(e,t),t)},transit:function(e,t,n,r){var o=this.config.lifecycle,i=this.config.options.observeUnchangedState||t!==n;return n?this.isPending()?this.context.onPendingTransition(e,t,n):(this.config.addState(n),this.beginTransit(),r.unshift({transition:e,from:t,to:n,fsm:this.context}),this.observeEvents([this.observersForEvent(o.onBefore.transition),this.observersForEvent(o.onBefore[e]),i?this.observersForEvent(o.onLeave.state):s,i?this.observersForEvent(o.onLeave[t]):s,this.observersForEvent(o.on.transition),i?["doTransit",[this]]:s,i?this.observersForEvent(o.onEnter.state):s,i?this.observersForEvent(o.onEnter[n]):s,i?this.observersForEvent(o.on[n]):s,this.observersForEvent(o.onAfter.transition),this.observersForEvent(o.onAfter[e]),this.observersForEvent(o.on[e])],r)):this.context.onInvalidTransition(e,t,n)},beginTransit:function(){this.pending=!0},endTransit:function(e){return this.pending=!1,e},failTransit:function(e){throw this.pending=!1,e},doTransit:function(e){this.state=e.to},observe:function(e){if(2===e.length){var t={};t[e[0]]=e[1],this.observers.push(t)}else this.observers.push(e[0])},observersForEvent:function(e){for(var t,n=0,r=this.observers.length,o=[];n<r;n++)(t=this.observers[n])[e]&&o.push(t);return[e,o,!0]},observeEvents:function(e,t,n,r){if(0===e.length)return this.endTransit(void 0===r||r);var o=e[0][0],s=e[0][1],a=e[0][2];if(t[0].event=o,o&&a&&o!==n&&i.hook(this,"lifecycle",t),0===s.length)return e.shift(),this.observeEvents(e,t,o,r);var c=s.shift(),u=c[o].apply(c,t);return u&&"function"==typeof u.then?u.then(this.observeEvents.bind(this,e,t,o)).catch(this.failTransit.bind(this)):!1===u?this.endTransit(!1):this.observeEvents(e,t,o,u)},onInvalidTransition:function(e,t,n){throw new o("transition is invalid in current state",e,t,n,this.state)},onPendingTransition:function(e,t,n){throw new o("transition is invalid while previous transition is still in progress",e,t,n,this.state)}}),e.exports=a},function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(1),s=n(3),a=n(4),c={is:function(e){return this._fsm.is(e)},can:function(e){return this._fsm.can(e)},cannot:function(e){return this._fsm.cannot(e)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(e,t,n){return this._fsm.onInvalidTransition(e,t,n)},onPendingTransition:function(e,t,n){return this._fsm.onPendingTransition(e,t,n)}},u={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(e){throw Error("use transitions to change state")}}};function l(e){return d(this||{},e)}function d(e,t){return p(e,new s(t,l)),e._fsm(),e}function p(e,t){if("object"!=typeof e||Array.isArray(e))throw Error("StateMachine can only be applied to objects");i.build(e,t),Object.defineProperties(e,u),r(e,c),r(e,t.methods),t.allTransitions().forEach((function(t){e[o(t)]=function(){return this._fsm.fire(t,[].slice.call(arguments))}})),e._fsm=function(){this._fsm=new a(this,t),this._fsm.init(arguments)}}l.version="3.0.1",l.factory=function(){var e,t;"function"==typeof arguments[0]?(e=arguments[0],t=arguments[1]||{}):(e=function(){this._fsm.apply(this,arguments)},t=arguments[0]||{});var n=new s(t,l);return p(e.prototype,n),e.prototype._fsm.config=n,e},l.apply=d,l.defaults={wildcard:"*",init:{name:"init",from:"none"}},e.exports=l},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){this.message=e,this.transition=t,this.from=n,this.to=r,this.current=o}}])},e.exports=r()},function(e,t,n){"use strict";const r=n(102)();e.exports=r},function(e,t,n){"use strict";(function(t){e.exports=function(e){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return new t(((t,n)=>{e(...r,(function(e){if(e)n(e);else{for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];1!==o.length?t(o):t(o[0])}}))}))}}}).call(this,n(0))},function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"BlurRadius",(function(){return bt})),n.d(t,"createVonageMediaProcessorConnector",(function(){return _t})),n.d(t,"getVonageEventEmitter",(function(){return Tt})),n.d(t,"isSupported",(function(){return xt})),n.d(t,"setTrackExpectedRate",(function(){return Ct}));var o={exports:{}},i=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},s=i,a=Object.prototype.toString;function c(e){return Array.isArray(e)}function u(e){return void 0===e}function l(e){return"[object ArrayBuffer]"===a.call(e)}function d(e){return null!==e&&"object"==typeof e}function p(e){if("[object Object]"!==a.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function h(e){return"[object Function]"===a.call(e)}function f(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var m={isArray:c,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===a.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:d,isPlainObject:p,isUndefined:u,isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:h,isStream:function(e){return d(e)&&h(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===a.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:f,merge:function e(){var t={};function n(n,r){p(t[r])&&p(n)?t[r]=e(t[r],n):p(n)?t[r]=e({},n):c(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)f(arguments[r],n);return t},extend:function(e,t,n){return f(t,(function(t,r){e[r]=n&&"function"==typeof t?s(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},g=m;function b(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var y=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(g.isURLSearchParams(t))r=t.toString();else{var o=[];g.forEach(t,(function(e,t){null!=e&&(g.isArray(e)?t+="[]":e=[e],g.forEach(e,(function(e){g.isDate(e)?e=e.toISOString():g.isObject(e)&&(e=JSON.stringify(e)),o.push(b(t)+"="+b(e))})))})),r=o.join("&")}if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e},v=m;function w(){this.handlers=[]}w.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},w.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},w.prototype.forEach=function(e){v.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var x=w,S=m,E=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},T=E,C=function(e,t,n,r,o){var i=new Error(e);return T(i,t,n,r,o)},_=C,I=m,k=I.isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),I.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),I.isString(r)&&s.push("path="+r),I.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},R=m,N=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],O=m,A=O.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=O.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function D(e){this.message=e}D.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},D.prototype.__CANCEL__=!0;var L=D,P=m,V=k,M=y,F=A,W=C,Z=Y,B=L,G=m,U=function(e,t){S.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},$=E,X={"Content-Type":"application/x-www-form-urlencoded"};function j(e,t){!G.isUndefined(e)&&G.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var z,H={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==r&&"[object process]"===Object.prototype.toString.call(r))&&(z=function(t){return new e((function(e,n){var r,o=t.data,i=t.headers,s=t.responseType;function a(){t.cancelToken&&t.cancelToken.unsubscribe(r),t.signal&&t.signal.removeEventListener("abort",r)}P.isFormData(o)&&delete i["Content-Type"];var c=new XMLHttpRequest;if(t.auth){var u=t.auth.username||"",l=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.Authorization="Basic "+btoa(u+":"+l)}var d,p,h=(d=t.baseURL,p=t.url,d&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(p)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(d,p):p);function f(){if(c){var r="getAllResponseHeaders"in c?function(e){var t,n,r,o={};return e?(R.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=R.trim(e.substr(0,r)).toLowerCase(),n=R.trim(e.substr(r+1)),t){if(o[t]&&N.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}(c.getAllResponseHeaders()):null;(function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(_("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)})((function(t){e(t),a()}),(function(e){n(e),a()}),{data:s&&"text"!==s&&"json"!==s?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:t,request:c}),c=null}}if(c.open(t.method.toUpperCase(),M(h,t.params,t.paramsSerializer),!0),c.timeout=t.timeout,"onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(f)},c.onabort=function(){c&&(n(W("Request aborted",t,"ECONNABORTED",c)),c=null)},c.onerror=function(){n(W("Network Error",t,null,c)),c=null},c.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",r=t.transitional||Z.transitional;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(W(e,t,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},P.isStandardBrowserEnv()){var m=(t.withCredentials||F(h))&&t.xsrfCookieName?V.read(t.xsrfCookieName):void 0;m&&(i[t.xsrfHeaderName]=m)}"setRequestHeader"in c&&P.forEach(i,(function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete i[t]:c.setRequestHeader(t,e)})),P.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),s&&"json"!==s&&(c.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&c.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(r=function(e){c&&(n(!e||e&&e.type?new B("canceled"):e),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(r),t.signal&&(t.signal.aborted?r():t.signal.addEventListener("abort",r))),o||(o=null),c.send(o)}))}),z),transformRequest:[function(e,t){return U(t,"Accept"),U(t,"Content-Type"),G.isFormData(e)||G.isArrayBuffer(e)||G.isBuffer(e)||G.isStream(e)||G.isFile(e)||G.isBlob(e)?e:G.isArrayBufferView(e)?e.buffer:G.isURLSearchParams(e)?(j(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):G.isObject(e)||t&&"application/json"===t["Content-Type"]?(j(t,"application/json"),function(e,t,n){if(G.isString(e))try{return(0,JSON.parse)(e),G.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||H.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&G.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw $(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};G.forEach(["delete","get","head"],(function(e){H.headers[e]={}})),G.forEach(["post","put","patch"],(function(e){H.headers[e]=G.merge(X)}));var Y=H,K=m,J=Y,q=function(e){return!(!e||!e.__CANCEL__)},Q=m,ee=function(e,t,n){var r=this||J;return K.forEach(n,(function(n){e=n.call(r,e,t)})),e},te=q,ne=Y,re=L;function oe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new re("canceled")}var ie=m,se=function(e,t){t=t||{};var n={};function r(e,t){return ie.isPlainObject(e)&&ie.isPlainObject(t)?ie.merge(e,t):ie.isPlainObject(t)?ie.merge({},t):ie.isArray(t)?t.slice():t}function o(n){return ie.isUndefined(t[n])?ie.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function i(e){if(!ie.isUndefined(t[e]))return r(void 0,t[e])}function s(n){return ie.isUndefined(t[n])?ie.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function a(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a};return ie.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||o,r=t(e);ie.isUndefined(r)&&t!==a||(n[e]=r)})),n},ae="0.25.0",ce={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){ce[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var ue={};ce.transitional=function(e,t,n){function r(e,t){return"[Axios v0.25.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,o,i){if(!1===e)throw new Error(r(o," has been removed"+(t?" in "+t:"")));return t&&!ue[o]&&(ue[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}};var le={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),o=r.length;o-- >0;){var i=r[o],s=t[i];if(s){var a=e[i],c=void 0===a||s(a,i,e);if(!0!==c)throw new TypeError("option "+i+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:ce},de=m,pe=y,he=x,fe=function(t){return oe(t),t.headers=t.headers||{},t.data=ee.call(t,t.data,t.headers,t.transformRequest),t.headers=Q.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Q.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||ne.adapter)(t).then((function(e){return oe(t),e.data=ee.call(t,e.data,e.headers,t.transformResponse),e}),(function(n){return te(n)||(oe(t),n&&n.response&&(n.response.data=ee.call(t,n.response.data,n.response.headers,t.transformResponse))),e.reject(n)}))},me=se,ge=le,be=ge.validators;function ye(e){this.defaults=e,this.interceptors={request:new he,response:new he}}ye.prototype.request=function(t,n){if("string"==typeof t?(n=n||{}).url=t:n=t||{},!n.url)throw new Error("Provided config url is not valid");(n=me(this.defaults,n)).method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;void 0!==r&&ge.assertOptions(r,{silentJSONParsing:be.transitional(be.boolean),forcedJSONParsing:be.transitional(be.boolean),clarifyTimeoutError:be.transitional(be.boolean)},!1);var o=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(n)||(i=i&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var s,a=[];if(this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)})),!i){var c=[fe,void 0];for(Array.prototype.unshift.apply(c,o),c=c.concat(a),s=e.resolve(n);c.length;)s=s.then(c.shift(),c.shift());return s}for(var u=n;o.length;){var l=o.shift(),d=o.shift();try{u=l(u)}catch(e){d(e);break}}try{s=fe(u)}catch(t){return e.reject(t)}for(;a.length;)s=s.then(a.shift(),a.shift());return s},ye.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=me(this.defaults,e),pe(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},de.forEach(["delete","get","head","options"],(function(e){ye.prototype[e]=function(t,n){return this.request(me(n||{},{method:e,url:t,data:(n||{}).data}))}})),de.forEach(["post","put","patch"],(function(e){ye.prototype[e]=function(t,n,r){return this.request(me(r||{},{method:e,url:t,data:n}))}}));var ve=ye,we=L;function xe(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new e((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){var t,n=r._listeners.length;for(t=0;t<n;t++)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(t){var n,o=new e((function(e){r.subscribe(e),n=e})).then(t);return o.cancel=function(){r.unsubscribe(n)},o},t((function(e){r.reason||(r.reason=new we(e),n(r.reason))}))}xe.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},xe.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},xe.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},xe.source=function(){var e;return{token:new xe((function(t){e=t})),cancel:e}};var Se=xe,Ee=m,Te=m,Ce=i,_e=ve,Ie=se,ke=function e(t){var n=new _e(t),r=Ce(_e.prototype.request,n);return Te.extend(r,_e.prototype,n),Te.extend(r,n),r.create=function(n){return e(Ie(t,n))},r}(Y);ke.Axios=_e,ke.Cancel=L,ke.CancelToken=Se,ke.isCancel=q,ke.VERSION=ae,ke.all=function(t){return e.all(t)},ke.spread=function(e){return function(t){return e.apply(null,t)}},ke.isAxiosError=function(e){return Ee.isObject(e)&&!0===e.isAxiosError},o.exports=ke,o.exports.default=ke;for(var Re=[],Ne=0;Ne<256;++Ne)Re.push((Ne+256).toString(16).substr(1));const Oe=new WeakMap,Ae=new WeakMap,De=new WeakMap,Le=Symbol("anyProducer"),Pe=e.resolve(),Ve=Symbol("listenerAdded"),Me=Symbol("listenerRemoved");let Fe=!1;function We(e){if("string"!=typeof e&&"symbol"!=typeof e)throw new TypeError("eventName must be a string or a symbol")}function Ze(e){if("function"!=typeof e)throw new TypeError("listener must be a function")}function Be(e,t){const n=Ae.get(e);return n.has(t)||n.set(t,new Set),n.get(t)}function Ge(e,t){const n="string"==typeof t||"symbol"==typeof t?t:Le,r=De.get(e);return r.has(n)||r.set(n,new Set),r.get(n)}function Ue(t,n){n=Array.isArray(n)?n:[n];let r=!1,o=()=>{},i=[];const s={enqueue(e){i.push(e),o()},finish(){r=!0,o()}};for(const e of n)Ge(t,e).add(s);return{async next(){return i?0===i.length?r?(i=void 0,this.next()):(await new e((e=>{o=e})),this.next()):{done:!1,value:await i.shift()}:{done:!0}},async return(e){i=void 0;for(const e of n)Ge(t,e).delete(s);return o(),arguments.length>0?{done:!0,value:await e}:{done:!0}},[Symbol.asyncIterator](){return this}}}function $e(e){if(void 0===e)return ze;if(!Array.isArray(e))throw new TypeError("`methodNames` must be an array of strings");for(const t of e)if(!ze.includes(t)){if("string"!=typeof t)throw new TypeError("`methodNames` element must be a string");throw new Error(`${t} is not Emittery method`)}return e}const Xe=e=>e===Ve||e===Me;class je{static mixin(e,t){return t=$e(t),n=>{if("function"!=typeof n)throw new TypeError("`target` must be function");for(const e of t)if(void 0!==n.prototype[e])throw new Error(`The property \`${e}\` already exists on \`target\``);Object.defineProperty(n.prototype,e,{enumerable:!1,get:function(){return Object.defineProperty(this,e,{enumerable:!1,value:new je}),this[e]}});const r=t=>function(...n){return this[e][t](...n)};for(const e of t)Object.defineProperty(n.prototype,e,{enumerable:!1,value:r(e)});return n}}static get isDebugEnabled(){if("object"!=typeof r)return Fe;const{env:e}=r||{env:{}};return"emittery"===e.DEBUG||"*"===e.DEBUG||Fe}static set isDebugEnabled(e){Fe=e}constructor(e={}){Oe.set(this,new Set),Ae.set(this,new Map),De.set(this,new Map),this.debug=e.debug||{},void 0===this.debug.enabled&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(e,t,n,r)=>{r=JSON.stringify(r),"symbol"==typeof n&&(n=n.toString());const o=new Date,i=`${o.getHours()}:${o.getMinutes()}:${o.getSeconds()}.${o.getMilliseconds()}`;console.log(`[${i}][emittery:${e}][${t}] Event Name: ${n}\n\tdata: ${r}`)})}logIfDebugEnabled(e,t,n){(je.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,n)}on(e,t){Ze(t),e=Array.isArray(e)?e:[e];for(const n of e)We(n),Be(this,n).add(t),this.logIfDebugEnabled("subscribe",n,void 0),Xe(n)||this.emit(Ve,{eventName:n,listener:t});return this.off.bind(this,e,t)}off(e,t){Ze(t),e=Array.isArray(e)?e:[e];for(const n of e)We(n),Be(this,n).delete(t),this.logIfDebugEnabled("unsubscribe",n,void 0),Xe(n)||this.emit(Me,{eventName:n,listener:t})}once(t){return new e((e=>{const n=this.on(t,(t=>{n(),e(t)}))}))}events(e){e=Array.isArray(e)?e:[e];for(const t of e)We(t);return Ue(this,e)}async emit(t,n){We(t),this.logIfDebugEnabled("emit",t,n),function(t,n,r){const o=De.get(t);if(o.has(n))for(const e of o.get(n))e.enqueue(r);if(o.has(Le)){const t=e.all([n,r]);for(const e of o.get(Le))e.enqueue(t)}}(this,t,n);const r=Be(this,t),o=Oe.get(this),i=[...r],s=Xe(t)?[]:[...o];await Pe,await e.all([...i.map((async e=>{if(r.has(e))return e(n)})),...s.map((async e=>{if(o.has(e))return e(t,n)}))])}async emitSerial(e,t){We(e),this.logIfDebugEnabled("emitSerial",e,t);const n=Be(this,e),r=Oe.get(this),o=[...n],i=[...r];await Pe;for(const e of o)n.has(e)&&await e(t);for(const n of i)r.has(n)&&await n(e,t)}onAny(e){return Ze(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Oe.get(this).add(e),this.emit(Ve,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return Ue(this)}offAny(e){Ze(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(Me,{listener:e}),Oe.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(const t of e)if(this.logIfDebugEnabled("clear",t,void 0),"string"==typeof t||"symbol"==typeof t){Be(this,t).clear();const e=Ge(this,t);for(const t of e)t.finish();e.clear()}else{Oe.get(this).clear();for(const e of Ae.get(this).values())e.clear();for(const e of De.get(this).values()){for(const t of e)t.finish();e.clear()}}}listenerCount(e){e=Array.isArray(e)?e:[e];let t=0;for(const n of e)if("string"!=typeof n){void 0!==n&&We(n),t+=Oe.get(this).size;for(const e of Ae.get(this).values())t+=e.size;for(const e of De.get(this).values())t+=e.size}else t+=Oe.get(this).size+Be(this,n).size+Ge(this,n).size+Ge(this).size;return t}bindMethods(e,t){if("object"!=typeof e||null===e)throw new TypeError("`target` must be an object");t=$e(t);for(const n of t){if(void 0!==e[n])throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(e,n,{enumerable:!1,value:this[n].bind(this)})}}}const ze=Object.getOwnPropertyNames(je.prototype).filter((e=>"constructor"!==e));var He;Object.defineProperty(je,"listenerAdded",{value:Ve,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(je,"listenerRemoved",{value:Me,writable:!1,enumerable:!0,configurable:!1}),(He||(He={})).FPS_DROP="fps_drop";class Ye{constructor(){this.processor_=null,this.generator_=null}init(t){return new e(((e,n)=>{try{this.processor_=new MediaStreamTrackProcessor(t)}catch(e){console.log(`[InsertableStreamHelper] MediaStreamTrackProcessor failed: ${e}`),n(e)}try{"audio"===t.kind?this.generator_=new MediaStreamTrackGenerator({kind:"audio"}):"video"===t.kind?this.generator_=new MediaStreamTrackGenerator({kind:"video"}):n("kind not supported")}catch(e){console.log(`[InsertableStreamHelper] MediaStreamTrackGenerator failed: ${e}`),n(e)}e()}))}getReadable(){return this.processor_.readable}getWriteable(){return this.generator_.writable}getProccesorTrack(){return this.generator_}}class Ke{constructor(e){this.insertableStreamHelper_=new Ye,this.mediaProcessor_=e}setTrack(t){return new e(((e,n)=>{this.insertableStreamHelper_.init(t).then((()=>{this.mediaProcessor_.transform(this.insertableStreamHelper_.getReadable(),this.insertableStreamHelper_.getWriteable()).then((()=>{e(this.insertableStreamHelper_.getProccesorTrack())})).catch((e=>{n(e)}))})).catch((e=>{n(e)}))}))}destroy(){return new e(((e,t)=>{this.mediaProcessor_?this.mediaProcessor_.destroy().then((()=>{e()})).catch((e=>{t(e)})):t("no processor")}))}}const Je="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NsYXNzICR7fSQudXBkYXRlcz17dHJhbnNmb3JtZXJfbmV3OiJOZXcgdHJhbnNmb3JtZXIiLHRyYW5zZm9ybWVyX251bGw6Ik51bGwgdHJhbnNmb3JtZXIifSwkLmVycm9ycz17dHJhbnNmb3JtZXJfbm9uZToiTm8gdHJhbnNmb3JtZXJzIHByb3ZpZGVkIix0cmFuc2Zvcm1lcl9zdGFydDoiQ2Fubm90IHN0YXJ0IHRyYW5zZm9ybWVyIix0cmFuc2Zvcm1lcl90cmFuc2Zvcm06IkNhbm5vdCB0cmFuc2Zvcm0gZnJhbWUiLHRyYW5zZm9ybWVyX2ZsdXNoOiJDYW5ub3QgZmx1c2ggdHJhbnNmb3JtZXIifTt2YXIgUGU9e2V4cG9ydHM6e319LFhlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBzPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKSxvPTA7bzxzLmxlbmd0aDtvKyspc1tvXT1hcmd1bWVudHNbb107cmV0dXJuIGUuYXBwbHkodCxzKX19LER0PVhlLEI9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBPZShyKXtyZXR1cm4gQXJyYXkuaXNBcnJheShyKX1mdW5jdGlvbiBTZShyKXtyZXR1cm4gdHlwZW9mIHI9PSJ1bmRlZmluZWQifWZ1bmN0aW9uIFV0KHIpe3JldHVybiByIT09bnVsbCYmIVNlKHIpJiZyLmNvbnN0cnVjdG9yIT09bnVsbCYmIVNlKHIuY29uc3RydWN0b3IpJiZ0eXBlb2Ygci5jb25zdHJ1Y3Rvci5pc0J1ZmZlcj09ImZ1bmN0aW9uIiYmci5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihyKX1mdW5jdGlvbiBLZShyKXtyZXR1cm4gQi5jYWxsKHIpPT09IltvYmplY3QgQXJyYXlCdWZmZXJdIn1mdW5jdGlvbiBCdChyKXtyZXR1cm4gQi5jYWxsKHIpPT09IltvYmplY3QgRm9ybURhdGFdIn1mdW5jdGlvbiBOdChyKXt2YXIgZTtyZXR1cm4gdHlwZW9mIEFycmF5QnVmZmVyIT0idW5kZWZpbmVkIiYmQXJyYXlCdWZmZXIuaXNWaWV3P2U9QXJyYXlCdWZmZXIuaXNWaWV3KHIpOmU9ciYmci5idWZmZXImJktlKHIuYnVmZmVyKSxlfWZ1bmN0aW9uIEh0KHIpe3JldHVybiB0eXBlb2Ygcj09InN0cmluZyJ9ZnVuY3Rpb24gJHQocil7cmV0dXJuIHR5cGVvZiByPT0ibnVtYmVyIn1mdW5jdGlvbiBZZShyKXtyZXR1cm4gciE9PW51bGwmJnR5cGVvZiByPT0ib2JqZWN0In1mdW5jdGlvbiBuZShyKXtpZihCLmNhbGwocikhPT0iW29iamVjdCBPYmplY3RdIilyZXR1cm4hMTt2YXIgZT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yocik7cmV0dXJuIGU9PT1udWxsfHxlPT09T2JqZWN0LnByb3RvdHlwZX1mdW5jdGlvbiBXdChyKXtyZXR1cm4gQi5jYWxsKHIpPT09IltvYmplY3QgRGF0ZV0ifWZ1bmN0aW9uIGp0KHIpe3JldHVybiBCLmNhbGwocik9PT0iW29iamVjdCBGaWxlXSJ9ZnVuY3Rpb24gcXQocil7cmV0dXJuIEIuY2FsbChyKT09PSJbb2JqZWN0IEJsb2JdIn1mdW5jdGlvbiBaZShyKXtyZXR1cm4gQi5jYWxsKHIpPT09IltvYmplY3QgRnVuY3Rpb25dIn1mdW5jdGlvbiBWdChyKXtyZXR1cm4gWWUocikmJlplKHIucGlwZSl9ZnVuY3Rpb24genQocil7cmV0dXJuIEIuY2FsbChyKT09PSJbb2JqZWN0IFVSTFNlYXJjaFBhcmFtc10ifWZ1bmN0aW9uIEp0KHIpe3JldHVybiByLnRyaW0/ci50cmltKCk6ci5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIil9ZnVuY3Rpb24gR3QoKXtyZXR1cm4gdHlwZW9mIG5hdmlnYXRvciE9InVuZGVmaW5lZCImJihuYXZpZ2F0b3IucHJvZHVjdD09PSJSZWFjdE5hdGl2ZSJ8fG5hdmlnYXRvci5wcm9kdWN0PT09Ik5hdGl2ZVNjcmlwdCJ8fG5hdmlnYXRvci5wcm9kdWN0PT09Ik5TIik/ITE6dHlwZW9mIHdpbmRvdyE9InVuZGVmaW5lZCImJnR5cGVvZiBkb2N1bWVudCE9InVuZGVmaW5lZCJ9ZnVuY3Rpb24gTWUocixlKXtpZighKHI9PT1udWxsfHx0eXBlb2Ygcj09InVuZGVmaW5lZCIpKWlmKHR5cGVvZiByIT0ib2JqZWN0IiYmKHI9W3JdKSxPZShyKSlmb3IodmFyIHQ9MCxuPXIubGVuZ3RoO3Q8bjt0KyspZS5jYWxsKG51bGwsclt0XSx0LHIpO2Vsc2UgZm9yKHZhciBzIGluIHIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIscykmJmUuY2FsbChudWxsLHJbc10scyxyKX1mdW5jdGlvbiBBZSgpe3ZhciByPXt9O2Z1bmN0aW9uIGUocyxvKXtuZShyW29dKSYmbmUocyk/cltvXT1BZShyW29dLHMpOm5lKHMpP3Jbb109QWUoe30scyk6T2Uocyk/cltvXT1zLnNsaWNlKCk6cltvXT1zfWZvcih2YXIgdD0wLG49YXJndW1lbnRzLmxlbmd0aDt0PG47dCsrKU1lKGFyZ3VtZW50c1t0XSxlKTtyZXR1cm4gcn1mdW5jdGlvbiBRdChyLGUsdCl7cmV0dXJuIE1lKGUsZnVuY3Rpb24ocyxvKXt0JiZ0eXBlb2Ygcz09ImZ1bmN0aW9uIj9yW29dPUR0KHMsdCk6cltvXT1zfSkscn1mdW5jdGlvbiBYdChyKXtyZXR1cm4gci5jaGFyQ29kZUF0KDApPT09NjUyNzkmJihyPXIuc2xpY2UoMSkpLHJ9dmFyIFA9e2lzQXJyYXk6T2UsaXNBcnJheUJ1ZmZlcjpLZSxpc0J1ZmZlcjpVdCxpc0Zvcm1EYXRhOkJ0LGlzQXJyYXlCdWZmZXJWaWV3Ok50LGlzU3RyaW5nOkh0LGlzTnVtYmVyOiR0LGlzT2JqZWN0OlllLGlzUGxhaW5PYmplY3Q6bmUsaXNVbmRlZmluZWQ6U2UsaXNEYXRlOld0LGlzRmlsZTpqdCxpc0Jsb2I6cXQsaXNGdW5jdGlvbjpaZSxpc1N0cmVhbTpWdCxpc1VSTFNlYXJjaFBhcmFtczp6dCxpc1N0YW5kYXJkQnJvd3NlckVudjpHdCxmb3JFYWNoOk1lLG1lcmdlOkFlLGV4dGVuZDpRdCx0cmltOkp0LHN0cmlwQk9NOlh0fSxxPVA7ZnVuY3Rpb24gZXQocil7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChyKS5yZXBsYWNlKC8lM0EvZ2ksIjoiKS5yZXBsYWNlKC8lMjQvZywiJCIpLnJlcGxhY2UoLyUyQy9naSwiLCIpLnJlcGxhY2UoLyUyMC9nLCIrIikucmVwbGFjZSgvJTVCL2dpLCJbIikucmVwbGFjZSgvJTVEL2dpLCJdIil9dmFyIHR0PWZ1bmN0aW9uKGUsdCxuKXtpZighdClyZXR1cm4gZTt2YXIgcztpZihuKXM9bih0KTtlbHNlIGlmKHEuaXNVUkxTZWFyY2hQYXJhbXModCkpcz10LnRvU3RyaW5nKCk7ZWxzZXt2YXIgbz1bXTtxLmZvckVhY2godCxmdW5jdGlvbihjLF8pe2M9PT1udWxsfHx0eXBlb2YgYz09InVuZGVmaW5lZCJ8fChxLmlzQXJyYXkoYyk/Xz1fKyJbXSI6Yz1bY10scS5mb3JFYWNoKGMsZnVuY3Rpb24oZCl7cS5pc0RhdGUoZCk/ZD1kLnRvSVNPU3RyaW5nKCk6cS5pc09iamVjdChkKSYmKGQ9SlNPTi5zdHJpbmdpZnkoZCkpLG8ucHVzaChldChfKSsiPSIrZXQoZCkpfSkpfSkscz1vLmpvaW4oIiYiKX1pZihzKXt2YXIgYT1lLmluZGV4T2YoIiMiKTthIT09LTEmJihlPWUuc2xpY2UoMCxhKSksZSs9KGUuaW5kZXhPZigiPyIpPT09LTE/Ij8iOiImIikrc31yZXR1cm4gZX0sS3Q9UDtmdW5jdGlvbiBzZSgpe3RoaXMuaGFuZGxlcnM9W119c2UucHJvdG90eXBlLnVzZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuaGFuZGxlcnMucHVzaCh7ZnVsZmlsbGVkOmUscmVqZWN0ZWQ6dCxzeW5jaHJvbm91czpuP24uc3luY2hyb25vdXM6ITEscnVuV2hlbjpuP24ucnVuV2hlbjpudWxsfSksdGhpcy5oYW5kbGVycy5sZW5ndGgtMX0sc2UucHJvdG90eXBlLmVqZWN0PWZ1bmN0aW9uKGUpe3RoaXMuaGFuZGxlcnNbZV0mJih0aGlzLmhhbmRsZXJzW2VdPW51bGwpfSxzZS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihlKXtLdC5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsZnVuY3Rpb24obil7biE9PW51bGwmJmUobil9KX07dmFyIFl0PXNlLFp0PVAsZXI9ZnVuY3Rpb24oZSx0KXtadC5mb3JFYWNoKGUsZnVuY3Rpb24ocyxvKXtvIT09dCYmby50b1VwcGVyQ2FzZSgpPT09dC50b1VwcGVyQ2FzZSgpJiYoZVt0XT1zLGRlbGV0ZSBlW29dKX0pfSxydD1mdW5jdGlvbihlLHQsbixzLG8pe3JldHVybiBlLmNvbmZpZz10LG4mJihlLmNvZGU9biksZS5yZXF1ZXN0PXMsZS5yZXNwb25zZT1vLGUuaXNBeGlvc0Vycm9yPSEwLGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue21lc3NhZ2U6dGhpcy5tZXNzYWdlLG5hbWU6dGhpcy5uYW1lLGRlc2NyaXB0aW9uOnRoaXMuZGVzY3JpcHRpb24sbnVtYmVyOnRoaXMubnVtYmVyLGZpbGVOYW1lOnRoaXMuZmlsZU5hbWUsbGluZU51bWJlcjp0aGlzLmxpbmVOdW1iZXIsY29sdW1uTnVtYmVyOnRoaXMuY29sdW1uTnVtYmVyLHN0YWNrOnRoaXMuc3RhY2ssY29uZmlnOnRoaXMuY29uZmlnLGNvZGU6dGhpcy5jb2RlLHN0YXR1czp0aGlzLnJlc3BvbnNlJiZ0aGlzLnJlc3BvbnNlLnN0YXR1cz90aGlzLnJlc3BvbnNlLnN0YXR1czpudWxsfX0sZX0sdHI9cnQsbnQ9ZnVuY3Rpb24oZSx0LG4scyxvKXt2YXIgYT1uZXcgRXJyb3IoZSk7cmV0dXJuIHRyKGEsdCxuLHMsbyl9LHJyPW50LG5yPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcz1uLmNvbmZpZy52YWxpZGF0ZVN0YXR1czshbi5zdGF0dXN8fCFzfHxzKG4uc3RhdHVzKT9lKG4pOnQocnIoIlJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgIituLnN0YXR1cyxuLmNvbmZpZyxudWxsLG4ucmVxdWVzdCxuKSl9LGllPVAsc3I9aWUuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKT9mdW5jdGlvbigpe3JldHVybnt3cml0ZTpmdW5jdGlvbih0LG4scyxvLGEsdSl7dmFyIGM9W107Yy5wdXNoKHQrIj0iK2VuY29kZVVSSUNvbXBvbmVudChuKSksaWUuaXNOdW1iZXIocykmJmMucHVzaCgiZXhwaXJlcz0iK25ldyBEYXRlKHMpLnRvR01UU3RyaW5nKCkpLGllLmlzU3RyaW5nKG8pJiZjLnB1c2goInBhdGg9IitvKSxpZS5pc1N0cmluZyhhKSYmYy5wdXNoKCJkb21haW49IithKSx1PT09ITAmJmMucHVzaCgic2VjdXJlIiksZG9jdW1lbnQuY29va2llPWMuam9pbigiOyAiKX0scmVhZDpmdW5jdGlvbih0KXt2YXIgbj1kb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgiKF58O1xccyopKCIrdCsiKT0oW147XSopIikpO3JldHVybiBuP2RlY29kZVVSSUNvbXBvbmVudChuWzNdKTpudWxsfSxyZW1vdmU6ZnVuY3Rpb24odCl7dGhpcy53cml0ZSh0LCIiLERhdGUubm93KCktODY0ZTUpfX19KCk6ZnVuY3Rpb24oKXtyZXR1cm57d3JpdGU6ZnVuY3Rpb24oKXt9LHJlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0scmVtb3ZlOmZ1bmN0aW9uKCl7fX19KCksaXI9ZnVuY3Rpb24oZSl7cmV0dXJuL14oW2Etel1bYS16XGQrXC0uXSo6KT9cL1wvL2kudGVzdChlKX0sb3I9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD9lLnJlcGxhY2UoL1wvKyQvLCIiKSsiLyIrdC5yZXBsYWNlKC9eXC8rLywiIik6ZX0sYXI9aXIsdXI9b3IsZnI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSYmIWFyKHQpP3VyKGUsdCk6dH0sSWU9UCxscj1bImFnZSIsImF1dGhvcml6YXRpb24iLCJjb250ZW50LWxlbmd0aCIsImNvbnRlbnQtdHlwZSIsImV0YWciLCJleHBpcmVzIiwiZnJvbSIsImhvc3QiLCJpZi1tb2RpZmllZC1zaW5jZSIsImlmLXVubW9kaWZpZWQtc2luY2UiLCJsYXN0LW1vZGlmaWVkIiwibG9jYXRpb24iLCJtYXgtZm9yd2FyZHMiLCJwcm94eS1hdXRob3JpemF0aW9uIiwicmVmZXJlciIsInJldHJ5LWFmdGVyIiwidXNlci1hZ2VudCJdLGNyPWZ1bmN0aW9uKGUpe3ZhciB0PXt9LG4scyxvO3JldHVybiBlJiZJZS5mb3JFYWNoKGUuc3BsaXQoYApgKSxmdW5jdGlvbih1KXtpZihvPXUuaW5kZXhPZigiOiIpLG49SWUudHJpbSh1LnN1YnN0cigwLG8pKS50b0xvd2VyQ2FzZSgpLHM9SWUudHJpbSh1LnN1YnN0cihvKzEpKSxuKXtpZih0W25dJiZsci5pbmRleE9mKG4pPj0wKXJldHVybjtuPT09InNldC1jb29raWUiP3Rbbl09KHRbbl0/dFtuXTpbXSkuY29uY2F0KFtzXSk6dFtuXT10W25dP3Rbbl0rIiwgIitzOnN9fSksdH0sc3Q9UCxocj1zdC5pc1N0YW5kYXJkQnJvd3NlckVudigpP2Z1bmN0aW9uKCl7dmFyIGU9Lyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSx0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKSxuO2Z1bmN0aW9uIHMobyl7dmFyIGE9bztyZXR1cm4gZSYmKHQuc2V0QXR0cmlidXRlKCJocmVmIixhKSxhPXQuaHJlZiksdC5zZXRBdHRyaWJ1dGUoImhyZWYiLGEpLHtocmVmOnQuaHJlZixwcm90b2NvbDp0LnByb3RvY29sP3QucHJvdG9jb2wucmVwbGFjZSgvOiQvLCIiKToiIixob3N0OnQuaG9zdCxzZWFyY2g6dC5zZWFyY2g/dC5zZWFyY2gucmVwbGFjZSgvXlw/LywiIik6IiIsaGFzaDp0Lmhhc2g/dC5oYXNoLnJlcGxhY2UoL14jLywiIik6IiIsaG9zdG5hbWU6dC5ob3N0bmFtZSxwb3J0OnQucG9ydCxwYXRobmFtZTp0LnBhdGhuYW1lLmNoYXJBdCgwKT09PSIvIj90LnBhdGhuYW1lOiIvIit0LnBhdGhuYW1lfX1yZXR1cm4gbj1zKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSxmdW5jdGlvbihhKXt2YXIgdT1zdC5pc1N0cmluZyhhKT9zKGEpOmE7cmV0dXJuIHUucHJvdG9jb2w9PT1uLnByb3RvY29sJiZ1Lmhvc3Q9PT1uLmhvc3R9fSgpOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuITB9fSgpO2Z1bmN0aW9uIHhlKHIpe3RoaXMubWVzc2FnZT1yfXhlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJDYW5jZWwiKyh0aGlzLm1lc3NhZ2U/IjogIit0aGlzLm1lc3NhZ2U6IiIpfSx4ZS5wcm90b3R5cGUuX19DQU5DRUxfXz0hMDt2YXIgb2U9eGUsYWU9UCxkcj1ucixwcj1zcixtcj10dCxncj1mcixfcj1jcix5cj1ocixGZT1udCx2cj1mZSx3cj1vZSxpdD1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obixzKXt2YXIgbz1lLmRhdGEsYT1lLmhlYWRlcnMsdT1lLnJlc3BvbnNlVHlwZSxjO2Z1bmN0aW9uIF8oKXtlLmNhbmNlbFRva2VuJiZlLmNhbmNlbFRva2VuLnVuc3Vic2NyaWJlKGMpLGUuc2lnbmFsJiZlLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCJhYm9ydCIsYyl9YWUuaXNGb3JtRGF0YShvKSYmZGVsZXRlIGFbIkNvbnRlbnQtVHlwZSJdO3ZhciBmPW5ldyBYTUxIdHRwUmVxdWVzdDtpZihlLmF1dGgpe3ZhciBkPWUuYXV0aC51c2VybmFtZXx8IiIsdj1lLmF1dGgucGFzc3dvcmQ/dW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGUuYXV0aC5wYXNzd29yZCkpOiIiO2EuQXV0aG9yaXphdGlvbj0iQmFzaWMgIitidG9hKGQrIjoiK3YpfXZhciB3PWdyKGUuYmFzZVVSTCxlLnVybCk7Zi5vcGVuKGUubWV0aG9kLnRvVXBwZXJDYXNlKCksbXIodyxlLnBhcmFtcyxlLnBhcmFtc1NlcmlhbGl6ZXIpLCEwKSxmLnRpbWVvdXQ9ZS50aW1lb3V0O2Z1bmN0aW9uIE0oKXtpZighIWYpe3ZhciBDPSJnZXRBbGxSZXNwb25zZUhlYWRlcnMiaW4gZj9fcihmLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTpudWxsLE89IXV8fHU9PT0idGV4dCJ8fHU9PT0ianNvbiI/Zi5yZXNwb25zZVRleHQ6Zi5yZXNwb25zZSxJPXtkYXRhOk8sc3RhdHVzOmYuc3RhdHVzLHN0YXR1c1RleHQ6Zi5zdGF0dXNUZXh0LGhlYWRlcnM6Qyxjb25maWc6ZSxyZXF1ZXN0OmZ9O2RyKGZ1bmN0aW9uKFgpe24oWCksXygpfSxmdW5jdGlvbihYKXtzKFgpLF8oKX0sSSksZj1udWxsfX1pZigib25sb2FkZW5kImluIGY/Zi5vbmxvYWRlbmQ9TTpmLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpeyFmfHxmLnJlYWR5U3RhdGUhPT00fHxmLnN0YXR1cz09PTAmJiEoZi5yZXNwb25zZVVSTCYmZi5yZXNwb25zZVVSTC5pbmRleE9mKCJmaWxlOiIpPT09MCl8fHNldFRpbWVvdXQoTSl9LGYub25hYm9ydD1mdW5jdGlvbigpeyFmfHwocyhGZSgiUmVxdWVzdCBhYm9ydGVkIixlLCJFQ09OTkFCT1JURUQiLGYpKSxmPW51bGwpfSxmLm9uZXJyb3I9ZnVuY3Rpb24oKXtzKEZlKCJOZXR3b3JrIEVycm9yIixlLG51bGwsZikpLGY9bnVsbH0sZi5vbnRpbWVvdXQ9ZnVuY3Rpb24oKXt2YXIgTz1lLnRpbWVvdXQ/InRpbWVvdXQgb2YgIitlLnRpbWVvdXQrIm1zIGV4Y2VlZGVkIjoidGltZW91dCBleGNlZWRlZCIsST1lLnRyYW5zaXRpb25hbHx8dnIudHJhbnNpdGlvbmFsO2UudGltZW91dEVycm9yTWVzc2FnZSYmKE89ZS50aW1lb3V0RXJyb3JNZXNzYWdlKSxzKEZlKE8sZSxJLmNsYXJpZnlUaW1lb3V0RXJyb3I/IkVUSU1FRE9VVCI6IkVDT05OQUJPUlRFRCIsZikpLGY9bnVsbH0sYWUuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSl7dmFyIEE9KGUud2l0aENyZWRlbnRpYWxzfHx5cih3KSkmJmUueHNyZkNvb2tpZU5hbWU/cHIucmVhZChlLnhzcmZDb29raWVOYW1lKTp2b2lkIDA7QSYmKGFbZS54c3JmSGVhZGVyTmFtZV09QSl9InNldFJlcXVlc3RIZWFkZXIiaW4gZiYmYWUuZm9yRWFjaChhLGZ1bmN0aW9uKE8sSSl7dHlwZW9mIG89PSJ1bmRlZmluZWQiJiZJLnRvTG93ZXJDYXNlKCk9PT0iY29udGVudC10eXBlIj9kZWxldGUgYVtJXTpmLnNldFJlcXVlc3RIZWFkZXIoSSxPKX0pLGFlLmlzVW5kZWZpbmVkKGUud2l0aENyZWRlbnRpYWxzKXx8KGYud2l0aENyZWRlbnRpYWxzPSEhZS53aXRoQ3JlZGVudGlhbHMpLHUmJnUhPT0ianNvbiImJihmLnJlc3BvbnNlVHlwZT1lLnJlc3BvbnNlVHlwZSksdHlwZW9mIGUub25Eb3dubG9hZFByb2dyZXNzPT0iZnVuY3Rpb24iJiZmLmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIixlLm9uRG93bmxvYWRQcm9ncmVzcyksdHlwZW9mIGUub25VcGxvYWRQcm9ncmVzcz09ImZ1bmN0aW9uIiYmZi51cGxvYWQmJmYudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIixlLm9uVXBsb2FkUHJvZ3Jlc3MpLChlLmNhbmNlbFRva2VufHxlLnNpZ25hbCkmJihjPWZ1bmN0aW9uKEMpeyFmfHwocyghQ3x8QyYmQy50eXBlP25ldyB3cigiY2FuY2VsZWQiKTpDKSxmLmFib3J0KCksZj1udWxsKX0sZS5jYW5jZWxUb2tlbiYmZS5jYW5jZWxUb2tlbi5zdWJzY3JpYmUoYyksZS5zaWduYWwmJihlLnNpZ25hbC5hYm9ydGVkP2MoKTplLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsYykpKSxvfHwobz1udWxsKSxmLnNlbmQobyl9KX0sYj1QLG90PWVyLGJyPXJ0LEVyPXsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIn07ZnVuY3Rpb24gYXQocixlKXshYi5pc1VuZGVmaW5lZChyKSYmYi5pc1VuZGVmaW5lZChyWyJDb250ZW50LVR5cGUiXSkmJihyWyJDb250ZW50LVR5cGUiXT1lKX1mdW5jdGlvbiBUcigpe3ZhciByO3JldHVybih0eXBlb2YgWE1MSHR0cFJlcXVlc3QhPSJ1bmRlZmluZWQifHx0eXBlb2YgcHJvY2VzcyE9InVuZGVmaW5lZCImJk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwcm9jZXNzKT09PSJbb2JqZWN0IHByb2Nlc3NdIikmJihyPWl0KSxyfWZ1bmN0aW9uIENyKHIsZSx0KXtpZihiLmlzU3RyaW5nKHIpKXRyeXtyZXR1cm4oZXx8SlNPTi5wYXJzZSkociksYi50cmltKHIpfWNhdGNoKG4pe2lmKG4ubmFtZSE9PSJTeW50YXhFcnJvciIpdGhyb3cgbn1yZXR1cm4odHx8SlNPTi5zdHJpbmdpZnkpKHIpfXZhciB1ZT17dHJhbnNpdGlvbmFsOntzaWxlbnRKU09OUGFyc2luZzohMCxmb3JjZWRKU09OUGFyc2luZzohMCxjbGFyaWZ5VGltZW91dEVycm9yOiExfSxhZGFwdGVyOlRyKCksdHJhbnNmb3JtUmVxdWVzdDpbZnVuY3Rpb24oZSx0KXtyZXR1cm4gb3QodCwiQWNjZXB0Iiksb3QodCwiQ29udGVudC1UeXBlIiksYi5pc0Zvcm1EYXRhKGUpfHxiLmlzQXJyYXlCdWZmZXIoZSl8fGIuaXNCdWZmZXIoZSl8fGIuaXNTdHJlYW0oZSl8fGIuaXNGaWxlKGUpfHxiLmlzQmxvYihlKT9lOmIuaXNBcnJheUJ1ZmZlclZpZXcoZSk/ZS5idWZmZXI6Yi5pc1VSTFNlYXJjaFBhcmFtcyhlKT8oYXQodCwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgiKSxlLnRvU3RyaW5nKCkpOmIuaXNPYmplY3QoZSl8fHQmJnRbIkNvbnRlbnQtVHlwZSJdPT09ImFwcGxpY2F0aW9uL2pzb24iPyhhdCh0LCJhcHBsaWNhdGlvbi9qc29uIiksQ3IoZSkpOmV9XSx0cmFuc2Zvcm1SZXNwb25zZTpbZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy50cmFuc2l0aW9uYWx8fHVlLnRyYW5zaXRpb25hbCxuPXQmJnQuc2lsZW50SlNPTlBhcnNpbmcscz10JiZ0LmZvcmNlZEpTT05QYXJzaW5nLG89IW4mJnRoaXMucmVzcG9uc2VUeXBlPT09Impzb24iO2lmKG98fHMmJmIuaXNTdHJpbmcoZSkmJmUubGVuZ3RoKXRyeXtyZXR1cm4gSlNPTi5wYXJzZShlKX1jYXRjaChhKXtpZihvKXRocm93IGEubmFtZT09PSJTeW50YXhFcnJvciI/YnIoYSx0aGlzLCJFX0pTT05fUEFSU0UiKTphfXJldHVybiBlfV0sdGltZW91dDowLHhzcmZDb29raWVOYW1lOiJYU1JGLVRPS0VOIix4c3JmSGVhZGVyTmFtZToiWC1YU1JGLVRPS0VOIixtYXhDb250ZW50TGVuZ3RoOi0xLG1heEJvZHlMZW5ndGg6LTEsdmFsaWRhdGVTdGF0dXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PTIwMCYmZTwzMDB9LGhlYWRlcnM6e2NvbW1vbjp7QWNjZXB0OiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyoifX19O2IuZm9yRWFjaChbImRlbGV0ZSIsImdldCIsImhlYWQiXSxmdW5jdGlvbihlKXt1ZS5oZWFkZXJzW2VdPXt9fSksYi5mb3JFYWNoKFsicG9zdCIsInB1dCIsInBhdGNoIl0sZnVuY3Rpb24oZSl7dWUuaGVhZGVyc1tlXT1iLm1lcmdlKEVyKX0pO3ZhciBmZT11ZSxScj1QLFByPWZlLE9yPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcz10aGlzfHxQcjtyZXR1cm4gUnIuZm9yRWFjaChuLGZ1bmN0aW9uKGEpe2U9YS5jYWxsKHMsZSx0KX0pLGV9LHV0PWZ1bmN0aW9uKGUpe3JldHVybiEhKGUmJmUuX19DQU5DRUxfXyl9LGZ0PVAsTGU9T3IsU3I9dXQsTXI9ZmUsQXI9b2U7ZnVuY3Rpb24ga2Uocil7aWYoci5jYW5jZWxUb2tlbiYmci5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCksci5zaWduYWwmJnIuc2lnbmFsLmFib3J0ZWQpdGhyb3cgbmV3IEFyKCJjYW5jZWxlZCIpfXZhciBJcj1mdW5jdGlvbihlKXtrZShlKSxlLmhlYWRlcnM9ZS5oZWFkZXJzfHx7fSxlLmRhdGE9TGUuY2FsbChlLGUuZGF0YSxlLmhlYWRlcnMsZS50cmFuc2Zvcm1SZXF1ZXN0KSxlLmhlYWRlcnM9ZnQubWVyZ2UoZS5oZWFkZXJzLmNvbW1vbnx8e30sZS5oZWFkZXJzW2UubWV0aG9kXXx8e30sZS5oZWFkZXJzKSxmdC5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCIsInBvc3QiLCJwdXQiLCJwYXRjaCIsImNvbW1vbiJdLGZ1bmN0aW9uKHMpe2RlbGV0ZSBlLmhlYWRlcnNbc119KTt2YXIgdD1lLmFkYXB0ZXJ8fE1yLmFkYXB0ZXI7cmV0dXJuIHQoZSkudGhlbihmdW5jdGlvbihzKXtyZXR1cm4ga2UoZSkscy5kYXRhPUxlLmNhbGwoZSxzLmRhdGEscy5oZWFkZXJzLGUudHJhbnNmb3JtUmVzcG9uc2UpLHN9LGZ1bmN0aW9uKHMpe3JldHVybiBTcihzKXx8KGtlKGUpLHMmJnMucmVzcG9uc2UmJihzLnJlc3BvbnNlLmRhdGE9TGUuY2FsbChlLHMucmVzcG9uc2UuZGF0YSxzLnJlc3BvbnNlLmhlYWRlcnMsZS50cmFuc2Zvcm1SZXNwb25zZSkpKSxQcm9taXNlLnJlamVjdChzKX0pfSxTPVAsbHQ9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9O3ZhciBuPXt9O2Z1bmN0aW9uIHMoZixkKXtyZXR1cm4gUy5pc1BsYWluT2JqZWN0KGYpJiZTLmlzUGxhaW5PYmplY3QoZCk/Uy5tZXJnZShmLGQpOlMuaXNQbGFpbk9iamVjdChkKT9TLm1lcmdlKHt9LGQpOlMuaXNBcnJheShkKT9kLnNsaWNlKCk6ZH1mdW5jdGlvbiBvKGYpe2lmKFMuaXNVbmRlZmluZWQodFtmXSkpe2lmKCFTLmlzVW5kZWZpbmVkKGVbZl0pKXJldHVybiBzKHZvaWQgMCxlW2ZdKX1lbHNlIHJldHVybiBzKGVbZl0sdFtmXSl9ZnVuY3Rpb24gYShmKXtpZighUy5pc1VuZGVmaW5lZCh0W2ZdKSlyZXR1cm4gcyh2b2lkIDAsdFtmXSl9ZnVuY3Rpb24gdShmKXtpZihTLmlzVW5kZWZpbmVkKHRbZl0pKXtpZighUy5pc1VuZGVmaW5lZChlW2ZdKSlyZXR1cm4gcyh2b2lkIDAsZVtmXSl9ZWxzZSByZXR1cm4gcyh2b2lkIDAsdFtmXSl9ZnVuY3Rpb24gYyhmKXtpZihmIGluIHQpcmV0dXJuIHMoZVtmXSx0W2ZdKTtpZihmIGluIGUpcmV0dXJuIHModm9pZCAwLGVbZl0pfXZhciBfPXt1cmw6YSxtZXRob2Q6YSxkYXRhOmEsYmFzZVVSTDp1LHRyYW5zZm9ybVJlcXVlc3Q6dSx0cmFuc2Zvcm1SZXNwb25zZTp1LHBhcmFtc1NlcmlhbGl6ZXI6dSx0aW1lb3V0OnUsdGltZW91dE1lc3NhZ2U6dSx3aXRoQ3JlZGVudGlhbHM6dSxhZGFwdGVyOnUscmVzcG9uc2VUeXBlOnUseHNyZkNvb2tpZU5hbWU6dSx4c3JmSGVhZGVyTmFtZTp1LG9uVXBsb2FkUHJvZ3Jlc3M6dSxvbkRvd25sb2FkUHJvZ3Jlc3M6dSxkZWNvbXByZXNzOnUsbWF4Q29udGVudExlbmd0aDp1LG1heEJvZHlMZW5ndGg6dSx0cmFuc3BvcnQ6dSxodHRwQWdlbnQ6dSxodHRwc0FnZW50OnUsY2FuY2VsVG9rZW46dSxzb2NrZXRQYXRoOnUscmVzcG9uc2VFbmNvZGluZzp1LHZhbGlkYXRlU3RhdHVzOmN9O3JldHVybiBTLmZvckVhY2goT2JqZWN0LmtleXMoZSkuY29uY2F0KE9iamVjdC5rZXlzKHQpKSxmdW5jdGlvbihkKXt2YXIgdj1fW2RdfHxvLHc9dihkKTtTLmlzVW5kZWZpbmVkKHcpJiZ2IT09Y3x8KG5bZF09dyl9KSxufSxjdD17dmVyc2lvbjoiMC4yNS4wIn0seHI9Y3QudmVyc2lvbixEZT17fTtbIm9iamVjdCIsImJvb2xlYW4iLCJudW1iZXIiLCJmdW5jdGlvbiIsInN0cmluZyIsInN5bWJvbCJdLmZvckVhY2goZnVuY3Rpb24ocixlKXtEZVtyXT1mdW5jdGlvbihuKXtyZXR1cm4gdHlwZW9mIG49PT1yfHwiYSIrKGU8MT8ibiAiOiIgIikrcn19KTt2YXIgaHQ9e307RGUudHJhbnNpdGlvbmFsPWZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBzKG8sYSl7cmV0dXJuIltBeGlvcyB2Iit4cisiXSBUcmFuc2l0aW9uYWwgb3B0aW9uICciK28rIiciK2ErKG4/Ii4gIituOiIiKX1yZXR1cm4gZnVuY3Rpb24obyxhLHUpe2lmKGU9PT0hMSl0aHJvdyBuZXcgRXJyb3IocyhhLCIgaGFzIGJlZW4gcmVtb3ZlZCIrKHQ/IiBpbiAiK3Q6IiIpKSk7cmV0dXJuIHQmJiFodFthXSYmKGh0W2FdPSEwLGNvbnNvbGUud2FybihzKGEsIiBoYXMgYmVlbiBkZXByZWNhdGVkIHNpbmNlIHYiK3QrIiBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZWFyIGZ1dHVyZSIpKSksZT9lKG8sYSx1KTohMH19O2Z1bmN0aW9uIEZyKHIsZSx0KXtpZih0eXBlb2YgciE9Im9iamVjdCIpdGhyb3cgbmV3IFR5cGVFcnJvcigib3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdCIpO2Zvcih2YXIgbj1PYmplY3Qua2V5cyhyKSxzPW4ubGVuZ3RoO3MtLSA+MDspe3ZhciBvPW5bc10sYT1lW29dO2lmKGEpe3ZhciB1PXJbb10sYz11PT09dm9pZCAwfHxhKHUsbyxyKTtpZihjIT09ITApdGhyb3cgbmV3IFR5cGVFcnJvcigib3B0aW9uICIrbysiIG11c3QgYmUgIitjKTtjb250aW51ZX1pZih0IT09ITApdGhyb3cgRXJyb3IoIlVua25vd24gb3B0aW9uICIrbyl9fXZhciBMcj17YXNzZXJ0T3B0aW9uczpGcix2YWxpZGF0b3JzOkRlfSxkdD1QLGtyPXR0LHB0PVl0LG10PUlyLGxlPWx0LGd0PUxyLFY9Z3QudmFsaWRhdG9ycztmdW5jdGlvbiBLKHIpe3RoaXMuZGVmYXVsdHM9cix0aGlzLmludGVyY2VwdG9ycz17cmVxdWVzdDpuZXcgcHQscmVzcG9uc2U6bmV3IHB0fX1LLnByb3RvdHlwZS5yZXF1ZXN0PWZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIGU9PSJzdHJpbmciPyh0PXR8fHt9LHQudXJsPWUpOnQ9ZXx8e30sIXQudXJsKXRocm93IG5ldyBFcnJvcigiUHJvdmlkZWQgY29uZmlnIHVybCBpcyBub3QgdmFsaWQiKTt0PWxlKHRoaXMuZGVmYXVsdHMsdCksdC5tZXRob2Q/dC5tZXRob2Q9dC5tZXRob2QudG9Mb3dlckNhc2UoKTp0aGlzLmRlZmF1bHRzLm1ldGhvZD90Lm1ldGhvZD10aGlzLmRlZmF1bHRzLm1ldGhvZC50b0xvd2VyQ2FzZSgpOnQubWV0aG9kPSJnZXQiO3ZhciBuPXQudHJhbnNpdGlvbmFsO24hPT12b2lkIDAmJmd0LmFzc2VydE9wdGlvbnMobix7c2lsZW50SlNPTlBhcnNpbmc6Vi50cmFuc2l0aW9uYWwoVi5ib29sZWFuKSxmb3JjZWRKU09OUGFyc2luZzpWLnRyYW5zaXRpb25hbChWLmJvb2xlYW4pLGNsYXJpZnlUaW1lb3V0RXJyb3I6Vi50cmFuc2l0aW9uYWwoVi5ib29sZWFuKX0sITEpO3ZhciBzPVtdLG89ITA7dGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uKHcpe3R5cGVvZiB3LnJ1bldoZW49PSJmdW5jdGlvbiImJncucnVuV2hlbih0KT09PSExfHwobz1vJiZ3LnN5bmNocm9ub3VzLHMudW5zaGlmdCh3LmZ1bGZpbGxlZCx3LnJlamVjdGVkKSl9KTt2YXIgYT1bXTt0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uKHcpe2EucHVzaCh3LmZ1bGZpbGxlZCx3LnJlamVjdGVkKX0pO3ZhciB1O2lmKCFvKXt2YXIgYz1bbXQsdm9pZCAwXTtmb3IoQXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkoYyxzKSxjPWMuY29uY2F0KGEpLHU9UHJvbWlzZS5yZXNvbHZlKHQpO2MubGVuZ3RoOyl1PXUudGhlbihjLnNoaWZ0KCksYy5zaGlmdCgpKTtyZXR1cm4gdX1mb3IodmFyIF89dDtzLmxlbmd0aDspe3ZhciBmPXMuc2hpZnQoKSxkPXMuc2hpZnQoKTt0cnl7Xz1mKF8pfWNhdGNoKHYpe2Qodik7YnJlYWt9fXRyeXt1PW10KF8pfWNhdGNoKHYpe3JldHVybiBQcm9taXNlLnJlamVjdCh2KX1mb3IoO2EubGVuZ3RoOyl1PXUudGhlbihhLnNoaWZ0KCksYS5zaGlmdCgpKTtyZXR1cm4gdX0sSy5wcm90b3R5cGUuZ2V0VXJpPWZ1bmN0aW9uKGUpe2lmKCFlLnVybCl0aHJvdyBuZXcgRXJyb3IoIlByb3ZpZGVkIGNvbmZpZyB1cmwgaXMgbm90IHZhbGlkIik7cmV0dXJuIGU9bGUodGhpcy5kZWZhdWx0cyxlKSxrcihlLnVybCxlLnBhcmFtcyxlLnBhcmFtc1NlcmlhbGl6ZXIpLnJlcGxhY2UoL15cPy8sIiIpfSxkdC5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCIsIm9wdGlvbnMiXSxmdW5jdGlvbihlKXtLLnByb3RvdHlwZVtlXT1mdW5jdGlvbih0LG4pe3JldHVybiB0aGlzLnJlcXVlc3QobGUobnx8e30se21ldGhvZDplLHVybDp0LGRhdGE6KG58fHt9KS5kYXRhfSkpfX0pLGR0LmZvckVhY2goWyJwb3N0IiwicHV0IiwicGF0Y2giXSxmdW5jdGlvbihlKXtLLnByb3RvdHlwZVtlXT1mdW5jdGlvbih0LG4scyl7cmV0dXJuIHRoaXMucmVxdWVzdChsZShzfHx7fSx7bWV0aG9kOmUsdXJsOnQsZGF0YTpufSkpfX0pO3ZhciBEcj1LLFVyPW9lO2Z1bmN0aW9uIHoocil7aWYodHlwZW9mIHIhPSJmdW5jdGlvbiIpdGhyb3cgbmV3IFR5cGVFcnJvcigiZXhlY3V0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uLiIpO3ZhciBlO3RoaXMucHJvbWlzZT1uZXcgUHJvbWlzZShmdW5jdGlvbihzKXtlPXN9KTt2YXIgdD10aGlzO3RoaXMucHJvbWlzZS50aGVuKGZ1bmN0aW9uKG4pe2lmKCEhdC5fbGlzdGVuZXJzKXt2YXIgcyxvPXQuX2xpc3RlbmVycy5sZW5ndGg7Zm9yKHM9MDtzPG87cysrKXQuX2xpc3RlbmVyc1tzXShuKTt0Ll9saXN0ZW5lcnM9bnVsbH19KSx0aGlzLnByb21pc2UudGhlbj1mdW5jdGlvbihuKXt2YXIgcyxvPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGEpe3Quc3Vic2NyaWJlKGEpLHM9YX0pLnRoZW4obik7cmV0dXJuIG8uY2FuY2VsPWZ1bmN0aW9uKCl7dC51bnN1YnNjcmliZShzKX0sb30scihmdW5jdGlvbihzKXt0LnJlYXNvbnx8KHQucmVhc29uPW5ldyBVcihzKSxlKHQucmVhc29uKSl9KX16LnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkPWZ1bmN0aW9uKCl7aWYodGhpcy5yZWFzb24pdGhyb3cgdGhpcy5yZWFzb259LHoucHJvdG90eXBlLnN1YnNjcmliZT1mdW5jdGlvbihlKXtpZih0aGlzLnJlYXNvbil7ZSh0aGlzLnJlYXNvbik7cmV0dXJufXRoaXMuX2xpc3RlbmVycz90aGlzLl9saXN0ZW5lcnMucHVzaChlKTp0aGlzLl9saXN0ZW5lcnM9W2VdfSx6LnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbihlKXtpZighIXRoaXMuX2xpc3RlbmVycyl7dmFyIHQ9dGhpcy5fbGlzdGVuZXJzLmluZGV4T2YoZSk7dCE9PS0xJiZ0aGlzLl9saXN0ZW5lcnMuc3BsaWNlKHQsMSl9fSx6LnNvdXJjZT1mdW5jdGlvbigpe3ZhciBlLHQ9bmV3IHooZnVuY3Rpb24ocyl7ZT1zfSk7cmV0dXJue3Rva2VuOnQsY2FuY2VsOmV9fTt2YXIgQnI9eixOcj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIGUuYXBwbHkobnVsbCxuKX19LEhyPVAsJHI9ZnVuY3Rpb24oZSl7cmV0dXJuIEhyLmlzT2JqZWN0KGUpJiZlLmlzQXhpb3NFcnJvcj09PSEwfSxfdD1QLFdyPVhlLGNlPURyLGpyPWx0LHFyPWZlO2Z1bmN0aW9uIHl0KHIpe3ZhciBlPW5ldyBjZShyKSx0PVdyKGNlLnByb3RvdHlwZS5yZXF1ZXN0LGUpO3JldHVybiBfdC5leHRlbmQodCxjZS5wcm90b3R5cGUsZSksX3QuZXh0ZW5kKHQsZSksdC5jcmVhdGU9ZnVuY3Rpb24ocyl7cmV0dXJuIHl0KGpyKHIscykpfSx0fXZhciBMPXl0KHFyKTtMLkF4aW9zPWNlLEwuQ2FuY2VsPW9lLEwuQ2FuY2VsVG9rZW49QnIsTC5pc0NhbmNlbD11dCxMLlZFUlNJT049Y3QudmVyc2lvbixMLmFsbD1mdW5jdGlvbihlKXtyZXR1cm4gUHJvbWlzZS5hbGwoZSl9LEwuc3ByZWFkPU5yLEwuaXNBeGlvc0Vycm9yPSRyLFBlLmV4cG9ydHM9TCxQZS5leHBvcnRzLmRlZmF1bHQ9TDt2YXIgVnI9UGUuZXhwb3J0cztjbGFzcyBwe2lzRW1wdHkoKXtyZXR1cm4hdGhpcy5pc1ByZXNlbnQoKX1zdGF0aWMgb2YoZSl7aWYoZSE9bnVsbClyZXR1cm4gbmV3IHZ0KGUpO3Rocm93IG5ldyBUeXBlRXJyb3IoIlRoZSBwYXNzZWQgdmFsdWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkLiIpfXN0YXRpYyBvZk5vbk51bGwoZSl7cmV0dXJuIHAub2YoZSl9c3RhdGljIG9mTnVsbGFibGUoZSl7cmV0dXJuIGUhPW51bGw/bmV3IHZ0KGUpOm5ldyB3dH1zdGF0aWMgZW1wdHkoKXtyZXR1cm4gbmV3IHd0fXN0YXRpYyBmcm9tKGUpe3N3aXRjaChlLmtpbmQpe2Nhc2UicHJlc2VudCI6cmV0dXJuIHAub2YoZS52YWx1ZSk7Y2FzZSJlbXB0eSI6cmV0dXJuIHAuZW1wdHkoKTtkZWZhdWx0OnRocm93IG5ldyBUeXBlRXJyb3IoIlRoZSBwYXNzZWQgdmFsdWUgd2FzIG5vdCBhbiBPcHRpb24gdHlwZS4iKX19fWNsYXNzIHZ0IGV4dGVuZHMgcHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpO3RoaXMucGF5bG9hZD1lfWlzUHJlc2VudCgpe3JldHVybiEwfWdldCgpe3JldHVybiB0aGlzLnBheWxvYWR9aWZQcmVzZW50KGUpe2UodGhpcy5wYXlsb2FkKX1pZlByZXNlbnRPckVsc2UoZSx0KXtlKHRoaXMucGF5bG9hZCl9ZmlsdGVyKGUpe3JldHVybiBlKHRoaXMucGF5bG9hZCk/dGhpczpwLmVtcHR5KCl9bWFwKGUpe2NvbnN0IHQ9ZSh0aGlzLnBheWxvYWQpO3JldHVybiBwLm9mTnVsbGFibGUodCl9ZmxhdE1hcChlKXtyZXR1cm4gZSh0aGlzLnBheWxvYWQpfW9yKGUpe3JldHVybiB0aGlzfW9yRWxzZShlKXtyZXR1cm4gdGhpcy5wYXlsb2FkfW9yRWxzZUdldChlKXtyZXR1cm4gdGhpcy5wYXlsb2FkfW9yRWxzZVRocm93KGUpe3JldHVybiB0aGlzLnBheWxvYWR9b3JOdWxsKCl7cmV0dXJuIHRoaXMucGF5bG9hZH1vclVuZGVmaW5lZCgpe3JldHVybiB0aGlzLnBheWxvYWR9dG9PcHRpb24oKXtyZXR1cm57a2luZDoicHJlc2VudCIsdmFsdWU6dGhpcy5wYXlsb2FkfX1tYXRjaGVzKGUpe3JldHVybiBlLnByZXNlbnQodGhpcy5wYXlsb2FkKX10b0pTT04oZSl7cmV0dXJuIHRoaXMucGF5bG9hZH19Y2xhc3Mgd3QgZXh0ZW5kcyBwe2lzUHJlc2VudCgpe3JldHVybiExfWNvbnN0cnVjdG9yKCl7c3VwZXIoKX1nZXQoKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgb3B0aW9uYWwgaXMgbm90IHByZXNlbnQuIil9aWZQcmVzZW50KGUpe31pZlByZXNlbnRPckVsc2UoZSx0KXt0KCl9ZmlsdGVyKGUpe3JldHVybiB0aGlzfW1hcChlKXtyZXR1cm4gcC5lbXB0eSgpfWZsYXRNYXAoZSl7cmV0dXJuIHAuZW1wdHkoKX1vcihlKXtyZXR1cm4gZSgpfW9yRWxzZShlKXtyZXR1cm4gZX1vckVsc2VHZXQoZSl7cmV0dXJuIHRoaXMub3JFbHNlKGUoKSl9b3JFbHNlVGhyb3coZSl7dGhyb3cgZSgpfW9yTnVsbCgpe3JldHVybiBudWxsfW9yVW5kZWZpbmVkKCl7fXRvT3B0aW9uKCl7cmV0dXJue2tpbmQ6ImVtcHR5In19bWF0Y2hlcyhlKXtyZXR1cm4gZS5lbXB0eSgpfXRvSlNPTihlKXtyZXR1cm4gbnVsbH19Y29uc3QgenI9IjEuMi4xIjtmdW5jdGlvbiBKcihyKXtnbG9iYWxUaGlzLl92b25hZ2VNZWRpYVByb2Nlc3Nvck1ldGFkYXRhPXJ9ZnVuY3Rpb24gR3IoKXtyZXR1cm4gZ2xvYmFsVGhpcy5fdm9uYWdlTWVkaWFQcm9jZXNzb3JNZXRhZGF0YX1jbGFzcyBre2NvbnN0cnVjdG9yKCl7Y29uc3QgZT1HcigpO3RoaXMuX3JlcG9ydD17YWN0aW9uOnAuZW1wdHkoKSxhcHBsaWNhdGlvbklkOnAub2ZOdWxsYWJsZShlIT09dm9pZCAwJiZlIT1udWxsP2UuYXBwSWQ6bnVsbCksdGltZXN0YW1wOkRhdGUubm93KCksZnBzOnAuZW1wdHkoKSxmcmFtZXNUcmFuc2Zvcm1lZDpwLmVtcHR5KCksZ3VpZDpwLmVtcHR5KCksaGlnaGVzdEZyYW1lVHJhbnNmb3JtQ3B1OnAuZW1wdHkoKSxtZXNzYWdlOnAuZW1wdHkoKSxzb3VyY2U6cC5vZk51bGxhYmxlKGUhPT12b2lkIDAmJmUhPW51bGw/ZS5zb3VyY2VUeXBlOm51bGwpLHRyYW5zZm9ybWVkRnBzOnAuZW1wdHkoKSx0cmFuc2Zvcm1lclR5cGU6cC5lbXB0eSgpLHZhcmlhdGlvbjpwLmVtcHR5KCksdmlkZW9IZWlnaHQ6cC5lbXB0eSgpLHZpZGVvV2lkdGg6cC5lbXB0eSgpLHZlcnNpb246enIsZXJyb3I6cC5lbXB0eSgpfX1hY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5hY3Rpb249cC5vZk51bGxhYmxlKGUpLHRoaXN9ZnJhbWVzVHJhbnNmb3JtZWQoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5mcmFtZXNUcmFuc2Zvcm1lZD1wLm9mTnVsbGFibGUoZSksdGhpc31mcHMoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5mcHM9cC5vZk51bGxhYmxlKGUpLHRoaXN9Z3VpZChlKXtyZXR1cm4gdGhpcy5fcmVwb3J0Lmd1aWQ9cC5vZk51bGxhYmxlKGUpLHRoaXN9bWVzc2FnZShlKXtyZXR1cm4gdGhpcy5fcmVwb3J0Lm1lc3NhZ2U9cC5vZk51bGxhYmxlKGUpLHRoaXN9dHJhbnNmb3JtZWRGcHMoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC50cmFuc2Zvcm1lZEZwcz1wLm9mTnVsbGFibGUoZSksdGhpc310cmFuc2Zvcm1lclR5cGUoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC50cmFuc2Zvcm1lclR5cGU9cC5vZk51bGxhYmxlKGUpLHRoaXN9dmFyaWF0aW9uKGUpe3JldHVybiB0aGlzLl9yZXBvcnQudmFyaWF0aW9uPXAub2ZOdWxsYWJsZShlKSx0aGlzfXZpZGVvSGVpZ2h0KGUpe3JldHVybiB0aGlzLl9yZXBvcnQudmlkZW9IZWlnaHQ9cC5vZk51bGxhYmxlKGUpLHRoaXN9dmlkZW9XaWR0aChlKXtyZXR1cm4gdGhpcy5fcmVwb3J0LnZpZGVvV2lkdGg9cC5vZk51bGxhYmxlKGUpLHRoaXN9ZXJyb3IoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5lcnJvcj1wLm9mTnVsbGFibGUoZSksdGhpc31idWlsZCgpe3JldHVybiB0aGlzLl9yZXBvcnR9fWNvbnN0IFFyPXI9PkpTT04uc3RyaW5naWZ5KHIsKGUsdCk9PntpZih0IT09bnVsbClyZXR1cm4gdH0pO2NsYXNzIER7c3RhdGljIHJlcG9ydChlKXtyZXR1cm4gbmV3IFByb21pc2UoKHQsbik9PntpZihlLmFwcGxpY2F0aW9uSWQuaXNFbXB0eSgpfHxlLnNvdXJjZS5pc0VtcHR5KCkpe3QoInN1Y2Nlc3MiKTtyZXR1cm59bGV0IHM9VnIuY3JlYXRlKCksbz17dGltZW91dDoxZTQsdGltZW91dEVycm9yTWVzc2FnZToiUmVxdWVzdCB0aW1lb3V0IixoZWFkZXJzOnsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbiJ9fTtjb25zdCBhPSJodHRwczovL2hsZy5kZXYudG9rYm94LmNvbS9kZXYvbG9nZ2luZy92Y3Bfd2VicnRjIjtzLnBvc3QoYSxRcihlKSxvKS50aGVuKHU9Pntjb25zb2xlLmxvZyh1KSx0KCJzdWNjZXNzIil9KS5jYXRjaCh1PT57Y29uc29sZS5sb2codSksbih1KX0pfSl9fXZhciBoZSxYcj1uZXcgVWludDhBcnJheSgxNik7ZnVuY3Rpb24gS3IoKXtpZighaGUmJihoZT10eXBlb2YgY3J5cHRvIT0idW5kZWZpbmVkIiYmY3J5cHRvLmdldFJhbmRvbVZhbHVlcyYmY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0byl8fHR5cGVvZiBtc0NyeXB0byE9InVuZGVmaW5lZCImJnR5cGVvZiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXM9PSJmdW5jdGlvbiImJm1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKSwhaGUpKXRocm93IG5ldyBFcnJvcigiY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpIG5vdCBzdXBwb3J0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQjZ2V0cmFuZG9tdmFsdWVzLW5vdC1zdXBwb3J0ZWQiKTtyZXR1cm4gaGUoWHIpfXZhciBZcj0vXig/OlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCkkL2k7ZnVuY3Rpb24gWnIocil7cmV0dXJuIHR5cGVvZiByPT0ic3RyaW5nIiYmWXIudGVzdChyKX1mb3IodmFyIEU9W10sVWU9MDtVZTwyNTY7KytVZSlFLnB1c2goKFVlKzI1NikudG9TdHJpbmcoMTYpLnN1YnN0cigxKSk7ZnVuY3Rpb24gZW4ocil7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOjAsdD0oRVtyW2UrMF1dK0VbcltlKzFdXStFW3JbZSsyXV0rRVtyW2UrM11dKyItIitFW3JbZSs0XV0rRVtyW2UrNV1dKyItIitFW3JbZSs2XV0rRVtyW2UrN11dKyItIitFW3JbZSs4XV0rRVtyW2UrOV1dKyItIitFW3JbZSsxMF1dK0VbcltlKzExXV0rRVtyW2UrMTJdXStFW3JbZSsxM11dK0VbcltlKzE0XV0rRVtyW2UrMTVdXSkudG9Mb3dlckNhc2UoKTtpZighWnIodCkpdGhyb3cgVHlwZUVycm9yKCJTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQiKTtyZXR1cm4gdH1mdW5jdGlvbiBidChyLGUsdCl7cj1yfHx7fTt2YXIgbj1yLnJhbmRvbXx8KHIucm5nfHxLcikoKTtpZihuWzZdPW5bNl0mMTV8NjQsbls4XT1uWzhdJjYzfDEyOCxlKXt0PXR8fDA7Zm9yKHZhciBzPTA7czwxNjsrK3MpZVt0K3NdPW5bc107cmV0dXJuIGV9cmV0dXJuIGVuKG4pfWNvbnN0IE49bmV3IFdlYWtNYXAsZGU9bmV3IFdlYWtNYXAsWT1uZXcgV2Vha01hcCxCZT1TeW1ib2woImFueVByb2R1Y2VyIiksRXQ9UHJvbWlzZS5yZXNvbHZlKCkscGU9U3ltYm9sKCJsaXN0ZW5lckFkZGVkIiksbWU9U3ltYm9sKCJsaXN0ZW5lclJlbW92ZWQiKTtsZXQgTmU9ITE7ZnVuY3Rpb24gSihyKXtpZih0eXBlb2YgciE9InN0cmluZyImJnR5cGVvZiByIT0ic3ltYm9sIil0aHJvdyBuZXcgVHlwZUVycm9yKCJldmVudE5hbWUgbXVzdCBiZSBhIHN0cmluZyBvciBhIHN5bWJvbCIpfWZ1bmN0aW9uIGdlKHIpe2lmKHR5cGVvZiByIT0iZnVuY3Rpb24iKXRocm93IG5ldyBUeXBlRXJyb3IoImxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIEcocixlKXtjb25zdCB0PWRlLmdldChyKTtyZXR1cm4gdC5oYXMoZSl8fHQuc2V0KGUsbmV3IFNldCksdC5nZXQoZSl9ZnVuY3Rpb24gWihyLGUpe2NvbnN0IHQ9dHlwZW9mIGU9PSJzdHJpbmcifHx0eXBlb2YgZT09InN5bWJvbCI/ZTpCZSxuPVkuZ2V0KHIpO3JldHVybiBuLmhhcyh0KXx8bi5zZXQodCxuZXcgU2V0KSxuLmdldCh0KX1mdW5jdGlvbiB0bihyLGUsdCl7Y29uc3Qgbj1ZLmdldChyKTtpZihuLmhhcyhlKSlmb3IoY29uc3QgcyBvZiBuLmdldChlKSlzLmVucXVldWUodCk7aWYobi5oYXMoQmUpKXtjb25zdCBzPVByb21pc2UuYWxsKFtlLHRdKTtmb3IoY29uc3QgbyBvZiBuLmdldChCZSkpby5lbnF1ZXVlKHMpfX1mdW5jdGlvbiBUdChyLGUpe2U9QXJyYXkuaXNBcnJheShlKT9lOltlXTtsZXQgdD0hMSxuPSgpPT57fSxzPVtdO2NvbnN0IG89e2VucXVldWUoYSl7cy5wdXNoKGEpLG4oKX0sZmluaXNoKCl7dD0hMCxuKCl9fTtmb3IoY29uc3QgYSBvZiBlKVoocixhKS5hZGQobyk7cmV0dXJue2FzeW5jIG5leHQoKXtyZXR1cm4gcz9zLmxlbmd0aD09PTA/dD8ocz12b2lkIDAsdGhpcy5uZXh0KCkpOihhd2FpdCBuZXcgUHJvbWlzZShhPT57bj1hfSksdGhpcy5uZXh0KCkpOntkb25lOiExLHZhbHVlOmF3YWl0IHMuc2hpZnQoKX06e2RvbmU6ITB9fSxhc3luYyByZXR1cm4oYSl7cz12b2lkIDA7Zm9yKGNvbnN0IHUgb2YgZSlaKHIsdSkuZGVsZXRlKG8pO3JldHVybiBuKCksYXJndW1lbnRzLmxlbmd0aD4wP3tkb25lOiEwLHZhbHVlOmF3YWl0IGF9Ontkb25lOiEwfX0sW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpe3JldHVybiB0aGlzfX19ZnVuY3Rpb24gQ3Qocil7aWYocj09PXZvaWQgMClyZXR1cm4gUnQ7aWYoIUFycmF5LmlzQXJyYXkocikpdGhyb3cgbmV3IFR5cGVFcnJvcigiYG1ldGhvZE5hbWVzYCBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3MiKTtmb3IoY29uc3QgZSBvZiByKWlmKCFSdC5pbmNsdWRlcyhlKSl0aHJvdyB0eXBlb2YgZSE9InN0cmluZyI/bmV3IFR5cGVFcnJvcigiYG1ldGhvZE5hbWVzYCBlbGVtZW50IG11c3QgYmUgYSBzdHJpbmciKTpuZXcgRXJyb3IoYCR7ZX0gaXMgbm90IEVtaXR0ZXJ5IG1ldGhvZGApO3JldHVybiByfWNvbnN0IEhlPXI9PnI9PT1wZXx8cj09PW1lO2NsYXNzIFd7c3RhdGljIG1peGluKGUsdCl7cmV0dXJuIHQ9Q3QodCksbj0+e2lmKHR5cGVvZiBuIT0iZnVuY3Rpb24iKXRocm93IG5ldyBUeXBlRXJyb3IoImB0YXJnZXRgIG11c3QgYmUgZnVuY3Rpb24iKTtmb3IoY29uc3QgYSBvZiB0KWlmKG4ucHJvdG90eXBlW2FdIT09dm9pZCAwKXRocm93IG5ldyBFcnJvcihgVGhlIHByb3BlcnR5IFxgJHthfVxgIGFscmVhZHkgZXhpc3RzIG9uIFxgdGFyZ2V0XGBgKTtmdW5jdGlvbiBzKCl7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGUse2VudW1lcmFibGU6ITEsdmFsdWU6bmV3IFd9KSx0aGlzW2VdfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSxlLHtlbnVtZXJhYmxlOiExLGdldDpzfSk7Y29uc3Qgbz1hPT5mdW5jdGlvbiguLi51KXtyZXR1cm4gdGhpc1tlXVthXSguLi51KX07Zm9yKGNvbnN0IGEgb2YgdClPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsYSx7ZW51bWVyYWJsZTohMSx2YWx1ZTpvKGEpfSk7cmV0dXJuIG59fXN0YXRpYyBnZXQgaXNEZWJ1Z0VuYWJsZWQoKXtpZih0eXBlb2YgcHJvY2VzcyE9Im9iamVjdCIpcmV0dXJuIE5lO2NvbnN0e2VudjplfT1wcm9jZXNzfHx7ZW52Ont9fTtyZXR1cm4gZS5ERUJVRz09PSJlbWl0dGVyeSJ8fGUuREVCVUc9PT0iKiJ8fE5lfXN0YXRpYyBzZXQgaXNEZWJ1Z0VuYWJsZWQoZSl7TmU9ZX1jb25zdHJ1Y3RvcihlPXt9KXtOLnNldCh0aGlzLG5ldyBTZXQpLGRlLnNldCh0aGlzLG5ldyBNYXApLFkuc2V0KHRoaXMsbmV3IE1hcCksdGhpcy5kZWJ1Zz1lLmRlYnVnfHx7fSx0aGlzLmRlYnVnLmVuYWJsZWQ9PT12b2lkIDAmJih0aGlzLmRlYnVnLmVuYWJsZWQ9ITEpLHRoaXMuZGVidWcubG9nZ2VyfHwodGhpcy5kZWJ1Zy5sb2dnZXI9KHQsbixzLG8pPT57bz1KU09OLnN0cmluZ2lmeShvKSx0eXBlb2Ygcz09InN5bWJvbCImJihzPXMudG9TdHJpbmcoKSk7Y29uc3QgYT1uZXcgRGF0ZSx1PWAke2EuZ2V0SG91cnMoKX06JHthLmdldE1pbnV0ZXMoKX06JHthLmdldFNlY29uZHMoKX0uJHthLmdldE1pbGxpc2Vjb25kcygpfWA7Y29uc29sZS5sb2coYFske3V9XVtlbWl0dGVyeToke3R9XVske259XSBFdmVudCBOYW1lOiAke3N9CglkYXRhOiAke299YCl9KX1sb2dJZkRlYnVnRW5hYmxlZChlLHQsbil7KFcuaXNEZWJ1Z0VuYWJsZWR8fHRoaXMuZGVidWcuZW5hYmxlZCkmJnRoaXMuZGVidWcubG9nZ2VyKGUsdGhpcy5kZWJ1Zy5uYW1lLHQsbil9b24oZSx0KXtnZSh0KSxlPUFycmF5LmlzQXJyYXkoZSk/ZTpbZV07Zm9yKGNvbnN0IG4gb2YgZSlKKG4pLEcodGhpcyxuKS5hZGQodCksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgic3Vic2NyaWJlIixuLHZvaWQgMCksSGUobil8fHRoaXMuZW1pdChwZSx7ZXZlbnROYW1lOm4sbGlzdGVuZXI6dH0pO3JldHVybiB0aGlzLm9mZi5iaW5kKHRoaXMsZSx0KX1vZmYoZSx0KXtnZSh0KSxlPUFycmF5LmlzQXJyYXkoZSk/ZTpbZV07Zm9yKGNvbnN0IG4gb2YgZSlKKG4pLEcodGhpcyxuKS5kZWxldGUodCksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgidW5zdWJzY3JpYmUiLG4sdm9pZCAwKSxIZShuKXx8dGhpcy5lbWl0KG1lLHtldmVudE5hbWU6bixsaXN0ZW5lcjp0fSl9b25jZShlKXtyZXR1cm4gbmV3IFByb21pc2UodD0+e2NvbnN0IG49dGhpcy5vbihlLHM9PntuKCksdChzKX0pfSl9ZXZlbnRzKGUpe2U9QXJyYXkuaXNBcnJheShlKT9lOltlXTtmb3IoY29uc3QgdCBvZiBlKUoodCk7cmV0dXJuIFR0KHRoaXMsZSl9YXN5bmMgZW1pdChlLHQpe0ooZSksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgiZW1pdCIsZSx0KSx0bih0aGlzLGUsdCk7Y29uc3Qgbj1HKHRoaXMsZSkscz1OLmdldCh0aGlzKSxvPVsuLi5uXSxhPUhlKGUpP1tdOlsuLi5zXTthd2FpdCBFdCxhd2FpdCBQcm9taXNlLmFsbChbLi4uby5tYXAoYXN5bmMgdT0+e2lmKG4uaGFzKHUpKXJldHVybiB1KHQpfSksLi4uYS5tYXAoYXN5bmMgdT0+e2lmKHMuaGFzKHUpKXJldHVybiB1KGUsdCl9KV0pfWFzeW5jIGVtaXRTZXJpYWwoZSx0KXtKKGUpLHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImVtaXRTZXJpYWwiLGUsdCk7Y29uc3Qgbj1HKHRoaXMsZSkscz1OLmdldCh0aGlzKSxvPVsuLi5uXSxhPVsuLi5zXTthd2FpdCBFdDtmb3IoY29uc3QgdSBvZiBvKW4uaGFzKHUpJiZhd2FpdCB1KHQpO2Zvcihjb25zdCB1IG9mIGEpcy5oYXModSkmJmF3YWl0IHUoZSx0KX1vbkFueShlKXtyZXR1cm4gZ2UoZSksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgic3Vic2NyaWJlQW55Iix2b2lkIDAsdm9pZCAwKSxOLmdldCh0aGlzKS5hZGQoZSksdGhpcy5lbWl0KHBlLHtsaXN0ZW5lcjplfSksdGhpcy5vZmZBbnkuYmluZCh0aGlzLGUpfWFueUV2ZW50KCl7cmV0dXJuIFR0KHRoaXMpfW9mZkFueShlKXtnZShlKSx0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJ1bnN1YnNjcmliZUFueSIsdm9pZCAwLHZvaWQgMCksdGhpcy5lbWl0KG1lLHtsaXN0ZW5lcjplfSksTi5nZXQodGhpcykuZGVsZXRlKGUpfWNsZWFyTGlzdGVuZXJzKGUpe2U9QXJyYXkuaXNBcnJheShlKT9lOltlXTtmb3IoY29uc3QgdCBvZiBlKWlmKHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImNsZWFyIix0LHZvaWQgMCksdHlwZW9mIHQ9PSJzdHJpbmcifHx0eXBlb2YgdD09InN5bWJvbCIpe0codGhpcyx0KS5jbGVhcigpO2NvbnN0IG49Wih0aGlzLHQpO2Zvcihjb25zdCBzIG9mIG4pcy5maW5pc2goKTtuLmNsZWFyKCl9ZWxzZXtOLmdldCh0aGlzKS5jbGVhcigpO2Zvcihjb25zdCBuIG9mIGRlLmdldCh0aGlzKS52YWx1ZXMoKSluLmNsZWFyKCk7Zm9yKGNvbnN0IG4gb2YgWS5nZXQodGhpcykudmFsdWVzKCkpe2Zvcihjb25zdCBzIG9mIG4pcy5maW5pc2goKTtuLmNsZWFyKCl9fX1saXN0ZW5lckNvdW50KGUpe2U9QXJyYXkuaXNBcnJheShlKT9lOltlXTtsZXQgdD0wO2Zvcihjb25zdCBuIG9mIGUpe2lmKHR5cGVvZiBuPT0ic3RyaW5nIil7dCs9Ti5nZXQodGhpcykuc2l6ZStHKHRoaXMsbikuc2l6ZStaKHRoaXMsbikuc2l6ZStaKHRoaXMpLnNpemU7Y29udGludWV9dHlwZW9mIG4hPSJ1bmRlZmluZWQiJiZKKG4pLHQrPU4uZ2V0KHRoaXMpLnNpemU7Zm9yKGNvbnN0IHMgb2YgZGUuZ2V0KHRoaXMpLnZhbHVlcygpKXQrPXMuc2l6ZTtmb3IoY29uc3QgcyBvZiBZLmdldCh0aGlzKS52YWx1ZXMoKSl0Kz1zLnNpemV9cmV0dXJuIHR9YmluZE1ldGhvZHMoZSx0KXtpZih0eXBlb2YgZSE9Im9iamVjdCJ8fGU9PT1udWxsKXRocm93IG5ldyBUeXBlRXJyb3IoImB0YXJnZXRgIG11c3QgYmUgYW4gb2JqZWN0Iik7dD1DdCh0KTtmb3IoY29uc3QgbiBvZiB0KXtpZihlW25dIT09dm9pZCAwKXRocm93IG5ldyBFcnJvcihgVGhlIHByb3BlcnR5IFxgJHtufVxgIGFscmVhZHkgZXhpc3RzIG9uIFxgdGFyZ2V0XGBgKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLHtlbnVtZXJhYmxlOiExLHZhbHVlOnRoaXNbbl0uYmluZCh0aGlzKX0pfX19Y29uc3QgUnQ9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoVy5wcm90b3R5cGUpLmZpbHRlcihyPT5yIT09ImNvbnN0cnVjdG9yIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KFcsImxpc3RlbmVyQWRkZWQiLHt2YWx1ZTpwZSx3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXLCJsaXN0ZW5lclJlbW92ZWQiLHt2YWx1ZTptZSx3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMX0pO3ZhciAkZT1XO2Z1bmN0aW9uIHJuKHIpe3JldHVybiB0eXBlb2Ygcj09Im9iamVjdCImJnIhPT1udWxsJiYibWVzc2FnZSJpbiByJiZ0eXBlb2Ygci5tZXNzYWdlPT0ic3RyaW5nIn1mdW5jdGlvbiBubihyKXtpZihybihyKSlyZXR1cm4gcjt0cnl7cmV0dXJuIG5ldyBFcnJvcihKU09OLnN0cmluZ2lmeShyKSl9Y2F0Y2h7cmV0dXJuIG5ldyBFcnJvcihTdHJpbmcocikpfX1mdW5jdGlvbiBXZShyKXtyZXR1cm4gbm4ocikubWVzc2FnZX12YXIgamU7KGZ1bmN0aW9uKHIpe3IuRlBTX0RST1A9ImZwc19kcm9wIn0pKGplfHwoamU9e30pKTtjb25zdCBzbj01MDAsb249Ljg7Y2xhc3MgYW4gZXh0ZW5kcyAkZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCk7dGhpcy5pbmRleF89dCx0aGlzLnV1aWRfPWJ0KCksdGhpcy5mcmFtZXNUcmFuc2Zvcm1lZF89MCx0aGlzLnRyYW5zZm9ybWVyXz1lLHRoaXMuc2hvdWxkU3RvcF89ITEsdGhpcy5pc0ZsYXNoZWRfPSExLHRoaXMuZnJhbWVzRnJvbVNvdXJjZV89MCx0aGlzLmZwc189MCx0aGlzLm1lZGlhVHJhbnNmb3JtZXJRb3NSZXBvcnRTdGFydFRpbWVzdGFtcF89MCx0aGlzLnZpZGVvSGVpZ2h0Xz0wLHRoaXMudmlkZW9XaWR0aF89MCx0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXz0tMSx0aGlzLnRyYW5zZm9ybWVyVHlwZV89IkN1c3RvbSIsImdldFRyYW5zZm9ybWVyVHlwZSJpbiBlJiYodGhpcy50cmFuc2Zvcm1lclR5cGVfPWUuZ2V0VHJhbnNmb3JtZXJUeXBlKCkpO2NvbnN0IG49bmV3IGsoKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5ndWlkKHRoaXMudXVpZF8pLnRyYW5zZm9ybWVyVHlwZSh0aGlzLnRyYW5zZm9ybWVyVHlwZV8pLnZhcmlhdGlvbigiQ3JlYXRlIikuYnVpbGQoKTtELnJlcG9ydChuKX1zZXRUcmFja0V4cGVjdGVkUmF0ZShlKXt0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXz1lfWFzeW5jIHN0YXJ0KGUpe2lmKHRoaXMudHJhbnNmb3JtZXJfJiZ0eXBlb2YgdGhpcy50cmFuc2Zvcm1lcl8uc3RhcnQ9PSJmdW5jdGlvbiIpdHJ5e2F3YWl0IHRoaXMudHJhbnNmb3JtZXJfLnN0YXJ0KGUpfWNhdGNoKHQpe2NvbnN0IG49bmV3IGsoKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UoJC5lcnJvcnMudHJhbnNmb3JtZXJfc3RhcnQpLnRyYW5zZm9ybWVyVHlwZSh0aGlzLnRyYW5zZm9ybWVyVHlwZV8pLnZhcmlhdGlvbigiRXJyb3IiKS5lcnJvcihXZSh0KSkuYnVpbGQoKTtELnJlcG9ydChuKTtjb25zdCBzPXtldmVudE1ldGFEYXRhOnt0cmFuc2Zvcm1lckluZGV4OnRoaXMuaW5kZXhffSxlcnJvcjp0LGZ1bmN0aW9uOiJzdGFydCJ9O3RoaXMuZW1pdCgiZXJyb3IiLHMpfX1hc3luYyB0cmFuc2Zvcm0oZSx0KXt2YXIgbixzLG8sYTtpZih0aGlzLm1lZGlhVHJhbnNmb3JtZXJRb3NSZXBvcnRTdGFydFRpbWVzdGFtcF89PT0wJiYodGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfPURhdGUubm93KCkpLHRoaXMudmlkZW9IZWlnaHRfPShuPWU9PW51bGw/dm9pZCAwOmUuZGlzcGxheUhlaWdodCkhPW51bGw/bjowLHRoaXMudmlkZW9XaWR0aF89KHM9ZT09bnVsbD92b2lkIDA6ZS5kaXNwbGF5V2lkdGgpIT1udWxsP3M6MCwrK3RoaXMuZnJhbWVzRnJvbVNvdXJjZV8sdGhpcy50cmFuc2Zvcm1lcl8paWYodGhpcy5zaG91bGRTdG9wXyllLmNsb3NlKCksdGhpcy5mbHVzaCh0KSx0LnRlcm1pbmF0ZSgpO2Vsc2UgdHJ5e2F3YWl0KChhPShvPXRoaXMudHJhbnNmb3JtZXJfKS50cmFuc2Zvcm0pPT1udWxsP3ZvaWQgMDphLmNhbGwobyxlLHQpKSwrK3RoaXMuZnJhbWVzVHJhbnNmb3JtZWRfLHRoaXMuZnJhbWVzVHJhbnNmb3JtZWRfPT09c24mJnRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydCgpfWNhdGNoKHUpe2NvbnN0IGM9bmV3IGsoKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UoJC5lcnJvcnMudHJhbnNmb3JtZXJfdHJhbnNmb3JtKS50cmFuc2Zvcm1lclR5cGUodGhpcy50cmFuc2Zvcm1lclR5cGVfKS52YXJpYXRpb24oIkVycm9yIikuZXJyb3IoV2UodSkpLmJ1aWxkKCk7RC5yZXBvcnQoYyk7Y29uc3QgXz17ZXZlbnRNZXRhRGF0YTp7dHJhbnNmb3JtZXJJbmRleDp0aGlzLmluZGV4X30sZXJyb3I6dSxmdW5jdGlvbjoidHJhbnNmb3JtIn07dGhpcy5lbWl0KCJlcnJvciIsXyl9fWFzeW5jIGZsdXNoKGUpe2lmKHRoaXMudHJhbnNmb3JtZXJfJiZ0eXBlb2YgdGhpcy50cmFuc2Zvcm1lcl8uZmx1c2g9PSJmdW5jdGlvbiImJiF0aGlzLmlzRmxhc2hlZF8pe3RoaXMuaXNGbGFzaGVkXz0hMDt0cnl7YXdhaXQgdGhpcy50cmFuc2Zvcm1lcl8uZmx1c2goZSl9Y2F0Y2gobil7Y29uc3Qgcz1uZXcgaygpLmFjdGlvbigiTWVkaWFUcmFuc2Zvcm1lciIpLmd1aWQodGhpcy51dWlkXykubWVzc2FnZSgkLmVycm9ycy50cmFuc2Zvcm1lcl9mbHVzaCkudHJhbnNmb3JtZXJUeXBlKHRoaXMudHJhbnNmb3JtZXJUeXBlXykudmFyaWF0aW9uKCJFcnJvciIpLmVycm9yKFdlKG4pKS5idWlsZCgpO0QucmVwb3J0KHMpO2NvbnN0IG89e2V2ZW50TWV0YURhdGE6e3RyYW5zZm9ybWVySW5kZXg6dGhpcy5pbmRleF99LGVycm9yOm4sZnVuY3Rpb246ImZsdXNoIn07dGhpcy5lbWl0KCJlcnJvciIsbyl9fXRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydCgpO2NvbnN0IHQ9bmV3IGsoKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5ndWlkKHRoaXMudXVpZF8pLnRyYW5zZm9ybWVyVHlwZSh0aGlzLnRyYW5zZm9ybWVyVHlwZV8pLnZhcmlhdGlvbigiRGVsZXRlIikuYnVpbGQoKTtELnJlcG9ydCh0KX1zdG9wKCl7Y29uc29sZS5sb2coIltQaXBlbGluZV0gU3RvcCBzdHJlYW0uIiksdGhpcy5zaG91bGRTdG9wXz0hMH1tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0KCl7bGV0IGU9KERhdGUubm93KCktdGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfKS8xZTMsdD10aGlzLmZyYW1lc0Zyb21Tb3VyY2VfL2Usbj10aGlzLmZyYW1lc1RyYW5zZm9ybWVkXy9lO2lmKHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfIT0tMSYmdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8qb24+dCl7Y29uc3Qgbz17ZXZlbnRNZXRhRGF0YTp7dHJhbnNmb3JtZXJJbmRleDp0aGlzLmluZGV4X30sd2FybmluZ1R5cGU6amUuRlBTX0RST1AsZHJvcEluZm86e3JlcXVlc3RlZDp0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyxjdXJyZW50OnR9fTt0aGlzLmVtaXQoIndhcm4iLG8pfWNvbnN0IHM9bmV3IGsoKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5mcHModCkudHJhbnNmb3JtZWRGcHMobikuZnJhbWVzVHJhbnNmb3JtZWQodGhpcy5mcmFtZXNUcmFuc2Zvcm1lZF8pLmd1aWQodGhpcy51dWlkXykudHJhbnNmb3JtZXJUeXBlKHRoaXMudHJhbnNmb3JtZXJUeXBlXykudmlkZW9IZWlnaHQodGhpcy52aWRlb0hlaWdodF8pLnZpZGVvV2lkdGgodGhpcy52aWRlb1dpZHRoXykudmFyaWF0aW9uKCJRb1MiKS5idWlsZCgpO0QucmVwb3J0KHMpLHRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydFN0YXJ0VGltZXN0YW1wXz0wLHRoaXMuZnJhbWVzRnJvbVNvdXJjZV89MCx0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXz0wfX1jbGFzcyB1biBleHRlbmRzICRle2NvbnN0cnVjdG9yKGUpe3N1cGVyKCk7dGhpcy50cmFuc2Zvcm1lcnNfPVtdLHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfPS0xO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXtsZXQgbj1uZXcgYW4oZVt0XSx0KTtuLm9uKCJlcnJvciIscz0+e3RoaXMuZW1pdCgiZXJyb3IiLHMpfSksbi5vbigid2FybiIscz0+e3RoaXMuZW1pdCgid2FybiIscyl9KSx0aGlzLnRyYW5zZm9ybWVyc18ucHVzaChuKX19c2V0VHJhY2tFeHBlY3RlZFJhdGUoZSl7dGhpcy50cmFja0V4cGVjdGVkUmF0ZV89ZTtmb3IobGV0IHQgb2YgdGhpcy50cmFuc2Zvcm1lcnNfKXQuc2V0VHJhY2tFeHBlY3RlZFJhdGUodGhpcy50cmFja0V4cGVjdGVkUmF0ZV8pfWFzeW5jIHN0YXJ0KGUsdCl7aWYoIXRoaXMudHJhbnNmb3JtZXJzX3x8dGhpcy50cmFuc2Zvcm1lcnNfLmxlbmd0aD09PTApe2NvbnNvbGUubG9nKCJbUGlwZWxpbmVdIE5vIHRyYW5zZm9ybWVycy4iKTtyZXR1cm59dHJ5e2xldCBuPWU7Zm9yKGxldCBzIG9mIHRoaXMudHJhbnNmb3JtZXJzXyllPWUucGlwZVRocm91Z2gobmV3IFRyYW5zZm9ybVN0cmVhbShzKSk7ZS5waXBlVG8odCkudGhlbihhc3luYygpPT57Y29uc29sZS5sb2coIltQaXBlbGluZV0gU2V0dXAuIiksYXdhaXQgdC5hYm9ydCgpLGF3YWl0IG4uY2FuY2VsKCl9KS5jYXRjaChhc3luYyBzPT57ZS5jYW5jZWwoKS50aGVuKCgpPT57Y29uc29sZS5sb2coIltQaXBlbGluZV0gU2h1dHRpbmcgZG93biBzdHJlYW1zIGFmdGVyIGFib3J0LiIpfSkuY2F0Y2gobz0+e2NvbnNvbGUuZXJyb3IoIltQaXBlbGluZV0gRXJyb3IgZnJvbSBzdHJlYW0gdHJhbnNmb3JtOiIsbyl9KSxhd2FpdCB0LmFib3J0KHMpLGF3YWl0IG4uY2FuY2VsKHMpfSl9Y2F0Y2h7dGhpcy5kZXN0cm95KCk7cmV0dXJufWNvbnNvbGUubG9nKCJbUGlwZWxpbmVdIFBpcGVsaW5lIHN0YXJ0ZWQuIil9YXN5bmMgZGVzdHJveSgpe2NvbnNvbGUubG9nKCJbUGlwZWxpbmVdIERlc3Ryb3lpbmcgUGlwZWxpbmUuIik7Zm9yKGxldCBlIG9mIHRoaXMudHJhbnNmb3JtZXJzXyllLnN0b3AoKX19Y2xhc3MgZm4gZXh0ZW5kcyAkZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKCk7dGhpcy51dWlkXz1idCgpLHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfPS0xO2NvbnN0IGU9bmV3IGsoKS5hY3Rpb24oIk1lZGlhUHJvY2Vzc29yIikuZ3VpZCh0aGlzLnV1aWRfKS52YXJpYXRpb24oIkNyZWF0ZSIpLmJ1aWxkKCk7RC5yZXBvcnQoZSl9c2V0VHJhY2tFeHBlY3RlZFJhdGUoZSl7dGhpcy50cmFja0V4cGVjdGVkUmF0ZV89ZSx0aGlzLnBpcGVsaW5lXyYmdGhpcy5waXBlbGluZV8uc2V0VHJhY2tFeHBlY3RlZFJhdGUodGhpcy50cmFja0V4cGVjdGVkUmF0ZV8pfXRyYW5zZm9ybShlLHQpe3JldHVybiB0aGlzLnJlYWRhYmxlXz1lLHRoaXMud3JpdGFibGVfPXQsdGhpcy50cmFuc2Zvcm1JbnRlcm5hbCgpfXRyYW5zZm9ybUludGVybmFsKCl7cmV0dXJuIG5ldyBQcm9taXNlKChlLHQpPT57aWYoIXRoaXMudHJhbnNmb3JtZXJzX3x8dGhpcy50cmFuc2Zvcm1lcnNfLmxlbmd0aD09PTApe2NvbnN0IG49bmV3IGsoKS5hY3Rpb24oIk1lZGlhUHJvY2Vzc29yIikuZ3VpZCh0aGlzLnV1aWRfKS5tZXNzYWdlKCQuZXJyb3JzLnRyYW5zZm9ybWVyX25vbmUpLnZhcmlhdGlvbigiRXJyb3IiKS5idWlsZCgpO0QucmVwb3J0KG4pLHQoIltNZWRpYVByb2Nlc3Nvcl0gTmVlZCB0byBzZXQgdHJhbnNmb3JtZXJzLiIpfXRoaXMucGlwZWxpbmVfJiZ0aGlzLnBpcGVsaW5lXy5kZXN0cm95KCksdGhpcy5waXBlbGluZV89bmV3IHVuKHRoaXMudHJhbnNmb3JtZXJzXyksdGhpcy5waXBlbGluZV8ub24oIndhcm4iLG49Pnt0aGlzLmVtaXQoIndhcm4iLG4pfSksdGhpcy5waXBlbGluZV8ub24oImVycm9yIixuPT57dGhpcy5lbWl0KCJlcnJvciIsbil9KSx0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyE9LTEmJnRoaXMucGlwZWxpbmVfLnNldFRyYWNrRXhwZWN0ZWRSYXRlKHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfKSx0aGlzLnBpcGVsaW5lXy5zdGFydCh0aGlzLnJlYWRhYmxlXyx0aGlzLndyaXRhYmxlXykudGhlbigoKT0+e2UoKX0pLmNhdGNoKG49Pnt0KG4pfSl9KX1zZXRUcmFuc2Zvcm1lcnMoZSl7Y29uc3QgdD1uZXcgaygpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UoJC51cGRhdGVzLnRyYW5zZm9ybWVyX25ldykudmFyaWF0aW9uKCJVcGRhdGUiKS5idWlsZCgpO3JldHVybiBELnJlcG9ydCh0KSx0aGlzLnRyYW5zZm9ybWVyc189ZSx0aGlzLnJlYWRhYmxlXyYmdGhpcy53cml0YWJsZV8/dGhpcy50cmFuc2Zvcm1JbnRlcm5hbCgpOlByb21pc2UucmVzb2x2ZSgpfWRlc3Ryb3koKXtyZXR1cm4gbmV3IFByb21pc2UoZT0+e3RoaXMucGlwZWxpbmVfJiZ0aGlzLnBpcGVsaW5lXy5kZXN0cm95KCk7Y29uc3QgdD1uZXcgaygpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLnZhcmlhdGlvbigiRGVsZXRlIikuYnVpbGQoKTtELnJlcG9ydCh0KSxlKCl9KX19dmFyIF9lOyhmdW5jdGlvbihyKXtyLkxvdz0iTG93IixyLkhpZ2g9IkhpZ2gifSkoX2V8fChfZT17fSkpO2NsYXNzIFB0e2NvbnN0cnVjdG9yKGUpe3RoaXMuYmx1ckZpbHRlcl89ZT09PV9lLkhpZ2g/ImJsdXIoMTVweCkiOiJibHVyKDVweCkifXJ1blBvc3RQcm9jZXNzaW5nKGUsdCl7dHJ5e2UuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJkZXN0aW5hdGlvbi1vdmVyIixlLmZpbHRlcj10aGlzLmJsdXJGaWx0ZXJfLGUuZHJhd0ltYWdlKHQsMCwwLHQud2lkdGgsdC5oZWlnaHQpfWNhdGNoKG4pe2NvbnNvbGUubG9nKCJbQmx1clBvc3RQcm9jZXNzXSBGYWlsZWQgdG8gZHJhdyBjYW52YXMiLG4pfX19Y2xhc3MgbG57Y29uc3RydWN0b3IoZSl7aWYodGhpcy5pbWFnZUNhbnZhc189bmV3IE9mZnNjcmVlbkNhbnZhcygxLDEpLHRoaXMuaW1hZ2VDdHhfPXRoaXMuaW1hZ2VDYW52YXNfLmdldENvbnRleHQoIjJkIix7YWxwaGE6ITEsd2lsbFJlYWRGcmVxdWVudGx5OiEwLGRlc3luY2hyb25pemVkOiEwfSksIXRoaXMuaW1hZ2VDdHhfKXRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIGNyZWF0ZSBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQiKTt0aGlzLmltYWdlQmxvYl89dm9pZCAwLGZldGNoKGUpLnRoZW4odD0+e3QuYmxvYigpLnRoZW4obj0+e3RoaXMuaW1hZ2VCbG9iXz1ufSkuY2F0Y2gobj0+e2NvbnNvbGUuZXJyb3IoImJsb2IgZXJyb3IiLG4pfSl9KS5jYXRjaCh0PT57Y29uc29sZS5lcnJvcigiZmV0Y2ggZXJyb3IiLHQpfSl9cnVuUG9zdFByb2Nlc3NpbmcoZSx0KXt0cnl7aWYodHlwZW9mIHRoaXMuaW1hZ2VCbG9iXyE9InVuZGVmaW5lZCImJih0aGlzLmltYWdlQ2FudmFzXy53aWR0aCE9dC53aWR0aHx8dGhpcy5pbWFnZUNhbnZhc18uaGVpZ2h0IT10LmhlaWdodCkpe3RoaXMuaW1hZ2VDYW52YXNfLndpZHRoPXQud2lkdGgsdGhpcy5pbWFnZUNhbnZhc18uaGVpZ2h0PXQuaGVpZ2h0O2NvbnN0IG49ImhpZ2giLHM9e3Jlc2l6ZVdpZHRoOnQud2lkdGgscmVzaXplSGVpZ2h0OnQuaGVpZ2h0LHJlc2l6ZVF1YWxpdHk6bn0sbz1jcmVhdGVJbWFnZUJpdG1hcCh0aGlzLmltYWdlQmxvYl8scykudGhlbihhPT57dGhpcy5pbWFnZUN0eF8uZHJhd0ltYWdlKGEsMCwwKX0pLmNhdGNoKGE9Pntjb25zb2xlLmVycm9yKCJlcnJvciBjcmVhdGVJbWFnZUJpdG1hcCIsYSl9KX1lLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0iZGVzdGluYXRpb24tb3ZlciIsZS5kcmF3SW1hZ2UodGhpcy5pbWFnZUNhbnZhc18sMCwwLHRoaXMuaW1hZ2VDYW52YXNfLndpZHRoLHRoaXMuaW1hZ2VDYW52YXNfLmhlaWdodCl9Y2F0Y2gobil7Y29uc29sZS5sb2coIltWaXJ0dWFsUG9zdFByb2Nlc3NdIEZhaWxlZCB0byBkcmF3IGNhbnZhcyIsbil9fX1jbGFzcyBjbntjb25zdHJ1Y3RvcihlPTEvMCl7dGhpcy5jYXBhY2l0eT1lLHRoaXMuc3RvcmFnZT1bXX1lbnF1ZXVlKGUpe2lmKHRoaXMuc2l6ZSgpPT09dGhpcy5jYXBhY2l0eSl0aHJvdyBFcnJvcigiUXVldWUgaGFzIHJlYWNoZWQgbWF4IGNhcGFjaXR5LCB5b3UgY2Fubm90IGFkZCBtb3JlIGl0ZW1zIik7dGhpcy5zdG9yYWdlLnB1c2goZSl9ZGVxdWV1ZSgpe3JldHVybiB0aGlzLnN0b3JhZ2Uuc2hpZnQoKX1zaXplKCl7cmV0dXJuIHRoaXMuc3RvcmFnZS5sZW5ndGh9fWNsYXNzIGhue2NvbnN0cnVjdG9yKGUpe2NvbnNvbGUubG9nKCJbVmlkZW9Qb3N0UHJvY2Vzc10gQ3RvciIpLHRoaXMucXVldWVfPW5ldyBjbixlJiYodGhpcy5mcmFtZVJlYWRlcl89ZS5nZXRSZWFkZXIoKSx0aGlzLmZyYW1lUmVhZGVyXy5yZWFkKCkudGhlbih0aGlzLnByb2Nlc3NGcmFtZS5iaW5kKHRoaXMpKS5jYXRjaCh0PT5jb25zb2xlLmVycm9yKHQpKSl9cHJvY2Vzc0ZyYW1lKGUpe2UuZG9uZXx8KHRoaXMucXVldWVfLmVucXVldWUoZS52YWx1ZSksdGhpcy5mcmFtZVJlYWRlcl8ucmVhZCgpLnRoZW4odGhpcy5wcm9jZXNzRnJhbWUuYmluZCh0aGlzKSkuY2F0Y2godD0+Y29uc29sZS5lcnJvcih0KSkpfXJ1blBvc3RQcm9jZXNzaW5nKGUsdCl7dHJ5e2lmKGUuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJkZXN0aW5hdGlvbi1vdmVyIix0aGlzLnF1ZXVlXy5zaXplKCk+MCl7Y29uc3Qgbj10aGlzLnF1ZXVlXy5kZXF1ZXVlKCk7ZS5kcmF3SW1hZ2UobiwwLDAsdC53aWR0aCx0LmhlaWdodCksbi5jbG9zZSgpfWVsc2UgZS5kcmF3SW1hZ2UodCwwLDAsdC53aWR0aCx0LmhlaWdodCl9Y2F0Y2gobil7Y29uc29sZS5sb2coIltWaWRlb1Bvc3RQcm9jZXNzXSBGYWlsZWQgdG8gZHJhdyBjYW52YXMiLG4pfX19ZnVuY3Rpb24gZG4oKXtyZXR1cm4ic2VsZmllX3NlZ21lbnRhdGlvbl9sYW5kc2NhcGUifXZhciB5ZT1mdW5jdGlvbigpe3ZhciByPXR5cGVvZiBkb2N1bWVudCE9InVuZGVmaW5lZCImJmRvY3VtZW50LmN1cnJlbnRTY3JpcHQ/ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM6dm9pZCAwO3JldHVybiBmdW5jdGlvbihlKXtlPWV8fHt9O3ZhciB0PXR5cGVvZiBlIT0idW5kZWZpbmVkIj9lOnt9LG4sczt0LnJlYWR5PW5ldyBQcm9taXNlKGZ1bmN0aW9uKGksbCl7bj1pLHM9bH0pO3ZhciBvPXt9LGE7Zm9yKGEgaW4gdCl0Lmhhc093blByb3BlcnR5KGEpJiYob1thXT10W2FdKTt2YXIgdT0iLi90aGlzLnByb2dyYW0iLGM9ZnVuY3Rpb24oaSxsKXt0aHJvdyBsfSxfPSEwLGY9IiI7ZnVuY3Rpb24gZChpKXtyZXR1cm4gdC5sb2NhdGVGaWxlP3QubG9jYXRlRmlsZShpLGYpOmYraX12YXIgdjt0eXBlb2YgZG9jdW1lbnQhPSJ1bmRlZmluZWQiJiZkb2N1bWVudC5jdXJyZW50U2NyaXB0JiYoZj1kb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYyksciYmKGY9ciksZi5pbmRleE9mKCJibG9iOiIpIT09MD9mPWYuc3Vic3RyKDAsZi5yZXBsYWNlKC9bPyNdLiovLCIiKS5sYXN0SW5kZXhPZigiLyIpKzEpOmY9IiI7dmFyIHc9dC5wcmludHx8Y29uc29sZS5sb2cuYmluZChjb25zb2xlKSxNPXQucHJpbnRFcnJ8fGNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpO2ZvcihhIGluIG8pby5oYXNPd25Qcm9wZXJ0eShhKSYmKHRbYV09b1thXSk7bz1udWxsLHQuYXJndW1lbnRzLHQudGhpc1Byb2dyYW0mJih1PXQudGhpc1Byb2dyYW0pLHQucXVpdCYmKGM9dC5xdWl0KTt2YXIgQTt0Lndhc21CaW5hcnkmJihBPXQud2FzbUJpbmFyeSk7dmFyIEM9dC5ub0V4aXRSdW50aW1lfHwhMDt0eXBlb2YgV2ViQXNzZW1ibHkhPSJvYmplY3QiJiZIKCJubyBuYXRpdmUgd2FzbSBzdXBwb3J0IGRldGVjdGVkIik7dmFyIE8sST0hMSx2ZT10eXBlb2YgVGV4dERlY29kZXIhPSJ1bmRlZmluZWQiP25ldyBUZXh0RGVjb2RlcigidXRmOCIpOnZvaWQgMDtmdW5jdGlvbiBYKGksbCxoKXtmb3IodmFyIG09bCtoLHk9bDtpW3ldJiYhKHk+PW0pOykrK3k7aWYoeS1sPjE2JiZpLnN1YmFycmF5JiZ2ZSlyZXR1cm4gdmUuZGVjb2RlKGkuc3ViYXJyYXkobCx5KSk7Zm9yKHZhciBUPSIiO2w8eTspe3ZhciBnPWlbbCsrXTtpZighKGcmMTI4KSl7VCs9U3RyaW5nLmZyb21DaGFyQ29kZShnKTtjb250aW51ZX12YXIgUj1pW2wrK10mNjM7aWYoKGcmMjI0KT09MTkyKXtUKz1TdHJpbmcuZnJvbUNoYXJDb2RlKChnJjMxKTw8NnxSKTtjb250aW51ZX12YXIgVT1pW2wrK10mNjM7aWYoKGcmMjQwKT09MjI0P2c9KGcmMTUpPDwxMnxSPDw2fFU6Zz0oZyY3KTw8MTh8Ujw8MTJ8VTw8NnxpW2wrK10mNjMsZzw2NTUzNilUKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGcpO2Vsc2V7dmFyIGt0PWctNjU1MzY7VCs9U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxrdD4+MTAsNTYzMjB8a3QmMTAyMyl9fXJldHVybiBUfWZ1bmN0aW9uIHdlKGksbCl7cmV0dXJuIGk/WChlZSxpLGwpOiIifWZ1bmN0aW9uIHZuKGksbCxoKXtmb3IodmFyIG09MDttPGkubGVuZ3RoOysrbSliZVtsKys+PjBdPWkuY2hhckNvZGVBdChtKTtofHwoYmVbbD4+MF09MCl9ZnVuY3Rpb24gd24oaSxsKXtyZXR1cm4gaSVsPjAmJihpKz1sLWklbCksaX12YXIgT3QsYmUsZWUseDtmdW5jdGlvbiBTdChpKXtPdD1pLHQuSEVBUDg9YmU9bmV3IEludDhBcnJheShpKSx0LkhFQVAxNj1uZXcgSW50MTZBcnJheShpKSx0LkhFQVAzMj14PW5ldyBJbnQzMkFycmF5KGkpLHQuSEVBUFU4PWVlPW5ldyBVaW50OEFycmF5KGkpLHQuSEVBUFUxNj1uZXcgVWludDE2QXJyYXkoaSksdC5IRUFQVTMyPW5ldyBVaW50MzJBcnJheShpKSx0LkhFQVBGMzI9bmV3IEZsb2F0MzJBcnJheShpKSx0LkhFQVBGNjQ9bmV3IEZsb2F0NjRBcnJheShpKX10LklOSVRJQUxfTUVNT1JZO3ZhciB6ZSxNdD1bXSxBdD1bXSxJdD1bXSxibj0wO2Z1bmN0aW9uIEVuKCl7cmV0dXJuIEN8fGJuPjB9ZnVuY3Rpb24gVG4oKXtpZih0LnByZVJ1bilmb3IodHlwZW9mIHQucHJlUnVuPT0iZnVuY3Rpb24iJiYodC5wcmVSdW49W3QucHJlUnVuXSk7dC5wcmVSdW4ubGVuZ3RoOylQbih0LnByZVJ1bi5zaGlmdCgpKTtKZShNdCl9ZnVuY3Rpb24gQ24oKXtKZShBdCl9ZnVuY3Rpb24gUm4oKXtpZih0LnBvc3RSdW4pZm9yKHR5cGVvZiB0LnBvc3RSdW49PSJmdW5jdGlvbiImJih0LnBvc3RSdW49W3QucG9zdFJ1bl0pO3QucG9zdFJ1bi5sZW5ndGg7KVNuKHQucG9zdFJ1bi5zaGlmdCgpKTtKZShJdCl9ZnVuY3Rpb24gUG4oaSl7TXQudW5zaGlmdChpKX1mdW5jdGlvbiBPbihpKXtBdC51bnNoaWZ0KGkpfWZ1bmN0aW9uIFNuKGkpe0l0LnVuc2hpZnQoaSl9dmFyIGo9MCx0ZT1udWxsO2Z1bmN0aW9uIE1uKGkpe2orKyx0Lm1vbml0b3JSdW5EZXBlbmRlbmNpZXMmJnQubW9uaXRvclJ1bkRlcGVuZGVuY2llcyhqKX1mdW5jdGlvbiBBbihpKXtpZihqLS0sdC5tb25pdG9yUnVuRGVwZW5kZW5jaWVzJiZ0Lm1vbml0b3JSdW5EZXBlbmRlbmNpZXMoaiksaj09MCYmdGUpe3ZhciBsPXRlO3RlPW51bGwsbCgpfX10LnByZWxvYWRlZEltYWdlcz17fSx0LnByZWxvYWRlZEF1ZGlvcz17fTtmdW5jdGlvbiBIKGkpe3Qub25BYm9ydCYmdC5vbkFib3J0KGkpLGk9IkFib3J0ZWQoIitpKyIpIixNKGkpLEk9ITAsaSs9Ii4gQnVpbGQgd2l0aCAtcyBBU1NFUlRJT05TPTEgZm9yIG1vcmUgaW5mby4iO3ZhciBsPW5ldyBXZWJBc3NlbWJseS5SdW50aW1lRXJyb3IoaSk7dGhyb3cgcyhsKSxsfXZhciBJbj0iZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LCI7ZnVuY3Rpb24geHQoaSl7cmV0dXJuIGkuc3RhcnRzV2l0aChJbil9dmFyIEY7Rj0idGZsaXRlLXNpbWQud2FzbSIseHQoRil8fChGPWQoRikpO2Z1bmN0aW9uIEZ0KGkpe3RyeXtpZihpPT1GJiZBKXJldHVybiBuZXcgVWludDhBcnJheShBKTtpZighdil0aHJvdyJib3RoIGFzeW5jIGFuZCBzeW5jIGZldGNoaW5nIG9mIHRoZSB3YXNtIGZhaWxlZCJ9Y2F0Y2gobCl7SChsKX19ZnVuY3Rpb24geG4oKXtyZXR1cm4hQSYmXyYmdHlwZW9mIGZldGNoPT0iZnVuY3Rpb24iP2ZldGNoKEYse2NyZWRlbnRpYWxzOiJzYW1lLW9yaWdpbiJ9KS50aGVuKGZ1bmN0aW9uKGkpe2lmKCFpLm9rKXRocm93ImZhaWxlZCB0byBsb2FkIHdhc20gYmluYXJ5IGZpbGUgYXQgJyIrRisiJyI7cmV0dXJuIGkuYXJyYXlCdWZmZXIoKX0pLmNhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIEZ0KEYpfSk6UHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBGdChGKX0pfWZ1bmN0aW9uIEZuKCl7dmFyIGk9e2E6ZXN9O2Z1bmN0aW9uIGwoZyxSKXt2YXIgVT1nLmV4cG9ydHM7dC5hc209VSxPPXQuYXNtLnEsU3QoTy5idWZmZXIpLHplPXQuYXNtLkQsT24odC5hc20uciksQW4oKX1NbigpO2Z1bmN0aW9uIGgoZyl7bChnLmluc3RhbmNlKX1mdW5jdGlvbiBtKGcpe3JldHVybiB4bigpLnRoZW4oZnVuY3Rpb24oUil7cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKFIsaSl9KS50aGVuKGZ1bmN0aW9uKFIpe3JldHVybiBSfSkudGhlbihnLGZ1bmN0aW9uKFIpe00oImZhaWxlZCB0byBhc3luY2hyb25vdXNseSBwcmVwYXJlIHdhc206ICIrUiksSChSKX0pfWZ1bmN0aW9uIHkoKXtyZXR1cm4hQSYmdHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nPT0iZnVuY3Rpb24iJiYheHQoRikmJnR5cGVvZiBmZXRjaD09ImZ1bmN0aW9uIj9mZXRjaChGLHtjcmVkZW50aWFsczoic2FtZS1vcmlnaW4ifSkudGhlbihmdW5jdGlvbihnKXt2YXIgUj1XZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhnLGkpO3JldHVybiBSLnRoZW4oaCxmdW5jdGlvbihVKXtyZXR1cm4gTSgid2FzbSBzdHJlYW1pbmcgY29tcGlsZSBmYWlsZWQ6ICIrVSksTSgiZmFsbGluZyBiYWNrIHRvIEFycmF5QnVmZmVyIGluc3RhbnRpYXRpb24iKSxtKGgpfSl9KTptKGgpfWlmKHQuaW5zdGFudGlhdGVXYXNtKXRyeXt2YXIgVD10Lmluc3RhbnRpYXRlV2FzbShpLGwpO3JldHVybiBUfWNhdGNoKGcpe3JldHVybiBNKCJNb2R1bGUuaW5zdGFudGlhdGVXYXNtIGNhbGxiYWNrIGZhaWxlZCB3aXRoIGVycm9yOiAiK2cpLCExfXJldHVybiB5KCkuY2F0Y2gocykse319ZnVuY3Rpb24gSmUoaSl7Zm9yKDtpLmxlbmd0aD4wOyl7dmFyIGw9aS5zaGlmdCgpO2lmKHR5cGVvZiBsPT0iZnVuY3Rpb24iKXtsKHQpO2NvbnRpbnVlfXZhciBoPWwuZnVuYzt0eXBlb2YgaD09Im51bWJlciI/bC5hcmc9PT12b2lkIDA/emUuZ2V0KGgpKCk6emUuZ2V0KGgpKGwuYXJnKTpoKGwuYXJnPT09dm9pZCAwP251bGw6bC5hcmcpfX1mdW5jdGlvbiBMbihpLGwsaCxtKXtIKCJBc3NlcnRpb24gZmFpbGVkOiAiK3dlKGkpKyIsIGF0OiAiK1tsP3dlKGwpOiJ1bmtub3duIGZpbGVuYW1lIixoLG0/d2UobSk6InVua25vd24gZnVuY3Rpb24iXSl9ZnVuY3Rpb24ga24oaSxsKXtIKCJUbyB1c2UgZGxvcGVuLCB5b3UgbmVlZCB0byB1c2UgRW1zY3JpcHRlbidzIGxpbmtpbmcgc3VwcG9ydCwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbXNjcmlwdGVuLWNvcmUvZW1zY3JpcHRlbi93aWtpL0xpbmtpbmciKX1mdW5jdGlvbiBEbihpLGwpe0goIlRvIHVzZSBkbG9wZW4sIHlvdSBuZWVkIHRvIHVzZSBFbXNjcmlwdGVuJ3MgbGlua2luZyBzdXBwb3J0LCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2Vtc2NyaXB0ZW4tY29yZS9lbXNjcmlwdGVuL3dpa2kvTGlua2luZyIpfWZ1bmN0aW9uIFVuKCl7SCgiIil9dmFyIEVlO0VlPWZ1bmN0aW9uKCl7cmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpfTt2YXIgQm49ITA7ZnVuY3Rpb24gTm4oaSl7cmV0dXJuIHhbTHQoKT4+Ml09aSxpfWZ1bmN0aW9uIEhuKGksbCl7dmFyIGg7aWYoaT09PTApaD1EYXRlLm5vdygpO2Vsc2UgaWYoKGk9PT0xfHxpPT09NCkmJkJuKWg9RWUoKTtlbHNlIHJldHVybiBObigyOCksLTE7cmV0dXJuIHhbbD4+Ml09aC8xZTN8MCx4W2wrND4+Ml09aCUxZTMqMWUzKjFlM3wwLDB9ZnVuY3Rpb24gJG4oKXtyZXR1cm4gMjE0NzQ4MzY0OH1mdW5jdGlvbiBXbihpLGwsaCl7ZWUuY29weVdpdGhpbihpLGwsbCtoKX1mdW5jdGlvbiBqbihpKXt0cnl7cmV0dXJuIE8uZ3JvdyhpLU90LmJ5dGVMZW5ndGgrNjU1MzU+Pj4xNiksU3QoTy5idWZmZXIpLDF9Y2F0Y2h7fX1mdW5jdGlvbiBxbihpKXt2YXIgbD1lZS5sZW5ndGg7aT1pPj4+MDt2YXIgaD0yMTQ3NDgzNjQ4O2lmKGk+aClyZXR1cm4hMTtmb3IodmFyIG09MTttPD00O20qPTIpe3ZhciB5PWwqKDErLjIvbSk7eT1NYXRoLm1pbih5LGkrMTAwNjYzMjk2KTt2YXIgVD1NYXRoLm1pbihoLHduKE1hdGgubWF4KGkseSksNjU1MzYpKSxnPWpuKFQpO2lmKGcpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gVm4oaSl7Zm9yKHZhciBsPUVlKCk7RWUoKS1sPGk7KTt9dmFyIEdlPXt9O2Z1bmN0aW9uIHpuKCl7cmV0dXJuIHV8fCIuL3RoaXMucHJvZ3JhbSJ9ZnVuY3Rpb24gcmUoKXtpZighcmUuc3RyaW5ncyl7dmFyIGk9KHR5cGVvZiBuYXZpZ2F0b3I9PSJvYmplY3QiJiZuYXZpZ2F0b3IubGFuZ3VhZ2VzJiZuYXZpZ2F0b3IubGFuZ3VhZ2VzWzBdfHwiQyIpLnJlcGxhY2UoIi0iLCJfIikrIi5VVEYtOCIsbD17VVNFUjoid2ViX3VzZXIiLExPR05BTUU6IndlYl91c2VyIixQQVRIOiIvIixQV0Q6Ii8iLEhPTUU6Ii9ob21lL3dlYl91c2VyIixMQU5HOmksXzp6bigpfTtmb3IodmFyIGggaW4gR2UpR2VbaF09PT12b2lkIDA/ZGVsZXRlIGxbaF06bFtoXT1HZVtoXTt2YXIgbT1bXTtmb3IodmFyIGggaW4gbCltLnB1c2goaCsiPSIrbFtoXSk7cmUuc3RyaW5ncz1tfXJldHVybiByZS5zdHJpbmdzfXZhciBUZT17bWFwcGluZ3M6e30sYnVmZmVyczpbbnVsbCxbXSxbXV0scHJpbnRDaGFyOmZ1bmN0aW9uKGksbCl7dmFyIGg9VGUuYnVmZmVyc1tpXTtsPT09MHx8bD09PTEwPygoaT09PTE/dzpNKShYKGgsMCkpLGgubGVuZ3RoPTApOmgucHVzaChsKX0sdmFyYXJnczp2b2lkIDAsZ2V0OmZ1bmN0aW9uKCl7VGUudmFyYXJncys9NDt2YXIgaT14W1RlLnZhcmFyZ3MtND4+Ml07cmV0dXJuIGl9LGdldFN0cjpmdW5jdGlvbihpKXt2YXIgbD13ZShpKTtyZXR1cm4gbH0sZ2V0NjQ6ZnVuY3Rpb24oaSxsKXtyZXR1cm4gaX19O2Z1bmN0aW9uIEpuKGksbCl7dmFyIGg9MDtyZXR1cm4gcmUoKS5mb3JFYWNoKGZ1bmN0aW9uKG0seSl7dmFyIFQ9bCtoO3hbaSt5KjQ+PjJdPVQsdm4obSxUKSxoKz1tLmxlbmd0aCsxfSksMH1mdW5jdGlvbiBHbihpLGwpe3ZhciBoPXJlKCk7eFtpPj4yXT1oLmxlbmd0aDt2YXIgbT0wO3JldHVybiBoLmZvckVhY2goZnVuY3Rpb24oeSl7bSs9eS5sZW5ndGgrMX0pLHhbbD4+Ml09bSwwfWZ1bmN0aW9uIFFuKGkpe3JzKGkpfWZ1bmN0aW9uIFhuKGkpe3JldHVybiAwfWZ1bmN0aW9uIEtuKGksbCxoLG0seSl7fWZ1bmN0aW9uIFluKGksbCxoLG0pe2Zvcih2YXIgeT0wLFQ9MDtUPGg7VCsrKXtmb3IodmFyIGc9eFtsK1QqOD4+Ml0sUj14W2wrKFQqOCs0KT4+Ml0sVT0wO1U8UjtVKyspVGUucHJpbnRDaGFyKGksZWVbZytVXSk7eSs9Un1yZXR1cm4geFttPj4yXT15LDB9ZnVuY3Rpb24gWm4oKXtpZih0eXBlb2YgY3J5cHRvPT0ib2JqZWN0IiYmdHlwZW9mIGNyeXB0by5nZXRSYW5kb21WYWx1ZXM9PSJmdW5jdGlvbiIpe3ZhciBpPW5ldyBVaW50OEFycmF5KDEpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGkpLGlbMF19fWVsc2UgcmV0dXJuIGZ1bmN0aW9uKCl7SCgicmFuZG9tRGV2aWNlIil9fWZ1bmN0aW9uIENlKGksbCl7Q2UucmFuZG9tRGV2aWNlfHwoQ2UucmFuZG9tRGV2aWNlPVpuKCkpO2Zvcih2YXIgaD0wO2g8bDtoKyspYmVbaStoPj4wXT1DZS5yYW5kb21EZXZpY2UoKTtyZXR1cm4gMH12YXIgZXM9e2E6TG4sZTprbixkOkRuLGI6VW4sbjpIbixoOiRuLGw6V24sbTpxbixwOlZuLGY6Sm4sZzpHbixqOlFuLGk6WG4sazpLbixjOlluLG86Q2V9O0ZuKCksdC5fX193YXNtX2NhbGxfY3RvcnM9ZnVuY3Rpb24oKXtyZXR1cm4odC5fX193YXNtX2NhbGxfY3RvcnM9dC5hc20ucikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRNb2RlbEJ1ZmZlck1lbW9yeU9mZnNldD1mdW5jdGlvbigpe3JldHVybih0Ll9nZXRNb2RlbEJ1ZmZlck1lbW9yeU9mZnNldD10LmFzbS5zKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX2dldElucHV0TWVtb3J5T2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHQuX2dldElucHV0TWVtb3J5T2Zmc2V0PXQuYXNtLnQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fZ2V0SW5wdXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0SW5wdXRIZWlnaHQ9dC5hc20udSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRJbnB1dFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuKHQuX2dldElucHV0V2lkdGg9dC5hc20udikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRJbnB1dENoYW5uZWxDb3VudD1mdW5jdGlvbigpe3JldHVybih0Ll9nZXRJbnB1dENoYW5uZWxDb3VudD10LmFzbS53KS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX2dldE91dHB1dE1lbW9yeU9mZnNldD1mdW5jdGlvbigpe3JldHVybih0Ll9nZXRPdXRwdXRNZW1vcnlPZmZzZXQ9dC5hc20ueCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRPdXRwdXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0T3V0cHV0SGVpZ2h0PXQuYXNtLnkpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fZ2V0T3V0cHV0V2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0T3V0cHV0V2lkdGg9dC5hc20ueikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRPdXRwdXRDaGFubmVsQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0T3V0cHV0Q2hhbm5lbENvdW50PXQuYXNtLkEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fbG9hZE1vZGVsPWZ1bmN0aW9uKCl7cmV0dXJuKHQuX2xvYWRNb2RlbD10LmFzbS5CKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX3J1bkluZmVyZW5jZT1mdW5jdGlvbigpe3JldHVybih0Ll9ydW5JbmZlcmVuY2U9dC5hc20uQykuYXBwbHkobnVsbCxhcmd1bWVudHMpfTt2YXIgTHQ9dC5fX19lcnJub19sb2NhdGlvbj1mdW5jdGlvbigpe3JldHVybihMdD10Ll9fX2Vycm5vX2xvY2F0aW9uPXQuYXNtLkUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sUmU7ZnVuY3Rpb24gdHMoaSl7dGhpcy5uYW1lPSJFeGl0U3RhdHVzIix0aGlzLm1lc3NhZ2U9IlByb2dyYW0gdGVybWluYXRlZCB3aXRoIGV4aXQoIitpKyIpIix0aGlzLnN0YXR1cz1pfXRlPWZ1bmN0aW9uIGkoKXtSZXx8UWUoKSxSZXx8KHRlPWkpfTtmdW5jdGlvbiBRZShpKXtpZihqPjB8fChUbigpLGo+MCkpcmV0dXJuO2Z1bmN0aW9uIGwoKXtSZXx8KFJlPSEwLHQuY2FsbGVkUnVuPSEwLCFJJiYoQ24oKSxuKHQpLHQub25SdW50aW1lSW5pdGlhbGl6ZWQmJnQub25SdW50aW1lSW5pdGlhbGl6ZWQoKSxSbigpKSl9dC5zZXRTdGF0dXM/KHQuc2V0U3RhdHVzKCJSdW5uaW5nLi4uIiksc2V0VGltZW91dChmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNldFN0YXR1cygiIil9LDEpLGwoKX0sMSkpOmwoKX10LnJ1bj1RZTtmdW5jdGlvbiBycyhpLGwpe25zKGkpfWZ1bmN0aW9uIG5zKGkpe0VuKCl8fCh0Lm9uRXhpdCYmdC5vbkV4aXQoaSksST0hMCksYyhpLG5ldyB0cyhpKSl9aWYodC5wcmVJbml0KWZvcih0eXBlb2YgdC5wcmVJbml0PT0iZnVuY3Rpb24iJiYodC5wcmVJbml0PVt0LnByZUluaXRdKTt0LnByZUluaXQubGVuZ3RoPjA7KXQucHJlSW5pdC5wb3AoKSgpO3JldHVybiBRZSgpLGUucmVhZHl9fSgpO3R5cGVvZiBleHBvcnRzPT0ib2JqZWN0IiYmdHlwZW9mIG1vZHVsZT09Im9iamVjdCI/bW9kdWxlLmV4cG9ydHM9eWU6dHlwZW9mIGRlZmluZT09ImZ1bmN0aW9uIiYmZGVmaW5lLmFtZD9kZWZpbmUoW10sZnVuY3Rpb24oKXtyZXR1cm4geWV9KTp0eXBlb2YgZXhwb3J0cz09Im9iamVjdCImJihleHBvcnRzLmNyZWF0ZVZvbmFnZVRGTGl0ZVNpbWRNb2R1bGU9eWUpO2NsYXNzIHBue2NvbnN0cnVjdG9yKCl7dGhpcy5pc1NJTURTdXBwb3J0ZWRfPSExLHRoaXMuaXNUaHJlYWRzU3VwcG9ydGVkXz0hMSx0aGlzLmlucHV0V2lkdGhfPTAsdGhpcy5pbnB1dEhlaWdodF89MCx0aGlzLmlucHV0Q2hhbm5lbENvdW50Xz0wLHRoaXMuaW5wdXRNZW1vcnlPZmZzZXRfPTAsdGhpcy5vdXRwdXRXaWR0aF89MCx0aGlzLm91dHB1dEhlaWdodF89MCx0aGlzLm91dHB1dENoYW5uZWxDb3VudF89MCx0aGlzLm91dHB1dE1lbW9yeU9mZnNldF89MH19YXN5bmMgZnVuY3Rpb24gbW4ocixlKXtsZXQgdD1uZXcgcG47dmFyIG49bmV3IFByb21pc2UoZnVuY3Rpb24ocyxvKXthc3luYyBmdW5jdGlvbiBhKCl7cmV0dXJuIHllKHtsb2NhdGVGaWxlOmZ1bmN0aW9uKF8pe3JldHVybiByK199fSl9YXN5bmMgZnVuY3Rpb24gdShjKXtyZXR1cm4gbmV3IFByb21pc2UoYXN5bmMoXyxmKT0+e2NvbnN0IGQ9YztpZih0eXBlb2YgZD09InVuZGVmaW5lZCIpcmV0dXJuIGYoIlRGTGl0ZSBiYWNrZW5kIHVuYXZhaWxhYmxlOiB3YXNtU2ltZCIpO2NvbnN0IHY9ZG4oKTtjb25zb2xlLmxvZygiTG9hZGluZyB0ZmxpdGUgbW9kZWw6Iix2KTtsZXQgdz1lK2Ake3Z9LnRmbGl0ZWA7Y29uc29sZS5sb2coIlRGTGl0ZSBtb2RlbFVybDogIit3KTt0cnl7Y29uc3QgQT1hd2FpdChhd2FpdCBmZXRjaCh3KSkuYXJyYXlCdWZmZXIoKTtjb25zb2xlLmxvZygiTW9kZWwgYnVmZmVyIHNpemU6IixBLmJ5dGVMZW5ndGgpO2NvbnN0IEM9ZC5fZ2V0TW9kZWxCdWZmZXJNZW1vcnlPZmZzZXQoKTtjb25zb2xlLmxvZygiTW9kZWwgYnVmZmVyIG1lbW9yeSBvZmZzZXQ6IixDKSxjb25zb2xlLmxvZygiTG9hZGluZyBtb2RlbCBidWZmZXIuLi4iKSxkLkhFQVBVOC5zZXQobmV3IFVpbnQ4QXJyYXkoQSksQyk7Y29uc3QgTz1kLl9sb2FkTW9kZWwoQS5ieXRlTGVuZ3RoKTtpZihjb25zb2xlLmxvZygiTG9hZCBtb2RlbCByZXN1bHQ6IixPKSxPIT09MCl7ZigiQ2Fubm90IGxvYWQgbW9kZWwiKTtyZXR1cm59dC5pbnB1dFdpZHRoXz1kLl9nZXRJbnB1dFdpZHRoKCksdC5pbnB1dEhlaWdodF89ZC5fZ2V0SW5wdXRIZWlnaHQoKSx0LmlucHV0Q2hhbm5lbENvdW50Xz1kLl9nZXRJbnB1dENoYW5uZWxDb3VudCgpLHQuaW5wdXRNZW1vcnlPZmZzZXRfPWQuX2dldElucHV0TWVtb3J5T2Zmc2V0KCksY29uc29sZS5sb2coIklucHV0IG1lbW9yeSBvZmZzZXQ6Iix0LmlucHV0TWVtb3J5T2Zmc2V0XyksY29uc29sZS5sb2coIklucHV0IGhlaWdodDoiLHQuaW5wdXRIZWlnaHRfKSxjb25zb2xlLmxvZygiSW5wdXQgd2lkdGg6Iix0LmlucHV0V2lkdGhfKSxjb25zb2xlLmxvZygiSW5wdXQgY2hhbm5lbHM6Iix0LmlucHV0Q2hhbm5lbENvdW50XyksdC5vdXRwdXRNZW1vcnlPZmZzZXRfPWQuX2dldE91dHB1dE1lbW9yeU9mZnNldCgpLHQub3V0cHV0V2lkdGhfPWQuX2dldE91dHB1dFdpZHRoKCksdC5vdXRwdXRIZWlnaHRfPWQuX2dldE91dHB1dEhlaWdodCgpLHQub3V0cHV0Q2hhbm5lbENvdW50Xz1kLl9nZXRPdXRwdXRDaGFubmVsQ291bnQoKSxjb25zb2xlLmxvZygiT3V0cHV0IG1lbW9yeSBvZmZzZXQ6Iix0Lm91dHB1dE1lbW9yeU9mZnNldF8pLGNvbnNvbGUubG9nKCJPdXRwdXQgaGVpZ2h0OiIsdC5vdXRwdXRIZWlnaHRfKSxjb25zb2xlLmxvZygiT3V0cHV0IHdpZHRoOiIsdC5vdXRwdXRXaWR0aF8pLGNvbnNvbGUubG9nKCJPdXRwdXQgY2hhbm5lbHM6Iix0Lm91dHB1dENoYW5uZWxDb3VudF8pLHQuc2VsZWN0ZWRURkxpdGVfPWR9Y2F0Y2goTSl7ZihNKTtyZXR1cm59XygpfSl9YSgpLnRoZW4oYz0+e2lmKGM9PT1udWxsKXRocm93IGNvbnNvbGUuZXJyb3IoImxvYWRURkxpdGUgbnVsbCIpLCJsb2FkVEZMaXRlIG51bGwiO3UoYykudGhlbihfPT57cyh0KX0pLmNhdGNoKF89Pntjb25zb2xlLmVycm9yKCJsb2FkVEZMaXRlTW9kZWwgZXJyb3IiKSxvKCJsb2FkVEZMaXRlTW9kZWwgZXJyb3IiKX0pfSkuY2F0Y2goYz0+e2NvbnNvbGUuZXJyb3IoImxvYWRURkxpdGUgZXJyb3I6IixjKSxvKCJsb2FkVEZMaXRlIGVycm9yOiIrYyl9KX0pO3JldHVybiBufWNsYXNzIGdue2NvbnN0cnVjdG9yKGUpe3RoaXMuYmx1ckZpbHRlcl89ZT09PV9lLkhpZ2g/ImJsdXIoMTVweCkiOiJibHVyKDVweCkifXJ1blBvc3RQcm9jZXNzaW5nKGUsdCl7dHJ5e2UuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJzb3VyY2UtaW4iLGUuZmlsdGVyPXRoaXMuYmx1ckZpbHRlcl8sZS5kcmF3SW1hZ2UodCwwLDAsdC53aWR0aCx0LmhlaWdodCksZS5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249ImRlc3RpbmF0aW9uLW92ZXIiLGUuZmlsdGVyPSJibHVyKDBweCkiLGUuZHJhd0ltYWdlKHQsMCwwLHQud2lkdGgsdC5oZWlnaHQpfWNhdGNoKG4pe2NvbnNvbGUubG9nKCJbQmx1clBvc3RQcm9jZXNzXSBGYWlsZWQgdG8gZHJhdyBjYW52YXMiLG4pfX19Y29uc3QgUT1jbGFzc3tjb25zdHJ1Y3RvcihyKXtpZih0aGlzLmNvbmZpZ189cix0aGlzLmZyYW1lQ291bnRlcl89MCx0aGlzLmxhc3RQcm9jZXNzZWRUaW1lc3RhbXBfPTAsdGhpcy5yZXN1bHRDYW52YXNfPW5ldyBPZmZzY3JlZW5DYW52YXMoMSwxKSx0aGlzLnJlc3VsdEN0eF89dGhpcy5yZXN1bHRDYW52YXNfLmdldENvbnRleHQoIjJkIix7YWxwaGE6ITEsZGVzeW5jaHJvbml6ZWQ6ITB9KSwhdGhpcy5yZXN1bHRDdHhfKXRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIGNyZWF0ZSBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQiKTtpZih0aGlzLnNlZ21lbnRhdGlvbk1hc2tDYW52YXNfPW5ldyBPZmZzY3JlZW5DYW52YXMoMSwxKSx0aGlzLnNlZ21lbnRhdGlvbk1hc2tDdHhfPXRoaXMuc2VnbWVudGF0aW9uTWFza0NhbnZhc18uZ2V0Q29udGV4dCgiMmQiLHthbHBoYTohMSxkZXN5bmNocm9uaXplZDohMH0pLCF0aGlzLnNlZ21lbnRhdGlvbk1hc2tDdHhfKXRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIGNyZWF0ZSBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQiKTtpZih0aGlzLnNlZ21lbnRhdGlvbk1hc2tGcmFtZUNhbnZhc189bmV3IE9mZnNjcmVlbkNhbnZhcygxLDEpLHRoaXMuc2VnbWVudGF0aW9uTWFza0ZyYW1lQ3R4Xz10aGlzLnNlZ21lbnRhdGlvbk1hc2tGcmFtZUNhbnZhc18uZ2V0Q29udGV4dCgiMmQiLHthbHBoYTohMSxkZXN5bmNocm9uaXplZDohMH0pLCF0aGlzLnNlZ21lbnRhdGlvbk1hc2tGcmFtZUN0eF8pdGhyb3cgbmV3IEVycm9yKCJVbmFibGUgdG8gY3JlYXRlIE9mZnNjcmVlbkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCIpO3RoaXMuc2VnbWVudGF0aW9uUGl4ZWxDb3VudF89MCx0aGlzLmlucHV0TWVtb3J5T2Zmc2V0Xz0wLHRoaXMub3V0cHV0TWVtb3J5T2Zmc2V0Xz0wLHIudHJhbnNmb3JtZXJUeXBlPT09IlZpcnR1YWxCYWNrZ3JvdW5kIj8odGhpcy50aW1lckdhcF89US5WSVJUVUFMX1BST0NFU1NfR0FQX01JQ1JPX1NFQ09ORCx0aGlzLnBvc3RQcm9jZXNzSW50ZXJmYWNlXz1uZXcgbG4oci5iYWNrZ3JvdW5kQXNzZXRVcmkpKTpyLnRyYW5zZm9ybWVyVHlwZT09PSJCYWNrZ3JvdW5kQmx1ciI/KHRoaXMudGltZXJHYXBfPVEuQkxVUl9QUk9DRVNTX0dBUF9NSUNST19TRUNPTkQsdGhpcy5wb3N0UHJvY2Vzc0ludGVyZmFjZV89bmV3IFB0KHIucmFkaXVzKSk6ci50cmFuc2Zvcm1lclR5cGU9PT0iVmlkZW9CYWNrZ3JvdW5kIj90aGlzLnRpbWVyR2FwXz1RLkJMVVJfUFJPQ0VTU19HQVBfTUlDUk9fU0VDT05EOnIudHJhbnNmb3JtZXJUeXBlPT09IlNpbHVldGVCbHVyIj8odGhpcy50aW1lckdhcF89US5CTFVSX1BST0NFU1NfR0FQX01JQ1JPX1NFQ09ORCx0aGlzLnBvc3RQcm9jZXNzSW50ZXJmYWNlXz1uZXcgZ24oci5yYWRpdXMpKToodGhpcy50aW1lckdhcF89US5CTFVSX1BST0NFU1NfR0FQX01JQ1JPX1NFQ09ORCx0aGlzLnBvc3RQcm9jZXNzSW50ZXJmYWNlXz1uZXcgUHQpfWluaXQoKXtyZXR1cm4gbmV3IFByb21pc2UoYXN5bmMocixlKT0+e2F3YWl0IG1uKHRoaXMuY29uZmlnXy53YXNtQXNzZXRVcmlQYXRoLHRoaXMuY29uZmlnXy50ZmxpdGVBc3NldFVyaVBhdGgpLnRoZW4odD0+e3QmJih0aGlzLnZvYW5nZVRGTGl0ZUluZm9fPXQsdGhpcy5zZWdtZW50YXRpb25NYXNrQ2FudmFzXy53aWR0aD10aGlzLnZvYW5nZVRGTGl0ZUluZm9fLmlucHV0V2lkdGhfLHRoaXMuc2VnbWVudGF0aW9uTWFza0NhbnZhc18uaGVpZ2h0PXRoaXMudm9hbmdlVEZMaXRlSW5mb18uaW5wdXRIZWlnaHRfLHRoaXMuc2VnbWVudGF0aW9uUGl4ZWxDb3VudF89dGhpcy52b2FuZ2VURkxpdGVJbmZvXy5pbnB1dFdpZHRoXyp0aGlzLnZvYW5nZVRGTGl0ZUluZm9fLmlucHV0SGVpZ2h0Xyx0aGlzLnNlZ21lbnRhdGlvbk1hc2tfPW5ldyBJbWFnZURhdGEodGhpcy52b2FuZ2VURkxpdGVJbmZvXy5pbnB1dFdpZHRoXyx0aGlzLnZvYW5nZVRGTGl0ZUluZm9fLmlucHV0SGVpZ2h0XyksdGhpcy5pbnB1dE1lbW9yeU9mZnNldF89dGhpcy52b2FuZ2VURkxpdGVJbmZvXy5pbnB1dE1lbW9yeU9mZnNldF8vNCx0aGlzLm91dHB1dE1lbW9yeU9mZnNldF89dGhpcy52b2FuZ2VURkxpdGVJbmZvXy5vdXRwdXRNZW1vcnlPZmZzZXRfLzQscigpKX0pLmNhdGNoKHQ9Pntjb25zb2xlLmxvZygiZXJyb3IgdXNlVEZMaXRlOiIsdCksZSh0KX0pfSl9YXN5bmMgc3RhcnQoKXtpZih0eXBlb2YgdGhpcy52b2FuZ2VURkxpdGVJbmZvXz09InVuZGVmaW5lZCIpdGhyb3cidHJhbnNmb3JtZXIgbm90IGluaXQifWFzeW5jIHRyYW5zZm9ybShyLGUpeyh0aGlzLnJlc3VsdENhbnZhc18ud2lkdGghPXIuZGlzcGxheVdpZHRofHx0aGlzLnJlc3VsdENhbnZhc18uaGVpZ2h0IT1yLmRpc3BsYXlIZWlnaHQpJiYodGhpcy5yZXN1bHRDYW52YXNfLndpZHRoPXIuZGlzcGxheVdpZHRoLHRoaXMucmVzdWx0Q2FudmFzXy5oZWlnaHQ9ci5kaXNwbGF5SGVpZ2h0KSwodGhpcy5zZWdtZW50YXRpb25NYXNrRnJhbWVDYW52YXNfLndpZHRoIT1yLmRpc3BsYXlXaWR0aHx8dGhpcy5zZWdtZW50YXRpb25NYXNrRnJhbWVDYW52YXNfLmhlaWdodCE9ci5kaXNwbGF5SGVpZ2h0KSYmKHRoaXMuc2VnbWVudGF0aW9uTWFza0ZyYW1lQ2FudmFzXy53aWR0aD1yLmRpc3BsYXlXaWR0aCx0aGlzLnNlZ21lbnRhdGlvbk1hc2tGcmFtZUNhbnZhc18uaGVpZ2h0PXIuZGlzcGxheUhlaWdodCk7Y29uc3QgdD1yLnRpbWVzdGFtcDtjcmVhdGVJbWFnZUJpdG1hcChyKS50aGVuKG49PntyLmNsb3NlKCksdGhpcy5wcm9jZXNzRnJhbWUoZSxuLHQpfSkuY2F0Y2gobj0+e2NvbnNvbGUuZXJyb3IoImNyZWF0ZUltYWdlQml0bWFwIixuKSxlLmVucXVldWUocil9KX1wcm9jZXNzRnJhbWUocixlLHQpe3QtdGhpcy5sYXN0UHJvY2Vzc2VkVGltZXN0YW1wXz49dGhpcy50aW1lckdhcF8mJih0aGlzLmxhc3RQcm9jZXNzZWRUaW1lc3RhbXBfPXQsdGhpcy5wcm9jZXNzU291cmNlKGUpKSx0aGlzLnJlc3VsdEN0eF8uZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJjb3B5Iix0aGlzLnJlc3VsdEN0eF8uZHJhd0ltYWdlKHRoaXMuc2VnbWVudGF0aW9uTWFza0ZyYW1lQ2FudmFzXywwLDAsdGhpcy5zZWdtZW50YXRpb25NYXNrRnJhbWVDYW52YXNfLndpZHRoLHRoaXMuc2VnbWVudGF0aW9uTWFza0ZyYW1lQ2FudmFzXy5oZWlnaHQpLHRoaXMucmVzdWx0Q3R4Xy5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249InNvdXJjZS1hdG9wIix0aGlzLnJlc3VsdEN0eF8uZmlsdGVyPSJub25lIix0aGlzLnJlc3VsdEN0eF8uZHJhd0ltYWdlKGUsMCwwLGUud2lkdGgsZS5oZWlnaHQpLHRoaXMucG9zdFByb2Nlc3NJbnRlcmZhY2VfJiZ0aGlzLnBvc3RQcm9jZXNzSW50ZXJmYWNlXy5ydW5Qb3N0UHJvY2Vzc2luZyh0aGlzLnJlc3VsdEN0eF8sZSksci5lbnF1ZXVlKG5ldyBWaWRlb0ZyYW1lKHRoaXMucmVzdWx0Q2FudmFzXyx7dGltZXN0YW1wOnQsYWxwaGE6ImRpc2NhcmQifSkpLHRoaXMuZnJhbWVDb3VudGVyXysrfXByb2Nlc3NTb3VyY2Uocil7dGhpcy5zZWdtZW50YXRpb25NYXNrQ3R4Xy5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249ImNvcHkiLHRoaXMuc2VnbWVudGF0aW9uTWFza0N0eF8uZHJhd0ltYWdlKHIsMCwwLHIud2lkdGgsci5oZWlnaHQsMCwwLHRoaXMudm9hbmdlVEZMaXRlSW5mb18uaW5wdXRXaWR0aF8sdGhpcy52b2FuZ2VURkxpdGVJbmZvXy5pbnB1dEhlaWdodF8pO2xldCBlPXRoaXMuc2VnbWVudGF0aW9uTWFza0N0eF8uZ2V0SW1hZ2VEYXRhKDAsMCx0aGlzLnZvYW5nZVRGTGl0ZUluZm9fLmlucHV0V2lkdGhfLHRoaXMudm9hbmdlVEZMaXRlSW5mb18uaW5wdXRIZWlnaHRfKTtmb3IobGV0IHQ9MDt0PHRoaXMuc2VnbWVudGF0aW9uUGl4ZWxDb3VudF87dCsrKXRoaXMudm9hbmdlVEZMaXRlSW5mb18uc2VsZWN0ZWRURkxpdGVfLkhFQVBGMzJbdGhpcy5pbnB1dE1lbW9yeU9mZnNldF8rdCozXT1lLmRhdGFbdCo0XS8yNTUsdGhpcy52b2FuZ2VURkxpdGVJbmZvXy5zZWxlY3RlZFRGTGl0ZV8uSEVBUEYzMlt0aGlzLmlucHV0TWVtb3J5T2Zmc2V0Xyt0KjMrMV09ZS5kYXRhW3QqNCsxXS8yNTUsdGhpcy52b2FuZ2VURkxpdGVJbmZvXy5zZWxlY3RlZFRGTGl0ZV8uSEVBUEYzMlt0aGlzLmlucHV0TWVtb3J5T2Zmc2V0Xyt0KjMrMl09ZS5kYXRhW3QqNCsyXS8yNTU7dGhpcy52b2FuZ2VURkxpdGVJbmZvXy5zZWxlY3RlZFRGTGl0ZV8uX3J1bkluZmVyZW5jZSgpO2ZvcihsZXQgdD0wO3Q8dGhpcy5zZWdtZW50YXRpb25QaXhlbENvdW50Xzt0Kyspe2NvbnN0IG49dGhpcy52b2FuZ2VURkxpdGVJbmZvXy5zZWxlY3RlZFRGTGl0ZV8uSEVBUEYzMlt0aGlzLm91dHB1dE1lbW9yeU9mZnNldF8rdF07dGhpcy5zZWdtZW50YXRpb25NYXNrXy5kYXRhW3QqNCszXT0yNTUqbn10aGlzLnNlZ21lbnRhdGlvbk1hc2tDdHhfLnB1dEltYWdlRGF0YSh0aGlzLnNlZ21lbnRhdGlvbk1hc2tfLDAsMCksdGhpcy5zZWdtZW50YXRpb25NYXNrRnJhbWVDdHhfLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0iY29weSIsdGhpcy5zZWdtZW50YXRpb25NYXNrRnJhbWVDdHhfLmRyYXdJbWFnZSh0aGlzLnNlZ21lbnRhdGlvbk1hc2tDYW52YXNfLDAsMCx0aGlzLnZvYW5nZVRGTGl0ZUluZm9fLmlucHV0V2lkdGhfLHRoaXMudm9hbmdlVEZMaXRlSW5mb18uaW5wdXRIZWlnaHRfLDAsMCx0aGlzLnNlZ21lbnRhdGlvbk1hc2tGcmFtZUNhbnZhc18ud2lkdGgsdGhpcy5zZWdtZW50YXRpb25NYXNrRnJhbWVDYW52YXNfLmhlaWdodCl9Zmx1c2goKXt9Z2V0VHJhbnNmb3JtZXJUeXBlKCl7cmV0dXJuIkJhY2tncm91bmRUcmFuc2Zvcm1lciJ9c2V0VmlkZW9CR1JlYWRhYmxlKHIpe3RoaXMuY29uZmlnXy50cmFuc2Zvcm1lclR5cGU9PT0iVmlkZW9CYWNrZ3JvdW5kIiYmKHRoaXMucG9zdFByb2Nlc3NJbnRlcmZhY2VfPW5ldyBobihyKSl9fTtsZXQgcWU9UTtxZS5CTFVSX1BST0NFU1NfR0FQX01JQ1JPX1NFQ09ORD0yZTUscWUuVklSVFVBTF9QUk9DRVNTX0dBUF9NSUNST19TRUNPTkQ9MTVlNDtmdW5jdGlvbiBfbihyKXtyZXR1cm4gdHlwZW9mIHI9PSJvYmplY3QiJiZyIT09bnVsbCYmIm1lc3NhZ2UiaW4gciYmdHlwZW9mIHIubWVzc2FnZT09InN0cmluZyJ9ZnVuY3Rpb24geW4ocil7aWYoX24ocikpcmV0dXJuIHI7dHJ5e3JldHVybiBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkocikpfWNhdGNoe3JldHVybiBuZXcgRXJyb3IoU3RyaW5nKHIpKX19ZnVuY3Rpb24gVmUocil7cmV0dXJuIHR5cGVvZiByPT0idW5kZWZpbmVkIj8iIjp5bihyKS5tZXNzYWdlfWlmKHR5cGVvZiBpbXBvcnRTY3JpcHRzPT0iZnVuY3Rpb24iKXtsZXQgcj1mdW5jdGlvbigpe3R5cGVvZiBlPT0idW5kZWZpbmVkIiYmKGU9bmV3IGZuLGUub24oImVycm9yIix0PT57Y29uc3Qgbj17Y2FsbGJhY2tUeXBlOiJtZWRpYV9wcm9jZXNzb3JfZXJyb3JfZXZlbnQiLG1lc3NhZ2U6dH07cG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkobikpfSksZS5vbigid2FybiIsdD0+e2NvbnN0IG49e2NhbGxiYWNrVHlwZToibWVkaWFfcHJvY2Vzc29yX3dhcm5fZXZlbnQiLG1lc3NhZ2U6dH07cG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkobikpfSkpfSxlO29ubWVzc2FnZT1hc3luYyB0PT57Y29uc3R7b3BlcmF0aW9uOm59PXQuZGF0YTtpZihjb25zb2xlLmxvZygib3BlcmF0aW9uPSIsbiksbj09PSJ0cmFuc2Zvcm0iKXtjb25zdHtyZWFkYWJsZTpzLHdyaXRhYmxlOm8sY29uZmlnOmEsdmlkZW9CR1JlYWRhYmxlOnUsbWV0YURhdGE6Y309dC5kYXRhO3R5cGVvZiBjPT0ic3RyaW5nIiYmSnIoSlNPTi5wYXJzZShjKSkscigpO2xldCBfPVtdO2NvbnN0IGY9bmV3IHFlKEpTT04ucGFyc2UoYSkpO2Yuc2V0VmlkZW9CR1JlYWRhYmxlKHUpLGYuaW5pdCgpLnRoZW4oKCk9PntfLnB1c2goZiksZS5zZXRUcmFuc2Zvcm1lcnMoXykudGhlbigoKT0+e2UudHJhbnNmb3JtKHMsbykudGhlbigoKT0+e2NvbnN0IGQ9e2NhbGxiYWNrVHlwZToic3VjY2VzcyIsbWVzc2FnZToidHJhbnNmb3JtIn07cG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoZCkpfSkuY2F0Y2goZD0+e2NvbnN0IHY9e2NhbGxiYWNrVHlwZToiZXJyb3IiLG1lc3NhZ2U6VmUoZCl9O3Bvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KHYpKX0pfSl9KS5jYXRjaChkPT57Y29uc3Qgdj17Y2FsbGJhY2tUeXBlOiJlcnJvciIsbWVzc2FnZTpWZShkKX07cG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkodikpfSl9ZWxzZSBuPT09ImRlc3Ryb3kiP2UuZGVzdHJveSgpLnRoZW4oKCk9Pntjb25zdCBzPXtjYWxsYmFja1R5cGU6InN1Y2Nlc3MiLG1lc3NhZ2U6ImRlc3Ryb3kifTtwb3N0TWVzc2FnZShKU09OLnN0cmluZ2lmeShzKSl9KS5jYXRjaChzPT57Y29uc3Qgbz17Y2FsbGJhY2tUeXBlOiJlcnJvciIsbWVzc2FnZTpWZShzKX07cG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkobykpfSk6bj09PSJzZXRUcmFja0V4cGVjdGVkUmF0ZSImJmUuc2V0VHJhY2tFeHBlY3RlZFJhdGUodC5kYXRhLnJhdGUpfX19KSgpOwo=",qe="undefined"!=typeof window&&window.Blob&&new Blob([atob(Je)],{type:"text/javascript;charset=utf-8"});function Qe(){const e=qe&&(window.URL||window.webkitURL).createObjectURL(qe);try{return e?new Worker(e):new Worker("data:application/javascript;base64,"+Je,{type:"module"})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const et=new WeakMap,tt=new WeakMap,nt=new WeakMap,rt=Symbol("anyProducer"),ot=e.resolve(),it=Symbol("listenerAdded"),st=Symbol("listenerRemoved");let at=!1;function ct(e){if("string"!=typeof e&&"symbol"!=typeof e)throw new TypeError("eventName must be a string or a symbol")}function ut(e){if("function"!=typeof e)throw new TypeError("listener must be a function")}function lt(e,t){const n=tt.get(e);return n.has(t)||n.set(t,new Set),n.get(t)}function dt(e,t){const n="string"==typeof t||"symbol"==typeof t?t:rt,r=nt.get(e);return r.has(n)||r.set(n,new Set),r.get(n)}function pt(t,n){n=Array.isArray(n)?n:[n];let r=!1,o=()=>{},i=[];const s={enqueue(e){i.push(e),o()},finish(){r=!0,o()}};for(const e of n)dt(t,e).add(s);return{async next(){return i?0===i.length?r?(i=void 0,this.next()):(await new e((e=>{o=e})),this.next()):{done:!1,value:await i.shift()}:{done:!0}},async return(e){i=void 0;for(const e of n)dt(t,e).delete(s);return o(),arguments.length>0?{done:!0,value:await e}:{done:!0}},[Symbol.asyncIterator](){return this}}}function ht(e){if(void 0===e)return gt;if(!Array.isArray(e))throw new TypeError("`methodNames` must be an array of strings");for(const t of e)if(!gt.includes(t)){if("string"!=typeof t)throw new TypeError("`methodNames` element must be a string");throw new Error(`${t} is not Emittery method`)}return e}const ft=e=>e===it||e===st;class mt{static mixin(e,t){return t=ht(t),n=>{if("function"!=typeof n)throw new TypeError("`target` must be function");for(const e of t)if(void 0!==n.prototype[e])throw new Error(`The property \`${e}\` already exists on \`target\``);Object.defineProperty(n.prototype,e,{enumerable:!1,get:function(){return Object.defineProperty(this,e,{enumerable:!1,value:new mt}),this[e]}});const r=t=>function(...n){return this[e][t](...n)};for(const e of t)Object.defineProperty(n.prototype,e,{enumerable:!1,value:r(e)});return n}}static get isDebugEnabled(){if("object"!=typeof r)return at;const{env:e}=r||{env:{}};return"emittery"===e.DEBUG||"*"===e.DEBUG||at}static set isDebugEnabled(e){at=e}constructor(e={}){et.set(this,new Set),tt.set(this,new Map),nt.set(this,new Map),this.debug=e.debug||{},void 0===this.debug.enabled&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(e,t,n,r)=>{r=JSON.stringify(r),"symbol"==typeof n&&(n=n.toString());const o=new Date,i=`${o.getHours()}:${o.getMinutes()}:${o.getSeconds()}.${o.getMilliseconds()}`;console.log(`[${i}][emittery:${e}][${t}] Event Name: ${n}\n\tdata: ${r}`)})}logIfDebugEnabled(e,t,n){(mt.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,n)}on(e,t){ut(t),e=Array.isArray(e)?e:[e];for(const n of e)ct(n),lt(this,n).add(t),this.logIfDebugEnabled("subscribe",n,void 0),ft(n)||this.emit(it,{eventName:n,listener:t});return this.off.bind(this,e,t)}off(e,t){ut(t),e=Array.isArray(e)?e:[e];for(const n of e)ct(n),lt(this,n).delete(t),this.logIfDebugEnabled("unsubscribe",n,void 0),ft(n)||this.emit(st,{eventName:n,listener:t})}once(t){return new e((e=>{const n=this.on(t,(t=>{n(),e(t)}))}))}events(e){e=Array.isArray(e)?e:[e];for(const t of e)ct(t);return pt(this,e)}async emit(t,n){ct(t),this.logIfDebugEnabled("emit",t,n),function(t,n,r){const o=nt.get(t);if(o.has(n))for(const e of o.get(n))e.enqueue(r);if(o.has(rt)){const t=e.all([n,r]);for(const e of o.get(rt))e.enqueue(t)}}(this,t,n);const r=lt(this,t),o=et.get(this),i=[...r],s=ft(t)?[]:[...o];await ot,await e.all([...i.map((async e=>{if(r.has(e))return e(n)})),...s.map((async e=>{if(o.has(e))return e(t,n)}))])}async emitSerial(e,t){ct(e),this.logIfDebugEnabled("emitSerial",e,t);const n=lt(this,e),r=et.get(this),o=[...n],i=[...r];await ot;for(const e of o)n.has(e)&&await e(t);for(const n of i)r.has(n)&&await n(e,t)}onAny(e){return ut(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),et.get(this).add(e),this.emit(it,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return pt(this)}offAny(e){ut(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(st,{listener:e}),et.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(const t of e)if(this.logIfDebugEnabled("clear",t,void 0),"string"==typeof t||"symbol"==typeof t){lt(this,t).clear();const e=dt(this,t);for(const t of e)t.finish();e.clear()}else{et.get(this).clear();for(const e of tt.get(this).values())e.clear();for(const e of nt.get(this).values()){for(const t of e)t.finish();e.clear()}}}listenerCount(e){e=Array.isArray(e)?e:[e];let t=0;for(const n of e)if("string"!=typeof n){void 0!==n&&ct(n),t+=et.get(this).size;for(const e of tt.get(this).values())t+=e.size;for(const e of nt.get(this).values())t+=e.size}else t+=et.get(this).size+lt(this,n).size+dt(this,n).size+dt(this).size;return t}bindMethods(e,t){if("object"!=typeof e||null===e)throw new TypeError("`target` must be an object");t=ht(t);for(const n of t){if(void 0!==e[n])throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(e,n,{enumerable:!1,value:this[n].bind(this)})}}}const gt=Object.getOwnPropertyNames(mt.prototype).filter((e=>"constructor"!==e));Object.defineProperty(mt,"listenerAdded",{value:it,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(mt,"listenerRemoved",{value:st,writable:!1,enumerable:!0,configurable:!1});var bt,yt,vt=mt;class wt extends vt{constructor(t){super(),this.config_=t,this.worker_=new Qe,this.trackExpectedRate_=-1,this.workerInited_=!1,this.onMessage_=new e(((e,t)=>{this.worker_.addEventListener("message",(n=>{let r=JSON.parse(n.data);"success"===r.callbackType?e():"error"===r.callbackType?t(r.message):"media_processor_error_event"===r.callbackType?this.emit("error",r.message):"media_processor_warn_event"===r.callbackType&&this.emit("warn",r.message)}))}))}transform(t,n){return new e((async(e,r)=>{let o=JSON.stringify(globalThis._vonageMediaProcessorMetadata);if("string"!=typeof o&&(o=JSON.stringify({})),"VideoBackground"===this.config_.transformerType){const e=document.createElement("video");e.src=this.config_.backgroundAssetUri,e.muted=!0;try{await e.play()}catch(e){return void r(e)}const i=e.captureStream().getVideoTracks()[0],s=new MediaStreamTrackProcessor(i).readable;this.worker_.postMessage({operation:"transform",readable:t,writable:n,config:JSON.stringify(this.config_),videoBGReadable:s,metaData:o},[t,n,s])}else this.worker_.postMessage({operation:"transform",readable:t,writable:n,config:JSON.stringify(this.config_),metaData:o},[t,n]);this.onMessage_.then((()=>{console.log("Worker inited"),this.workerInited_=!0,-1!=this.trackExpectedRate_&&this.postTrackExpectedRate(),e()})).catch((e=>{console.log("Worker inited error"),r(e)}))}))}destroy(){return new e((async(e,t)=>{this.worker_.postMessage({operation:"destroy"}),this.onMessage_.then((()=>{console.log("Worker destroyed"),e()})).catch((e=>{console.log("Worker destroy error"),t(e)}))}))}setTrackExpectedRate(e){this.trackExpectedRate_=e,this.postTrackExpectedRate()}postTrackExpectedRate(){this.workerInited_&&this.worker_.postMessage({operation:"setTrackExpectedRate",rate:this.trackExpectedRate_})}}function xt(){return new e((async(t,n)=>{try{await new e(((e,t)=>{"undefined"==typeof MediaStreamTrackProcessor||"undefined"==typeof MediaStreamTrackGenerator?t("Your browser does not support the MediaStreamTrack API for Insertable Streams of Media."):e()}))}catch(e){return void n(e)}(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))().then((e=>{!1!==e?t():n("Your browser does not support WebAssembly features.")})).catch((e=>{n(e)}))}))}(yt=bt||(bt={})).Low="Low",yt.High="High";let St,Et=-1;function Tt(){return St}function Ct(e){Et=e,void 0!==St&&St.setTrackExpectedRate(Et)}function _t(t){return new e((async(e,n)=>{St=new wt(t),-1!=Et&&St.setTrackExpectedRate(Et),e(new Ke(St))}))}}.call(this,n(0),n(43))},function(e,t,n){"use strict";const r=n(15),o=n(9),i=n(689),s=n(690),a=n(691);e.exports=function(e){void 0===e&&(e={});const t=e.Errors||n(4),c=e.ExceptionCodes||n(8),u=e.logging||n(1)("publisherInit"),l=e.otError||n(11)(),d=e.OTHelpers||n(5),p=e.Publisher||n(169)(),h=e.sessionObjects||n(21);return function(e,n,f){let m;u.debug(`OT.initPublisher(${e})`),"string"!=typeof e||document.getElementById(e)||(e=n,n=f,f=arguments[3]),"function"==typeof e?(f=e,n=void 0,e=void 0):o(e)&&!d.isElementNode(e)&&(f=n,n=e,e=void 0),"function"==typeof n&&(f=n,n=void 0),n&&(o(n)?!1===n.insertDefaultUI&&e?m="You cannot specify a target element if insertDefaultUI is false":i(n.audioSource)&&i(n.videoSource)&&(m="You cannot specify both audioSource and videoSource as null or false"):(m="properties argument to Publisher constructor, if provided, should be an object",n=void 0)),s(n),a(n);const g=new p(n||{});h.publishers.add(g);const b=function(){f&&r(f)&&(f(...arguments),f=void 0)};void 0!==m&&(u.error(m),b(l(t.INVALID_PARAMETER,new Error(m),c.INVALID_PARAMETER)));const y=function(e){g.off("publishComplete",v),b(e)};let v=function(e){g.off("initSuccess",y),e&&b(e)};return g.once("initSuccess",y),g.once("publishComplete",v),g.publish(e),g}}},function(e,t,n){"use strict";(function(t){var r=n(3)(n(20));const o=n(42),i=n(692),s=n(9),a=n(15),c=n(7),u=n(26),l=n(6),d=n(27),p=n(34)(),h=n(74),f=n(307),m=n(694),g=n(695),b=n(138).prependProxyToUrlIfNeeded,y=n(139).getProxyUrl;e.exports=function(e){void 0===e&&(e={});const v=e.adaptIceServers||n(100).adaptIceServers,w=e.AnalyticsHelper||d,x=e.APIKEY||n(72),S=e.Capabilities||n(170),E=e.convertAnvilErrorCode||n(696),T=e.convertRumorError||n(311),C=e.Errors||n(4),_=e.Events||n(23)(),I=e.Stream||n(171),k=e.ExceptionCodes||n(8),R=e.hasIceRestartsCapability||n(312),N=e.logging||n(1)("Session"),O=e.otError||n(11)(),A=e.OTErrorClass||n(22),D=e.OTHelpers||n(5),L=n(697),P=e.StaticConfig||p,V=e.staticConfig||P.onlyLocal(),M=e.Publisher||n(169)(),F=e.RaptorSocket||n(698).default(),W=e.SessionDispatcher||n(319),Z=e.sessionObjects||n(21),B=e.sessionTag||n(318),G=e.socketCloseCodes||n(76),U=e.Subscriber||n(300)(),$=e.systemRequirements||n(153),X=e.uuid||n(19),j=g({otError:O}),z=e.global||(void 0!==typeof window?window:__webpack_require__.g),H=e.getSessionInfo||n(722)(),Y=n(141),K=e.initPublisher||n(309)({Publisher:M});return function(e,n,d){var p=this;let g=void 0===d?{}:d,J=g.iceConfig,q=g.connectionEventsSuppressed,Q=g.ipWhitelist,ee=void 0!==Q&&Q;const te=y(),ne=new w,re=e=>"string"==typeof e?this.streams.get(e)||{id:e}:e;let oe,ie,se,ae,ce,ue,le,de;l(this),this._tag=B,$.check()||$.upgrade(),null==n&&(n=e,e=null),j(J),this.id=n,this.sessionId=n;let pe=!0,he=!1,fe=e;const me=this;let ge=n,be=X(),ye=X(),ve=N,we=!1;const xe=[];let Se,Ee,Te,Ce,_e=null;const Ie=D.statable(this,["disconnected","connecting","connected","disconnecting"],"disconnected");this.connection=null,this.connections=new D.Collection,this.streams=new D.Collection,this.archives=new D.Collection;const ke=function(e){Ie("disconnected"),e.code||(e.code=k.CONNECT_FAILED),ve.error(`${e.name||"Unknown Error"}: ${e.message}`),A.handleJsException({error:e,target:this,analytics:ne}),this.trigger("sessionConnectFailed",e)},Re=function(e){he=!1;const t=e.reason;this.logEvent("Connect","Disconnected",{reason:e.reason});const n=new _.SessionDisconnectEvent("sessionDisconnected",t.replace("networkTimedout","networkDisconnected"));this.isConnected()&&this.disconnect(),Ee(),Se.call(this,t),setTimeout((()=>{this.dispatchEvent(n),Te.call(this,n.reason),n.isDefaultPrevented()||Ce.call(this,n.reason)}))},Ne=function(e){q||e.id.match(/^symphony\./)||this.dispatchEvent(new _.ConnectionEvent(u.CONNECTION_CREATED,e))},Oe=function(e,t){e.id.match(/^symphony\./)||oe&&e.id===oe.id()||this.dispatchEvent(new _.ConnectionEvent(u.CONNECTION_DESTROYED,e,t))},Ae=function(e){!e||!e.connection||this.connection&&e.connection.id===this.connection.id||this.dispatchEvent(new _.StreamEvent(u.STREAM_CREATED,e,null,!1))},De=function(e){const t=e.target,n=e.changedProperty;let r=e.newValue;"videoDisableWarning"!==n&&"audioDisableWarning"!==n&&("videoDimensions"===n&&(r={width:r.width,height:r.height}),this.dispatchEvent(new _.StreamPropertyChangedEvent(u.STREAM_PROPERTY_CHANGED,t,n,e.oldValue,r)))},Le=function(e,t){void 0===t&&(t="clientDisconnected");const n=new _.StreamEvent("streamDestroyed",e,t,!0);e.connection.id===this.connection.id?Z.publishers.where({streamId:e.id}).forEach((function(n){n._.unpublishStreamFromSession(e,this,t)}),this):this.dispatchEvent(n),(()=>{Z.subscribers.where({streamId:e.id}).filter((e=>e.session.id===this.id&&e.stream)).forEach((e=>{e._disconnect({reason:t}),n.isDefaultPrevented()||e._destroy({reason:t,noStateTransition:!0})}))})()},Pe=function(e){this.dispatchEvent(new _.ArchiveEvent("archiveStarted",e))},Ve=function(e){this.dispatchEvent(new _.ArchiveEvent("archiveDestroyed",e))},Me=function(e){const t=e.target,n=e.changedProperty,r=e.newValue;"status"===n&&"stopped"===r?this.dispatchEvent(new _.ArchiveEvent("archiveStopped",t)):this.dispatchEvent(new _.ArchiveEvent("archiveUpdated",t))},Fe=()=>Z.subscribers.forEach((e=>e._.pauseAndPlayVideoElement())),We=function(){me.token=null,se=null,Ie("disconnected"),oe=null,ie&&(ie.stop(),ie=null),me.connection=null,me.capabilities=new S([]),me.connections.destroy(),me.streams.destroy(),me.archives.destroy()};Ee=function(){ye=X(),We()},Se=function(e){Z.publishers.where({session:this}).forEach((t=>{t.disconnect(e)})),Z.subscribers.where({session:this}).forEach((e=>{e._disconnect()}))},Te=function(e){Z.publishers.where({session:this}).forEach((t=>{t._.streamDestroyed(e)}))},Ce=function(e){Z.subscribers.where({session:this}).forEach((t=>{t._destroy({reason:e})}))};const Ze=function(){ve.debug("OT.Session: connecting to Raptor");const e=b(this.sessionInfo.messagingURL,te);oe=new F(ye,be,e,this.sessionInfo.symphonyAddress,W(this,{connectionEventsSuppressed:q}),ne,["forceMute","adaptive"]),oe.connect(se,this.sessionInfo,{connectionEventsSuppressed:q},((e,t)=>{if(e){const t={};let n;if("ConnectToSession"===e.reason||"GetSessionState"===e.reason){const n=T(e);c(t,{originalMessage:e.message,originalCode:e.code}),e.code=n.code,e.message=n.message}(e.code||e.message||e.reason)&&(n={failureCode:e.code,failureMessage:e.message,failureReason:e.reason,socketId:oe.socketId}),oe=null,this.logConnectivityEvent("Failure",t,n);const r=function(e,t){let n;switch(e){case"WebSocketConnection":if(n=i(G.codes,(e=>e===t)),n)return C[`SOCKET_${n}`];break;case"ConnectToSession":case"GetSessionState":switch(t){case k.CONNECT_FAILED:return C.CONNECT_FAILED;case k.UNEXPECTED_SERVER_RESPONSE:return C.UNEXPECTED_SERVER_RESPONSE;case k.CONNECTION_LIMIT_EXCEEDED:return C.CONNECTION_LIMIT_EXCEEDED}}}(e.reason,e.code);return r&&(e=O(r,new Error(e.message),e.code)),void ke.call(this,e)}ve.debug("OT.Session: Received session state from Raptor",t),this.connection=this.connections.get(oe.id()),this.connection&&(this.capabilities=this.connection.permissions),Ie("connected"),this.logConnectivityEvent("Success",{connectionId:this.connection.id}),this.connection.on("destroyed",Re,this),this.dispatchEvent(new _.SessionConnectEvent(u.SESSION_CONNECTED)),this.connections.on({add:Ne,remove:Oe},this),this.streams.on({add:Ae,remove:Le,update:De},this),this.archives.on({add:Pe,remove:Ve,update:Me},this),this.connections._triggerAddEvents(),this.streams._triggerAddEvents(),this.archives._triggerAddEvents(),D.env.isiOS&&D.env.iOSVersion>=13.3&&this.on("gsmCallEnded",Fe)}))},Be=e=>this.capabilities.permittedTo(e),Ge=(e,t)=>{N.error(`${e.name}: ${e.message}`),"function"==typeof t&&t(e),A.handleJsException({error:e,target:this,analytics:ne})},Ue=e=>{const t=O(e.code,new Error(e.message),e.exceptionCode);return Ge(t),t},$e=()=>this.isNot("connected")?Ue(L.NOT_CONNECTED):Be("forceMute")?null:Ue(L.PERMISSION_DENIED),Xe=e=>"404"===e.code?Ue(L.NOT_FOUND):"403"===e.code?Ue(L.PERMISSION_DENIED):Ue(L.UNEXPECTED_SERVER_RESPONSE);this.reportIssue=e=>{let t=e.id;return f(ne.logEvent.bind(ne))({action:"ReportIssue",variation:"Event",connectionId:ye,payload:{reportIssueId:t}},null)},this.logEvent=function(e,t,n,r){let o={action:e,variation:t,payload:n,sessionId:ge,messagingServer:ce,p2p:ae,partnerId:fe,connectionId:ye};r&&(o=c(r,o)),ne.logEvent(o)},this.logConfigurationFileEvent=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n={}),"Attempt"===e)le=(new Date).getTime();else if("Failure"===e||"Success"===e){const e=(new Date).getTime()-le;c(n,{attemptDuration:e})}te&&(n.proxyUrl=te),this.logEvent("ConfigurationFile",e,t,(0,r.default)({},n))},this.logConnectivityEvent=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n={}),te&&(n.proxyUrl=te),"Attempt"===e&&(ie&&(ie.stop(),N.error("_connectivityAttemptPinger should have been cleaned up")),ue=(new Date).getTime(),ie=new h((()=>{this.logEvent("Connect","Attempting",t,(0,r.default)({},n))}),.2,6),ie.start()),"Failure"===e||"Success"===e||"Cancel"===e){const o=o=>{ie&&(ie.stop(),ie=void 0),this.logEvent("Connect",e,t,(0,r.default)({},n,{attemptDuration:(new Date).getTime()-ue,iceConfig:o,ipWhitelist:ee}))};"Success"===e?this._.getIceConfig().then((e=>{const t={includeServers:J&&J.includeServers||"all",transportPolicy:e.transportPolicy};t.servers=e.servers?e.servers.map((e=>({url:e.urls}))):[],o(t)})):o()}else this.logEvent("Connect",e,t,n)},this.connect=function(){let r;for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];i.length>1&&("string"==typeof i[0]||"number"==typeof i[0])&&"string"==typeof i[1]?(null==e&&(fe=i[0].toString()),r=i[1]):r=i[0];const u=i[i.length-1];if(p.is("connecting","connected"))return ve.warn(`OT.Session: Cannot connect, the session is already ${p.state}`),p;ne.sessionInfo=new Y,We(),Ie("connecting");const l=ye;function d(){const e=ye!==l;return e&&N.debug("Connection was interrupted"),e}if(p.token=!a(r)&&r,se=!a(r)&&r,pe?pe=!1:be=X(),u&&a(u)){let e;const t=function(){e();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];u(void 0,...n)},n=function(){e(),u(...arguments)};e=()=>{p.off("sessionConnected",t),p.off("sessionConnectFailed",n)},p.once("sessionConnected",t),p.once("sessionConnectFailed",n)}if(null==fe||a(fe))return setTimeout(ke.bind(p,O(C.AUTHENTICATION_ERROR,new Error("API Key is undefined. You must pass an API Key to initSession."),k.AUTHENTICATION_ERROR))),p;if(!ge||s(ge)||Array.isArray(ge)){let e;return ge?(e="SessionID is not a string. You must use string as the session ID passed into OT.initSession().",ge=ge.toString()):e="SessionID is undefined. You must pass a sessionID to initSession.",setTimeout(ke.bind(p,O(C.INVALID_SESSION_ID,new Error(e),k.INVALID_SESSION_ID))),p.logConnectivityEvent("Attempt"),p.logConnectivityEvent("Failure",null,{failureReason:"ConnectToSession",failureCode:k.INVALID_SESSION_ID,failureMessage:e}),p}p.apiKey=fe.toString(),fe=fe.toString(),0===x.value.length&&(x.value=fe);const h=Boolean(P.onlyLocal().configUrl),f=!0===ee&&Boolean(P.onlyLocal().ipWhitelistConfigUrl);h||f?p.logConfigurationFileEvent("Attempt"):p.logConfigurationFileEvent("Event",{message:"No configUrl, using local config only"});const m=h||f?P.get({partnerId:fe,token:r,useIpWhitelistConfigUrl:f,proxyUrl:te}):t.resolve(P.onlyLocal());return m.then((e=>((h||f)&&p.logConfigurationFileEvent("Success"),e)),(e=>((h||f)&&p.logConfigurationFileEvent("Failure",{failureMessage:e.message,failureStack:e.stack}),P.onlyLocal()))).then((e=>{if(p.staticConfig=e,ne.staticConfig=e,!1===e.apiEnabled)throw O(C.API_KEY_DISABLED,new Error("The API KEY has been disabled. Access to the service is currently being restricted. Please contact support."));if(d())return;p.logConnectivityEvent("Attempt"),te?p.logEvent("SessionInfo","Attempt",null,{proxyUrl:te}):p.logEvent("SessionInfo","Attempt");const t=e=>{e.code=E(e.code),p.logConnectivityEvent("Failure",null,{failureReason:"GetSessionInfo",failureCode:e.code||"No code",failureMessage:e.message,failureName:e.name}),e.name&&(e=O(e.name,new Error(`${e.message}${e.code?` (${e.code})`:""}`),e.code)),ke.call(p,e)},r=b(e.apiUrl,te);return H({anvilUrl:r,sessionId:n,token:se,connectionId:ye,clientVersion:e.clientVersion}).then((n=>{if(d())return;if(n.partnerId&&n.partnerId!==fe){const e="Authentication Error: The API key does not match the token or session.";return void t(O(C.AUTHENTICATION_ERROR,new Error(e),k.AUTHENTICATION_ERROR))}ne.sessionInfo=n;const r={features:{reconnection:n.reconnection,renegotiation:R()&&n.renegotiation,simulcast:void 0!==n.simulcast&&n.simulcast&&"Chrome"===D.env.name}};if(te&&(r.proxyUrl=te),p.is("connecting")){p.sessionInfo=n,p._.setIceServers(p.sessionInfo.iceServers),ae=n.p2pEnabled,ce=n.messagingServer,p.logEvent("SessionInfo","Success",null,r,{messagingServer:n.messagingServer});const t=e.sessionInfoOverrides;null!=t&&"object"==typeof t&&Object.keys(t).forEach((e=>{Object.defineProperty(p.sessionInfo,e,{value:t[e]})})),Ze.call(p)}}),t)})).catch((e=>{ke.call(p,e)})),p},this.disconnect=function(){oe&&oe.isNot("disconnected")?oe.isNot("disconnecting")&&(oe.isNot("connecting")||this.logConnectivityEvent("Cancel"),Ie("disconnecting"),oe.disconnect(),this.off("gsmCallEnded",Fe)):Ee()},this.destroy=function(){this.streams.destroy(),this.connections.destroy(),this.archives.destroy(),this.disconnect()},this.publish=function(e,t,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),n=n||function(){},this.isNot("connected"))return ne.logError(1010,"OT.exception","We need to be connected before you can publish",null,{action:"Publish",variation:"Failure",failureReason:"unconnected",failureCode:k.NOT_CONNECTED,failureMessage:"We need to be connected before you can publish",sessionId:ge,streamId:e&&e.stream?e.stream.id:null,p2p:this.sessionInfo?this.sessionInfo.p2pEnabled:void 0,messagingServer:this.sessionInfo?this.sessionInfo.messagingServer:null,partnerId:fe}),Ge(O(C.NOT_CONNECTED,new Error("We need to be connected before you can publish"),k.NOT_CONNECTED),n),null;if(!Be("publish")){const e="This token does not allow publishing. The role must be at least `publisher` to enable this functionality",t={failureReason:"Permission",failureCode:k.UNABLE_TO_PUBLISH,failureMessage:e};return this.logEvent("Publish","Failure",null,t),Ge(O(C.PERMISSION_DENIED,new Error(e),k.UNABLE_TO_PUBLISH),n),null}if(!e||"string"==typeof e||D.isElementNode(e))e=K(e,t);else{if(!(e instanceof M))return void Ge(O(C.INVALID_PARAMETER,new Error("Session.publish :: First parameter passed in is neither a string nor an instance of the Publisher"),k.UNABLE_TO_PUBLISH),n);"session"in e&&e.session&&"sessionId"in e.session&&(e.session.sessionId===this.sessionId?ve.warn(`Cannot publish ${e.guid()} again to ${this.sessionId}. Please call session.unpublish(publisher) first.`):ve.warn(`Cannot publish ${e.guid()} publisher already attached to ${e.session.sessionId}. Please call session.unpublish(publisher) first.`))}return we&&e._.forceMuteAudio(),e._.publishToSession(this,ne).catch((e=>{throw e.message=`Session.publish :: ${e.message}`,ve.error(e.code,e.message),e})).then((()=>e)).then((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(null,...t)}),(e=>n(e))),e},this.unpublish=function(e){e?e._.unpublishFromSession(this,"unpublished"):ve.error("OT.Session.unpublish: publisher parameter missing.")},this.subscribe=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0,n=void 0),"function"==typeof n&&(r=n,n=void 0),r=r||function(){},!this.connection||!this.connection.connectionId)return void Ge(O(C.NOT_CONNECTED,new Error("Session.subscribe :: Connection required to subscribe"),k.UNABLE_TO_SUBSCRIBE),r);if(!e)return void Ge(O(C.INVALID_PARAMETER,new Error("Session.subscribe :: stream cannot be null"),k.UNABLE_TO_SUBSCRIBE),r);if(!Object.prototype.hasOwnProperty.call(e,"streamId"))return void Ge(O(C.INVALID_PARAMETER,new Error("Session.subscribe :: invalid stream object"),k.UNABLE_TO_SUBSCRIBE),r);if(n&&!1===n.insertDefaultUI&&t)return void Ge(O(C.INVALID_PARAMETER,new Error("You cannot specify a target element if insertDefaultUI is false"),k.INVALID_PARAMETER),r);t&&!1===t.insertDefaultUI&&(n=t,t=void 0);const o=new U(t,c(n||{},{stream:e,session:this,analytics:ne}),(e=>{e?Ge(e,r):r(null,o)}));return Z.subscribers.add(o),o},this.unsubscribe=function(e){if(!e){const e="OT.Session.unsubscribe: subscriber cannot be null";throw ve.error(e),new Error(e)}return e.stream?(ve.debug(`OT.Session.unsubscribe: subscriber ${e.id}`),e._destroy({reason:"Unsubscribe"}),!0):(ve.warn("OT.Session.unsubscribe:: tried to unsubscribe a subscriber that had no stream"),!1)},this.getSubscribersForStream=function(e){return Z.subscribers.where({streamId:e.id})},this.getPublisherForStream=function(e){let t,n;if("string"==typeof e)t=e;else{if("object"!=typeof e||!e||!Object.hasOwnProperty.call(e,"id"))throw n="Session.getPublisherForStream :: Invalid stream type",ve.error(n),new Error(n);t=e.id}return Z.publishers.where({streamId:t})[0]},this._={getProxyUrl:()=>te,isSocketReconnecting:()=>he,getSocket:()=>oe,reconnecting:function(){he=!0,this.dispatchEvent(new _.SessionReconnectingEvent)}.bind(this),reconnected:function(){he=!1,this.dispatchEvent(new _.SessionReconnectedEvent),this.sessionInfo.reconnection&&(Z.publishers.where({session:this}).forEach((e=>{e._.iceRestart()})),this.sessionInfo.p2pEnabled||Z.subscribers.where({session:this}).forEach((e=>{e._.iceRestart("socket reconnected")})))}.bind(this),dispatchSignal:function(e,t,n){const r=new _.SignalEvent(t,n,e);r.target=this,this.trigger(u.SIGNAL,r),t&&this.dispatchEvent(r)}.bind(this),subscriberChannelUpdate:(e,t,n,r)=>oe?oe.subscriberChannelUpdate(e.id,t.widgetId,n.id,r):(ve.warn("You are disconnected, cannot update subscriber properties ",r),null),streamCreate(e,t,n,r,o,i,s){oe?oe.streamCreate(e,t,n,r,o,void 0,i,s):ve.warn("You are disconnected, cannot create stream ",t)},streamDestroy(e,t){oe?oe.streamDestroy(e,t):ve.warn("You are disconnected, cannot destroy stream ",e)},streamChannelUpdate(e,t,n){oe?oe.streamChannelUpdate(e.id,t.id,n):ve.warn("You are disconnected, cannot update stream properties ",n)},setSocket(e){oe=e},setLogging(e){ve=e},setState:Ie,setIceServers(e){e&&(de={iceServers:v(e),timestamp:Date.now()})},getOtIceServerInfo(){if(864e5-(de?Date.now()-de.timestamp:1/0)>3e5)return t.resolve({transportPolicy:me&&me.sessionInfo&&me.sessionInfo.clientCandidates,servers:de&&de.iceServers});if(!se)return t.resolve({transportPolicy:me&&me.sessionInfo&&me.sessionInfo.clientCandidates,servers:[],needRumorIceServersFallback:!0});const e=V.clientVersion;return H({anvilUrl:(this.staticConfig||V).apiUrl,sessionId:n,token:se,connectionId:ye,clientVersion:e}).then((e=>(me._.setIceServers(e.iceServers),de?{transportPolicy:me&&me.sessionInfo&&me.sessionInfo.clientCandidates,servers:de&&de.iceServers}:{transportPolicy:me.sessionInfo.clientCandidates,servers:[],needRumorIceServersFallback:!0})))},getCodecFlags:()=>({h264:me.sessionInfo.h264,vp9:me.sessionInfo.vp9,vp8:me.sessionInfo.vp8}),getVideoCodecsCompatible:e=>m({RTCPeerConnection:z.RTCPeerConnection,env:D.env,stream:e,codecFlags:me._.getCodecFlags()}),getIceConfig:()=>{if(!J)return me._.getOtIceServerInfo();const e=J&&"relay"===J.transportPolicy?"relay":me.sessionInfo.clientCandidates;return("custom"===J.includeServers?t.resolve({servers:[]}):me._.getOtIceServerInfo()).then((t=>c(t,{transportPolicy:e,servers:[...t.servers,...J.customServers]})))},forceMute:function(e){this.dispatchEvent(new _.MuteForcedEvent(e))}.bind(this),enableMuteOnEntry:()=>{we=!0},addSubscriberToPeerConnectionsQueue:(e,t)=>{xe.push({pc:e,message:t}),_e||(_e=setInterval((()=>{const e=xe.pop();e?e.pc.processMessage("offer",e.message):(clearInterval(_e),_e=null)}),100))},disableMuteOnEntry:()=>{we=!1},privateEvents:new o},this.signal=function(e,t){let n=e,r=t||function(){};if(a(n)&&(r=n,n=null),this.isNot("connected")){const e="Unable to send signal - you are not connected to the session.";Ge(O(C.NOT_CONNECTED,new Error(e),500),r)}else oe.signal(n,(function(e){if(e){const t=o(e.code);return t&&(e=O(t,new Error(e.message),e.code)),void r(e)}for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r(e,...n)}),this.logEvent),e&&e.data&&"string"!=typeof e.data&&ve.warn("Signaling of anything other than Strings is deprecated. Please update the data property to be a string.");function o(e){switch(e){case 400:case 413:return C.INVALID_PARAMETER;case 429:return C.RATE_LIMIT_EXCEEDED;case 404:return C.NOT_FOUND;case 500:return C.NOT_CONNECTED;case 403:return C.PERMISSION_DENIED;case 2001:return C.UNEXPECTED_SERVER_RESPONSE;default:return}}},this.forceDisconnect=function(e,t){if(this.isNot("connected")){const e="Cannot call forceDisconnect(). You are not connected to the session.";return void Ge(O(C.NOT_CONNECTED,new Error(e),k.NOT_CONNECTED),t)}const n="string"==typeof e?e:e.id,r="Invalid Parameter. Check that you have passed valid parameter values into the method call.";n?Be("forceDisconnect")?oe.forceDisconnect(n,(function(e){if(e)Ge(O(C.INVALID_PARAMETER,new Error(r),k.INVALID_PARAMETER),t);else if(t&&a(t)){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];t(e,...o)}})):Ge(O(C.PERMISSION_DENIED,new Error("This token does not allow forceDisconnect. The role must be at least `moderator` to enable this functionality"),k.UNABLE_TO_FORCE_DISCONNECT),t):Ge(O(C.INVALID_PARAMETER,new Error(r),k.INVALID_PARAMETER),t)},this.forceUnpublish=function(e,t){void 0===t&&(t=()=>{});const n=e=>Ge(O(e.name,new Error(e.msg),e.code),t),r={msg:"Invalid Parameter. Check that you have passed valid parameter values into the method call.",code:k.INVALID_PARAMETER,name:C.INVALID_PARAMETER},o={msg:"Cannot call forceUnpublish(). You are not connected to the session.",code:k.NOT_CONNECTED,name:C.NOT_CONNECTED},i={msg:"This token does not allow forceUnpublish. The role must be at least `moderator` to enable this functionality",code:k.UNABLE_TO_FORCE_UNPUBLISH,name:C.PERMISSION_DENIED},s={msg:"The stream does not exist.",name:C.NOT_FOUND},a={msg:"An unexpected error occurred.",name:C.UNEXPECTED_SERVER_RESPONSE,code:k.UNEXPECTED_SERVER_RESPONSE};if(!e)return void n(r);if(p.isNot("connected"))return void n(o);const c=re(e);Be("forceUnpublish")?oe.forceUnpublish(c.id,(e=>{e?"404"===e.code?n(s):"403"===e.code?n(i):n(a):t(null)})):n(i)},this.forceMuteStream=e=>new t(((t,n)=>{const r=$e();r?n(r):e&&e.id?oe.forceMuteStream(e.id,(e=>{e?n(Xe(e)):t()})):n(Ue(L.INVALID_PARAMETER))})),this.forceMuteAll=e=>new t(((t,n)=>{const r=$e();if(r)return void n(r);if(Array.isArray(e)&&!e.every((e=>e instanceof I))||e&&!Array.isArray(e))return void n(Ue(L.INVALID_PARAMETER));const o=(e||[]).map((e=>e.id));oe.forceMuteAll(o,!0,(e=>{e?n(Xe(e)):t()}))})),this.disableForceMute=()=>new t(((e,t)=>{const n=$e();n?t(n):oe.forceMuteAll([],!1,(n=>{n?t(Xe(n)):e()}))})),this.isConnected=()=>this.is("connected"),this.capabilities=new S([])}}}).call(this,n(0))},function(e,t,n){"use strict";const r=n(8),o=n(22),i=[400,403,409,r.CONNECTION_LIMIT_EXCEEDED],s="ConnectToSession";e.exports=function(e){let t,n;if(e.reason===s&&e.code===r.CONNECT_FAILED)t=e.code,n=o.getTitleByCode(e.code);else if(e.code&&i.indexOf(Number(e.code))>-1)switch(t=r.CONNECT_FAILED,e.reason){case s:e.code===r.CONNECTION_LIMIT_EXCEEDED?(t=e.code,n="Cannot connect -- the limit for concurrent connections to the session has been reached"):n="Received error response to connection create message.";break;case"GetSessionState":n="Received error response to session read";break;default:n=""}else t=r.UNEXPECTED_SERVER_RESPONSE,n="Unexpected server response. Try this operation again later.";return{code:t,message:n}}},function(e,t,n){"use strict";const r=n(2),o=n(61).once;e.exports=()=>o()&&(r.isChromiumEdge||["Chrome","Safari","Firefox","Opera"].includes(r.name))},function(e,t,n){"use strict";e.exports=function(e){return JSON.stringify(e)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=e=>{let t=e.logger,n=e.obj;e.eventNames.forEach((e=>{n.on(e,(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.spam("emitted",e,r)}))}))}},function(e,t,n){"use strict";const r=n(15),o=n(22),i=n(6),s=n(1)("Dispatcher"),a=n(172),c=n(713),u=function(){i(this),this.callbacks={}};e.exports=u,u.prototype.registerCallback=function(e,t){this.callbacks[e]=t},u.prototype.triggerCallback=function(e){if(!e)return;const t=this.callbacks[e];if(t&&r(t)){const e=Array.prototype.slice.call(arguments);e.shift(),t(...e)}delete this.callbacks[e]},u.prototype.onClose=function(e){this.emit("close",e)},u.prototype.onReconnected=function(){this.emit("reconnected")},u.prototype.onReconnecting=function(){this.emit("reconnecting")},u.prototype.dispatch=function(e){if(e.type===a.STATUS){var t;let n;if(s.debug(e),e.isError){let t;if("string"==typeof e.data)try{const n=JSON.parse(e.data);n&&"object"==typeof n&&(t=n.reason)}catch(e){s.warn("Failed to parse rumorMessage.data",e)}n=new o(e.status,t)}const r=e.data?JSON.parse(e.data):"";return(null==r||null==(t=r.mute)?void 0:t.active)&&this.dispatchMuteOnEntry(),void this.triggerCallback(e.transactionId,n,e)}const n=c(e);switch(s.debug(`${n.signature}:`,n),n.resource){case"session":this.dispatchSession(n);break;case"connection":this.dispatchConnection(n);break;case"stream":this.dispatchStream(n);break;case"stream_channel":this.dispatchStreamChannel(n);break;case"subscriber":this.dispatchSubscriber(n);break;case"subscriber_channel":this.dispatchSubscriberChannel(n);break;case"signal":this.dispatchSignal(n);break;case"archive":this.dispatchArchive(n);break;case"source":this.dispatchSource(n);break;default:s.debug(`Type ${n.resource} is not currently implemented`)}},u.prototype.dispatchSession=function(e){switch(e.method){case"read":this.emit("session#read",e.content,e.transactionId);break;case"update":this.emit("session#update",e.content);break;default:s.debug(`${e.signature} is not currently implemented`)}},u.prototype.dispatchMuteOnEntry=function(){this.emit("session#muted")},u.prototype.dispatchConnection=function(e){switch(e.method){case"created":this.emit("connection#created",e.content);break;case"deleted":this.emit("connection#deleted",e.params.connection,e.reason);break;default:s.debug(`${e.signature} is not currently implemented`)}},u.prototype.dispatchStream=function(e){switch(e.method){case"created":this.emit("stream#created",e.content,e.transactionId);break;case"deleted":this.emit("stream#deleted",e.params.stream,e.reason,e.content);break;case"updated":this.emit("stream#updated",e.params.stream,e.content);break;case"update":this.emit("stream#update",e.params.stream,e.content);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(e.method,e);break;default:s.debug(`${e.signature} is not currently implemented`)}},u.prototype.dispatchStreamChannel=function(e){"updated"===e.method?this.emit("streamChannel#updated",e.params.stream,e.params.channel,e.content):s.debug(`${e.signature} is not currently implemented`)},u.prototype.dispatchJsep=function(e,t){this.emit(`jsep#${e}`,t.params.stream,t.fromAddress,t)},u.prototype.dispatchSubscriberChannel=function(e){switch(e.method){case"updated":this.emit("subscriberChannel#updated",e.params.stream,e.params.channel,e.content);break;case"update":this.emit("subscriberChannel#update",e.params.subscriber,e.params.stream,e.content);break;default:s.debug(`${e.signature} is not currently implemented`)}},u.prototype.dispatchSubscriber=function(e){switch(e.method){case"created":this.emit("subscriber#created",e.params.stream,e.fromAddress,e.content.id);break;case"deleted":this.dispatchJsep("unsubscribe",e),this.emit("subscriber#deleted",e.params.stream,e.fromAddress);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(e.method,e);break;default:s.debug(`${e.signature} is not currently implemented`)}},u.prototype.dispatchSignal=function(e){"signal"===e.method?this.emit("signal",e.fromAddress,e.content):s.debug(`${e.signature} is not currently implemented`)},u.prototype.dispatchArchive=function(e){switch(e.method){case"created":this.emit("archive#created",e.content);break;case"updated":this.emit("archive#updated",e.params.archive,e.content)}},u.prototype.dispatchSource=function(e){switch(e.method){case"create":this.emit("source#create",e.params.source,e.params.stream,e.reason);break;case"delete":this.emit("source#delete",e.params.source,e.params.stream,e.reason);break;default:s.debug(`${e.signature} is not currently implemented`)}}},function(e,t,n){"use strict";const r=n(19),o=n(5),i=n(716),s=n(717),a=n(313),c=n(718),u=n(34)().onlyLocal(),l={};e.exports=l,l.connections={},l.connections.create=function(e){const t=e.apiKey,n=e.sessionId,r=e.connectionId,i=e.connectionEventsSuppressed,s=e.capabilities;return a({method:"create",uri:`/v2/partner/${t}/session/${n}/connection/${r}`,content:{userAgent:o.env.userAgent,clientVersion:u.clientVersion,capabilities:s||[],connectionEventsSuppressed:i}})},l.connections.destroy=function(e){const t=e.apiKey,n=e.sessionId,r=e.connectionId;return a({method:"delete",uri:`/v2/partner/${t}/session/${n}/connection/${r}`,content:{}})},l.sessions={},l.sessions.get=function(e,t){return a({method:"read",uri:`/v2/partner/${e}/session/${t}`,content:{}})},l.streams={},l.streams.get=function(e,t,n){return a({method:"read",uri:`/v2/partner/${e}/session/${t}/stream/${n}`,content:{}})},l.streams.channelFromOTChannel=function(e){const t={id:e.id,type:e.type,active:e.active};return"video"===e.type&&(t.width=e.width,t.height=e.height,t.orientation=e.orientation,t.frameRate=e.frameRate,"default"!==e.source&&(t.source=e.source),t.fitMode=e.fitMode),t},l.streams.create=function(e){void 0===e&&(e={});const t=e,n=t.apiKey,r=t.sessionId,o=t.streamId,i=t.name,s=t.audioFallbackEnabled,c=t.channels,u=t.minBitrate,d=t.maxBitrate,p=t.sourceStreamId,h={id:o,name:i,audioFallbackEnabled:s,channel:c.map((e=>l.streams.channelFromOTChannel(e)))};return u&&(h.minBitrate=Math.round(u)),d&&(h.maxBitrate=Math.round(d)),p&&(h.sourceStreamId=p),a({method:"create",uri:`/v2/partner/${n}/session/${r}/stream/${o}`,content:h})},l.streams.destroy=function(e,t,n,r){const o={};return r&&(o.sourceStreamId=r),a({method:"delete",uri:`/v2/partner/${e}/session/${t}/stream/${n}`,content:o})},l.streamChannels={},l.streamChannels.update=function(e,t,n,r,o){return a({method:"update",uri:`/v2/partner/${e}/session/${t}/stream/${n}/channel/${r}`,content:o})},l.subscribers={},l.subscribers.create=function(e){void 0===e&&(e={});const t=e,n=t.apiKey,r=t.sessionId,o=t.streamId,u=t.subscriberId,l=t.connectionId,d=t.channelsToSubscribeTo,p=t.sourceStreamId,h={id:u,connection:l,keyManagementMethod:c,bundleSupport:i(),rtcpMuxSupport:s()};return d&&(h.channel=d),p&&(h.sourceStreamId=p),a({method:"create",uri:`/v2/partner/${n}/session/${r}/stream/${o}/subscriber/${u}`,content:h})},l.subscribers.destroy=function(e,t,n,r){return a({method:"delete",uri:`/v2/partner/${e}/session/${t}/stream/${n}/subscriber/${r}`,content:{}})},l.subscribers.update=function(e,t,n,r,o){return a({method:"update",uri:`/v2/partner/${e}/session/${t}/stream/${n}/subscriber/${r}`,content:o})},l.subscriberChannels={},l.subscriberChannels.update=function(e,t,n,r,o,i){return a({method:"update",uri:`/v2/partner/${e}/session/${t}/stream/${n}/subscriber/${r}/channel/${o}`,content:i})},l.signals={},l.signals.create=function(e,t,n,o,i){const s={};return void 0!==o&&(s.type=o),void 0!==i&&(s.data=i),a({method:"signal",uri:`/v2/partner/${e}/session/${t}${void 0!==n?`/connection/${n}`:""}/signal/${r()}`,content:s})},l.forceMute={},l.forceMute.update=e=>{const t=e.apiKey,n=e.sessionId,r=e.streamId,o=e.active,i=e.excludedStreamIds,s={reason:"mute",channels:["audio"],active:o,locked:!1};return i&&(s.exclusion=i),a({method:"update",uri:`/v2/partner/${t}/session/${n}${r?`/stream/${r}`:""}`,content:s})}},function(e,t,n){"use strict";const r=n(37),o=n(72),i=n(173),s=n(316),a=n(318);e.exports=function(e,t,n){var c;this.toRaptorMessage=function(){let t=this.to;return t&&"string"!=typeof t&&(t=t.id),s.signals.create(o.value,e,t,this.type,this.data)},this.toHash=function(){return n},this.error=null,this.retryAfterReconnect=!0,n&&(n.hasOwnProperty("data")&&(this.data=r(n.data),this.error=function(e){let t=null;if(null==e)t={code:400,reason:"The signal data was null or undefined. Either set it to a String value or omit it"};else try{JSON.stringify(e).length>8192&&(t={code:413,reason:"The data field was too long, the maximum size of it is 8192 characters"})}catch(e){t={code:400,reason:"The data field was not valid JSON"}}return t}(this.data)),n.hasOwnProperty("to")&&(this.to=n.to,this.error||(this.error=(c=this.to)?c instanceof i||c._tag===a?null:{code:400,reason:"The To field was invalid"}:{code:400,reason:"The signal to field was invalid. Either set it to a OT.Connection, OT.Session, or omit it entirely"})),n.hasOwnProperty("type")&&(this.error||(this.error=function(e){let t=null;return null==e?t={code:400,reason:"The signal type was null or undefined. Either set it to a String value or omit it"}:e.length>128?t={code:413,reason:"The signal type was too long, the maximum length of it is 128 characters"}:function(e){return!/^[a-zA-Z0-9\-\._~]+$/.exec(e)}(e)&&(t={code:400,reason:"The signal type was invalid, it can only contain letters, numbers, '-', '_', and '~'."}),t}(n.type)),this.type=n.type),n.hasOwnProperty("retryAfterReconnect")&&(this.error||(this.error=function(e){let t=null;return!0!==e&&!1!==e&&(t={code:400,reason:"The signal retryAfterReconnect was not true or false. Either set it to a Boolean value or omit it"}),t}(n.retryAfterReconnect)),this.retryAfterReconnect=n.retryAfterReconnect)),this.valid=null===this.error}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";var r=n(3),o=r(n(12)),i=r(n(13));const s=n(320),a=n(49),c=n(173),u=n(721),l=n(315),d=n(1)("SessionDispatcher"),p=n(21),h=n(171),f=n(150),m=n(168);function g(e,t){if(t.streams.has(e.id))return;const n=function(e,t){const n=e.channel.map((e=>new f(e))),r=e.connectionId?e.connectionId:e.connection.id;return new h(e.id,e.name,e.creationTime,t.connections.get(r),t,n)}(e,t);return t.streams.add(n),n}function b(e,t){if(t.archives.has(e.id))return;const n=function(e){return new s(e.id,e.name,e.status)}(e);return t.archives.add(n),n}const y=function(e){const t={};this.enqueue=function(){const n=arguments[0],r=Array.prototype.slice.call(arguments,1);t[n]||(t[n]=new u(e)),t[n].enqueue.apply(t[n],r)},this.triggerConnectionCreated=function(e){t[`connectionCreated${e.id}`]&&t[`connectionCreated${e.id}`].triggerAll()},this.triggerSessionConnected=function(e){t.sessionConnected&&t.sessionConnected.triggerAll(),e.forEach((function(e){this.triggerConnectionCreated(e)}),this)}},v={};e.exports=function(e,t){let n=(void 0===t?{}:t).connectionEventsSuppressed;const r=new l;let s=!1;const u=new y(r);r.on("reconnecting",(()=>{e._.reconnecting()})),r.on("reconnected",(()=>{e._.reconnected()})),r.on("close",(t=>{const n=e.connection;n&&(n.destroyedReason()?d.debug(`Socket was closed but the connection had already been destroyed. Reason: ${n.destroyedReason()}`):n.destroy(t))}));const h=function(t,n){return e.connections.has(t.id)?e.connections.get(t.id):(t=c.fromHash(t),(n||e.connection&&t.id!==e.connection.id)&&(e.connections.add(t),u.triggerConnectionCreated(t)),Object.keys(v).forEach((r=>{const o=v[r];if(o&&t.id===o.connection.id){g(o,e),delete v[o.id];const r={debug:n?"connection came in session#read":"connection came in connection#created",streamId:o.id,connectionId:t.id};e.logEvent("streamCreated","warning",r)}})),t)};r.on("session#read",((t,n)=>{let o;const i={streams:[],connections:[],archives:[]};t.connection.forEach((e=>{o=h(e,!0),i.connections.push(o)})),t.stream.forEach((t=>{i.streams.push(g(t,e))})),(t.archive||t.archives).forEach((t=>{i.archives.push(b(t,e))})),r.triggerCallback(n,null,i),s=!0,u.triggerSessionConnected(e.connections)})),r.on("session#update",(t=>{if("mute"!==t.reason)return void d.debug("session#update that handle this reason is not currently implemented");const n=!0===t.active;e._.forceMute({active:n}),n?e._.enableMuteOnEntry():e._.disableMuteOnEntry()})),r.on("session#muted",(()=>{e._.enableMuteOnEntry(),e._.forceMute({active:!0})})),r.on("connection#created",(e=>{h(e)})),r.on("connection#deleted",((t,n)=>{(t=e.connections.get(t))?t.destroy(n):d.warn("A connection was deleted that we do not know about")})),r.on("stream#created",((t,o)=>{const i=t.id,s=t.sourceStreamId,a=t.connection;let c;if(n){if(null==a||null==a.id)return void e.logEvent("SessionDispatcher:stream#created","Event",{connection:a,info:"Stream did not contain a connection object. Event ignored"});h(a)}const u=t.connectionId||a.id;if(e.connections.has(u))c=g(t,e);else{v[i]=t;const n={debug:"eventOrderError -- streamCreated event before connectionCreated",streamId:i,sourceStreamId:m(s)};e.logEvent("streamCreated","warning",n)}c?(c.publisher&&c.publisher.setStream(c),r.triggerCallback(o,null,c)):e.sessionInfo.isAdaptiveEnabled&&"P2P"===s&&p.subscribers.where({streamId:i}).forEach((e=>{e._.startRoutedToRelayedTransition()}))})),r.on("stream#deleted",((t,n,r)=>{const o=e.streams.get(t),i=r.sourceStreamId,s=p.subscribers,a=e.sessionInfo.isAdaptiveEnabled&&"P2P"===i;(o||a)&&(a?s.where({streamId:t}).forEach((e=>{e._.startRelayedToRoutedTransition()})):o.destroy(n))})),r.on("stream#updated",((t,n)=>{const r=e.streams.get(t);r?r._.update(n):d.error(`A stream does not exist with the id of ${t}, for stream#updated message!`)})),r.on("stream#update",((t,n)=>{const r=e.streams.get(t),o=n.reason,i=n.active;r?"mute"===o?i&&r._.forceMute(n):d.debug("stream#update that handle this reason is not currently implemented"):d.error(`A stream does not exist with the id of ${t}, for stream#updated message!`)})),r.on("streamChannel#updated",((t,n,r)=>{let o;t&&(o=e.streams.get(t))?o._.updateChannel(n,r):d.error("Unable to determine streamId, or the stream does not exist, for streamChannel message!")}));const f=(t,n,r,s)=>{let u,l;const h={streamId:n},f=p.subscribers,m=p.publishers;switch(u=s.params.subscriber?{widgetId:s.params.subscriber}:h,t){case"offer":l=[].concat(f.where(u),m.where(h)).slice(0,1);break;case"answer":case"pranswer":l=[].concat(m.where(h),f.where(u)).slice(0,1);break;case"generateoffer":case"unsubscribe":l=m.where(h);break;case"candidate":l=[].concat(f.where(u),m.where(h));break;default:return void d.debug(`jsep#${t} is not currently implemented`)}if(0===l.length)return;let g=e.connections.get(r);!g&&r.match(/^symphony\./)&&(g=c.fromHash({id:r,creationTime:Math.floor(a())}),e.connections.add(g)),l.forEach(function(){var e=(0,i.default)(o.default.mark((function e(n){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.processMessage(t,r,s);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),d.error("Error occurred during processMessage",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}())};return r.on("jsep#offer",f.bind(null,"offer")),r.on("jsep#answer",f.bind(null,"answer")),r.on("jsep#pranswer",f.bind(null,"pranswer")),r.on("jsep#generateoffer",f.bind(null,"generateoffer")),r.on("jsep#unsubscribe",f.bind(null,"unsubscribe")),r.on("jsep#candidate",f.bind(null,"candidate")),r.on("subscriberChannel#updated",((t,n,r)=>{t&&e.streams.has(t)?e.streams.get(t)._.updateChannel(n,r):d.error("Unable to determine streamId, or the stream does not exist, for subscriberChannel#updated message!")})),r.on("subscriberChannel#update",((t,n,r)=>{n&&e.streams.has(n)?p.subscribers.has(t)?p.subscribers.get(t).disableVideo(r.active):d.error("Unable to determine subscriberId, or the subscriber does not exist, for subscriberChannel#update message!"):d.error("Unable to determine streamId, or the stream does not exist, for subscriberChannel#update message!")})),r.on("signal",((t,r)=>{if(n){let n=r.connection||r.fromConnection;null!=n&&null!=n.id||(n=function(e){return{id:e,creationTime:(new Date).getTime(),data:{},capablities:{},permissions:[]}}(t),e.logEvent("SessionDispatcher:Signal","Event",{fromAddress:t,connection:r.connection,fromConnection:r.fromConnection,info:"Signal did not contain a connection object. One has been constructed",constructedConnection:n})),h(n)}const o=r.type,i=r.data,a=e.connections.get(t);e.connection&&t===e.connection.connectionId?s?e._.dispatchSignal(a,o,i):u.enqueue("sessionConnected","signal",t,o,i):e.connections.get(t)?e._.dispatchSignal(a,o,i):""===t?e._.dispatchSignal(null,o,i):u.enqueue(`connectionCreated${t}`,"signal",t,o,i)})),r.on("archive#created",(t=>{b(t,e)})),r.on("archive#updated",((t,n)=>{const r=e.archives.get(t);r?r._.update(n):d.error(`An archive does not exist with the id of ${t}, for archive#updated message!`)})),r.on("source#create",((t,n,r)=>{const o=m(t);e.logEvent("SessionDispatcher:source#create","Event",{sourceStreamId:o,streamId:n,reason:r}),d.debug(`Received a request from RUMOR to start a transition to ${t} for the stream ID ${n} with the reason: ${r}`),p.publishers.where({streamId:n}).forEach((e=>{e._.startRoutedToRelayedTransition()}))})),r.on("source#delete",((t,n,r)=>{e.logEvent("SessionDispatcher:source#delete","Event",{sourceStreamId:m(t),streamId:n,reason:r}),d.debug(`Received a request from RUMOR to start a transition from P2P to MANTIS for the stream ID ${n} with the reason: ${r}`),p.publishers.where({streamId:n}).forEach((e=>{e._.startRelayedToRoutedTransition()}))})),r}},function(e,t,n){"use strict";const r=n(23)(),o=n(6);e.exports=function(e,t,n){this.id=e,this.name=t,this.status=n,this._={},o(this),this._.update=e=>{Object.keys(e).forEach((t=>{const n=this[t];this[t]=e[t];const o=new r.ArchiveUpdatedEvent(this,t,n,this[t]);this.dispatchEvent(o)}))},this.destroy=()=>{}}},function(e,t,n){"use strict";const r=n(24)().getAudioOutputMediaDevices;e.exports=()=>r()},function(e,t,n){"use strict";const r=n(24)().getActiveAudioOutputDevice;e.exports=()=>r()},function(e,t,n){"use strict";(function(t){var r=n(3),o=r(n(12)),i=r(n(13));const s=n(21),a=n(105).setCurrentAudioOutputDeviceId,c=n(322),u=n(24)(),l=u.getDefaultAudioOutputDeviceId,d=u.getAudioOutputMediaDevices,p=n(294),h=new(n(27)),f=(e,t)=>{h.logEvent({action:"updateSubscribersSinkId",variation:e,payload:t})},m=e=>{const n=s.subscribers.map((t=>t._.setSinkId(e)));return t.all(n)},g=function(){var e=(0,i.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return e.prev=2,f("Attempt",{deviceId:t}),e.next=6,m(t);case 6:f("Success",{deviceId:t}),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(2),f("Failure",{deviceId:t,error:null==e.t0?void 0:e.t0.message}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.default)(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return t=e.sent,n=l(t),e.prev=4,e.next=7,g(n);case 7:a(n),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:return t=e.sent,e.prev=3,e.next=6,g(t.deviceId);case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),e.next=12,b();case 12:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}();e.exports=function(){var e=(0,i.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f("Attempt",{deviceId:t}),e.next=4,m(t);case 4:f("Success",{deviceId:t}),a(t),e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(0),f("Failure",{deviceId:t,error:null==e.t0?void 0:e.t0.message}),e.next=13,y();case 13:throw e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}).call(this,n(0))},function(e,t,n){"use strict";n(325);const r=n(37),o=n(26),i=n(6),s=n(126),a=n(34)(),c=n(27),u=n(250),l=n(545),d=n(546),p=a.onlyLocal(),h={};h.noConflict=n(547)(),(void 0!==typeof window?window:__webpack_require__.g).OT=h,e.exports=h,(()=>{let e=h;Object.defineProperty(void 0!==typeof window?window:__webpack_require__.g,"TB",{get:()=>(e===h&&console.warn("window.TB is deprecated, and will be removed in the future. Please access via window.OT"),e),set:t=>{e=t},configurable:!0})})();const f=n(142)(void 0!==typeof window?window:__webpack_require__.g),m=n(5),g=n(72),b=n(143),y=n(253),v=n(144),w=n(145),x=n(254),S=n(146),E=n(4),T=n(8),C=n(255),_=n(241),I=n(1)("OT"),k=n(119),R=n(574),N=n(22),O=n(100).parseIceServers,A=n(267),D=n(21),L=n(150),P=n(152),V=n(153),M=n(101)({global:f}),F=n(11)({}),W=n(159)(),Z=n(280)({otError:F}),B=n(281)(),G=n(286)({global:f}),U=n(24)({getNativeEnumerateDevices:G}),$=n(23)(),X=n(161)(),j=n(628)({otError:F,global:f}),z=n(162)({chromeExtensionHelper:Z,otError:F}),H=n(633)({deviceHelpers:U,generateConstraintInfo:C,getUserMediaHelper:j,global:f,OTHelpers:m,screenSharing:z}),Y=n(636)({otError:F,processPubOptions:H}),K=n(163)({otError:F}),J=n(74),q=n(291)(),Q=n(292)({otError:F}),ee=n(293)({global:f,videoElementErrorMap:Q}),te=n(164)({global:f}),ne=n(295)({PeerConnection:M,setCertificates:te}),re=n(296)({PeerConnection:M,setCertificates:te}),oe=n(297)(),ie=n(645)({otError:F}),se=n(107)({NativeVideoElementWrapper:ee}),ae=n(151)(),ce=n(165)({VideoElementFacade:se}),ue=n(300)({interpretPeerConnectionError:K,otError:F,SubscriberPeerConnection:re,WidgetView:ce}),le=n(169)({APIKEY:g,createChromeMixin:B,deviceHelpers:U,EnvironmentLoader:S,Errors:E,Events:$,ExceptionCodes:T,calculateCapableSimulcastStreams:y,global:f,interpretPeerConnectionError:K,IntervalRunner:J,Microphone:q,otError:F,OTErrorClass:N,OTHelpers:m,parseIceServers:O,processPubOptions:H,PUBLISH_MAX_DELAY:A,PublisherPeerConnection:ne,PublishingState:oe,StreamChannel:L,systemRequirements:V,VideoOrientation:ae,WidgetView:ce}),de=n(309)({otError:F,Publisher:le}),pe=n(310)({global:f,initPublisher:de,otError:F,Publisher:le,Subscriber:ue}),he=n(725)({Session:pe});i(h);const fe=n(726);u(h,"$",{name:"OT.$",getMessage:"Please use an external library like jQuery to select elements from the page.",value:m}),h.APIKEY=g.value,h.AnalyserAudioLevelSampler=w,h.Archive=n(320),h.ArchiveEvent=$.ArchiveEvent,h.ArchiveUpdatedEvent=$.ArchiveUpdatedEvent,h.AudioLevelTransformer=b,h.AudioLevelUpdatedEvent=$.AudioLevelUpdatedEvent,h.Capabilities=n(170),h.Chrome=v,h.Connection=n(173),h.ConnectionCapabilities=h.Connection.Capabilities,h.ConnectionEvent=$.ConnectionEvent,Object.keys(k).forEach((e=>{h[e.toUpperCase()]=k[e].priority})),h.NONE=0,h.debug=I.debug,h.error=I.error,h.info=I.info,h.log=I.log,h.warn=I.warn,h.DestroyedEvent=$.DestroyedEvent,h.EnvLoadedEvent=$.EnvLoadedEvent,h.Error=N,h.Error.on(o.EXCEPTION,(e=>{if(e.target===h.Error){const t=r(e);t.target=h,h.dispatchEvent(t)}else h.dispatchEvent(e)})),h.Event=s,h.ExceptionCodes=T,h.ExceptionEvent=$.ExceptionEvent,h.getDevices=n(729),h.getAudioOutputDevices=n(321),h.getActiveAudioOutputDevice=n(322),h.setAudioOutputDevice=n(730)(),h.GetAudioLevelSampler=x,h.HAS_REQUIREMENTS=1,h.IntervalRunner=J,h.IssueReportedEvent=$.IssueReportedEvent,h.MediaStoppedEvent=$.MediaStoppedEvent,h.Microphone=q,h.NOT_HAS_REQUIREMENTS=0,h.PeerConnection=M,h.PeerConnection.QOS=n(278).default,h.Publisher=le,h.PublisherPeerConnection=ne,h.PublishingState=oe,h.MuteForcedEvent=$.MuteForcedEvent,h.Session=pe,h.SessionConnectEvent=$.SessionConnectEvent,h.SessionDisconnectEvent=$.SessionDisconnectEvent,h.SessionDispatcher=n(319),h.Signal=n(317),h.SignalEvent=$.SignalEvent,h.Stream=n(171),h.StreamChannel=L,h.StreamEvent=$.StreamEvent,h.StreamPropertyChangedEvent=$.StreamPropertyChangedEvent,h.StreamUpdatedEvent=$.StreamUpdatedEvent,h.StylableComponent=P,h.Subscriber=ue,h.SubscriberPeerConnection=re,h.SubscribingState=n(303),h.VideoDimensionsChangedEvent=$.VideoDimensionsChangedEvent,h.VideoDisableWarningEvent=$.VideoDisableWarningEvent,h.VideoElement=se,h.VideoEnabledChangedEvent=$.VideoEnabledChangedEvent,h.VideoOrientation=ae,h.WidgetView=ce,h.getSupportedCodecs=fe,h._={AnalyticsHelper:c,getClientGuid:_.get,StaticConfig:a},Object.defineProperty(h,"version",{value:p.version});const me={};u(me,"version",{value:p.version,name:"OT.properties.version",getWarning:"Please use OT.version instead",warnOnSet:!0,setWarning:"Mutating version has no effect"}),l.forEach((e=>{let t,n;if(Array.isArray(e)){const r=e[0],o=e[1];n=r,t=p[o]||o}else t=p[e],n=e;const r=(o=n,d.includes(o));var o;u(me,n,{value:t,name:`OT.properties.${n}`,warnOnSet:!0,canSet:r,setWarning:r?`Mutating ${n} can cause side effects`:`Mutating ${n} has no effect`})})),h.properties=me,h.audioContext=W,h.checkScreenSharingCapability=z.checkCapability,h.checkSystemRequirements=V.check,h.components={},h.generateSimpleStateMachine=X,h.getErrorTitleByCode=N.getTitleByCode,h.getLogs=I.getLogs,h.getStatsAdpater=n(274),h.getStatsHelpers=n(75),h.getUserMedia=Y,h.handleJsException=N.handleJsException,h.initPublisher=de,h.setProxyUrl=n(139).setProxyUrl,h.initSession=function(e,t,n){return null==t&&(t=e,e=null),0===g.value.length&&e&&(g.value=e,h.APIKEY=e),he(e,t,n)};const ge=(e,t)=>()=>(console.warn(`${e} is deprecated and will be removed in a future version of OpenTok`),t);Object.defineProperties(h,{isUnloaded:{get:ge("OT.isUnloaded",S.isUnloaded)},onLoad:{get:ge("OT.onLoad",S.onLoad)},onUnload:{get:ge("OT.onUnload",S.onUnload)},overrideGuidStorage:{get:ge("OT.overrideGuidStorage",_.override)}}),h.pickScreenSharingHelper=z.pickHelper,h.publishers=D.publishers,h.registerScreenSharingExtension=z.registerExtension,h.registerScreenSharingExtensionHelper=z.registerExtensionHelper,h.reportIssue=ie,h.sessions=D.sessions,h.setLogLevel=R,h.shouldLog=I.shouldLog,h.subscribers=D.subscribers,h.unblockAudio=n(167),h.upgradeSystemRequirements=V.upgrade,S.onUnload((()=>{D.publishers.destroy(),D.subscribers.destroy(),D.sessions.destroy("unloaded")})),n(731)()},function(e,t,n){var r=n(326);"string"==typeof r&&(r=[[e.i,r,""]]);n(340)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(327)(!1);var r=n(328),o=r(n(329)),i=r(n(330)),s=r(n(331)),a=r(n(332)),c=r(n(333)),u=r(n(334)),l=r(n(335)),d=r(n(336)),p=r(n(337)),h=r(n(338)),f=r(n(339));t.push([e.i,"/*!\n * Copyright (c) 2017 TokBox, Inc.\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n */\n\n/**\n * OT Base styles\n */\n\n/* Root OT object, this is where our CSS reset happens */\n.OT_root,\n.OT_root * {\n  color: #ffffff;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font-family: Arial, Helvetica, sans-serif;\n  vertical-align: baseline;\n}\n\n/**\n * Specific Element Reset\n */\n\n.OT_root h1,\n.OT_root h2,\n.OT_root h3,\n.OT_root h4,\n.OT_root h5,\n.OT_root h6 {\n  color: #ffffff;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 100%;\n  font-weight: bold;\n}\n\n.OT_root header {\n\n}\n\n.OT_root footer {\n\n}\n\n.OT_root div {\n\n}\n\n.OT_root section {\n\n}\n\n.OT_root video {\n\n}\n\n.OT_root button {\n\n}\n\n.OT_root strong {\n  font-weight: bold;\n}\n\n.OT_root em {\n  font-style: italic;\n}\n\n.OT_root a,\n.OT_root a:link,\n.OT_root a:visited,\n.OT_root a:hover,\n.OT_root a:active {\n  font-family: Arial, Helvetica, sans-serif;\n}\n\n.OT_root ul, .OT_root ol {\n  margin: 1em 1em 1em 2em;\n}\n\n.OT_root ol {\n  list-style: decimal outside;\n}\n\n.OT_root ul {\n  list-style: disc outside;\n}\n\n.OT_root dl {\n  margin: 4px;\n}\n\n.OT_root dl dt,\n.OT_root dl dd {\n  float: left;\n  margin: 0;\n  padding: 0;\n}\n\n.OT_root dl dt {\n  clear: left;\n  text-align: right;\n  width: 50px;\n}\n\n.OT_root dl dd {\n  margin-left: 10px;\n}\n\n.OT_root img {\n  border: 0 none;\n}\n\n/* Modal dialog styles */\n\n/* Modal dialog styles */\n\n.OT_dialog-centering {\n  display: table;\n  width: 100%;\n  height: 100%;\n}\n\n.OT_dialog-centering-child {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.OT_dialog {\n  position: relative;\n\n  box-sizing: border-box;\n  max-width: 576px;\n  margin-right: auto;\n  margin-left: auto;\n  padding: 36px;\n  text-align: center; /* centers all the inline content */\n\n  background-color: #363636;\n  color: #fff;\n  box-shadow: 2px 4px 6px #999;\n  font-family: 'Didact Gothic', sans-serif;\n  font-size: 13px;\n  line-height: 1.4;\n}\n\n.OT_dialog * {\n  font-family: inherit;\n  box-sizing: inherit;\n}\n\n.OT_closeButton {\n  color: #999999;\n  cursor: pointer;\n  font-size: 32px;\n  line-height: 36px;\n  position: absolute;\n  right: 18px;\n  top: 0;\n}\n\n.OT_dialog-messages {\n  text-align: center;\n}\n\n.OT_dialog-messages-main {\n  margin-bottom: 36px;\n  line-height: 36px;\n\n  font-weight: 300;\n  font-size: 24px;\n}\n\n.OT_dialog-messages-minor {\n  margin-bottom: 18px;\n\n  font-size: 13px;\n  line-height: 18px;\n  color: #A4A4A4;\n}\n\n.OT_dialog-messages-minor strong {\n  color: #ffffff;\n}\n\n.OT_dialog-actions-card {\n  display: inline-block;\n}\n\n.OT_dialog-button-title {\n  margin-bottom: 18px;\n  line-height: 18px;\n\n  font-weight: 300;\n  text-align: center;\n  font-size: 14px;\n  color: #999999;\n}\n.OT_dialog-button-title label {\n  color: #999999;\n}\n\n.OT_dialog-button-title a,\n.OT_dialog-button-title a:link,\n.OT_dialog-button-title a:active {\n  color: #02A1DE;\n}\n\n.OT_dialog-button-title strong {\n  color: #ffffff;\n  font-weight: 100;\n  display: block;\n}\n\n.OT_dialog-button {\n  display: inline-block;\n\n  margin-bottom: 18px;\n  padding: 0 1em;\n\n  background-color: #1CA3DC;\n  text-align: center;\n  cursor: pointer;\n}\n\n.OT_dialog-button:disabled {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n\n.OT_dialog-button-large {\n  line-height: 36px;\n  padding-top: 9px;\n  padding-bottom: 9px;\n\n  font-weight: 100;\n  font-size: 24px;\n}\n\n.OT_dialog-button-small {\n  line-height: 18px;\n  padding-top: 9px;\n  padding-bottom: 9px;\n\n  background-color: #444444;\n  color: #999999;\n  font-size: 16px;\n}\n\n.OT_dialog-progress-bar {\n  display: inline-block; /* prevents margin collapse */\n  width: 100%;\n  margin-top: 5px;\n  margin-bottom: 41px;\n\n  border: 1px solid #4E4E4E;\n  height: 8px;\n}\n\n.OT_dialog-progress-bar-fill {\n  height: 100%;\n\n  background-color: #29A4DA;\n}\n\n/* Helpers */\n\n.OT_centered {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  margin: 0;\n}\n\n.OT_dialog-hidden {\n  display: none;\n}\n\n.OT_dialog-button-block {\n  display: block;\n}\n\n.OT_dialog-no-natural-margin {\n  margin-bottom: 0;\n}\n\n/* Publisher and Subscriber styles */\n\n.OT_publisher, .OT_subscriber {\n  position: relative;\n  min-width: 48px;\n  min-height: 48px;\n}\n\n.OT_publisher .OT_video-element,\n.OT_subscriber .OT_video-element {\n  display: block;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n\n  transform-origin: 0 0;\n}\n\n/* Styles that are applied when the video element should be mirrored */\n.OT_publisher.OT_mirrored .OT_video-element {\n  transform: scale(-1, 1);\n  transform-origin: 50% 50%;\n}\n\n.OT_subscriber_error {\n  background-color: #000;\n  color: #fff;\n  text-align: center;\n}\n\n.OT_subscriber_error > p {\n  padding: 20px;\n}\n\n/* The publisher/subscriber name/mute background */\n.OT_publisher .OT_bar,\n.OT_subscriber .OT_bar,\n.OT_publisher .OT_name,\n.OT_subscriber .OT_name,\n.OT_publisher .OT_archiving,\n.OT_subscriber .OT_archiving,\n.OT_publisher .OT_archiving-status,\n.OT_subscriber .OT_archiving-status,\n.OT_publisher .OT_archiving-light-box,\n.OT_subscriber .OT_archiving-light-box {\n  -ms-box-sizing: border-box;\n  box-sizing: border-box;\n  top: 0;\n  left: 0;\n  right: 0;\n  display: block;\n  height: 34px;\n  position: absolute;\n}\n\n.OT_publisher .OT_bar,\n.OT_subscriber .OT_bar {\n  background: rgba(0, 0, 0, 0.4);\n}\n\n.OT_publisher .OT_edge-bar-item,\n.OT_subscriber .OT_edge-bar-item {\n  z-index: 1; /* required to get audio level meter underneath */\n}\n\n/* The publisher/subscriber name panel/archiving status bar */\n.OT_publisher .OT_name,\n.OT_subscriber .OT_name {\n  background-color: transparent;\n  color: #ffffff;\n  font-size: 15px;\n  line-height: 34px;\n  font-weight: normal;\n  padding: 0 4px 0 36px;\n  letter-spacing: normal;\n}\n\n.OT_publisher .OT_archiving-status,\n.OT_subscriber .OT_archiving-status {\n  background: rgba(0, 0, 0, 0.4);\n  top: auto;\n  bottom: 0;\n  left: 34px;\n  padding: 0 4px;\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 15px;\n  line-height: 34px;\n  font-weight: normal;\n  letter-spacing: normal;\n}\n\n.OT_micro .OT_archiving-status,\n.OT_micro:hover .OT_archiving-status,\n.OT_mini .OT_archiving-status,\n.OT_mini:hover .OT_archiving-status {\n  display: none;\n}\n\n.OT_publisher .OT_archiving-light-box,\n.OT_subscriber .OT_archiving-light-box {\n  background: rgba(0, 0, 0, 0.4);\n  top: auto;\n  bottom: 0;\n  right: auto;\n  width: 34px;\n  height: 34px;\n}\n\n.OT_archiving-light {\n  width: 7px;\n  height: 7px;\n  border-radius: 30px;\n  position: absolute;\n  top: 14px;\n  left: 14px;\n  background-color: #575757;\n  box-shadow: 0 0 5px 1px #575757;\n}\n\n.OT_archiving-light.OT_active {\n  background-color: #970d13;\n  -webkit-animation: OT_pulse 1.3s ease-in;\n  -moz-animation: OT_pulse 1.3s ease-in;\n  -webkit-animation: OT_pulse 1.3s ease-in;\n  -webkit-animation-iteration-count: infinite;\n  -moz-animation-iteration-count: infinite;\n  -webkit-animation-iteration-count: infinite;\n}\n\n.OT_mini .OT_bar,\n.OT_bar.OT_mode-mini,\n.OT_bar.OT_mode-mini-auto {\n  bottom: 0;\n  height: auto;\n}\n\n.OT_mini .OT_name.OT_mode-off,\n.OT_mini .OT_name.OT_mode-on,\n.OT_mini .OT_name.OT_mode-auto,\n.OT_mini:hover .OT_name.OT_mode-auto {\n  display: none;\n}\n\n.OT_publisher .OT_name,\n.OT_subscriber .OT_name {\n    left: 10px;\n    right: 37px;\n    height: 34px;\n    padding-left: 0;\n}\n\n.OT_publisher .OT_mute,\n.OT_subscriber .OT_mute {\n    border: none;\n    cursor: pointer;\n    display: block;\n    position: absolute;\n    text-align: center;\n    text-indent: -9999em;\n    background-color: transparent;\n    background-repeat: no-repeat;\n}\n\n.OT_publisher .OT_mute,\n.OT_subscriber .OT_mute {\n  right: 0;\n  top: 0;\n  border-left: 1px solid rgba(255, 255, 255, 0.2);\n  height: 36px;\n  width: 37px;\n}\n\n.OT_mini .OT_mute,\n.OT_publisher.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold,\n.OT_subscriber.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold {\n  top: 50%;\n  left: 50%;\n  right: auto;\n  margin-top: -18px;\n  margin-left: -18.5px;\n  border-left: none;\n}\n\n.OT_publisher .OT_mute {\n  background-image: url("+o+");\n  background-position: 9px 5px;\n}\n\n.OT_publisher .OT_mute.OT_active {\n  background-image: url("+i+");\n  background-position: 9px 4px;\n}\n\n.OT_subscriber .OT_mute {\n  background-image: url("+s+");\n  background-position: 8px 7px;\n}\n\n.OT_subscriber .OT_mute.OT_active {\n  background-image: url("+a+");\n  background-position: 7px 7px;\n}\n\n/**\n * Styles for display modes\n *\n * Note: It's important that these completely control the display and opacity\n * attributes, no other selectors should atempt to change them.\n */\n\n/* Default display mode transitions for various chrome elements */\n.OT_publisher .OT_edge-bar-item,\n.OT_subscriber .OT_edge-bar-item {\n  transition-property: top, bottom, opacity;\n  transition-duration: 0.5s;\n  transition-timing-function: ease-in;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_mode-off,\n.OT_subscriber .OT_edge-bar-item.OT_mode-off,\n.OT_publisher .OT_edge-bar-item.OT_mode-auto,\n.OT_subscriber .OT_edge-bar-item.OT_mode-auto,\n.OT_publisher .OT_edge-bar-item.OT_mode-mini-auto,\n.OT_subscriber .OT_edge-bar-item.OT_mode-mini-auto {\n  top: -25px;\n  opacity: 0;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_mode-off,\n.OT_subscriber .OT_edge-bar-item.OT_mode-off {\n  display: none;\n}\n\n.OT_mini .OT_mute.OT_mode-auto,\n.OT_publisher .OT_mute.OT_mode-mini-auto,\n.OT_subscriber .OT_mute.OT_mode-mini-auto {\n  top: 50%;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-off,\n.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-off,\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,\n.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto,\n.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto {\n  top: auto;\n  bottom: -25px;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_mode-on,\n.OT_subscriber .OT_edge-bar-item.OT_mode-on,\n.OT_publisher .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold,\n.OT_subscriber .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold,\n.OT_publisher:hover .OT_edge-bar-item.OT_mode-auto,\n.OT_subscriber:hover .OT_edge-bar-item.OT_mode-auto,\n.OT_publisher:hover .OT_edge-bar-item.OT_mode-mini-auto,\n.OT_subscriber:hover .OT_edge-bar-item.OT_mode-mini-auto {\n  top: 0;\n  opacity: 1;\n}\n\n.OT_mini .OT_mute.OT_mode-on,\n.OT_mini:hover .OT_mute.OT_mode-auto,\n.OT_mute.OT_mode-mini,\n.OT_root:hover .OT_mute.OT_mode-mini-auto {\n  top: 50%;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-on,\n.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-on,\n.OT_publisher:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,\n.OT_subscriber:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto {\n  top: auto;\n  bottom: 0;\n  opacity: 1;\n}\n\n\n/* Contains the video element, used to fix video letter-boxing */\n.OT_widget-container {\n  position: absolute;\n  background-color: #000000;\n  overflow: hidden;\n}\n\n.OT_hidden-audio {\n  position: absolute !important;\n  height: 1px !important;\n  width: 1px !important;\n}\n\n/* Load animation */\n.OT_root .OT_video-loading {\n  position: absolute;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n  display: none;\n\n  background-color: rgba(0, 0, 0, .75);\n}\n\n.OT_root .OT_video-loading .OT_video-loading-spinner {\n  background: url("+c+") no-repeat;\n  position: absolute;\n  width: 32px;\n  height: 32px;\n  left: 50%;\n  top: 50%;\n  margin-left: -16px;\n  margin-top: -16px;\n  animation: OT_spin 2s linear infinite;\n}\n@keyframes OT_spin {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.OT_publisher.OT_loading .OT_video-loading,\n.OT_subscriber.OT_loading .OT_video-loading {\n  display: block;\n}\n\n.OT_publisher.OT_loading .OT_video-element,\n.OT_subscriber.OT_loading .OT_video-element {\n  /*display: none;*/\n}\n\n.OT_video-centering {\n  display: table;\n  width: 100%;\n  height: 100%;\n}\n\n.OT_video-container {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.OT_video-poster {\n  position: absolute;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n  display: none;\n\n  opacity: .25;\n\n  background-repeat: no-repeat;\n  background-image: url("+u+");\n  background-size: auto 76%;\n}\n\n.OT_fit-mode-cover .OT_video-element {\n  -o-object-fit: cover;\n     object-fit: cover;\n}\n\n/* Workaround for iOS freezing issue when cropping videos */\n/* https://bugs.webkit.org/show_bug.cgi?id=176439 */\n@media only screen\n  and (orientation: portrait) {\n  .OT_subscriber.OT_ForceContain.OT_fit-mode-cover .OT_video-element {\n    -o-object-fit: contain !important;\n       object-fit: contain !important;\n  }\n}\n\n.OT_fit-mode-contain .OT_video-element {\n  -o-object-fit: contain;\n     object-fit: contain;\n}\n\n.OT_fit-mode-cover .OT_video-poster {\n  background-position: center bottom;\n}\n\n.OT_fit-mode-contain .OT_video-poster {\n  background-position: center;\n}\n\n.OT_audio-level-meter {\n  position: absolute;\n  width: 25%;\n  max-width: 224px;\n  min-width: 21px;\n  top: 0;\n  right: 0;\n  overflow: hidden;\n}\n\n.OT_audio-level-meter:before {\n  /* makes the height of the container equals its width */\n  content: '';\n  display: block;\n  padding-top: 100%;\n}\n\n.OT_audio-level-meter__audio-only-img {\n  position: absolute;\n  top: 22%;\n  right: 15%;\n  width: 40%;\n\n  opacity: .7;\n\n  background: url("+l+") no-repeat center;\n}\n\n.OT_audio-level-meter__audio-only-img:before {\n  /* makes the height of the container equals its width */\n  content: '';\n  display: block;\n  padding-top: 100%;\n}\n\n.OT_audio-level-meter__value {\n  will-change: transform;\n  position: absolute;\n  top: -100%;\n  right: -100%;\n  width: 200%;\n  height: 200%;\n  transform: scale(0);\n  border-radius: 50%;\n  background-image: radial-gradient(circle, rgba(151, 206, 0, 1) 0%, rgba(151, 206, 0, 0) 100%);\n}\n\n.OT_audio-level-meter.OT_mode-off {\n    display: none;\n}\n\n.OT_audio-level-meter.OT_mode-on,\n.OT_audio-only .OT_audio-level-meter.OT_mode-auto {\n  display: block;\n}\n\n.OT_audio-only.OT_publisher .OT_video-element,\n.OT_audio-only.OT_subscriber .OT_video-element {\n  display: none;\n}\n\n\n.OT_video-disabled-indicator {\n  opacity: 1;\n  border: none;\n  display: none;\n  position: absolute;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: bottom right;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  bottom: 3px;\n  right: 3px;\n}\n\n.OT_video-disabled {\n  background-image: url("+d+");\n  background-size: 33px auto;\n}\n\n.OT_video-disabled-warning {\n  background-image: url("+p+");\n  background-size: 33px auto;\n}\n\n.OT_video-disabled-indicator.OT_active {\n  display: block;\n}\n\n.OT_audio-blocked-indicator {\n  opacity: 1;\n  border: none;\n  display: none;\n  position: absolute;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: center;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n\n.OT_audio-blocked {\n  background-image: url("+h+");\n  background-size: 90px auto;\n}\n\n.OT_container-audio-blocked {\n  cursor: pointer;\n}\n\n.OT_container-audio-blocked.OT_mini .OT_edge-bar-item {\n  display: none;\n}\n\n.OT_container-audio-blocked .OT_mute {\n  display: none;\n}\n\n.OT_audio-blocked-indicator.OT_active {\n  display: block;\n}\n\n.OT_video-unsupported {\n  opacity: 1;\n  border: none;\n  display: none;\n  position: absolute;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url("+f+");\n  background-size: 58px auto;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  margin-top: -30px;\n}\n\n.OT_video-unsupported-bar {\n  display: none;\n  position: absolute;\n  width: 192%; /* copy the size of the audio meter bar for symmetry */\n  height: 192%;\n  top: -96% /* half of the size */;\n  left: -96%;\n  border-radius: 50%;\n\n  background-color: rgba(0, 0, 0, .8);\n}\n\n.OT_video-unsupported-img {\n  display: none;\n  position: absolute;\n  top: 11%;\n  left: 15%;\n  width: 70%;\n  opacity: .7;\n  background-image: url("+f+");\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 100% auto;\n}\n\n.OT_video-unsupported-img:before {\n  /* makes the height of the container 93% of its width (90/97 px) */\n  content: '';\n  display: block;\n  padding-top: 93%;\n}\n\n.OT_video-unsupported-text {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  height: 100%;\n  margin-top: 40px;\n}\n\n.OT_video-unsupported.OT_active {\n  display: block;\n}\n\n.OT_mini .OT_video-unsupported,\n.OT_micro .OT_video-unsupported {\n  position: absolute;\n  width: 25%;\n  max-width: 224px;\n  min-width: 21px;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n  background: none;\n  bottom: auto;\n  right: auto;\n  margin: auto;\n}\n\n.OT_mini .OT_video-unsupported:before,\n.OT_micro .OT_video-unsupported:before {\n  /* makes the height of the container equals its width */\n  content: '';\n  display: block;\n  padding-top: 100%;\n}\n\n.OT_mini .OT_video-unsupported-bar,\n.OT_micro .OT_video-unsupported-bar,\n.OT_mini .OT_video-unsupported-img,\n.OT_micro .OT_video-unsupported-img {\n  display: block;\n}\n\n.OT_mini .OT_video-unsupported-text,\n.OT_micro .OT_video-unsupported-text {\n  display: none;\n}\n\n.OT_hide-forced {\n  display: none;\n}\n\n.OT_ModalDialog {\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  z-index: 1000;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n#tb_alert {\n  position: fixed;\n  width: 570px;\n  font-family: \"Lucida Grande\", Arial;\n  top: 50%;\n  left: 50%;\n  margin-top: -75px;\n  margin-left: -285px;\n}\n\n#tb_alert * {\n  box-sizing: border-box;\n}\n\n#tb_alert .OT_alert {\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  background-color: #333;\n  position: relative;\n  padding: 30px;\n  overflow: visible;\n  margin-left: 70px;\n  border-bottom-color: rgba(255, 255, 255, 0.1);\n  border-left-color: rgba(255, 255, 255, 0.1);\n\n  background-image: linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2)), linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2));\n\n  background-image: -ms-linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2)), -ms-linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2));\n\n  background-size: 4px 4px;\n  background-position: 0 0, 2px 2px;\n  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n}\n\n#tb_alert .OT_alert-exclamation {\n  background-color: #9c1408;\n  background-image: linear-gradient(0deg, #dd0c0a 0%, #9c1408 100%);\n  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n\n  margin: -1px 0;\n\n  font-family: MS Trebuchet;\n  font-weight: bold;\n  font-size: 60px;\n  text-shadow: -1px -1px 2px rgba(0, 0, 0, 0.5);\n\n  color: white;\n  width: 65px;\n  position: absolute;\n  padding: 42px 0;\n  text-align: center;\n  left: -70px;\n  top: 0;\n  bottom: 0;\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n\n  border-bottom-color: transparent;\n  border-left: none;\n  border-right: none;\n}\n\n#tb_alert .OT_alert-exclamation:after,\n#tb_alert .OT_alert-exclamation:before {\n  content: \" \";\n  position: absolute;\n  right: -24px;\n  top: 40%;\n  border: 12px solid transparent;\n  border-left-color: #9c1408;\n}\n\n#tb_alert .OT_alert-exclamation:before {\n  border-left-color: #bc3428;\n  top: 39%;\n}\n\n#tb_alert .OT_alert-body {\n  color: #c8c5c5;\n  margin: 0;\n  text-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);\n  font-size: 14px;\n  line-height: 1.3em;\n}\n\n#tb_alert .continue-text {\n  margin-top: 12px\n}\n\n#tb_alert > * a {\n  color: #a7d8df;\n  text-decoration: none;\n}\n\n#tb_alert .OT_alert-header {\n  font-size: 24px;\n  padding-bottom: 5px;\n  color: #aaa;\n  font-weight: bold;\n  position: relative;\n  text-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);\n  margin: 0;\n}\n\n#tb_alert .OT_alert-header::before {\n  content: attr(data-text);\n  position: absolute;\n  left: 0;\n  color: white;\n  -webkit-mask-image: -webkit-gradient(\n    linear,\n    left top, left bottom,\n    from(rgba(0, 0, 0, 1)),\n    color-stop(60%, rgba(0, 0, 0, 0)),\n    to(rgba(0, 0, 0, 0))\n  );\n}\n\n#tb_alert .OT_alert-close-button {\n  position: absolute;\n  right: 8px;\n  top: 5px;\n  background-color: #000;\n  color: #666;\n  border: none;\n  font-size: 20px;\n  /** Hack to bring it up to the proper line top */\n  line-height: 14px;\n  padding: 0;\n  padding-bottom: 3px;\n  cursor: pointer;\n}\n\n#tb_alert #section-mobile-browser,\n#tb_alert #section-supported-mobile-browser {\n  width: 200px;\n  top: 0px;\n  left: 25%;\n  margin-top: 0;\n  margin-left: 0;\n}\n\n@media all and (max-height: 300px) {\n  #tb_alert {\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    margin-left: 0;\n    margin-top: 0;\n  }\n  #tb_alert #section-mobile-browser,\n  #tb_alert #section-supported-mobile-browser {\n    margin-left: 0;\n    margin-top: 10px;\n    left: 0;\n  }\n}\n\n#tb_alert #section-normal-install,\n#tb_alert #section-upgrade-install,\n#tb_alert #section-mobile-browser,\n#tb_alert #section-supported-mobile-browser {\n  display: none;\n}\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r=e[1]||"",o=e[3];if(!o)return r;if(t&&"function"==typeof btoa){var i=(n=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),s=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[r].concat(s).concat([i]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(o=0;o<e.length;o++){var s=e[o];null!=s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){"use strict";e.exports=function(e,t){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)||t?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAcCAMAAAC02HQrAAAA1VBMVEUAAAD3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj39/j3+Pj3+Pn4+Pk/JRMlAAAAQ3RSTlMABAUHCQoLDhAQERwdHiAjLjAxOD9ASFBRVl1mbnZ6fH2LjI+QkaWqrrC1uLzAwcXJycrL1NXj5Ofo6u3w9fr7/P3+d4M3+QAAAQBJREFUGBlVwYdCglAABdCLlr5Unijm3hMUtBzlBLSr//9JgUToOQgVJgceJgU8aHgMeA38K50ZOpcQmTPwcyXn+JM8M3JJIqQypiIkeXelTyIkGZPwKS1NMia1lgKTVkaE3oQQGYsmHNqSMWnTgUFbMiZtGlD2dpaxrL1XgM0i4ZK8MeAmFhsAs29MGZniawagS63oMOQUNXYB5D0D1RMDpyoMLw/fiE2og/V+PVDR5AiBl0/2Uwik+vx4xV3a5G5Ye68Nd1czjUjZckm6VhmPciRzeCZICjwTJAViQq+3e+St167rAoHK8sLYZVkBYPCZAZ/eGa+2R5LH7Wrc0YFf/O9J3yBDFaoAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAADcElEQVRIiaWVXWhcRRTHf7NNd2aDtUKMIjTpg4ufFIuiUOmDEWm0Vi3VYhXRqIggQh4sWJFSig9+oOhTKSpIRUWMIBIr2kptoTbgU6ooxCiIjR+14kcJmf9sNceHnd3ebnc3Uv9wuXfOzPzmnDMz5zozGwdWAbc65w5RUJQ8cC2wDJgFJioh/MJCMrNxq2vOzK4HmIvRRemxKP0RJWt53o7S+d2Yzsx6gQ+AIUDAnUqpBLzXZd4RYFUlhB/bdZacc3PAOmAcCMC7wfvFwLNdoAPAyx09bXyYWRl4E7gDmAdGlNKFwLYu8GolhO9O87RJd64GbMrgEvB68P4osMWdXLtVV7czlooNpVRWSs8DO7NpR/B+3rBHsvetCgtCMTxwQCm9BbyQrc8F7/uBex3uRCeXO0PrUZ4NfKyUPgWeyj3bg/crDNsIRGwBaJQGorQ3Svdn2wHgc2BUKb0DPJHtjwfvbwRucc7tz+N+i9LFUdoXpfVN36I0CVwBTFI/q9e1LPxT8P4qYEdu70q12mYzWw1MYQzjeJF6zq+shHC4B7jklOBPP/TzSunh4P0DwKvAfb5c9krpe+CcwsEoZdbhEvBM9wxRAl5RShcA9wAngE3B+8tLpdLuwrhp4MNmK0pfRWkySr7NXS8+L5nZbWZWy/Vin1IaitJnUTqvwevJ71lgSSWEFKUfHG7Q2m/xqFJaGry/GXgfGPLl8mJgrXPur2JoUC8Qy3OpG+sAbGhEKT0ErAWOA6uBPWbW1wr9BOgFbgKezot0kAPYqJQA1gC/A9cA+82svzksSn1R+jNKX0SpnM/e1x3yqig92JhrZivM7FjO8bSZLSuCR/Ok16K0KMNHojQWpYko7Y7S1igN5PE3ROl4lNaZ2UVmNpPBU01orvZvZPCeKFXbBR+lEKVtUapFaSZKg9njqpl9aWYTrmXCImA7sCWb9lK/jj9TrwkrgA1AH3AQuKsSwkzbrLfxpgpsBtYDxf/R3xm2ExirhNCuHHZXTsmRwiat+S/zSt06eysVA/4pmGr/G3qm6ik28v29FKgCg8BS6pvS0KNRGgZ+Bb4FpsxsOkfUlMuwDcBWYOUZOHYM2AU8WQmhBifDv70O7PjX7KZ+4G7g3FM8zd6uBIaBy4AqxnIcZwFLCovPAhE4Sj38b4BDwEeVEFKD9S94Khjn486v3QAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAATCAYAAAB7u5a2AAABx0lEQVQ4jaWUv48NURiGn3ONmCs32ZBd28ht1gqyZAkF21ylQkEiSp2ehpDlD1BoFGqqVdJohYKI7MaPxMoVNghCWMF+7ybLUewnOXfcMWO9yeQ857zne8+XmZOBGjJpr0kvTIomvTZpS526UCO4DUwD64FjwCFgqZnnR+oc8LfgzKQ73vGsr42ZtGjSQFV9o8KfBCacZwCaef4YmAf2rzjcpN3A2WSpm/AssKcqPDNpDBjs410CViXzTwk/A7b1C4wxDgOngAsZcAXY2buDfp/6S4F3lDS8DjgBzDWAjX/Y/e/QgYS/AhsKHa+OMQ6GEJ4Cj4BOAxgq6aCowyZtdf4OtAr+FHDO+R4wWnVbihr3cQnICt4boO38GWj9a/icjwOACt4m4K3zEPA+AxaAtTWCnwN3lzHkEL8V/OPAGud9wK2GF9XR1Wae/1zG2AI+pGYI4VUIoRtjHAc2A9cz4LRPevYCZ+i9/4sJt4GXJU10gaPAzdI2TTro/5Tfz8XEe2LSZGmxq/SDNvP8BnA5WRrx4BwYBe6vONx1EnjovGvBLAAd4Adwuyq8UiaNmDTvr+a8SQ9MuvbfwckBHZPe+QEfTdpep+4XZmPBHiHgz74AAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAYAAACXtf2DAAACtklEQVQ4jZ2VSYiURxTHf+/T9Nc9iRrBuYySmIsXUU9iFMEFERRBvAjJLUQi5ioiHvSScfTmgqC4XAT1ZIgLuJHkICaaQAgKI2hAUBT30bjUq7bbv4eukXK029F3+eqtv/fqK6qQdEnSNUmT6CDB/bvgfjO4N9zj2RD8007xg1IABkwEzkma0qb4PGAPMBZYLtSD8eNwAEjqTlNI0gNJM4YU7w7ut4O7gvuhZFsR3C8NC5BBLiTIY0mzM8AvqbiC++pk+zLpE95XuwAws3vAQuBPYDRwWtL84P4tsDSLv5oaug4EYOawAMF9jMdoLxqNZcDvQA04UVYqL4G/svj7AF21mhJscrvCksYBFO7xc2AAGGg2mrdjvf4rcAyomNn+slLZmUEGBgsYdh945xZJmgvckDSrEJpK6ySBgV6q12O8ABwGPjGzfWWlsjdN9rpjoSfA+DYDXARGAksK4Is3XC1Ub4z1f4CDQGFmu6tleQSYk0U+p7WVeefLJc00s4fAeWB6Qeunvj0m2ugx9gO7kmlrtSxvBfcy6fXUZS6rgG/S+jLQUwCVNmMC9HqM14EtSe+rluWazN8YEv8IqKZ1E1qnaIDO0ucx3gX6kv6TpM3AM+D/IbGjgP60/gq4WQA33gMA2OQxPgHWJX1ttSwL4FAeZGYLgB2SasBs4A8L7qOBf9M0uXQB3a+TMYSmVctyDrA9mfcBK82smSdKWgCcAaa1bTm4fxbc/8uuCQX3RanAD5Ka6Wo5IGnE0HxJPZ03pQX5Org3MsD3AO5xXLPZXJ9BjkrqdFg6QjZkgG3Jtsw93pG0VFI9QU5K6voYQBHcTydAfwheBI9HgvvPAJIWS3qeIL9JGvUxkO7gfi1BrqTvwkG/pPmSnibIqTzXPgAyEVgBjAEu1qrVPbk/PVTHgb/NbPGg/RVIzOQqzSTBaQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAtMjAgMjQwIDI0MCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4Mj0iMCIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9IjEiIHgyPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjA4Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImMiIHgxPSIxIiB4Mj0iMCIgeTE9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMDgiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjE2Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImQiIHgyPSIwIiB5MT0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii4xNiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMzMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZSIgeDI9IjEiIHkxPSIxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjMzIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii42NiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJmIiB4Mj0iMSIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuNjYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiLz48L2xpbmVhckdyYWRpZW50PjxtYXNrIGlkPSJnIj48ZyBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjQwIj48cGF0aCBzdHJva2U9InVybCgjYSkiIGQ9Ik04Ni42LTUwYTEwMCAxMDAgMCAwMTAgMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjxwYXRoIHN0cm9rZT0idXJsKCNiKSIgZD0iTTg2LjYgNTBBMTAwIDEwMCAwIDAxMCAxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2MpIiBkPSJNMCAxMDBhMTAwIDEwMCAwIDAxLTg2LjYtNTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2QpIiBkPSJNLTg2LjYgNTBhMTAwIDEwMCAwIDAxMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2UpIiBkPSJNLTg2LjYtNTBBMTAwIDEwMCAwIDAxMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2YpIiBkPSJNMC0xMDBhMTAwIDEwMCAwIDAxODYuNiA1MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAwIDEwMCkiLz48L2c+PC9tYXNrPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSItMjAiIHk9Ii0yMCIgbWFzaz0idXJsKCNnKSIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDcxIDQ2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIwIiB4Mj0iMCIgeTE9IjAiIHkyPSIxIj48c3RvcCBvZmZzZXQ9IjY2LjY2JSIgc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48cGF0aCBmaWxsPSJ1cmwoI2EpIiBkPSJNNzkgMzA4YzE0LjI1LTYuNSA1NC4yNS0xOS43NSA3MS0yOSA5LTMuMjUgMjUtMjEgMjUtMjFzMy43NS0xMyAzLTIyYy0xLjc1LTYuNzUtMTUtNDMtMTUtNDMtMi41IDMtNC43NDEgMy4yNTktNyAxLTMuMjUtNy41LTIwLjUtNDQuNS0xNi01NyAxLjI1LTcuNSAxMC02IDEwLTYtMTEuMjUtMzMuNzUtOC02Ny04LTY3cy4wNzMtNy4zNDYgNi0xNWMtMy40OC42MzctOSA0LTkgNCAyLjU2My0xMS43MjcgMTUtMjEgMTUtMjEgLjE0OC0uMzEyLTEuMzIxLTEuNDU0LTEwIDEgMS41LTIuNzggMTYuNjc1LTguNjU0IDMwLTExIDMuNzg3LTkuMzYxIDEyLjc4Mi0xNy4zOTggMjItMjItMi4zNjUgMy4xMzMtMyA2LTMgNnMxNS42NDctOC4wODggNDEtNmMtMTkuNzUgMi0yNCA2LTI0IDZzNzQuNS0xMC43NSAxMDQgMzdjNy41IDkuNSAyNC43NSA1NS43NSAxMCA4OSAzLjc1LTEuNSA0LjUtNC41IDkgMSAuMjUgMTQuNzUtMTEuNSA2My0xOSA2Mi0yLjc1IDEtNC0zLTQtMy0xMC43NSAyOS41LTE0IDM4LTE0IDM4LTIgNC4yNS0zLjc1IDE4LjUtMSAyMiAxLjI1IDQuNSAyMyAyMyAyMyAyM2wxMjcgNTNjMzcgMzUgMjMgMTM1IDIzIDEzNUwwIDQ2NHMtMy05Ni43NSAxNC0xMjBjNS4yNS02LjI1IDIxLjc1LTE5Ljc1IDY1LTM2eiIvPjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNzkgODYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTkuNzU3IDQwLjkyNGMzLjczOC01LjE5MSAxMi43MTEtNC4zMDggMTIuNzExLTQuMzA4IDIuMjIzIDMuMDE0IDUuMTI2IDI0LjU4NiAzLjYyNCAyOC43MTgtMS40MDEgMS4zMDEtMTEuNjExIDEuNjI5LTEzLjM4LTEuNDM2LTEuMjI2LTguODA0LTIuOTU1LTIyLjk3NS0yLjk1NS0yMi45NzV6bTU4Ljc4NSAwYy0zLjczNy01LjE5MS0xMi43MTEtNC4zMDgtMTIuNzExLTQuMzA4LTIuMjIzIDMuMDE0LTUuMTI2IDI0LjU4Ni0zLjYyNCAyOC43MTggMS40MDEgMS4zMDEgMTEuNjExIDEuNjI5IDEzLjM4LTEuNDM2IDEuMjI2LTguODA0IDIuOTU1LTIyLjk3NSAyLjk1NS0yMi45NzV6Ii8+PHBhdGggZD0iTTY4LjY0NyA1OC42Yy43MjktNC43NTMgMi4zOC05LjU2MSAyLjM4LTE0LjgwNCAwLTIxLjQxMi0xNC4xMTUtMzguNzctMzEuNTI4LTM4Ljc3LTE3LjQxMiAwLTMxLjUyNyAxNy4zNTgtMzEuNTI3IDM4Ljc3IDAgNC41NDEuNTE1IDguOTM2IDEuODAyIDEyLjk1IDEuNjk4IDUuMjk1LTUuNTQyIDYuOTkxLTYuNjE2IDIuMDczQzIuNDEgNTUuMzk0IDAgNTEuNzg3IDAgNDguMTAzIDAgMjEuNTM2IDE3LjY4NSAwIDM5LjUgMCA2MS4zMTYgMCA3OSAyMS41MzYgNzkgNDguMTAzYzAgLjcxOC0yLjg5OSA5LjY5My0zLjI5MiAxMS40MDgtLjc1NCAzLjI5My03Ljc1MSAzLjU4OS03LjA2MS0uOTEyeiIvPjxwYXRoIGQ9Ik01LjA4NCA1MS4zODVjLS44MDQtMy43ODIuNTY5LTcuMzM1IDMuMTM0LTcuOTIxIDIuNjM2LS42MDMgNS40ODUgMi4xNSA2LjI4OSA2LjEzMi43OTcgMy45NDgtLjc1MiA3LjQ1Ny0zLjM4OCA3Ljg1OS0yLjU2Ni4zOTEtNS4yMzctMi4zMTgtNi4wMzQtNi4wN3ptNjguODM0IDBjLjgwNC0zLjc4Mi0uNTY4LTcuMzM1LTMuMTMzLTcuOTIxLTIuNjM2LS42MDMtNS40ODUgMi4xNS02LjI4OSA2LjEzMi0uNzk3IDMuOTQ4Ljc1MiA3LjQ1NyAzLjM4OSA3Ljg1OSAyLjU2NS4zOTEgNS4yMzctMi4zMTggNi4wMzQtNi4wN3ptLTIuMDM4IDguMjg4Yy0uOTI2IDE5LjY1OS0xNS4xMTIgMjQuNzU5LTI1Ljg1OSAyMC40NzUtNS40MDUtLjYwNi0zLjAzNCAxLjI2Mi0zLjAzNCAxLjI2MiAxMy42NjEgMy41NjIgMjYuMTY4IDMuNDk3IDMxLjI3My0yMC41NDktLjU4NS00LjUxMS0yLjM3OS0xLjE4Ny0yLjM3OS0xLjE4N3oiLz48cGF0aCBkPSJNNDEuNjYyIDc4LjQyMmw3LjU1My41NWMxLjE5Mi4xMDcgMi4xMiAxLjE1MyAyLjA3MiAyLjMzNWwtLjEwOSAyLjczOGMtLjA0NyAxLjE4Mi0xLjA1MSAyLjA1NC0yLjI0MyAxLjk0NmwtNy41NTMtLjU1Yy0xLjE5MS0uMTA3LTIuMTE5LTEuMTUzLTIuMDcyLTIuMzM1bC4xMDktMi43MzdjLjA0Ny0xLjE4MiAxLjA1Mi0yLjA1NCAyLjI0My0xLjk0N3oiLz48L2c+PC9zdmc+"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAINUlEQVR42u2aaUxUVxTHcRBmAAEBRVTK4sKwDIsg+wCK7CqIw1CN1YobbbS2qYlJ06Qx1UpdqMbYWq2pSzWmH6ytNbXWJY1Lq7VuqBERtW64V0XFLYae0/xvcp3MMAMzDz6IyT/ge2ce5/7ucpY3Ts3NzZ1ygF57AJ0gO0G2jyZPmdbFyclJSAV1EeoEaUUSLGdSV5KLLFxzFmA7QVqGqDqjixhWkxCVeyRVl38wM6bwj6yYItYK47BAuu9B0gCqs6Ng2r494KQtkj/Dz2jHraw6qw2fdSE4rNmcCPCvZONP8iF1I6kdBdMaQJWZLeJqRWa2kPJAxXY+GxE+zxLI03GRh8lGSwoi9WCY8FWlCEh+8JOnT7MfPGjMuXX7Tt61hoaCi/9cKmKdv3BxeEtim/UbNpnbQiqF4MmT7kqrbr4lkMcTo46TTSpJB5g+8NHuVWnWuaampvhmO/7duHmrGluoO4C6OsJZGRrkDIld43ZqUOTnlkDSmXmabAoBU0vqBf+6KgFSxQ9++uzZ8rZApM81TJ8xM5me0Z/UF7PuBmdVdkGEb5gYDeQmyZNW3SJLIP9Kj64lGyMpmxRN6sOfIbkoAhKOdnv2/PmB1kB88eLFo+olyyrps3rSINIAzLonnqlqK8R9w+L86vtrt5L2nhug3Vc3ULu/Liz8AOuXESlZZONH6kmr7gtLIA9lRNeRzVukAvj3BslLnJNKgfScO69K+/Lly0ZbQW7e8tNK+pwBjqaSIjDrXgJkW1ciAZvbQjQ+RDahpBBKd5ZZsqN758hmImk4KQHnpDd8UwSkCyJarx07d4+3BeKJmlMHyX4qaRxpBCmNFE4KENvHDpAutVERn1kCVBMfeRRgYvZnx62wZPdnZkw92VQA5GClQXYRBze2S+iJmpPVVoJLA9l9QKokjcWKTCT1R5rhLg70NuSsziT16diIKkuAjibrTpJNDkn/e17CahtAjlAWJAYkb29Sb1LE9Rs391kILk8mVkyuIpuZcLKUlEmKkra1WuSTNuesEPzwoEploSVAh9Oiz+BIyd9dOHhtx4OEpFpVg6gbNK3yXX1j48N6U5Dz5i/gc/FDrMY3sTLiSMEkXxGxzUEUAGnbxlPaksMlHUXWAlHS8URCPseSohZbCSLjSSU7ixLXdzhIWVKq4Y7t2a/2bN0qGeKly1fYsVmk6RgIDz4J0bonyUOcjeYqm/8hRoYbWkigV2NH9CHAS60EkUkkw47hSRs6FqT1LR5AVcsrueXlK1d5AO+RpmBrZZEiefByytPCanRGNLZY0uF52gNDYr9sCRB8MHY0SJu2OJWKS2WQV65e4y31DmkCImEi0hBfufRime0RIhpbKen0/Ny9OYNW2ghyYytABjNIaxNuKttAWk6HPLn0k0FevdZwFinPWFIuKZbUV16NVko6jbWSDoPO3pOf8K0jQWLSQ0S9bdpkYck+m7vfWpAiHfKgBsZiGSSt0FqcTeU8WETqAHE2CgcAVd3Gkm4MD3xXYeI6B4NMItvKbcUpQ9gP+KMWnSsW+TaYJtoo+avBWLoKoK0CCSDud+7eXWQGZAXqV3YoQjQCfixJ8+fzj9ta3JHhlUeJ8wJOY2ws6eRKpPS3oqTvHAESEz9ya0naXL5WH6pt3FqSOhTHkTcKEXc6k1POh4Q9YJu/03TT4a8PoGMFI4i2EqSbOZAYaBkpCyD92RkG6KCSbjI/H0HEISBnlOZPFdcEzI2GTO4KBZICGKyAKLTEmJOB2txf5MbgohBINCl4FTqmpJMB2W+HiRn1Q2l6lXyPmiEP6VVE2TfGoaMYrHyPdtAnyI0jEOn9RLWmNEhvBBE7SjpFQZaShtLK+1S+T12lRwxUvrZlVPp8jE1PikeO7C/nyEqBDCB1t7+kUx4kKUWclea0yZC5BIGpiJSNSD9QgFR0RQKkL6KxHSWdsiARHJNYewoGrzG1/bk4dTPSunL2EyDjcbb7MQ+lQfZmkKiN7SjpFAM5CWAyGcwyY84YsZ1lUcbRNNtQMAdtQWGvQ0DyVjzYAKQfQFodeAeC1C8vzymXIZqD+ZEh/2OyLSalS/3VbnJZ+VqDXGjMrTCFuK4s66vVZUNfqaDolcbjOcb899sLpEE+I20GifywXe2QR3KElu99PzqjGufhREqB1pjCnG3IL3fY1v733r2FMsiGhutn0LAoJWWIGbPxjKwgjUbF0m52mPhigrpdXOecEq9pR6MkHbu2LOtrcZ9y3d0ODTb15y9MePz48aF79+8fvXnr9sljx2u2I7KNxDuaMPGVECoRs7mC4eT7SIruFNfNHK15MKuM2evwNq+4qjxvGnd5CHwNNynawW4cOlUZdG8b55IIJHmkItwrZHH6QxB3OSL9kTtAGpIvZiQB3Z4SKBfXQtEE9sashWAW87Bt3sYZNR6zn4uzJwWDKUKXfaKCdqUoBpLxSjYe9nqGiwWRBGipuGZ3Qm76itYLbbJI/PEhUApfw73uOIy9xfse3M9F9BuFJHcYrseSouGkHtCVtkuGTTikI8XgZzhg9SeF4VqcvSWiaSvNHQ8JwkNjIfEHemCmNLD1RaEfLs18mlgNuN6PFALHo7CyU5W2g00gFAQF4ozvibH04muwDbWraSFAyt/AAMzewgGR8uCeWn77xzBxPxgzPRCDDMZ14bQ/3jqGKGoHf2Hjgx3kw5LbaJDYWb52t9FMgw4AuWNWukNeuOYqOsmQi2jgws4PA/DD/z0B2x0/veCs4naw0cgybezid7X9jV3rX2RSs0wfLkll4pBGcgifg+NYxe1kJ2ycTaRq66uG/wBOl0vjcw70xwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAGMElEQVR4Ae2aA7D0yBaAc7oH12vbRmlLaxYWb23btm3btm2899a2bWuYtPZ01cmtU9lJrib315yqr9I3Oem/5/s7acwEnehEJzoxCcX2O+wEeIgRBDDaGjAZOgQ6ihRpLklHZDJIXK1WWymMIhGGkVBKCWMM+Iv/f/b5t7faYtM/sGgIS7j8RNLjceUVl41GvGN1BFiHy9sgtRWaYbhvuVQ6o1VOvV5/tLe3dyssKoZuh8xClkDEi2MMS6ZjR0cScxdK/+HgnJsmLccYOx0e/PUGUqfTJDEHkV5go9lcMQoj4R8RpSIRRUr4a9baTJFCCNfqESKJ7RYJibK0xoi05EhFRTxMi1Rit6xHAuLaKRLwEVi6q1x+EhlVpd3d3Wfh4VQkQhRhxthYLg7SRGqdLlIp7UVOHf+JhEhEMscUolVje3p63saeeOFoKsT7fjj++BNuw2I/0ouUENmGaQcQEilQvUU6xuWC0kqmVWCt8df6kG7WLoFA20VSCOyNh0RKPT+SyrTWtQsvuvTYCy84z3+oAdbgAiLGIvHjTz6bFuu/B3lKKfVkFKknwih6EnnipZdfXQZzepAupXSGSCfwUGZtkrx3t/0dSQGnnXbmdocdetArQoj+4VR23wMP3bj/vnv9Sv/rBmkish09ca655thHSrlWq4TFF1vkNDxsgjiUnPqZnHPABIq47jx7pPMcecShfz7x1DO7D6eit99576X1113nVd8rqLGAuDaNitJonTGIqHgQGQjDsJglMrUH5iDSEQbRa6y2yrNvv/PuWVmV/PTzLz8steTit1B9FtGJeZrJksmWdBzBMcami4xUkaY1A1Qe94WIaPGBApJhaERrLrXkElf8+NPPz6YMLs1DDjn0Wn9PnI/UiQadM4jNEkhzVsEGE8nIHESM1j5/KqRX+/IEiOQ/yifNBlEkpnb00cccesbpp13T3983H88/48xzrrvm6it/8U5JXgX5G6nSvSq1R5LATR7aYGkwMG1RSwkWABH+4jUb3vT/uJ1Z0xpjraTBRltrxUQhksIRmgTJyy69+Pv99tv3qYX6FxgU+fU33352xGEHf5wisU7nNWJpZRMkAjZ6aIN1mwV7h29Jo2wCHlveu/GV169z65E+T6koexCh6c+EEiky3lnxQKFjUeVyOeI5AOBzIiayRhJryd7YYnkIHgvB0qk9Tdql6N3XH4bRUIOIIIKJSiRb0hkSEpZKRd1CpEq8GxtIyCVmDSgFl94GacTgaJw1rUlYhYng0c4ewaUsmKRIJjpiqMSOCh9QeI+UYECmtQIsxEu6OorEcv6Rl0gu0woh8MhFkmSCTXVI4pC704WCFRJvSRNJSzrMMEZO2iKZTCHAZYnmvXCny7ed5vfZK3viHSBdIFCKEFj2+nt+73nw8m2uedcLJlktA++VNMEPaR45aYukcKnnCfY3/DFbZS8t7eHxNgsPM0N1hXhJJwwM1QbpoQFlog2R13a/zBxEYHAQEUYUM6qiVwEyBYoM6JFNF2kFLelI5KQf+fVI4dJFCguDS7oAyx2R6SFQJKRedSDj/cMg/RXQ6ZE05GSIDAaXdCi1I3L021SQWNJ1RLY5OiIdL4/yvuw8ADfWPFrSciaMyH8tEQPwf1uGG54g5+KlJGTmsrxsQdl5PKidnPFe2QS///7Hu+VS6WX/HYnf0sevGL7lXydwod2/9DykZq0s5yff0sgSWCigNOH7TPHL7ufj+/TH8P/+qYpL4HkBDiRYpEXeM8/89/9zzjn7EtY64dfd1nqccM7Bs8+9MKy8555/8TnKS+5MufH6EZVASkgPzf+mJXroet17JirU0ALST3nT0y5ONyLpeo1y64ih+vuQfsoTOeRFSJXa+SvyB90TUmdw49EjLaKpMQ0mzEeTzkWsd/oI6fzfiKM8gWg6X6OjpXstu5ZHnmIb0GFiu29MIUfUewkmVrEN3RqVQ/bY8FzNcquMBv/pCNUZ5pHHem01KdN/I/DG66/lLhKSvTO5M84kav5C5z2ZfyAivi9i9VGd45RH7UWJbjwGG/7NYsRECt7jiOToHedKAui8SW4CsxyRc54mKH/8f7ELhCCACyNcIl/wI+FaAJyc8yzRtinQPzWzuFZrFHq/AAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjkwIj48ZGVmcz48cGF0aCBkPSJNNjcgMTJMNi40NDggNzIuNTUyIDAgMzFWMThMMjYgMGw0MSAxMnptMyA3bDYgNDctMjkgMTgtMzUuNTAyLTYuNDk4TDcwIDE5eiIgaWQ9ImEiLz48L2RlZnM+PHJlY3Qgd2lkdGg9IjE1MCIgaGVpZ2h0PSI5MCIgcng9IjM1IiByeT0iNDUiIG9wYWNpdHk9Ii41Ii8+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNikiPjxtYXNrIGlkPSJiIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PC9tYXNrPjxwYXRoIGQ9Ik0zOS4yNDkgNTEuMzEyYy42OTcgMTAuMzcgMi43ODUgMTcuODk3IDUuMjUxIDE3Ljg5NyAzLjAzOCAwIDUuNS0xMS40MTcgNS41LTI1LjVzLTIuNDYyLTI1LjUtNS41LTI1LjVjLTIuNTEgMC00LjYyOCA3Ljc5Ny01LjI4NyAxOC40NTNBOC45ODkgOC45ODkgMCAwMTQzIDQ0YTguOTg4IDguOTg4IDAgMDEtMy43NTEgNy4zMTJ6TTIwLjk4NSAzMi4yMjRsMTUuNzQ2LTE2Ljg3N2E3LjM4NSA3LjM4NSAwIDAxMTAuMzc0LS40MkM1MS43MDIgMTkuMTE0IDU0IDI5LjIwOCA1NCA0NS4yMDhjMCAxNC41MjctMi4zNDMgMjMuODgtNy4wMyAyOC4wNThhNy4yOCA3LjI4IDAgMDEtMTAuMTY4LS40NjhMMjAuNDA1IDU1LjIyNEgxMmE1IDUgMCAwMS01LTV2LTEzYTUgNSAwIDAxNS01aDguOTg1eiIgZmlsbD0iI0ZGRiIgbWFzaz0idXJsKCNiKSIvPjwvZz48cGF0aCBkPSJNMTA2LjUgMTMuNUw0NC45OTggNzUuMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTciIGhlaWdodD0iOTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik03MCAxMkw5LjQ0OCA3Mi41NTIgMCA2MmwzLTQ0TDI5IDBsNDEgMTJ6bTggMmwxIDUyLTI5IDE4LTM1LjUwMi02LjQ5OEw3OCAxNHoiIGlkPSJhIi8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAzKSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTkuMTEgMjAuOTY4SDQ4LjFhNSA1IDAgMDE1IDVWNTguMThhNSA1IDAgMDEtNSA1SDkuMTFhNSA1IDAgMDEtNS01VjI1Ljk3YTUgNSAwIDAxNS01em00Ny4wOCAxMy4zOTRjMC0uMzQ1IDUuNDcyLTMuMTU5IDE2LjQxNS04LjQ0M2EzIDMgMCAwMTQuMzA0IDIuNzAydjI2LjgzNWEzIDMgMCAwMS00LjMwNSAyLjcwMWMtMTAuOTQyLTUuMjg2LTE2LjQxMy04LjEtMTYuNDEzLTguNDQ2VjM0LjM2MnoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48L2c+PHBhdGggZD0iTTgxLjUgMTYuNUwxOS45OTggNzguMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg=="},function(e,t,n){var r,o,i={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),a=function(e,t){return t?t.querySelector(e):document.querySelector(e)},c=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=a.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),u=null,l=0,d=[],p=n(341);function h(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=i[r.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](r.parts[s]);for(;s<r.parts.length;s++)o.parts.push(v(r.parts[s],t))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(v(r.parts[s],t));i[r.id]={id:r.id,refs:1,parts:a}}}}function f(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],s=t.base?i[0]+t.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function m(e,t){var n=c(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=d[d.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=c(e.insertAt.before,n);n.insertBefore(t,o)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function b(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=n.nc;r&&(e.attrs.nonce=r)}return y(t,e.attrs),m(e,t),t}function y(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function v(e,t){var n,r,o,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var s=l++;n=u||(u=b(t)),r=S.bind(null,n,s,!1),o=S.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),m(e,t),t}(t),r=T.bind(null,n,t),o=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=b(t),r=E.bind(null,n),o=function(){g(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return h(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var s=n[o];(a=i[s.id]).refs--,r.push(a)}for(e&&h(f(e,t),t),o=0;o<r.length;o++){var a;if(0===(a=r[o]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete i[a.id]}}}};var w,x=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function S(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=x(t,o);else{var i=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function E(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function T(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=p(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([r],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(80),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(80);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(80);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(80);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},function(e,t,n){var r=n(79);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(79),o=n(109),i=n(110);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!o||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(s)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(15),o=n(355),i=n(9),s=n(175),a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,d=u.hasOwnProperty,p=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?p:a).test(s(e))}},function(e,t,n){var r=n(39),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var o=s.call(e);return r&&(t?e[a]=n:delete e[a]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,o=n(356),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!i&&i in e}},function(e,t,n){var r=n(14)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(359),o=n(79),i=n(109);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(e,t,n){var r=n(360),o=n(361),i=n(362),s=n(363),a=n(364);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,e.exports=c},function(e,t,n){var r=n(81);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(81),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(81),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},function(e,t,n){var r=n(81);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(82);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(82);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(82);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(82);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(29),o=n(16);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(29),o=n(112),i=n(16),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!s[r(e)]}},function(e,t,n){var r=n(179)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(40),o=n(53);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t,n){var r=n(9),o=n(69),i=n(377),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=o(e),n=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&n.push(a);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(40),o=n(115);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[o++]=s)}return i}},function(e,t,n){var r=n(40),o=n(182);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(38)(n(14),"DataView");e.exports=r},function(e,t,n){var r=n(38)(n(14),"Promise");e.exports=r},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(118),o=n(385),i=n(386),s=n(387),a=n(189);e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return i(e);case"[object Symbol]":return s(e)}}},function(e,t,n){var r=n(118);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(39),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},function(e,t,n){var r=n(389),o=n(68),i=n(113),s=i&&i.isMap,a=s?o(s):r;e.exports=a},function(e,t,n){var r=n(41),o=n(16);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(391),o=n(68),i=n(113),s=i&&i.isSet,a=s?o(s):r;e.exports=a},function(e,t,n){var r=n(41),o=n(16);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},function(e,t,n){(function(r){t.log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.exports.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),t.splice(i,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.setItem("debug",e)}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){var e=function(e){var n="debug_"+"colors".toLowerCase();try{return t.storage.getItem(n)}catch(e){return void 0!==r&&"env"in r?r.env[n.toUpperCase()]:void 0}}();return!/^(no|off|false|disabled)$/i.test(e)&&(!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&Boolean("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(393)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(43))},function(e,t,n){e.exports=function(e){function t(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]}function r(e){var n;function i(){if(i.enabled){var e=i,t=+new Date,o=t-(n||t);e.diff=o,e.prev=n,e.curr=t,n=t;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=r.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return t;c++;var o=r.formatters[n];if("function"==typeof o){var i=s[c];t=o.call(e,i),s.splice(c,1),c--}return t})),r.formatArgs.call(e,s);var u=e.log||r.log;u.apply(e,s)}}return i.namespace=e,i.enabled=r.enabled(e),i.useColors=r.useColors(),i.color=t(e),i.destroy=o,"function"==typeof r.init&&r.init(i),r.instances.push(i),i}function o(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}return r.debug=r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var i=r.instances[t];i.enabled=r.enabled(i.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(394),Object.keys(e).forEach((function(t){r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){var n=1e3,r=60*n,o=60*r,i=24*o;function s(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,t){t=t||{};var a,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===u&&isFinite(e))return t.long?(a=e,(c=Math.abs(a))>=i?s(a,c,i,"day"):c>=o?s(a,c,o,"hour"):c>=r?s(a,c,r,"minute"):c>=n?s(a,c,n,"second"):a+" ms"):function(e){var t=Math.abs(e);return t>=i?Math.round(e/i)+"d":t>=o?Math.round(e/o)+"h":t>=r?Math.round(e/r)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var r=n(396),o=n(176),i=n(88),s=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=s},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){"use strict";const r=n(195),o=new r;e.exports=function(e,t){if(void 0===t)return e;o.has(t)||o.set(t,new r);const n=o.get(t);return n.has(e)||n.set(e,e.bind(t)),n.get(e)}},function(e,t,n){"use strict";e.exports=function(){var e,t;if("function"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(e){return!1}return"[object WeakMap]"===String(e)&&"function"==typeof e.set&&e.set({},1)===e&&"function"==typeof e.delete&&"function"==typeof e.has&&"one"===e.get(t)}},function(e,t,n){"use strict";var r,o=n(44),i=n(123),s=n(402),a=n(31),c=n(403),u=n(32),l=n(202),d=n(445),p=n(45).toStringTag,h=n(446),f=Array.isArray,m=Object.defineProperty,g=Object.prototype.hasOwnProperty,b=Object.getPrototypeOf;e.exports=r=function(){var e,t=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return e=h&&i&&WeakMap!==r?i(new WeakMap,b(this)):this,o(t)&&(f(t)||(t=l(t))),m(e,"__weakMapData__",u("c","$weakMap$"+c())),t?(d(t,(function(t){a(t),e.set(t[0],t[1])})),e):e},h&&(i&&i(r,WeakMap),r.prototype=Object.create(WeakMap.prototype,{constructor:u(r)})),Object.defineProperties(r.prototype,{delete:u((function(e){return!!g.call(s(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)})),get:u((function(e){if(g.call(s(e),this.__weakMapData__))return e[this.__weakMapData__]})),has:u((function(e){return g.call(s(e),this.__weakMapData__)})),set:u((function(e,t){return m(s(e),this.__weakMapData__,u("c",t)),this})),toString:u((function(){return"[object WeakMap]"}))}),m(r.prototype,p,u("c","WeakMap"))},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var r,o,i,s,a=Object.create;n(196)()||(r=n(197)),e.exports=r?1!==r.level?a:(o={},i={},s={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach((function(e){i[e]="__proto__"!==e?s:{configurable:!0,enumerable:!1,writable:!0,value:void 0}})),Object.defineProperties(o,i),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:o}),function(e,t){return a(null===e?o:e,t)}):a},function(e,t,n){"use strict";var r=n(198);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not an Object");return e}},function(e,t,n){"use strict";var r=Object.create(null),o=Math.random;e.exports=function(){var e;do{e=o().toString(36).slice(2)}while(r[e]);return e}},function(e,t,n){"use strict";var r=n(405);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!r(e)}},function(e,t,n){"use strict";var r=n(124);e.exports=function(e){if(!r(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";var r=n(408),o=n(31),i=Math.max;e.exports=function(e,t){var n,s,a,c=i(arguments.length,2);for(e=Object(o(e)),a=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},s=1;s<c;++s)r(t=arguments[s]).forEach(a);if(void 0!==n)throw n;return e}},function(e,t,n){"use strict";e.exports=n(409)()?Object.keys:n(410)},function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){"use strict";var r=n(44),o=Object.keys;e.exports=function(e){return o(r(e)?Object(e):e)}},function(e,t,n){"use strict";var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&!0===r.contains("dwa")&&!1===r.contains("foo")}},function(e,t,n){"use strict";var r=String.prototype.indexOf;e.exports=function(e){return r.call(this,e,arguments[1])>-1}},function(e,t,n){"use strict";var r,o=n(123),i=n(201),s=n(32),a=n(45),c=n(204),u=Object.defineProperty;r=e.exports=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");c.call(this,e),t=t?i.call(t,"key+value")?"key+value":i.call(t,"key")?"key":"value":"value",u(this,"__kind__",s("",t))},o&&o(r,c),delete r.prototype.constructor,r.prototype=Object.create(c.prototype,{_resolve:s((function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e}))}),u(r.prototype,a.toStringTag,s("c","Array Iterator"))},function(e,t,n){"use strict";var r=n(91),o={object:!0,symbol:!0};e.exports=function(){var e,t=r.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!o[typeof t.iterator]&&!!o[typeof t.toPrimitive]&&!!o[typeof t.toStringTag]}},function(e,t,n){"use strict";e.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},function(e,t){var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},function(e,t,n){"use strict";var r,o,i,s=n(32),a=n(203),c=n(91).Symbol,u=n(419),l=n(420),d=n(421),p=Object.create,h=Object.defineProperties,f=Object.defineProperty;if("function"==typeof c)try{String(c()),i=!0}catch(e){}else c=null;o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return r(e)},e.exports=r=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return i?c(t):(n=p(o.prototype),t=void 0===t?"":String(t),h(n,{__description__:s("",t),__name__:s("",u(t))}))},l(r),d(r),h(o.prototype,{constructor:s(r),toString:s("",(function(){return this.__name__}))}),h(r.prototype,{toString:s((function(){return"Symbol ("+a(this).__description__+")"})),valueOf:s((function(){return a(this)}))}),f(r.prototype,r.toPrimitive,s("",(function(){var e=a(this);return"symbol"==typeof e?e:e.toString()}))),f(r.prototype,r.toStringTag,s("c","Symbol")),f(o.prototype,r.toStringTag,s("c",r.prototype[r.toStringTag])),f(o.prototype,r.toPrimitive,s("c",r.prototype[r.toPrimitive]))},function(e,t,n){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},function(e,t,n){"use strict";var r=n(32),o=Object.create,i=Object.defineProperty,s=Object.prototype,a=o(null);e.exports=function(e){for(var t,n,o=0;a[e+(o||"")];)++o;return a[e+=o||""]=!0,i(s,t="@@"+e,r.gs(null,(function(e){n||(n=!0,i(this,t,r(e)),n=!1)}))),t}},function(e,t,n){"use strict";var r=n(32),o=n(91).Symbol;e.exports=function(e){return Object.defineProperties(e,{hasInstance:r("",o&&o.hasInstance||e("hasInstance")),isConcatSpreadable:r("",o&&o.isConcatSpreadable||e("isConcatSpreadable")),iterator:r("",o&&o.iterator||e("iterator")),match:r("",o&&o.match||e("match")),replace:r("",o&&o.replace||e("replace")),search:r("",o&&o.search||e("search")),species:r("",o&&o.species||e("species")),split:r("",o&&o.split||e("split")),toPrimitive:r("",o&&o.toPrimitive||e("toPrimitive")),toStringTag:r("",o&&o.toStringTag||e("toStringTag")),unscopables:r("",o&&o.unscopables||e("unscopables"))})}},function(e,t,n){"use strict";var r=n(32),o=n(203),i=Object.create(null);e.exports=function(e){return Object.defineProperties(e,{for:r((function(t){return i[t]?i[t]:i[t]=e(String(t))})),keyFor:r((function(e){var t;for(t in o(e),i)if(i[t]===e)return t}))})}},function(e,t,n){"use strict";var r=n(31);e.exports=function(){return r(this).length=0,this}},function(e,t,n){"use strict";var r,o=n(55),i=n(424),s=n(428),a=n(429),c=n(200),u=n(439),l=Function.prototype.bind,d=Object.defineProperty,p=Object.prototype.hasOwnProperty;r=function(e,t,n){var r,o=i(t)&&s(t.value);return delete(r=a(t)).writable,delete r.value,r.get=function(){return!n.overwriteDefinition&&p.call(this,e)?o:(t.value=l.call(o,n.resolveContext?n.resolveContext(this):this),d(this,e,t),this[e])},r},e.exports=function(e){var t=c(arguments[1]);return o(t.resolveContext)&&s(t.resolveContext),u(e,(function(e,n){return r(n,e,t)}))}},function(e,t,n){"use strict";var r=n(205),o=n(55);e.exports=function(e){return o(e)?e:r(e,"Cannot use %v",arguments[1])}},function(e,t,n){"use strict";var r=n(55),o=n(124),i=Object.prototype.toString;e.exports=function(e){if(!r(e))return null;if(o(e)){var t=e.toString;if("function"!=typeof t)return null;if(t===i)return null}try{return""+e}catch(e){return null}}},function(e,t,n){"use strict";var r=n(427),o=/[\n\r\u2028\u2029]/g;e.exports=function(e){var t=r(e);return null===t?"<Non-coercible to string value>":(t.length>100&&(t=t.slice(0,99)+""),t=t.replace(o,(function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}})))}},function(e,t,n){"use strict";e.exports=function(e){try{return e.toString()}catch(t){try{return String(e)}catch(e){return null}}}},function(e,t,n){"use strict";var r=n(205),o=n(199);e.exports=function(e){return o(e)?e:r(e,"%v is not a plain function",arguments[1])}},function(e,t,n){"use strict";var r=n(430),o=n(125),i=n(31);e.exports=function(e){var t=Object(i(e)),n=arguments[1],s=Object(arguments[2]);if(t!==e&&!n)return t;var a={};return n?r(n,(function(t){(s.ensure||t in e)&&(a[t]=e[t])})):o(a,e),a}},function(e,t,n){"use strict";e.exports=n(431)()?Array.from:n(432)},function(e,t,n){"use strict";e.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(t=n(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},function(e,t,n){"use strict";var r=n(45).iterator,o=n(89),i=n(433),s=n(434),a=n(70),c=n(31),u=n(44),l=n(90),d=Array.isArray,p=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},f=Object.defineProperty;e.exports=function(e){var t,n,m,g,b,y,v,w,x,S,E=arguments[1],T=arguments[2];if(e=Object(c(e)),u(E)&&a(E),this&&this!==Array&&i(this))t=this;else{if(!E){if(o(e))return 1!==(b=e.length)?Array.apply(null,e):((g=new Array(1))[0]=e[0],g);if(d(e)){for(g=new Array(b=e.length),n=0;n<b;++n)g[n]=e[n];return g}}g=[]}if(!d(e))if(void 0!==(x=e[r])){for(v=a(x).call(e),t&&(g=new t),w=v.next(),n=0;!w.done;)S=E?p.call(E,T,w.value,n):w.value,t?(h.value=S,f(g,n,h)):g[n]=S,w=v.next(),++n;b=n}else if(l(e)){for(b=e.length,t&&(g=new t),n=0,m=0;n<b;++n)S=e[n],n+1<b&&(y=S.charCodeAt(0))>=55296&&y<=56319&&(S+=e[++n]),S=E?p.call(E,T,S,m):S,t?(h.value=S,f(g,m,h)):g[m]=S,++m;b=m}if(void 0===b)for(b=s(e.length),t&&(g=new t(b)),n=0;n<b;++n)S=E?p.call(E,T,e[n],n):e[n],t?(h.value=S,f(g,n,h)):g[n]=S;return t&&(h.value=null,g.length=b),g}},function(e,t,n){"use strict";var r=Object.prototype.toString,o=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(e){return"function"==typeof e&&o(r.call(e))}},function(e,t,n){"use strict";var r=n(435),o=Math.max;e.exports=function(e){return o(0,r(e))}},function(e,t,n){"use strict";var r=n(436),o=Math.abs,i=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?r(e)*i(o(e)):e}},function(e,t,n){"use strict";e.exports=n(437)()?Math.sign:n(438)},function(e,t,n){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&1===e(10)&&-1===e(-20)}},function(e,t,n){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},function(e,t,n){"use strict";var r=n(70),o=n(440),i=Function.prototype.call;e.exports=function(e,t){var n={},s=arguments[2];return r(t),o(e,(function(e,r,o,a){n[r]=i.call(t,s,e,r,o,a)})),n}},function(e,t,n){"use strict";e.exports=n(441)("forEach")},function(e,t,n){"use strict";var r=n(70),o=n(31),i=Function.prototype.bind,s=Function.prototype.call,a=Object.keys,c=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(n,u){var l,d=arguments[2],p=arguments[3];return n=Object(o(n)),r(u),l=a(n),p&&l.sort("function"==typeof p?i.call(p,n):void 0),"function"!=typeof e&&(e=l[e]),s.call(e,l,(function(e,r){return c.call(n,e)?s.call(u,d,n[e],e,n,r):t}))}}},function(e,t,n){"use strict";var r,o=n(123),i=n(32),s=n(45),a=n(204),c=Object.defineProperty;r=e.exports=function(e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");e=String(e),a.call(this,e),c(this,"__length__",i("",e.length))},o&&o(r,a),delete r.prototype.constructor,r.prototype=Object.create(a.prototype,{_next:i((function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()})),_resolve:i((function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0))>=55296&&t<=56319?n+this.__list__[this.__nextIndex__++]:n}))}),c(r.prototype,s.toStringTag,i("c","String Iterator"))},function(e,t,n){"use strict";var r=n(444);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not iterable");return e}},function(e,t,n){"use strict";var r=n(89),o=n(44),i=n(90),s=n(45).iterator,a=Array.isArray;e.exports=function(e){return!(!o(e)||!a(e)&&!i(e)&&!r(e)&&"function"!=typeof e[s])}},function(e,t,n){"use strict";var r=n(89),o=n(70),i=n(90),s=n(202),a=Array.isArray,c=Function.prototype.call,u=Array.prototype.some;e.exports=function(e,t){var n,l,d,p,h,f,m,g,b=arguments[2];if(a(e)||r(e)?n="array":i(e)?n="string":e=s(e),o(t),d=function(){p=!0},"array"!==n)if("string"!==n)for(l=e.next();!l.done;){if(c.call(t,b,l.value,d),p)return;l=e.next()}else for(f=e.length,h=0;h<f&&(m=e[h],h+1<f&&(g=m.charCodeAt(0))>=55296&&g<=56319&&(m+=e[++h]),c.call(t,b,m,d),!p);++h);else u.call(e,(function(e){return c.call(t,b,e,d),p}))}},function(e,t,n){"use strict";e.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},function(e,t,n){var r=n(92),o=n(93),i=n(128),s=n(33),a=n(68),c=n(94),u=Math.min;e.exports=function(e,t,n){for(var l=n?i:o,d=e[0].length,p=e.length,h=p,f=Array(p),m=1/0,g=[];h--;){var b=e[h];h&&t&&(b=s(b,a(t))),m=u(b.length,m),f[h]=!n&&(t||d>=120&&b.length>=120)?new r(h&&b):void 0}b=e[0];var y=-1,v=f[0];e:for(;++y<d&&g.length<m;){var w=b[y],x=t?t(w):w;if(w=n||0!==w?w:0,!(v?c(v,x):l(g,x,n))){for(h=p;--h;){var S=f[h];if(!(S?c(S,x):l(e[h],x,n)))continue e}v&&v.push(x),g.push(w)}}return g}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(206),o=n(451),i=n(452);e.exports=function(e,t,n){return t==t?i(e,t,n):r(e,o,n)}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(129);e.exports=function(e){return r(e)?e:[]}},function(e,t,n){"use strict";(function(t){var r=n(17),o=n(208),i=n(455),s=n(214);function a(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var c=a(n(211));c.Axios=i,c.create=function(e){return a(s(c.defaults,e))},c.Cancel=n(215),c.CancelToken=n(468),c.isCancel=n(210),c.all=function(e){return t.all(e)},c.spread=n(469),c.isAxiosError=n(470),e.exports=c,e.exports.default=c}).call(this,n(0))},function(e,t,n){"use strict";(function(t){var r=n(17),o=n(209),i=n(456),s=n(457),a=n(214);function c(e){this.defaults=e,this.interceptors={request:new i,response:new i}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=[s,void 0],r=t.resolve(e);for(this.interceptors.request.forEach((function(e){n.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){n.push(e.fulfilled,e.rejected)}));n.length;)r=r.then(n.shift(),n.shift());return r},c.prototype.getUri=function(e){return e=a(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=c}).call(this,n(0))},function(e,t,n){"use strict";var r=n(17);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},function(e,t,n){"use strict";(function(t){var r=n(17),o=n(458),i=n(210),s=n(211);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(n){return i(n)||(a(e),n&&n.response&&(n.response.data=o(n.response.data,n.response.headers,e.transformResponse))),t.reject(n)}))}}).call(this,n(0))},function(e,t,n){"use strict";var r=n(17);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var r=n(17);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(213);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(17);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(o)&&a.push("path="+o),r.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(464),o=n(465);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(17),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&o.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(17);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";(function(t){var r=n(215);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new t((function(e){n=e}));var o=this;e((function(e){o.reason||(o.reason=new r(e),n(o.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o}).call(this,n(0))},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},function(e,t,n){var r=n(216)("pick",n(48));r.placeholder=n(130),e.exports=r},function(e,t,n){var r=n(473),o=n(130),i=Array.prototype.push;function s(e,t){return 2==t?function(t,n){return e(t,n)}:function(t){return e(t)}}function a(e){for(var t=e?e.length:0,n=Array(t);t--;)n[t]=e[t];return n}function c(e,t){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var o=r[0]=t.apply(void 0,r);return e.apply(void 0,r),o}}}e.exports=function e(t,n,u,l){var d="function"==typeof n,p=n===Object(n);if(p&&(l=u,u=n,n=void 0),null==u)throw new TypeError;l||(l={});var h=!("cap"in l)||l.cap,f=!("curry"in l)||l.curry,m=!("fixed"in l)||l.fixed,g=!("immutable"in l)||l.immutable,b=!("rearg"in l)||l.rearg,y=d?u:o,v="curry"in l&&l.curry,w="fixed"in l&&l.fixed,x="rearg"in l&&l.rearg,S=d?u.runInContext():void 0,E=d?u:{ary:t.ary,assign:t.assign,clone:t.clone,curry:t.curry,forEach:t.forEach,isArray:t.isArray,isError:t.isError,isFunction:t.isFunction,isWeakMap:t.isWeakMap,iteratee:t.iteratee,keys:t.keys,rearg:t.rearg,toInteger:t.toInteger,toPath:t.toPath},T=E.ary,C=E.assign,_=E.clone,I=E.curry,k=E.forEach,R=E.isArray,N=E.isError,O=E.isFunction,A=E.isWeakMap,D=E.keys,L=E.rearg,P=E.toInteger,V=E.toPath,M=D(r.aryMethod),F={castArray:function(e){return function(){var t=arguments[0];return R(t)?e(a(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],n=arguments[1],r=e(t,n),o=r.length;return h&&"number"==typeof n?(n=n>2?n-2:1,o&&o<=n?r:s(r,n)):r}},mixin:function(e){return function(t){var n=this;if(!O(n))return e(n,Object(t));var r=[];return k(D(t),(function(e){O(t[e])&&r.push([e,n.prototype[e]])})),e(n,Object(t)),k(r,(function(e){var t=e[1];O(t)?n.prototype[e[0]]=t:delete n.prototype[e[0]]})),n}},nthArg:function(e){return function(t){var n=t<0?1:P(t)+1;return I(e(t),n)}},rearg:function(e){return function(t,n){var r=n?n.length:0;return I(e(t,n),r)}},runInContext:function(n){return function(r){return e(t,n(r),l)}}};function W(e,t,n){if(m&&(w||!r.skipFixed[e])){var o=r.methodSpread[e],s=o&&o.start;return void 0===s?T(t,n):function(e,t){return function(){for(var n=arguments.length,r=n-1,o=Array(n);n--;)o[n]=arguments[n];var s=o[t],a=o.slice(0,t);return s&&i.apply(a,s),t!=r&&i.apply(a,o.slice(t+1)),e.apply(this,a)}}(t,s)}return t}function Z(e,t,n){return b&&n>1&&(x||!r.skipRearg[e])?L(t,r.methodRearg[e]||r.aryRearg[n]):t}function B(e,t){for(var n=-1,r=(t=V(t)).length,o=r-1,i=_(Object(e)),s=i;null!=s&&++n<r;){var a=t[n],c=s[a];null==c||O(c)||N(c)||A(c)||(s[a]=_(n==o?c:Object(c))),s=s[a]}return i}function G(t,n){var o=r.aliasToReal[t]||t,i=r.remap[o]||o,s=l;return function(t){var r=d?S:E,a=d?S[i]:n,c=C(C({},s),t);return e(r,o,a,c)}}function U(e,t){return function(){var n=arguments.length;if(!n)return e();for(var r=Array(n);n--;)r[n]=arguments[n];var o=b?0:n-1;return r[o]=t(r[o]),e.apply(void 0,r)}}function $(e,t,n){var o,i=r.aliasToReal[e]||e,u=t,l=F[i];return l?u=l(t):g&&(r.mutate.array[i]?u=c(t,a):r.mutate.object[i]?u=c(t,function(e){return function(t){return e({},t)}}(t)):r.mutate.set[i]&&(u=c(t,B))),k(M,(function(e){return k(r.aryMethod[e],(function(t){if(i==t){var n=r.methodSpread[i],a=n&&n.afterRearg;return o=a?W(i,Z(i,u,e),e):Z(i,W(i,u,e),e),o=function(e,t,n){return v||f&&n>1?I(t,n):t}(0,o=function(e,t){if(h){var n=r.iterateeRearg[e];if(n)return function(e,t){return U(e,(function(e){var n=t.length;return function(e,t){return 2==t?function(t,n){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}(L(s(e,n),t),n)}))}(t,n);var o=!d&&r.iterateeAry[e];if(o)return function(e,t){return U(e,(function(e){return"function"==typeof e?s(e,t):e}))}(t,o)}return t}(i,o),e),!1}})),!o})),o||(o=u),o==t&&(o=v?I(o,1):function(){return t.apply(this,arguments)}),o.convert=G(i,t),o.placeholder=t.placeholder=n,o}if(!p)return $(n,u,y);var X=u,j=[];return k(M,(function(e){k(r.aryMethod[e],(function(e){var t=X[r.remap[e]||e];t&&j.push([e,$(e,t,X)])}))})),k(D(X),(function(e){var t=X[e];if("function"==typeof t){for(var n=j.length;n--;)if(j[n][0]==e)return;t.convert=G(e,t),j.push([e,t])}})),k(j,(function(e){X[e[0]]=e[1]})),X.convert=function(e){return X.runInContext.convert(e)(void 0)},X.placeholder=X,k(D(X),(function(e){k(r.realToAlias[e]||[],(function(t){X[t]=X[e]}))})),X}},function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,n=t.aliasToReal,r={};for(var o in n){var i=n[o];e.call(r,i)?r[i].push(o):r[i]=[o]}return r}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},function(e,t,n){e.exports={ary:n(475),assign:n(177),clone:n(37),curry:n(493),forEach:n(111),isArray:n(10),isError:n(494),isFunction:n(15),isWeakMap:n(495),iteratee:n(496),keys:n(114),rearg:n(511),toInteger:n(96),toPath:n(514)}},function(e,t,n){var r=n(131);e.exports=function(e,t,n){return t=n?void 0:t,t=e&&null==t?e.length:t,r(e,128,void 0,void 0,void 0,void 0,t)}},function(e,t,n){var r=n(95),o=n(14);e.exports=function(e,t,n){var i=1&t,s=r(e);return function t(){var r=this&&this!==o&&this instanceof t?s:e;return r.apply(i?n:this,arguments)}}},function(e,t,n){var r=n(120),o=n(95),i=n(219),s=n(222),a=n(228),c=n(134),u=n(14);e.exports=function(e,t,n){var l=o(e);return function o(){for(var d=arguments.length,p=Array(d),h=d,f=a(o);h--;)p[h]=arguments[h];var m=d<3&&p[0]!==f&&p[d-1]!==f?[]:c(p,f);if((d-=m.length)<n)return s(e,t,i,o.placeholder,void 0,p,m,void 0,void 0,n-d);var g=this&&this!==u&&this instanceof o?l:e;return r(g,this,p)}}},function(e,t){e.exports=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}},function(e,t,n){var r=n(132),o=n(223),i=n(480),s=n(482);e.exports=function(e){var t=i(e),n=s[t];if("function"!=typeof n||!(t in r.prototype))return!1;if(e===n)return!0;var a=o(n);return!!a&&e===a[0]}},function(e,t,n){var r=n(481),o=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=r[t],i=o.call(r,t)?n.length:0;i--;){var s=n[i],a=s.func;if(null==a||a==e)return s.name}return t}},function(e,t){e.exports={}},function(e,t,n){var r=n(132),o=n(225),i=n(133),s=n(10),a=n(16),c=n(483),u=Object.prototype.hasOwnProperty;function l(e){if(a(e)&&!s(e)&&!(e instanceof r)){if(e instanceof o)return e;if(u.call(e,"__wrapped__"))return c(e)}return new o(e)}l.prototype=i.prototype,l.prototype.constructor=l,e.exports=l},function(e,t,n){var r=n(132),o=n(225),i=n(54);e.exports=function(e){if(e instanceof r)return e.clone();var t=new o(e.__wrapped__,e.__chain__);return t.__actions__=i(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},function(e,t){var n=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;e.exports=function(e){var t=e.match(n);return t?t[1].split(r):[]}},function(e,t){var n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=function(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(n,"{\n/* [wrapped with "+t+"] */\n")}},function(e,t,n){var r=n(111),o=n(93),i=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=function(e,t){return r(i,(function(n){var r="_."+n[0];t&n[1]&&!o(e,r)&&e.push(r)})),e.sort()}},function(e,t,n){var r=n(54),o=n(67),i=Math.min;e.exports=function(e,t){for(var n=e.length,s=i(t.length,n),a=r(e);s--;){var c=t[s];e[s]=o(c,n)?a[c]:void 0}return e}},function(e,t,n){var r=n(120),o=n(95),i=n(14);e.exports=function(e,t,n,s){var a=1&t,c=o(e);return function t(){for(var o=-1,u=arguments.length,l=-1,d=s.length,p=Array(d+u),h=this&&this!==i&&this instanceof t?c:e;++l<d;)p[l]=s[l];for(;u--;)p[l++]=arguments[++o];return r(h,a?n:this,p)}}},function(e,t,n){var r=n(220),o=n(221),i=n(134),s="__lodash_placeholder__",a=Math.min;e.exports=function(e,t){var n=e[1],c=t[1],u=n|c,l=u<131,d=128==c&&8==n||128==c&&256==n&&e[7].length<=t[8]||384==c&&t[7].length<=t[8]&&8==n;if(!l&&!d)return e;1&c&&(e[2]=t[2],u|=1&n?0:4);var p=t[3];if(p){var h=e[3];e[3]=h?r(h,p,t[4]):p,e[4]=h?i(e[3],s):t[4]}return(p=t[5])&&(h=e[5],e[5]=h?o(h,p,t[6]):p,e[6]=h?i(e[5],s):t[6]),(p=t[7])&&(e[7]=p),128&c&&(e[8]=null==e[8]?t[8]:a(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=u,e}},function(e,t,n){var r=n(229);e.exports=function(e){return e?Infinity===(e=r(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},function(e,t,n){var r=n(492),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},function(e,t,n){var r=n(131);function o(e,t,n){var i=r(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return i.placeholder=o.placeholder,i}o.placeholder={},e.exports=o},function(e,t,n){var r=n(29),o=n(16),i=n(135);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!i(e)}},function(e,t,n){var r=n(41),o=n(16);e.exports=function(e){return o(e)&&"[object WeakMap]"==r(e)}},function(e,t,n){var r=n(77),o=n(35);e.exports=function(e){return o("function"==typeof e?e:r(e,1))}},function(e,t,n){var r=n(498),o=n(502),i=n(235);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(78),o=n(230);e.exports=function(e,t,n,i){var s=n.length,a=s,c=!i;if(null==e)return!a;for(e=Object(e);s--;){var u=n[s];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++s<a;){var l=(u=n[s])[0],d=e[l],p=u[1];if(c&&u[2]){if(void 0===d&&!(l in e))return!1}else{var h=new r;if(i)var f=i(d,p,l,e,t,h);if(!(void 0===f?o(p,d,3,i,h):f))return!1}}return!0}},function(e,t,n){var r=n(78),o=n(231),i=n(500),s=n(501),a=n(41),c=n(10),u=n(66),l=n(85),d="[object Arguments]",p="[object Array]",h="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,b){var y=c(e),v=c(t),w=y?p:a(e),x=v?p:a(t),S=(w=w==d?h:w)==h,E=(x=x==d?h:x)==h,T=w==x;if(T&&u(e)){if(!u(t))return!1;y=!0,S=!1}if(T&&!S)return b||(b=new r),y||l(e)?o(e,t,n,m,g,b):i(e,t,w,n,m,g,b);if(!(1&n)){var C=S&&f.call(e,"__wrapped__"),_=E&&f.call(t,"__wrapped__");if(C||_){var I=C?e.value():e,k=_?t.value():t;return b||(b=new r),g(I,k,n,m,b)}}return!!T&&(b||(b=new r),s(e,t,n,m,g,b))}},function(e,t,n){var r=n(39),o=n(188),i=n(52),s=n(231),a=n(233),c=n(97),u=r?r.prototype:void 0,l=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,d,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=a;case"[object Set]":var f=1&r;if(h||(h=c),e.size!=t.size&&!f)return!1;var m=p.get(e);if(m)return m==t;r|=2,p.set(e,t);var g=s(h(e),h(t),r,u,d,p);return p.delete(e),g;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},function(e,t,n){var r=n(183),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,s,a){var c=1&n,u=r(e),l=u.length;if(l!=r(t).length&&!c)return!1;for(var d=l;d--;){var p=u[d];if(!(c?p in t:o.call(t,p)))return!1}var h=a.get(e),f=a.get(t);if(h&&f)return h==t&&f==e;var m=!0;a.set(e,t),a.set(t,e);for(var g=c;++d<l;){var b=e[p=u[d]],y=t[p];if(i)var v=c?i(y,b,p,t,e,a):i(b,y,p,e,t,a);if(!(void 0===v?b===y||s(b,y,n,i,a):v)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var w=e.constructor,x=t.constructor;w==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(m=!1)}return a.delete(e),a.delete(t),m}},function(e,t,n){var r=n(234),o=n(30);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,r(s)]}return t}},function(e,t,n){var r=n(230),o=n(57),i=n(237),s=n(136),a=n(234),c=n(235),u=n(47);e.exports=function(e,t){return s(e)&&a(t)?c(u(e),t):function(n){var s=o(n,e);return void 0===s&&s===t?i(n,e):r(t,s,3)}}},function(e,t,n){var r=n(191);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},function(e,t,n){var r=n(39),o=n(33),i=n(10),s=n(71),a=r?r.prototype:void 0,c=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(s(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(58),o=n(65),i=n(10),s=n(67),a=n(112),c=n(47);e.exports=function(e,t,n){for(var u=-1,l=(t=r(t,e)).length,d=!1;++u<l;){var p=c(t[u]);if(!(d=null!=e&&n(e,p)))break;e=e[p]}return d||++u!=l?d:!!(l=null==e?0:e.length)&&a(l)&&s(p,l)&&(i(e)||o(e))}},function(e,t,n){var r=n(509),o=n(510),i=n(136),s=n(47);e.exports=function(e){return i(e)?r(s(e)):o(e)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(98);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t,n){var r=n(131),o=n(137)((function(e,t){return r(e,256,void 0,void 0,void 0,t)}));e.exports=o},function(e,t,n){var r=n(238);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},function(e,t,n){var r=n(39),o=n(65),i=n(10),s=r?r.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(s&&e&&e[s])}},function(e,t,n){var r=n(33),o=n(54),i=n(10),s=n(71),a=n(236),c=n(47),u=n(59);e.exports=function(e){return i(e)?r(e,c):s(e)?[e]:o(a(u(e)))}},function(e,t,n){var r=n(516),o=n(237);e.exports=function(e,t){return r(e,t,(function(t,n){return o(e,n)}))}},function(e,t,n){var r=n(98),o=n(517),i=n(58);e.exports=function(e,t,n){for(var s=-1,a=t.length,c={};++s<a;){var u=t[s],l=r(e,u);n(l,u)&&o(c,i(u,e),l)}return c}},function(e,t,n){var r=n(83),o=n(58),i=n(67),s=n(9),a=n(47);e.exports=function(e,t,n,c){if(!s(e))return e;for(var u=-1,l=(t=o(t,e)).length,d=l-1,p=e;null!=p&&++u<l;){var h=a(t[u]),f=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;if(u!=d){var m=p[h];void 0===(f=c?c(m,h,p):void 0)&&(f=s(m)?m:i(t[u+1])?[]:{})}r(p,h,f),p=p[h]}return e}},function(e,t,n){var r=n(216)("mapKeys",n(519));r.placeholder=n(130),e.exports=r},function(e,t,n){var r=n(64),o=n(99),i=n(35);e.exports=function(e,t){var n={};return t=i(t,3),o(e,(function(e,o,i){r(n,t(e,o,i),e)})),n}},function(e,t){e.exports=function(e){return function(t,n,r){for(var o=-1,i=Object(t),s=r(t),a=s.length;a--;){var c=s[e?a:++o];if(!1===n(i[c],c,i))break}return t}}},function(e,t,n){(function(e){var r;!function(o){t&&t.nodeType,e&&e.nodeType;var i="object"==typeof(void 0!==typeof window?window:__webpack_require__.g)&&(void 0!==typeof window?window:__webpack_require__.g);i.global!==i&&i.window!==i&&i.self;var s,a=2147483647,c=36,u=/^xn--/,l=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,f=String.fromCharCode;function m(e){throw new RangeError(p[e])}function g(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function b(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+g((e=e.replace(d,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function v(e){return g(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+f(e)})).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,n){var r=0;for(e=n?h(e/700):e>>1,e+=h(e/t);e>455;r+=c)e=h(e/35);return h(r+36*e/(e+38))}function S(e){var t,n,r,o,i,s,u,l,d,p,f,g=[],b=e.length,y=0,w=128,S=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&m("not-basic"),g.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<b;){for(i=y,s=1,u=c;o>=b&&m("invalid-input"),((l=(f=e.charCodeAt(o++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:c)>=c||l>h((a-y)/s))&&m("overflow"),y+=l*s,!(l<(d=u<=S?1:u>=S+26?26:u-S));u+=c)s>h(a/(p=c-d))&&m("overflow"),s*=p;S=x(y-i,t=g.length+1,0==i),h(y/t)>a-w&&m("overflow"),w+=h(y/t),y%=t,g.splice(y++,0,w)}return v(g)}function E(e){var t,n,r,o,i,s,u,l,d,p,g,b,v,S,E,T=[];for(b=(e=y(e)).length,t=128,n=0,i=72,s=0;s<b;++s)(g=e[s])<128&&T.push(f(g));for(r=o=T.length,o&&T.push("-");r<b;){for(u=a,s=0;s<b;++s)(g=e[s])>=t&&g<u&&(u=g);for(u-t>h((a-n)/(v=r+1))&&m("overflow"),n+=(u-t)*v,t=u,s=0;s<b;++s)if((g=e[s])<t&&++n>a&&m("overflow"),g==t){for(l=n,d=c;!(l<(p=d<=i?1:d>=i+26?26:d-i));d+=c)E=l-p,S=c-p,T.push(f(w(p+E%S,0))),l=h(E/S);T.push(f(w(l,0))),i=x(n,v,r==o),n=0,++r}++n,++t}return T.join("")}s={version:"1.4.1",ucs2:{decode:y,encode:v},decode:S,encode:E,toASCII:function(e){return b(e,(function(e){return l.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return b(e,(function(e){return u.test(e)?S(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()}).call(this,n(84)(e))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(524),t.encode=t.stringify=n(525)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var d,p,h,f,m=e[l].replace(a,"%20"),g=m.indexOf(n);g>=0?(d=m.substr(0,g),p=m.substr(g+1)):(d=m,p=""),h=decodeURIComponent(d),f=decodeURIComponent(p),r(s,h)?o(s[h])?s[h].push(f):s[h]=[s[h],f]:s[h]=f}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(s(e),(function(s){var a=encodeURIComponent(r(s))+n;return o(e[s])?i(e[s],(function(e){return a+encodeURIComponent(r(e))})).join(t):a+encodeURIComponent(r(e[s]))})).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){var r,o,i=n(242),s=n(243),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],d=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==p){var h=i();null==d&&(d=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==p&&(p=o=16383&(h[6]<<8|h[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=f-a+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(p=p+1&16383),(g<0||f>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,c=m,o=p;var b=(1e4*(268435455&(f+=122192928e5))+m)%4294967296;l[u++]=b>>>24&255,l[u++]=b>>>16&255,l[u++]=b>>>8&255,l[u++]=255&b;var y=f/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=p>>>8|128,l[u++]=255&p;for(var v=0;v<6;++v)l[u+v]=d[v];return t||s(l)}},function(e,t,n){var r=n(242),o=n(243);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[i+a]=s[a];return t||o(s)}},function(e,t,n){"use strict";var r=n(3)(n(18));let o=function(){function e(e){let t=(void 0===e?{}:e).waitTime,n=void 0===t?50:t;(0,r.default)(this,"queue",[]),(0,r.default)(this,"running",!1),this.waitTime=n}var t=e.prototype;return t.add=function(e){this.queue.push(e),this.run()},t.run=function(){if(this.running)return;this.running=!0;const e=()=>{0!==this.queue.length?this.queue.shift()((()=>{setTimeout(e,this.waitTime)})):this.running=!1};e()},e}();e.exports=o},function(e,t,n){"use strict";const r=n(9),o={for:"htmlFor",class:"className"};e.exports=function(e){e.prototype.attr=function(e,t){if(r(e)){let t;Object.keys(e).forEach((n=>{t=o[n]||n,this.first.setAttribute(t,e[n])}))}else{if(void 0===t)return this.first.getAttribute(o[e]||e);this.first.setAttribute(o[e]||e,t)}return this},e.prototype.removeAttr=function(e){const t=o[e]||e;return this.forEach((e=>{e.removeAttribute(t)})),this},e.prototype.html=function(e){return void 0!==e&&(this.first.innerHTML=e),this.first.innerHTML},e.prototype.center=function(t,n){let r;return this.forEach((o=>{r=new e(o),t=t||parseInt(r.width(),10),n=n||parseInt(r.height(),10);const i=-.5*t+"px",s=-.5*n+"px";r.css("margin",`${s} 0 0 ${i}`).addClass("OT_centered")})),this},e._attachToOTHelpers.centerElement=function(t,n,r){return new e(t).center(n,r)};const t=function(t){return t.offsetWidth>0?`${t.offsetWidth}px`:new e(t).css("width")},n=function(t){return t.offsetHeight>0?`${t.offsetHeight}px`:new e(t).css("height")};e.prototype.width=function(e){return e?(this.css("width",e),this):this.isDisplayNone()?this.makeVisibleAndYield((e=>t(e)))[0]:t(this.get(0))},e._attachToOTHelpers.width=function(t,n){const r=new e(t).width(n);return n?e._attachToOTHelpers:r},e.prototype.height=function(e){return e?(this.css("height",e),this):this.isDisplayNone()?this.makeVisibleAndYield((e=>n(e)))[0]:n(this.get(0))},e._attachToOTHelpers.height=function(t,n){const r=new e(t).height(n);return n?e._attachToOTHelpers:r}}},function(e,t,n){"use strict";const r=n(2),o=(void 0!==typeof window?window:__webpack_require__.g).getComputedStyle,i={Firefox:"moz",Opera:"O",Chrome:"Webkit",Safari:"Webkit"};e.exports=function(e,t){const n={},s={},a=function(e,t){if(t in e.style)return t;const n=i[r.name]+t[0].toUpperCase()+t.slice(1);return n in e.style?n:t};e.prototype.show=function(){return this.forEach((t=>{const r=t.style.display;""!==r&&"none"!==r||(t.style.display=n[t]||"",delete n[t]),function(e){return"none"===o(e).getPropertyValue("display")}(t)&&(n[t]="none",t.style.display=function(t){if(s[t.ownerDocument]&&s[t.ownerDocument][t.nodeName])return s[t.ownerDocument][t.nodeName];s[t.ownerDocument]||(s[t.ownerDocument]={});let n,r=t.ownerDocument.createElement(t.nodeName);return t.ownerDocument.body.appendChild(r),n=new e(r).css("display"),s[t.ownerDocument][t.nodeName]=n,new e(r).remove(),r=null,n}(t))}))},e.prototype.hide=function(){return this.forEach((e=>{"none"!==e.style.display&&(n[e]=e.style.display,e.style.display="none")}))},e.prototype.css=function(e,t){if(0!==this.length)return"string"!=typeof e?this.forEach((t=>{!function(e,t){const n=e.style;for(const r in t)t.hasOwnProperty(r)&&(n[a(e,r)]=t[r])}(t,e)})):void 0!==t?this.forEach((n=>{!function(e,t,n){e.style[a(e,t)]=n}(n,e,t)})):function(e,t){const n=a(e,t);let r=o(e).getPropertyValue(n);return""===r&&(r=e.style[n]),r}(this.first,e)},e.prototype.makeVisibleAndYield=function(n){const r={display:"block",visibility:"hidden"},o=[];return this.forEach((i=>{const s=t(i);s?o.push(function(t,n,r){const o=new e(t),i={};let s,a;for(s in n)n.hasOwnProperty(s)&&(i[s]=t.style[s],o.css(s,n[s]));for(s in a=r(t),n)n.hasOwnProperty(s)&&o.css(s,i[s]||"");return a}(s,r,n)):o.push(void 0)})),o}}},function(e,t,n){"use strict";(function(t){const r=n(532),o=r.isiPhone,i=r.isiPad,s=r.isiOS,a=n(533),c=n(534),u=e=>{var t,n;return(null==(n=e=e||(null==(t=void 0!==typeof window?window:__webpack_require__.g)?void 0:t.navigator))?void 0:n.userAgent.toLowerCase().indexOf("electron"))>=0},l=()=>{var e,t,n;return"string"==typeof(null==(e=void 0!==typeof window?window:__webpack_require__.g)||null==(t=e.process)||null==(n=t.versions)?void 0:n.node)&&!u()},d={version:-1,name:"unknown"};e.exports={parse:e=>(l()?(d.name="Node",d.isNode=!0,d.version=parseInt(t.versions.node,10),d.userAgent=`${d.name} ${d.version}`):(e=>{if(e=e||(void 0!==typeof window?window:__webpack_require__.g).navigator,d.userAgent=e.userAgent.toLowerCase(),d.name="unknown",d.userAgent.indexOf("opera")>-1||d.userAgent.indexOf("opr/")>-1)d.name="Opera",d.isOpera=!0,null!==/opr\/([0-9]{1,}[.0-9]{0,})/.exec(d.userAgent)&&(d.version=parseFloat(RegExp.$1));else if(d.userAgent.indexOf("firefox")>-1)d.name="Firefox",d.isFirefox=!0,null!==/firefox\/([0-9]{1,}[.0-9]{0,})/.exec(d.userAgent)&&(d.version=parseFloat(RegExp.$1));else if(d.userAgent.match(/edge?\/(\d+)(?:\.\d+)+$/)){d.name="Edge",d.isEdge=!0;const e=RegExp.$1;d.version=parseInt(e,10)}else d.userAgent.indexOf("chrome")>-1?(d.name="Chrome",d.isElectron=u(e),d.isElectron?d.electronVersion=c(e.userAgent):d.isChrome=!0,null!==/chrome\/([0-9]{1,}[.0-9]{0,})/.exec(d.userAgent)&&(d.version=parseFloat(RegExp.$1))):e.vendor&&e.vendor.toLowerCase().indexOf("apple")>-1?(d.name="Safari",d.isSafari=!0,d.isiPhone=o(e.userAgent),d.isiPad=i(e.userAgent),d.isiOS=s(e.userAgent),d.isiOS&&(d.iOSVersion=a(e.userAgent)),(null!==/version\/([0-9]{1,}[.0-9]{0,})/.exec(d.userAgent)||null!==/fxios\/([0-9]{1,}[.0-9]{0,})/.exec(d.userAgent)||null!==/crios\/([0-9]{1,}[.0-9]{0,})/.exec(d.userAgent))&&(d.version=parseFloat(RegExp.$1))):d.userAgent.indexOf("applewebkit")>-1&&-1===d.userAgent.indexOf("version")&&(d.isIosWebView=!0);d.isChromiumEdge="Edge"===d.name&&d.version>=79,d.isLegacyEdge="Edge"===d.name&&d.version<79,d.isLegacyElectron=d.isElectron&&d.electronVersion<2,d.isLegacyChrome=d.isChrome&&d.version<50,d.isAndroid=d.userAgent.indexOf("android")>-1,d.userAgent=e.userAgent,d.protocol=location.protocol,d.hostName=location.hostName,(-1===d.version||"unknown"===d.name||d.isiOS&&!d.iOSVersion)&&(d.error=!0)})(e),d),isNode:l}}).call(this,n(43))},function(e,t,n){"use strict";const r=e=>/iPhone/.test(e),o=e=>/iPad/.test(e)||(e=>{try{return e.includes("Mac")&&"ontouchend"in document}catch(e){return!1}})(e);e.exports={isiPhone:r,isiPad:o,isiOS:e=>r(e)||o(e)}},function(e,t,n){"use strict";e.exports=function(e){const t=e.match(/OS (\d+_\d+).* like Mac/);if(null!==t&&t[1])return parseFloat(t[1].replace("_","."))}},function(e,t,n){"use strict";const r=/(Electron)\/([0-9]{1,}[.0-9]{0,})/;e.exports=e=>{const t=e.match(r);return t&&parseFloat(t[2])}},function(e,t,n){"use strict";const r=n(536);function o(e,t){return!!t&&(r()?e.classList.contains(t):e.className.indexOf(t)>-1)}e.exports=function(e){e.prototype.addClass=function(e){if(e){const t=e.trim().split(/\s+/);this.forEach((e=>{!function(e,t){if(!t||0===t.length)return;if(1!==e.nodeType)return;const n=t.length;let o=0;if(r())for(;o<n;++o)e.classList.add(t[o]);else if(e.className||1!==t.length){let r=` ${e.className} `;for(;o<n;++o)~r.indexOf(` ${t[o]} `)||(r+=`${t[o]} `);e.className=r.trim()}else e.className=t.join(" ")}(e,t)}))}return this},e.prototype.removeClass=function(e){if(e){const t=e.trim().split(/\s+/);this.forEach((e=>{!function(e,t){if(!t||0===t.length)return;if(1!==e.nodeType)return;const n=t.length;let o=0;if(r()){for(;o<n;++o)e.classList.remove(t[o]);return}let i=` ${e.className} `.replace(/[\s+]/," ");for(;o<n;++o)i=i.replace(` ${t[o]} `," ");e.className=i.trim()}(e,t)}))}return this},e.prototype.toggleClass=function(e){if(e){const t=e.trim().split(/\s+/);this.forEach((e=>{!function(e,t){if(!t||0===t.length)return;if(1!==e.nodeType)return;const n=t.length;let i=0;if(r()){for(;i<n;++i)e.classList.toggle(t[i]);return}let s=` ${e.className} `.replace(/[\s+]/," ");for(;i<n;++i)o(e,t[i])?s=s.replace(` ${t[i]} `," "):s+=`${t[i]} `;e.className=s.trim()}(e,t)}))}return this},e.prototype.hasClass=function(e){return this.some((t=>o(t,e)))}}},function(e,t,n){"use strict";e.exports=()=>"undefined"!=typeof document&&"classList"in document.createElement("a")},function(e,t,n){"use strict";const r=n(538);e.exports=function(e){let t=0,n=0;e.prototype.observeStyleChanges=function(t,n){const o=[];return this.forEach((i=>{o.push(function(t,n,o){const i={},s=function(n){switch(n){case"width":return new e(t).width();case"height":return new e(t).height();default:return new e(t).css(n)}};n.forEach((e=>{i[e]=s(e)}));const a=new(void 0!==typeof window?window:__webpack_require__.g).MutationObserver((a=>{const c={};a.forEach((r=>{if("style"!==r.attributeName)return;const o=new e(t).isDisplayNone();n.forEach((e=>{if(o&&("width"===e||"height"===e))return;const t=s(e);t!==i[e]&&(c[e]=[i[e],t],i[e]=t)}))})),r(c)||setTimeout((()=>{o.call(null,c)}))}));return a.observe(t,{attributes:!0,attributeFilter:["style"],childList:!1,characterData:!1,subtree:!1}),a}(i,t,n))})),o},e.prototype.observeNodeOrChildNodeRemoval=function(t){const r=[];return this.forEach((o=>{r.push(function(t,r){const o=new(void 0!==typeof window?window:__webpack_require__.g).MutationObserver((t=>{let n=[];t.forEach((e=>{e.removedNodes.length&&(n=n.concat(Array.prototype.slice.call(e.removedNodes)))})),n.length&&setTimeout((()=>{r(new e(n))}))}));o.observe(t,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),n++;const i=o.disconnect;return o.disconnect=function(){i.apply(o,arguments),n--},o}(o,t))})),r},e.prototype.observeSize=function(e){const n=[];return this.forEach((r=>{n.push(function(e,n){let r={width:0,height:0};const o=setInterval((()=>{const t=e.getBoundingClientRect();r.width===t.width&&r.height===t.height||(n(t,r),r={width:t.width,height:t.height})}),200);return t++,{disconnect(){clearInterval(o),t--}}}(r,e))})),n},e._attachToOTHelpers.observeStyleChanges=function(t,n,r){return new e(t).observeStyleChanges(n,r)[0]},e._attachToOTHelpers.observeNodeOrChildNodeRemoval=function(t,n){return new e(t).observeNodeOrChildNodeRemoval(n)[0]},e.__testOnly||(e.__testOnly={}),e.__testOnly.sizeObserverCount=function(){return t},e.__testOnly.nodeRemovalObserverCount=function(){return n}}},function(e,t,n){var r=n(114),o=n(41),i=n(65),s=n(10),a=n(25),c=n(66),u=n(69),l=n(85),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||l(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},function(e,t,n){"use strict";e.exports={1004:"Authentication error",1005:"Invalid Session ID",1006:"Connect Failed",1007:"Connect Rejected",1008:"Connect Time-out",1009:"Security Error",1010:"Not Connected",1011:"Invalid Parameter",1012:"Peer-to-peer Stream Play Failed",1013:"Connection Failed",1014:"API Response Failure",1015:"PeerConnection not connected, cannot call this method",1021:"Request Timeout",1026:"Terms of Service Violation: Export Compliance",1027:"Connection Limit Exceeded",1040:"Set Video Source Failure",1041:"Invalid Video Source",1500:"Unable to Publish",1501:"Unable to Subscribe",1502:"Unsupported Video Codec",1503:"No TURN server found",1520:"Unable to Force Disconnect",1530:"Unable to Force Unpublish",1540:"Unable to Force Mute",1553:"ICEWorkflow failed",1600:"createOffer, createAnswer, setLocalDescription, setRemoteDescription",1605:"Stream Limit Exceeded",2e3:"Internal Error",2001:"Unexpected Server Response",2021:"Proxy URL Timing Error",2022:"Proxy URL Already Set Error",2031:"getRtcStatsReport is not supported in this browser",4e3:"WebSocket Connection Failed",4001:"WebSocket Network Disconnected",5001:"Unable to access media engine"}},function(e,t,n){"use strict";const r=n(15);e.exports=function(e,t,n,o,i){let s,a=n;return e.currentState=n,e.is=function(){return-1!==Array.prototype.indexOf.call(arguments,a)},e.isNot=function(){return-1===Array.prototype.indexOf.call(arguments,a)},function(n){if(a!==n){if(-1===t.indexOf(n))return void(i&&r(i)&&i("invalidState",n));e.previousState=a,s=a,e.currentState=n,a=n,o&&r(o)&&o(n,s)}}}},function(e,t,n){"use strict";const r=n(248),o={};e.exports=o,o.isElementNode=function(e){return e&&"object"==typeof e&&1===e.nodeType},o.createElement=function(e,t,n,r){const o=(r||document).createElement(e);t=t||{},Object.keys(t).forEach((e=>{if("object"==typeof t[e]){o[e]||(o[e]={});const n=t[e];Object.keys(n).forEach((t=>{o[e][t]=n[t]}))}else"className"===e?o.className=t[e]:o.setAttribute(e,t[e])}));const i=function(e){"string"==typeof e?o.innerHTML+=e:o.appendChild(e)};return Array.isArray(n)?n.forEach(i):n&&i(n),o},r(o)},function(e,t,n){"use strict";const r=n(543);e.exports=function(e){void 0===e&&(e={}),(e.isSessionProxied||n(544))(e.sessionId)&&r.forEach((t=>{t in e&&(e[t]="")}))}},function(e,t,n){"use strict";e.exports=["audioLocalAddress","audioRemoteAddress","videoLocalAddress","videoRemoteAddress"]},function(e,t,n){"use strict";const r=n(21).sessions;e.exports=e=>{const t=r.get(e);return!!t&&!!t._.getProxyUrl()}},function(e,t,n){"use strict";e.exports=["buildHash","minimumVersion","debug",["websiteURL","websiteUrl"],["cdnURL","cdnUrl"],["loggingURL","loggingUrl"],["apiURL","apiUrl"],["supportSSL",!0],["cdnURLSSL","cdnUrl"],["loggingURLSSL","loggingUrl"],["apiURLSSL","apiUrl"],["assetURL","assetUrl"]]},function(e,t,n){"use strict";e.exports=["apiUrl","apiURL","apiURLSSL"]},function(e,t,n){"use strict";e.exports=function(){const e=(void 0!==typeof window?window:n.g).OT,t=(void 0!==typeof window?window:n.g).TB;return()=>{const r=(void 0!==typeof window?window:n.g).OT;return(void 0!==typeof window?window:n.g).OT=e,(void 0!==typeof window?window:n.g).TB=t,r}}},function(e,t,n){"use strict";e.exports=function(e){function t(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const i=new e(...r);return Object.setPrototypeOf(i,t.prototype),i}return t.prototype=Object.create(e.prototype),Object.defineProperties(t.prototype,(e=>{const t={};return Object.getOwnPropertyNames(e).forEach((n=>{t[n]=Object.getOwnPropertyDescriptor(e,n)})),t})(e.prototype)),Object.keys(e).forEach((n=>{t[n]=e[n]})),t}},function(e,t,n){"use strict";var r=n(28);e.exports=function(e,t){var o=e&&e.window,i={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);var a=r.log,c=r.detectBrowser(o),u=n(550)||null,l=n(552)||null,d=n(556)||null,p=n(558)||null,h=n(559)||null,f={browserDetails:c,commonShim:h,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(c.browser){case"chrome":if(!u||!u.shimPeerConnection||!i.shimChrome)return a("Chrome shim is not included in this adapter release."),f;a("adapter.js shimming chrome."),f.browserShim=u,h.shimCreateObjectURL(o),u.shimGetUserMedia(o),u.shimMediaStream(o),u.shimSourceObject(o),u.shimPeerConnection(o),u.shimOnTrack(o),u.shimAddTrackRemoveTrack(o),u.shimGetSendersWithDtmf(o),u.shimSenderReceiverGetStats(o),u.fixNegotiationNeeded(o),h.shimRTCIceCandidate(o),h.shimMaxMessageSize(o),h.shimSendThrowTypeError(o);break;case"firefox":if(!d||!d.shimPeerConnection||!i.shimFirefox)return a("Firefox shim is not included in this adapter release."),f;a("adapter.js shimming firefox."),f.browserShim=d,h.shimCreateObjectURL(o),d.shimGetUserMedia(o),d.shimSourceObject(o),d.shimPeerConnection(o),d.shimOnTrack(o),d.shimRemoveStream(o),d.shimSenderGetStats(o),d.shimReceiverGetStats(o),d.shimRTCDataChannel(o),h.shimRTCIceCandidate(o),h.shimMaxMessageSize(o),h.shimSendThrowTypeError(o);break;case"edge":if(!l||!l.shimPeerConnection||!i.shimEdge)return a("MS edge shim is not included in this adapter release."),f;a("adapter.js shimming edge."),f.browserShim=l,h.shimCreateObjectURL(o),l.shimGetUserMedia(o),l.shimPeerConnection(o),l.shimReplaceTrack(o),l.shimGetDisplayMedia(o),h.shimMaxMessageSize(o),h.shimSendThrowTypeError(o);break;case"safari":if(!p||!i.shimSafari)return a("Safari shim is not included in this adapter release."),f;a("adapter.js shimming safari."),f.browserShim=p,h.shimCreateObjectURL(o),p.shimRTCIceServerUrls(o),p.shimCreateOfferLegacy(o),p.shimCallbacksAPI(o),p.shimLocalStreamsAPI(o),p.shimRemoteStreamsAPI(o),p.shimTrackEventTransceiver(o),p.shimGetUserMedia(o),h.shimRTCIceCandidate(o),h.shimMaxMessageSize(o),h.shimSendThrowTypeError(o);break;default:a("Unsupported browser!")}return f}},function(e,t,n){"use strict";(function(t){var r=n(28),o=r.log;function i(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?i(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){i(e,e.get(t),n)}))})))}function s(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var s=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&s.push(e)})),s.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&i(e,n,o)}))})),o}e.exports={shimGetUserMedia:n(551),shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return n._ontrackpoly||(n._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var o;o=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var i=new Event("track");i.track=r.track,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],n.dispatchEvent(i)})),t.stream.getTracks().forEach((function(r){var o;o=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var i=new Event("track");i.track=r,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],n.dispatchEvent(i)}))},n.addEventListener("addstream",n._ontrackpoly)),t.apply(n,arguments)}}else r.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))},shimGetSendersWithDtmf:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var o=this,i=n.apply(o,arguments);return i||(i=t(o,e),o._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;r.apply(t,arguments);var n=t._senders.indexOf(e);-1!==n&&t._senders.splice(n,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;n._senders=n._senders||[],o.apply(n,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],i.apply(t,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(e,[]);return t.forEach((function(t){t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSenderReceiverGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=n.apply(e,[]);return t.forEach((function(t){t._pc=e})),t});var o=e.RTCPeerConnection.prototype.addTrack;o&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=o.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(e,[]);return t.forEach((function(t){t._pc=e})),t}),r.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var n=this;if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var r,o,i,s=arguments[0];return n.getSenders().forEach((function(e){e.track===s&&(r?i=!0:r=e)})),n.getReceivers().forEach((function(e){return e.track===s&&(o?i=!0:o=e),e.track===s})),i||r&&o?t.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():o?o.getStats():t.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return a.apply(n,arguments)}}}},shimSourceObject:function(e){var t=e&&e.URL;"object"==typeof e&&e.HTMLMediaElement&&!("srcObject"in e.HTMLMediaElement.prototype)&&Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var n=this;this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e?(this.src=t.createObjectURL(e),e.addEventListener("addtrack",(function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)})),e.addEventListener("removetrack",(function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)}))):this.src=""}})},shimAddTrackRemoveTrackWithNative:function(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=t.getSenders();n.apply(this,arguments);var o=t.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(o)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),o.apply(this,arguments)}},shimAddTrackRemoveTrack:function(e){if(e.RTCPeerConnection){var n=r.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&n.version>=65)return this.shimAddTrackRemoveTrackWithNative(e);var o=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=o.apply(this);return e._reverseStreams=e._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!n._reverseStreams[t.id]){var r=new e.MediaStream(t.getTracks());n._streams[t.id]=r,n._reverseStreams[r.id]=t,t=r}i.apply(n,[t])};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},s.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(n,r){var o=this;if("closed"===o.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===n})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var s=o.getSenders().find((function(e){return e.track===n}));if(s)throw new DOMException("Track already exists.","InvalidAccessError");o._streams=o._streams||{},o._reverseStreams=o._reverseStreams||{};var a=o._streams[r.id];if(a)a.addTrack(n),t.resolve().then((function(){o.dispatchEvent(new Event("negotiationneeded"))}));else{var c=new e.MediaStream([n]);o._streams[r.id]=c,o._reverseStreams[c.id]=r,o.addStream(c)}return o.getSenders().find((function(e){return e.track===n}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this,t=arguments,r=arguments.length&&"function"==typeof arguments[0];return r?n.apply(e,[function(n){var r=u(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(e,arguments).then((function(t){return u(e,t)}))}}));var a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this;return arguments.length&&arguments[0].type?(arguments[0]=l(e,arguments[0]),a.apply(e,arguments)):a.apply(e,arguments)};var c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=c.get.apply(this);return""===e.type?e:u(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===n.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==n)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");n._streams=n._streams||{},Object.keys(n._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?n.removeStream(n._reverseStreams[t.id]):t.removeTrack(e.track),n.dispatchEvent(new Event("negotiationneeded")))}}function u(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(o.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function l(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:n})}},shimPeerConnection:function(e){var n=r.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=function(t,n){return o("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy),new e.webkitRTCPeerConnection(t,n)},e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype,e.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.webkitRTCPeerConnection.generateCertificate}})),e.RTCPeerConnection){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,n,r){var o=this,s=arguments;if(arguments.length>0&&"function"==typeof e)return i.apply(this,arguments);if(0===i.length&&(0===arguments.length||"function"!=typeof arguments[0]))return i.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},c=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var u=function(e){s[1](c(a(e)))};return i.apply(this,[u,arguments[0]])}return new t((function(e,t){i.apply(o,[function(t){e(c(a(t)))},t])})).then(n,r)},n.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(n){var r=e.RTCPeerConnection.prototype[n];e.RTCPeerConnection.prototype[n]=function(){var e=arguments,n=this,o=new t((function(t,o){r.apply(n,[e[0],t,o])}));return e.length<2?o:o.then((function(){e[1].apply(null,[])}),(function(t){e.length>=3&&e[2].apply(null,[t])}))}})),n.version<52&&["createOffer","createAnswer"].forEach((function(n){var r=e.RTCPeerConnection.prototype[n];e.RTCPeerConnection.prototype[n]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new t((function(t,o){r.apply(e,[t,o,n])}))}return r.apply(this,arguments)}})),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}));var s=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?s.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),t.resolve())}}},fixNegotiationNeeded:function(e){r.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){if("stable"===e.target.signalingState)return e}))},shimGetDisplayMedia:function(e,t){e.navigator&&e.navigator.mediaDevices&&!("getDisplayMedia"in e.navigator.mediaDevices)&&("function"==typeof t?(e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,o=n.video&&n.video.height,i=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},r&&(n.video.mandatory.maxWidth=r),o&&(n.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(n)}))},e.navigator.getDisplayMedia=function(t){return r.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),e.navigator.mediaDevices.getDisplayMedia(t)}):console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}}).call(this,n(0))},function(e,t,n){"use strict";(function(t){var r=n(28),o=r.log;e.exports=function(e){var n=r.detectBrowser(e),i=e&&e.navigator,s=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var i={};"number"==typeof r.ideal?(i[o("min",n)]=r.ideal,t.optional.push(i),(i={})[o("max",n)]=r.ideal,t.optional.push(i)):(i[o("",n)]=r.ideal,t.optional.push(i))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,t){if(n.version>=61)return t(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var r=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};r((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),r(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=s(e.audio)}if(e&&"object"==typeof e.video){var a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});var c,u=n.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||u)&&(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?c=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(c=["front"]),c))return i.mediaDevices.enumerateDevices().then((function(n){var r=(n=n.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return c.some((function(t){return-1!==e.label.toLowerCase().indexOf(t)}))}));return!r&&n.length&&-1!==c.indexOf("back")&&(r=n[n.length-1]),r&&(e.video.deviceId=a.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=s(e.video),o("chrome: "+JSON.stringify(e)),t(e)}));e.video=s(e.video)}return o("chrome: "+JSON.stringify(e)),t(e)},c=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};i.getUserMedia=function(e,t,n){a(e,(function(e){i.webkitGetUserMedia(e,t,(function(e){n&&n(c(e))}))}))};var u=function(e){return new t((function(t,n){i.getUserMedia(e,t,n)}))};if(i.mediaDevices||(i.mediaDevices={getUserMedia:u,enumerateDevices:function(){return new t((function(t){var n={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources((function(e){t(e.map((function(e){return{label:e.label,kind:n[e.kind],deviceId:e.id,groupId:""}})))}))}))},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),i.mediaDevices.getUserMedia){var l=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return l(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return t.reject(c(e))}))}))}}else i.mediaDevices.getUserMedia=function(e){return u(e)};void 0===i.mediaDevices.addEventListener&&(i.mediaDevices.addEventListener=function(){o("Dummy mediaDevices.addEventListener called.")}),void 0===i.mediaDevices.removeEventListener&&(i.mediaDevices.removeEventListener=function(){o("Dummy mediaDevices.removeEventListener called.")})}}).call(this,n(0))},function(e,t,n){"use strict";var r=n(28),o=n(553),i=n(554);e.exports={shimGetUserMedia:n(555),shimPeerConnection:function(e){var t=r.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var s=i(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=o(e.iceServers)),new s(e)},e.RTCPeerConnection.prototype=s.prototype},shimReplaceTrack:function(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)},shimGetDisplayMedia:function(e,t){if("getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&!("getDisplayMedia"in e.navigator.mediaDevices)){var n=e.navigator.getDisplayMedia;e.navigator.mediaDevices.getDisplayMedia=function(t){return n.call(e.navigator,t)},e.navigator.getDisplayMedia=function(t){return r.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),n.call(e.navigator,t)}}}}},function(e,t,n){"use strict";var r=n(28);e.exports=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var o=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var i="string"==typeof o;return i&&(o=[o]),o=o.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=i?o[0]:o,!!o.length}}))}},function(e,t,n){"use strict";(function(t){var r=n(252);function o(e,t,n,o,i){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(o?o.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s}function i(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},o=function(e,t,n,o){var i=r(e.parameters.apt,n),s=r(t.parameters.apt,o);return i&&s&&i.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(r){for(var i=0;i<t.codecs.length;i++){var s=t.codecs[i];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!o(r,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(r.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var o=t.headerExtensions[r];if(e.uri===o.uri){n.headerExtensions.push(o);break}}})),n}function s(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function a(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,n){function u(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function l(t,n,r,o){var i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=o,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var d=function(t){var o=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){o[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",t=JSON.parse(JSON.stringify(t||{})),this.usingBundle="max-bundle"===t.bundlePolicy,"negotiate"===t.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(t.rtcpMuxPolicy||(t.rtcpMuxPolicy="require"),t.iceTransportPolicy){case"all":case"relay":break;default:t.iceTransportPolicy="all"}switch(t.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:t.bundlePolicy="balanced"}if(t.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof r;return o&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=o?r[0]:r,!!r.length}}))}(t.iceServers||[],n),this._iceGatherers=[],t.iceCandidatePoolSize)for(var s=t.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:t.iceServers,gatherPolicy:t.iceTransportPolicy}));else t.iceCandidatePoolSize=0;this._config=t,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(d.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(d.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),d.prototype.onicecandidate=null,d.prototype.onaddstream=null,d.prototype.ontrack=null,d.prototype.onremovestream=null,d.prototype.onsignalingstatechange=null,d.prototype.oniceconnectionstatechange=null,d.prototype.onconnectionstatechange=null,d.prototype.onicegatheringstatechange=null,d.prototype.onnegotiationneeded=null,d.prototype.ondatachannel=null,d.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},d.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},d.prototype.getConfiguration=function(){return this._config},d.prototype.getLocalStreams=function(){return this.localStreams},d.prototype.getRemoteStreams=function(){return this.remoteStreams},d.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();r.iceTransport=o.iceTransport,r.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(r),r},d.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(r=this.transceivers[o]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},d.prototype.addStream=function(e){var t=this;if(n>=15025)e.getTracks().forEach((function(n){t.addTrack(n,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){t.addTrack(e,r)}))}},d.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},d.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},d.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},d.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},d.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;o.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},d.prototype._gather=function(t,n){var o=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var s=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(o.usingBundle&&n>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment;var u=r.writeCandidate(a);s.candidate=Object.assign(s.candidate,r.parseCandidate(u)),s.candidate.candidate=u,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var l=r.getMediaSections(o._localDescription.sdp);l[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",o._localDescription.sdp=r.getDescription(o._localDescription.sdp)+l.join("");var d=o.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),c||o._dispatchEvent("icecandidate",s),d&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},d.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},d.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},d.prototype._transceive=function(e,t,o){var s=i(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),o&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&n<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},d.prototype.setLocalDescription=function(e){var n,o,a=this;if(-1===["offer","answer"].indexOf(e.type))return t.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,a.signalingState)||a._isClosed)return t.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+a.signalingState));if("offer"===e.type)n=r.splitSections(e.sdp),o=n.shift(),n.forEach((function(e,t){var n=r.parseRtpParameters(e);a.transceivers[t].localCapabilities=n})),a.transceivers.forEach((function(e,t){a._gather(e.mid,t)}));else if("answer"===e.type){n=r.splitSections(a._remoteDescription.sdp),o=n.shift();var u=r.matchPrefix(o,"a=ice-lite").length>0;n.forEach((function(e,t){var n=a.transceivers[t],s=n.iceGatherer,c=n.iceTransport,l=n.dtlsTransport,d=n.localCapabilities,p=n.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length||n.rejected)){var h=r.getIceParameters(e,o),f=r.getDtlsParameters(e,o);u&&(f.role="server"),a.usingBundle&&0!==t||(a._gather(n.mid,t),"new"===c.state&&c.start(s,h,u?"controlling":"controlled"),"new"===l.state&&l.start(f));var m=i(d,p);a._transceive(n,m.codecs.length>0,!1)}}))}return a._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?a._updateSignalingState("have-local-offer"):a._updateSignalingState("stable"),t.resolve()},d.prototype.setRemoteDescription=function(o){var d=this;if(-1===["offer","answer"].indexOf(o.type))return t.reject(c("TypeError",'Unsupported type "'+o.type+'"'));if(!s("setRemoteDescription",o.type,d.signalingState)||d._isClosed)return t.reject(c("InvalidStateError","Can not set remote "+o.type+" in state "+d.signalingState));var p={};d.remoteStreams.forEach((function(e){p[e.id]=e}));var h=[],f=r.splitSections(o.sdp),m=f.shift(),g=r.matchPrefix(m,"a=ice-lite").length>0,b=r.matchPrefix(m,"a=group:BUNDLE ").length>0;d.usingBundle=b;var y=r.matchPrefix(m,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!y&&y.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(t,s){var c=r.splitLines(t),l=r.getKind(t),f=r.isRejected(t)&&0===r.matchPrefix(t,"a=bundle-only").length,y=c[0].substr(2).split(" ")[2],v=r.getDirection(t,m),w=r.parseMsid(t),x=r.getMid(t)||r.generateIdentifier();if(f||"application"===l&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))d.transceivers[s]={mid:x,kind:l,protocol:y,rejected:!0};else{var S,E,T,C,_,I,k,R,N;!f&&d.transceivers[s]&&d.transceivers[s].rejected&&(d.transceivers[s]=d._createTransceiver(l,!0));var O,A,D=r.parseRtpParameters(t);f||(O=r.getIceParameters(t,m),(A=r.getDtlsParameters(t,m)).role="client"),k=r.parseRtpEncodingParameters(t);var L=r.parseRtcpParameters(t),P=r.matchPrefix(t,"a=end-of-candidates",m).length>0,V=r.matchPrefix(t,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===o.type||"answer"===o.type)&&!f&&b&&s>0&&d.transceivers[s]&&(d._disposeIceAndDtlsTransports(s),d.transceivers[s].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[s].iceTransport=d.transceivers[0].iceTransport,d.transceivers[s].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[s].rtpSender&&d.transceivers[s].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[s].rtpReceiver&&d.transceivers[s].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),"offer"!==o.type||f)"answer"!==o.type||f||(E=(S=d.transceivers[s]).iceGatherer,T=S.iceTransport,C=S.dtlsTransport,_=S.rtpReceiver,I=S.sendEncodingParameters,R=S.localCapabilities,d.transceivers[s].recvEncodingParameters=k,d.transceivers[s].remoteCapabilities=D,d.transceivers[s].rtcpParameters=L,V.length&&"new"===T.state&&(!g&&!P||b&&0!==s?V.forEach((function(e){a(S.iceTransport,e)})):T.setRemoteCandidates(V)),b&&0!==s||("new"===T.state&&T.start(E,O,"controlling"),"new"===C.state&&C.start(A)),!i(S.localCapabilities,S.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,d._transceive(S,"sendrecv"===v||"recvonly"===v,"sendrecv"===v||"sendonly"===v),!_||"sendrecv"!==v&&"sendonly"!==v?delete S.rtpReceiver:(N=_.track,w?(p[w.stream]||(p[w.stream]=new e.MediaStream),u(N,p[w.stream]),h.push([N,_,p[w.stream]])):(p.default||(p.default=new e.MediaStream),u(N,p.default),h.push([N,_,p.default]))));else{(S=d.transceivers[s]||d._createTransceiver(l)).mid=x,S.iceGatherer||(S.iceGatherer=d._createIceGatherer(s,b)),V.length&&"new"===S.iceTransport.state&&(!P||b&&0!==s?V.forEach((function(e){a(S.iceTransport,e)})):S.iceTransport.setRemoteCandidates(V)),R=e.RTCRtpReceiver.getCapabilities(l),n<15019&&(R.codecs=R.codecs.filter((function(e){return"rtx"!==e.name}))),I=S.sendEncodingParameters||[{ssrc:1001*(2*s+2)}];var M,F=!1;"sendrecv"===v||"sendonly"===v?(F=!S.rtpReceiver,_=S.rtpReceiver||new e.RTCRtpReceiver(S.dtlsTransport,l),F&&(N=_.track,w&&"-"===w.stream||(w?(p[w.stream]||(p[w.stream]=new e.MediaStream,Object.defineProperty(p[w.stream],"id",{get:function(){return w.stream}})),Object.defineProperty(N,"id",{get:function(){return w.track}}),M=p[w.stream]):(p.default||(p.default=new e.MediaStream),M=p.default)),M&&(u(N,M),S.associatedRemoteMediaStreams.push(M)),h.push([N,_,M]))):S.rtpReceiver&&S.rtpReceiver.track&&(S.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===S.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),S.associatedRemoteMediaStreams=[]),S.localCapabilities=R,S.remoteCapabilities=D,S.rtpReceiver=_,S.rtcpParameters=L,S.sendEncodingParameters=I,S.recvEncodingParameters=k,d._transceive(d.transceivers[s],!1,F)}}})),void 0===d._dtlsRole&&(d._dtlsRole="offer"===o.type?"active":"passive"),d._remoteDescription={type:o.type,sdp:o.sdp},"offer"===o.type?d._updateSignalingState("have-remote-offer"):d._updateSignalingState("stable"),Object.keys(p).forEach((function(t){var n=p[t];if(n.getTracks().length){if(-1===d.remoteStreams.indexOf(n)){d.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){d._dispatchEvent("addstream",r)}))}h.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&l(d,t,r,[n])}))}})),h.forEach((function(e){e[2]||l(d,e[0],e[1],[])})),e.setTimeout((function(){d&&d.transceivers&&d.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),t.resolve()},d.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},d.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},d.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},d.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},d.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},d.prototype.createOffer=function(){var i=this;if(i._isClosed)return t.reject(c("InvalidStateError","Can not call createOffer after close"));var s=i.transceivers.filter((function(e){return"audio"===e.kind})).length,a=i.transceivers.filter((function(e){return"video"===e.kind})).length,u=arguments[0];if(u){if(u.mandatory||u.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==u.offerToReceiveAudio&&(s=!0===u.offerToReceiveAudio?1:!1===u.offerToReceiveAudio?0:u.offerToReceiveAudio),void 0!==u.offerToReceiveVideo&&(a=!0===u.offerToReceiveVideo?1:!1===u.offerToReceiveVideo?0:u.offerToReceiveVideo)}for(i.transceivers.forEach((function(e){"audio"===e.kind?--s<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)}));s>0||a>0;)s>0&&(i._createTransceiver("audio"),s--),a>0&&(i._createTransceiver("video"),a--);var l=r.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.transceivers.forEach((function(t,o){var s=t.track,a=t.kind,c=t.mid||r.generateIdentifier();t.mid=c,t.iceGatherer||(t.iceGatherer=i._createIceGatherer(o,i.usingBundle));var u=e.RTCRtpSender.getCapabilities(a);n<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),t.remoteCapabilities&&t.remoteCapabilities.codecs&&t.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(t.remoteCapabilities&&t.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=t.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&n>=15019&&"video"===a&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),t.wantReceive&&(t.rtpReceiver=new e.RTCRtpReceiver(t.dtlsTransport,a)),t.localCapabilities=u,t.sendEncodingParameters=l})),"max-compat"!==i._config.bundlePolicy&&(l+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),l+="a=ice-options:trickle\r\n",i.transceivers.forEach((function(e,t){l+=o(e,e.localCapabilities,"offer",e.stream,i._dtlsRole),l+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===i.iceGatheringState||0!==t&&i.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,l+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(l+="a=end-of-candidates\r\n"))}));var d=new e.RTCSessionDescription({type:"offer",sdp:l});return t.resolve(d)},d.prototype.createAnswer=function(){var s=this;if(s._isClosed)return t.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==s.signalingState&&"have-local-pranswer"!==s.signalingState)return t.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+s.signalingState));var a=r.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.usingBundle&&(a+="a=group:BUNDLE "+s.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var u=r.getMediaSections(s._remoteDescription.sdp).length;s.transceivers.forEach((function(e,t){if(!(t+1>u)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var r;e.stream&&("audio"===e.kind?r=e.stream.getAudioTracks()[0]:"video"===e.kind&&(r=e.stream.getVideoTracks()[0]),r&&n>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var c=i(e.localCapabilities,e.remoteCapabilities);!c.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=o(e,c,"answer",e.stream,s._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}}));var l=new e.RTCSessionDescription({type:"answer",sdp:a});return t.resolve(l)},d.prototype.addIceCandidate=function(e){var n,o=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?t.reject(new TypeError("sdpMLineIndex or sdpMid required")):new t((function(t,i){if(!o._remoteDescription)return i(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<o.transceivers.length;u++)if(o.transceivers[u].mid===e.sdpMid){s=u;break}var l=o.transceivers[s];if(!l)return i(c("OperationError","Can not add ICE candidate"));if(l.rejected)return t();var d=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return t();if(d.component&&1!==d.component)return t();if((0===s||s>0&&l.iceTransport!==o.transceivers[0].iceTransport)&&!a(l.iceTransport,d))return i(c("OperationError","Can not add ICE candidate"));var p=e.candidate.trim();0===p.indexOf("a=")&&(p=p.substr(2)),(n=r.getMediaSections(o._remoteDescription.sdp))[s]+="a="+(d.type?p:"end-of-candidates")+"\r\n",o._remoteDescription.sdp=r.getDescription(o._remoteDescription.sdp)+n.join("")}else for(var h=0;h<o.transceivers.length&&(o.transceivers[h].rejected||(o.transceivers[h].iceTransport.addRemoteCandidate({}),(n=r.getMediaSections(o._remoteDescription.sdp))[h]+="a=end-of-candidates\r\n",o._remoteDescription.sdp=r.getDescription(o._remoteDescription.sdp)+n.join(""),!o.usingBundle));h++);t()}))},d.prototype.getStats=function(n){if(n&&n instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===n?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===n&&(r=e.rtpReceiver)})),!r)throw c("InvalidAccessError","Invalid selector.");return r.getStats()}var o=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&o.push(e[t].getStats())}))})),t.all(o).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var p=["createOffer","createAnswer"];return p.forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(p=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),d}}).call(this,n(0))},function(e,t,n){"use strict";(function(t){e.exports=function(e){var n=e&&e.navigator,r=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return r(e).catch((function(e){return t.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}}).call(this,n(0))},function(e,t,n){"use strict";(function(t){var r=n(28);e.exports={shimGetUserMedia:n(557),shimOnTrack:function(e){"object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)&&Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.transceiver={receiver:n.receiver},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))},enumerable:!0,configurable:!0}),"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(e){"object"==typeof e&&e.HTMLMediaElement&&!("srcObject"in e.HTMLMediaElement.prototype)&&Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}})},shimPeerConnection:function(e){var n=r.detectBrowser(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){e.RTCPeerConnection||(e.RTCPeerConnection=function(t,r){if(n.version<38&&t&&t.iceServers){for(var o=[],i=0;i<t.iceServers.length;i++){var s=t.iceServers[i];if(s.hasOwnProperty("urls"))for(var a=0;a<s.urls.length;a++){var c={url:s.urls[a]};0===s.urls[a].indexOf("turn")&&(c.username=s.username,c.credential=s.credential),o.push(c)}else o.push(t.iceServers[i])}t.iceServers=o}return new e.mozRTCPeerConnection(t,r)},e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype,e.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.mozRTCPeerConnection.generateCertificate}}),e.RTCSessionDescription=e.mozRTCSessionDescription,e.RTCIceCandidate=e.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}));var o=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),t.resolve())};var i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,r){return s.apply(this,[e||null]).then((function(e){if(n.version<48&&(e=function(e){var t=new Map;return Object.keys(e).forEach((function(n){t.set(n,e[n]),t[n]=e[n]})),t}(e)),n.version<53&&!t)try{e.forEach((function(e){e.type=i[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,n){e.set(n,Object.assign({},t,{type:i[t.type]||t.type}))}))}return e})).then(t,r)}}},shimSenderGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=n.apply(e,[]);return t.forEach((function(t){t._pc=e})),t});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):t.resolve(new Map)}}},shimReceiverGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(e,[]);return n.forEach((function(t){t._pc=e})),n}),r.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},shimRemoveStream:function(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;r.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&-1!==e.getTracks().indexOf(n.track)&&t.removeTrack(n)}))})},shimRTCDataChannel:function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},shimGetDisplayMedia:function(e,n){e.navigator&&e.navigator.mediaDevices&&!("getDisplayMedia"in e.navigator.mediaDevices)&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){var o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,t.reject(o)}return!0===r.video?r.video={mediaSource:n}:r.video.mediaSource=n,e.navigator.mediaDevices.getUserMedia(r)},e.navigator.getDisplayMedia=function(t){return r.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),e.navigator.mediaDevices.getDisplayMedia(t)})}}}).call(this,n(0))},function(e,t,n){"use strict";(function(t){var r=n(28),o=r.log;e.exports=function(e){var n=r.detectBrowser(e),i=e&&e.navigator,s=e&&e.MediaStreamTrack,a=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},c=function(e,t,r){var s=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var o={};"number"==typeof r.ideal?o[n]={min:r.ideal,max:r.ideal}:o[n]=r.ideal,e.advanced.push(o),delete r.ideal,Object.keys(r).length||delete e[n]}}})),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),n.version<38&&(o("spec: "+JSON.stringify(e)),e.audio&&(e.audio=s(e.audio)),e.video&&(e.video=s(e.video)),o("ff37: "+JSON.stringify(e))),i.mozGetUserMedia(e,t,(function(e){r(a(e))}))};if(i.mediaDevices||(i.mediaDevices={getUserMedia:function(e){return new t((function(t,n){c(e,t,n)}))},addEventListener:function(){},removeEventListener:function(){}}),i.mediaDevices.enumerateDevices=i.mediaDevices.enumerateDevices||function(){return new t((function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])}))},n.version<41){var u=i.mediaDevices.enumerateDevices.bind(i.mediaDevices);i.mediaDevices.enumerateDevices=function(){return u().then(void 0,(function(e){if("NotFoundError"===e.name)return[];throw e}))}}if(n.version<49){var l=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(e){return l(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("The object can not be found here.","NotFoundError");return t}),(function(e){return t.reject(a(e))}))}}if(!(n.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){var d=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},p=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),d(e.audio,"autoGainControl","mozAutoGainControl"),d(e.audio,"noiseSuppression","mozNoiseSuppression")),p(e)},s&&s.prototype.getSettings){var h=s.prototype.getSettings;s.prototype.getSettings=function(){var e=h.apply(this,arguments);return d(e,"mozAutoGainControl","autoGainControl"),d(e,"mozNoiseSuppression","noiseSuppression"),e}}if(s&&s.prototype.applyConstraints){var f=s.prototype.applyConstraints;s.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),d(e,"autoGainControl","mozAutoGainControl"),d(e,"noiseSuppression","mozNoiseSuppression")),f.apply(this,[e])}}}i.getUserMedia=function(e,t,o){if(n.version<44)return c(e,t,o);r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(t,o)}}}).call(this,n(0))},function(e,t,n){"use strict";(function(t){var r=n(28);e.exports={shimLocalStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;return this._localStreams&&this._localStreams.forEach((function(n){n.id===e&&(t=n)})),this._remoteStreams&&this._remoteStreams.forEach((function(n){n.id===e&&(t=n)})),t}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(e)&&this._localStreams.push(e);var n=this;e.getTracks().forEach((function(r){t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e,n){return n&&(this._localStreams?-1===this._localStreams.indexOf(n)&&this._localStreams.push(n):this._localStreams=[n]),t.call(this,e,n)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var n=this,r=e.getTracks();this.getSenders().forEach((function(e){-1!==r.indexOf(e.track)&&n.removeTrack(e)}))}})}},shimRemoteStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){this._onaddstream&&this.removeEventListener("addstream",this._onaddstream),this.addEventListener("addstream",this._onaddstream=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}},shimCallbacksAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,r=n.createOffer,o=n.createAnswer,i=n.setLocalDescription,s=n.setRemoteDescription,a=n.addIceCandidate;n.createOffer=function(e,n){var o=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[o]);return n?(i.then(e,n),t.resolve()):i},n.createAnswer=function(e,n){var r=arguments.length>=2?arguments[2]:arguments[0],i=o.apply(this,[r]);return n?(i.then(e,n),t.resolve()):i};var c=function(e,n,r){var o=i.apply(this,[e]);return r?(o.then(n,r),t.resolve()):o};n.setLocalDescription=c,c=function(e,n,r){var o=s.apply(this,[e]);return r?(o.then(n,r),t.resolve()):o},n.setRemoteDescription=c,c=function(e,n,r){var o=a.apply(this,[e]);return r?(o.then(n,r),t.resolve()):o},n.addIceCandidate=c}},shimGetUserMedia:function(e){var t=e&&e.navigator;t.getUserMedia||(t.webkitGetUserMedia?t.getUserMedia=t.webkitGetUserMedia.bind(t):t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t)))},shimRTCIceServerUrls:function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var o=[],i=0;i<e.iceServers.length;i++){var s=e.iceServers[i];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,o.push(s)):o.push(e.iceServers[i])}e.iceServers=o}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},shimTrackEventTransceiver:function(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){var n=this;if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=n.getTransceivers().find((function(e){return e.sender.track&&"audio"===e.sender.track.kind}));!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||n.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var o=n.getTransceivers().find((function(e){return e.sender.track&&"video"===e.sender.track.kind}));!1===e.offerToReceiveVideo&&o?"sendrecv"===o.direction?o.setDirection("sendonly"):"recvonly"===o.direction&&o.setDirection("inactive"):!0!==e.offerToReceiveVideo||o||n.addTransceiver("video")}return t.apply(n,arguments)}}}}).call(this,n(0))},function(e,t,n){"use strict";var r=n(252),o=n(28);e.exports={shimRTCIceCandidate:function(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),o=r.parseCandidate(e.candidate),i=Object.assign(n,o);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,o.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"==typeof e&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL){var n=t.createObjectURL.bind(t),r=t.revokeObjectURL.bind(t),i=new Map,s=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++s;return i.set(t,e),o.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return n(e)},t.revokeObjectURL=function(e){r(e),i.delete(e)};var a=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return a.get.apply(this)},set:function(e){return this.srcObject=i.get(e)||null,a.set.apply(this,[e])}});var c=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=i.get(arguments[1])||null),c.apply(this,arguments)}}},shimMaxMessageSize:function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=o.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){var t=r.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=r.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},s=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},a=function(e,n){var o=65536;"firefox"===t.browser&&57===t.version&&(o=65535);var i=r.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?o=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(o=2147483637),o},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;if(e._sctp=null,n(arguments[0])){var t,r=i(arguments[0]),o=s(r),u=a(arguments[0],r);t=0===o&&0===u?Number.POSITIVE_INFINITY:0===o||0===u?Math.max(o,u):Math.min(o,u);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return t}}),e._sctp=l}return c.apply(e,arguments)}}},shimSendThrowTypeError:function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=this,r=t.apply(e,arguments);return n(r,e),r},o.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],o=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}}},function(e,t,n){"use strict";(function(t){const r=n(6);function o(){return"undefined"==typeof document||"complete"===document.readyState||"interactive"===document.readyState&&document.body}let i=!1;const s={isDomLoaded:o,isDomUnloaded:()=>i,whenUnloaded:new t((e=>{if("undefined"!=typeof window){const t=()=>{i=!0,s.emit("unload"),e()};window.addEventListener("unload",t)}})),whenLoaded:new t((e=>{if(o())return void e();const t=()=>{document.removeEventListener("DOMContentLoaded",t),document.removeEventListener("load",t),s.emit("load"),e()};document.addEventListener("DOMContentLoaded",t),document.addEventListener("load",t)}))};r(s),e.exports=s}).call(this,n(0))},function(e,t,n){var r=n(78),o=n(256),i=n(239),s=n(562),a=n(9),c=n(53),u=n(257);e.exports=function e(t,n,l,d,p){t!==n&&i(n,(function(i,c){if(p||(p=new r),a(i))s(t,n,c,l,e,d,p);else{var h=d?d(u(t,c),i,c+"",t,n,p):void 0;void 0===h&&(h=i),o(t,c,h)}}),c)}},function(e,t,n){var r=n(256),o=n(180),i=n(189),s=n(54),a=n(190),c=n(65),u=n(10),l=n(129),d=n(66),p=n(15),h=n(9),f=n(135),m=n(85),g=n(257),b=n(563);e.exports=function(e,t,n,y,v,w,x){var S=g(e,n),E=g(t,n),T=x.get(E);if(T)r(e,n,T);else{var C=w?w(S,E,n+"",e,t,x):void 0,_=void 0===C;if(_){var I=u(E),k=!I&&d(E),R=!I&&!k&&m(E);C=E,I||k||R?u(S)?C=S:l(S)?C=s(S):k?(_=!1,C=o(E,!0)):R?(_=!1,C=i(E,!0)):C=[]:f(E)||c(E)?(C=S,c(S)?C=b(S):h(S)&&!p(S)||(C=a(E))):_=!1}_&&(x.set(E,C),v(C,E,y,w,x),x.delete(E)),r(e,n,C)}}},function(e,t,n){var r=n(40),o=n(53);e.exports=function(e){return r(e,o(e))}},function(e,t,n){"use strict";const r=n(148),o=n(258),i=n(259),s=n(264),a=n(1)("normalizeConstraintInput"),c={"320x240":{width:320,height:240},"320x180":{width:320,height:180},"640x480":{width:640,height:480},"640x360":{width:640,height:360},"1280x720":{width:1280,height:720},"1280x960":{width:1280,height:960},"1920x1080":{width:1920,height:1080}},u=[1,7,15,30];function l(e){return e._inject&&e._inject.logging||a}function d(e,t,n,r,o){if(void 0===t)return;const i=n(t);return i||o.warn(`Invalid ${e} passed to the Publisher. Got: ${t}, expecting one of ${r}`),i}function p(e,t){const n=l(t),r=(()=>{const n=t[`publish${i(e)}`];return void 0===n||Boolean(n)})();let o=(()=>{const r=t[`${e}Source`];return void 0===r||null!==r&&!1!==r&&("object"==typeof r?!t[`isCustom${i(e)}Track`]&&("string"!=typeof r.deviceId?(n.warn(`Invalid ${e}Source passed to Publisher. Expected either a device ID or device.`),!0):r.deviceId):"string"!=typeof r?(n.warn(`Ignoring invalid ${e}Source parameter`),!0):r)})();return"audio"===e&&t.isScreenSharing&&!s&&!1!==o&&(t.audioSource&&l(t).warn("Invalid audioSource passed to Publisher - when using screen sharing no audioSource may be used"),o=!1),{source:o,publish:r}}function h(e,t){return"Chrome"===e.name&&-1!==e.userAgent.indexOf("Mac OS X")&&1===t?2:t}const f=["user","environment","left","right"],m=(e,t)=>{if(void 0===e||f.indexOf(e)>=0)return e;l(t).warn(`Invalid facingMode passed to Publisher. Expected one of: ${f.join(", ")}`)};e.exports=function(e){const t=l(e),n=e.env||{},i=e.isScreenSharing,s=e.isCustomAudioTrack,a=e.isCustomVideoTrack;return i&&!o&&r(e.usingOptionalMandatoryStyle,"Screensharing only uses optional-mandatory constraints right now"),["echoCancellation","autoGainControl","noiseSuppression"].forEach((t=>{!1!==e[t]&&Object.assign(e,{[t]:!0})})),{isScreenSharing:i,isCustomAudioTrack:s,isCustomVideoTrack:a,audio:p("audio",e),video:p("video",e),usingOptionalMandatoryStyle:e.usingOptionalMandatoryStyle,enableRenegotiation:e.enableRenegotiation,enableStereo:e.enableStereo,noiseSuppression:e.noiseSuppression,autoGainControl:e.autoGainControl,echoCancellation:e.echoCancellation,disableAudioProcessing:e.disableAudioProcessing,videoDimensions:d("resolution",e.resolution,(e=>c[e]),`"${Object.keys(c).join('", "')}"`,t),frameRate:h(n,d("frameRate",e.frameRate,(e=>-1!==u.indexOf(e)?e:void 0),u.join(","),t)),maxResolution:function(){if(void 0===e.maxResolution)return i?{width:1920,height:1920}:void 0;const n={width:e.maxResolution.width,height:e.maxResolution.height};return Object.keys(n).forEach((e=>{const r=n[e];("number"!=typeof r||r>1920)&&(t.warn(`Invalid maxResolution passed to the Publisher. maxResolution.${e} must be less than or equal to 1920`),n[e]=1920)})),n}(),facingMode:m(e.facingMode,e)}}},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,c=s(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))o.call(n,l)&&(c[l]=n[l]);if(r){a=r(n);for(var d=0;d<a.length;d++)i.call(n,a[d])&&(c[a[d]]=n[a[d]])}}return c}},function(e,t,n){(function(e,r){var o=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(c(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),a=r[n];n<o;a=r[++n])g(a)||!x(a)?s+=" "+a:s+=" "+c(a);return s},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var s,a={};function c(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&t._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),d(r,e,r.depth)}function u(e,t){var n=c.styles[t];return n?"["+c.colors[n][0]+"m"+e+"["+c.colors[n][1]+"m":e}function l(e,t){return e}function d(e,n,r){if(e.customInspect&&n&&T(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return y(o)||(o=d(e,o,r)),o}var i=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,n);if(i)return i;var s=Object.keys(n),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),E(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(n);if(0===s.length){if(T(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(w(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return p(n)}var u,l="",x=!1,C=["{","}"];return f(n)&&(x=!0,C=["[","]"]),T(n)&&(l=" [Function"+(n.name?": "+n.name:"")+"]"),w(n)&&(l=" "+RegExp.prototype.toString.call(n)),S(n)&&(l=" "+Date.prototype.toUTCString.call(n)),E(n)&&(l=" "+p(n)),0!==s.length||x&&0!=n.length?r<0?w(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=x?function(e,t,n,r,o){for(var i=[],s=0,a=t.length;s<a;++s)R(t,String(s))?i.push(h(e,t,n,r,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(h(e,t,n,r,o,!0))})),i}(e,n,r,a,s):s.map((function(t){return h(e,n,r,a,t,x)})),e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,l,C)):C[0]+l+C[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),R(r,o)||(s="["+o+"]"),a||(e.seen.indexOf(c.value)<0?(a=g(n)?d(e,c.value,null):d(e,c.value,n-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function f(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function b(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function w(e){return x(e)&&"[object RegExp]"===C(e)}function x(e){return"object"==typeof e&&null!==e}function S(e){return x(e)&&"[object Date]"===C(e)}function E(e){return x(e)&&("[object Error]"===C(e)||e instanceof Error)}function T(e){return"function"==typeof e}function C(e){return Object.prototype.toString.call(e)}function _(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(v(s)&&(s=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(s)){var r=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else a[n]=function(){};return a[n]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=b,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=w,t.isObject=x,t.isDate=S,t.isError=E,t.isFunction=T,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(567);var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var e=new Date,t=[_(e.getHours()),_(e.getMinutes()),_(e.getSeconds())].join(":");return[e.getDate(),I[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",k(),t.format.apply(t,arguments))},t.inherits=n(568),t._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var N="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(N&&e[N]){var t;if("function"!=typeof(t=e[N]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,o=new r((function(e,r){t=e,n=r})),i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return o}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),N&&Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,o(e))},t.promisify.custom=N,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};t.apply(this,n).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(O,t,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,o(t)),n}}).call(this,n(43),n(0))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){var r=n(570),o=n(262),i=n(263),s=n(59);e.exports=function(e){return function(t){t=s(t);var n=o(t)?i(t):void 0,a=n?n[0]:t.charAt(0),c=n?r(n,1).join(""):t.slice(1);return a[e]()+c}}},function(e,t,n){var r=n(261);e.exports=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:r(e,t,n)}},function(e,t){e.exports=function(e){return e.split("")}},function(e,t){var n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:"+n+"|"+r+")?",c="[\\ufe0e\\ufe0f]?",u=c+a+"(?:\\u200d(?:"+[o,i,s].join("|")+")"+c+a+")*",l="(?:"+[o+n+"?",n,i,s,"[\\ud800-\\udfff]"].join("|")+")",d=RegExp(r+"(?="+r+")|"+l+u,"g");e.exports=function(e){return e.match(d)||[]}},function(e,t,n){"use strict";e.exports=["screen","window","tab","browser","application"]},function(e,t,n){"use strict";const r=n(1),o=n(34)(),i=n(50),s=n(119),a=n(576),c=n(579),u="/opentok/webrtc/docs/js/release-notes.html",l=o.onlyLocal(),d=r("setLogLevel"),p=i((()=>{d.info("%c\n          \n   \n               \n               \n              \n                   ",'font-family: "Fire Code", Courier, "Courier New", Consolas, "DejaVu Sans Mono"'),d.info(`OpenTok JS SDK ${l.version}`),d.info(`Release notes: ${l.websiteUrl}${u}`),d.info(`Known issues: ${l.websiteUrl}${u}l#knownIssues`)}));function h(e){if(void 0===e||!a(s,{priority:e})&&0!==e){const t=c(s,((e,t)=>`OT.${t.toUpperCase()} = ${e.priority}`)).join(", ");d.error(`level must be one of: OT.NONE = 0, ${t}`),d.warn("Using OT.WARN instead"),e=s.warn.priority}return r.setLogLevel(e),e>=s.debug.priority&&p(),d.info("OpenTok JS SDK now uses the debug library. More info at https://www.npmjs.com/package/debug#browser-support"),d.info(`Changed log level to: ${e}`),e}h(l.debug?s.debug.priority:s.warn.priority),e.exports=h},function(e,t,n){var r=n(96);e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=r(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},function(e,t,n){var r=n(232),o=n(35),i=n(577),s=n(10),a=n(122);e.exports=function(e,t,n){var c=s(e)?r:i;return n&&a(e,t,n)&&(t=void 0),c(e,o(t,3))}},function(e,t,n){var r=n(266);e.exports=function(e,t){var n;return r(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}},function(e,t,n){var r=n(25);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var i=n.length,s=t?i:-1,a=Object(n);(t?s--:++s<i)&&!1!==o(a[s],s,a););return n}}},function(e,t,n){var r=n(33),o=n(35),i=n(580),s=n(10);e.exports=function(e,t){return(s(e)?r:i)(e,o(t,3))}},function(e,t,n){var r=n(266),o=n(25);e.exports=function(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}},function(e,t,n){"use strict";e.exports=function(e){return"http:"!==e.substr(0,5)&&"https:"!==e.substr(0,6)&&"data:image/png;base64,"!==e.substr(0,22)?`data:image/png;base64,${e}`:e}},function(e,t,n){"use strict";const r=n(56),o=n(1)("Style");e.exports=function(e,t){const n=this,i={},s={buttonDisplayMode:["auto","mini","mini-auto","off","on"],nameDisplayMode:["auto","off","on"],audioLevelDisplayMode:["auto","off","on"],showSettingsButton:[!0,!1],showSpeakerButton:null,showMicButton:[!0,!1],backgroundImageURI:null,showControlBar:[!0,!1],showArchiveStatus:[!0,!1],archiveStatusDisplayMode:["auto","off","on"],videoDisabledDisplayMode:["auto","off","on"],audioBlockedDisplayMode:["auto","off","on"]};n.getAll=function(){return r(i)},n.get=function(e){return e?i[e]:n.getAll()},n.setAll=function(e,t){return Object.keys(e).forEach((r=>{n.set(r,e[r],t)})),n},n.set=function(e,r,a){let c;o.debug(`setStyle: ${e.toString()}`);const u=function(e){switch(e){case"true":return!0;case"false":return!1;default:return e}}(r);return function(e,t){const n=s[e];return void 0!==n&&(null===n||-1!==n.indexOf(t))}(e,u)?(c=i[e],u!==c&&(i[e]=u,a||t(e,r,c)),n):(o.warn(`Style.set::Invalid style property passed ${e} : ${u}`),n)},e&&n.setAll(e,!0)}},function(e,t,n){"use strict";const r=n(56);e.exports=function(e){const t=r(e);if(t.backgroundImageURI){const e=t.backgroundImageURI.split(":")[0];t.backgroundImageURI=-1!==["http","https","data"].indexOf(e)?e:"other"}return t}},function(e,t,n){"use strict";const r=n(2),o=n(269);e.exports=()=>Boolean("Node"!==r.name&&!r.isIosWebView&&(!!o()||(void 0!==typeof window?window:__webpack_require__.g).navigator.mediaDevices&&(void 0!==typeof window?window:__webpack_require__.g).navigator.mediaDevices.getUserMedia||(void 0!==typeof window?window:__webpack_require__.g).navigator.webkitGetUserMedia||(void 0!==typeof window?window:__webpack_require__.g).navigator.mozGetUserMedia))},function(e,t,n){"use strict";const r=n(2);e.exports=()=>"Node"!==r.name&&(!("function"!=typeof(void 0!==typeof window?window:__webpack_require__.g).webkitRTCPeerConnection||!(void 0!==typeof window?window:__webpack_require__.g).webkitRTCPeerConnection.prototype.addStream)||"function"==typeof(void 0!==typeof window?window:__webpack_require__.g).RTCPeerConnection||"function"==typeof(void 0!==typeof window?window:__webpack_require__.g).mozRTCPeerConnection&&r.version>20)},function(e,t,n){"use strict";e.exports=void 0!==(void 0!==typeof window?window:n.g).WebSocket},function(e,t){e.exports='<div id="tb_alert"><div id="section-normal-install" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires <a target="_blank" href="https://www.google.com/chrome/">Google Chrome</a>, <a target="_blank" href="http://www.mozilla.org/firefox">Firefox</a>, <a target="_blank" href="https://www.microsoft.com/en-us/edge">Edge</a>, or <a target="_blank" href="https://www.apple.com/safari/">Safari</a>.</div></div><div id="section-upgrade-install" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires a newer version of <a target="_blank" href="https://www.google.com/chrome/">Google Chrome</a>, <a target="_blank" href="http://www.mozilla.org/firefox">Firefox</a>, <a target="_blank" href="https://www.microsoft.com/en-us/edge">Edge</a>, or <a target="_blank" href="https://www.apple.com/safari/">Safari</a>.</div><div class="continue-text"><a href="#" role="OT_close">Continue at my own risk.</a></div></div><div id="section-supported-mobile-browser" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires a newer version of <a target="_blank" href="https://www.google.com.au/chrome/browser/mobile/">Google Chrome</a>.</div><div class="continue-text"><a href="#" role="OT_close">Continue at my own risk.</a></div></div><div id="section-mobile-browser" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application is not supported on your mobile device\'s browser at this time.</div></div></div>'},function(e,t,n){"use strict";var r=n(3)(n(60));const o=n(42);e.exports=function(e){function t(t,n){var r;let o=(void 0===n?{}:n).destroyOnClose,i=void 0===o||o;(r=e.call(this)||this).modalDiv=document.createElement("div"),r.modalDiv.classList.add("OT_ModalDialog"),r.modalDiv.innerHTML=t;const s=r.modalDiv.querySelectorAll("[role=OT_close]");return[].forEach.call(s,(e=>e.addEventListener("click",(e=>{e.preventDefault(),r.close()})))),r.close(),document.body.appendChild(r.modalDiv),i&&r.on("closed",(()=>r.destroy())),r}(0,r.default)(t,e);var n=t.prototype;return n.open=function(){this.modalDiv.style.display="block",this.emit("opened")},n.close=function(){this.modalDiv.style.display="none",this.emit("closed")},n.destroy=function(){this.modalDiv.innerHTML="",this.modalDiv.parentNode.removeChild(this.modalDiv),this.emit("destroyed")},n.el=function(e){return this.modalDiv.querySelector(e)},t}(o)},function(e,t,n){"use strict";const r=n(27);e.exports=function(e){void 0===e&&(e={});const t=e.env||n(2),o=e.analytics||new r;o.logEvent({action:"UserAgentParsing",variation:"Attempt",payload:{userAgent:t.userAgent}}),o.logEvent({action:"UserAgentParsing",variation:t.error?"Failure":"Success",payload:{userAgent:t.userAgent}})}},function(e,t,n){var r=n(591),o=n(270),i=n(592),s=n(593);function a(t){var n="function"==typeof Map?new Map:void 0;return e.exports=a=function(e){if(null===e||!i(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return s(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},a(t)}e.exports=a},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var r=n(270);function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function i(t,n,s){return o()?e.exports=i=Reflect.construct:e.exports=i=function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&r(i,n.prototype),i},i.apply(null,arguments)}e.exports=i},function(e,t,n){"use strict";(function(t){e.exports=(e,n)=>(n=n||(()=>{}),e.then((e=>new t((e=>{e(n())})).then((()=>e))),(e=>new t((e=>{e(n())})).then((()=>{throw e})))))}).call(this,n(0))},function(e,t,n){var r=n(58),o=n(596),i=n(597),s=n(47);e.exports=function(e,t){return t=r(t,e),null==(e=i(e,t))||delete e[s(o(t))]}},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,n){var r=n(98),o=n(261);e.exports=function(e,t){return t.length<2?e:r(e,o(t,0,-1))}},function(e,t,n){var r=n(135);e.exports=function(e){return r(e)?void 0:e}},function(e,t,n){var r=n(35),o=n(25),i=n(30);e.exports=function(e){return function(t,n,s){var a=Object(t);if(!o(t)){var c=r(n,3);t=i(t),n=function(e){return c(a[e],e,a)}}var u=e(t,n,s);return u>-1?a[c?t[u]:u]:void 0}}},function(e,t,n){var r=n(92),o=n(93),i=n(128),s=n(94),a=n(601),c=n(97);e.exports=function(e,t,n){var u=-1,l=o,d=e.length,p=!0,h=[],f=h;if(n)p=!1,l=i;else if(d>=200){var m=t?null:a(e);if(m)return c(m);p=!1,l=s,f=new r}else f=t?[]:h;e:for(;++u<d;){var g=e[u],b=t?t(g):g;if(g=n||0!==g?g:0,p&&b==b){for(var y=f.length;y--;)if(f[y]===b)continue e;t&&f.push(b),h.push(g)}else l(f,b,n)||(f!==h&&f.push(b),h.push(g))}return h}},function(e,t,n){var r=n(186),o=n(224),i=n(97),s=r&&1/i(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=s},function(e,t,n){"use strict";(function(t){var r=n(3),o=r(n(12)),i=r(n(13));const s=n(1)("hasValidPeerConnection");function a(e){return new t((t=>{e.addEventListener("signalingstatechange",(()=>t(!0))),e.createOffer({offerToReceiveAudio:1}).then((t=>e.setLocalDescription(t))).then((()=>setTimeout((()=>{t(!1)}),1e3)))}))}function c(){return(c=(0,i.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=new t({iceServers:[]}),e.next=8;break;case 4:return e.prev=4,e.t0=e.catch(0),s.error("Error occurred creating PeerConnection",e.t0),e.abrupt("return",!1);case 8:return e.prev=8,e.next=11,a(n);case 11:e.next=18;break;case 13:e.prev=13,e.t1=e.catch(8),s.error("Error occurred checking the validity of the PeerConnection",e.t1);try{n.close()}catch(e){}return e.abrupt("return",!1);case 18:e.prev=18,n.close(),e.next=26;break;case 22:return e.prev=22,e.t2=e.catch(18),s.error("Error occurred closing PeerConnection",e.t2),e.abrupt("return",!1);case 26:return e.abrupt("return",!0);case 27:case"end":return e.stop()}}),e,null,[[0,4],[8,13],[18,22]])})))).apply(this,arguments)}e.exports=function(e){return c.apply(this,arguments)}}).call(this,n(0))},function(e,t,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(604),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t,n){(function(t){!function(n){"use strict";var r,o=Object.prototype,i=o.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag",l="object"==typeof e,d=n.regeneratorRuntime;if(d)l&&(e.exports=d);else{(d=n.regeneratorRuntime=l?e.exports:{}).wrap=x;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={},b={};b[a]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(A([])));v&&v!==o&&i.call(v,a)&&(b=v);var w=C.prototype=E.prototype=Object.create(b);T.prototype=w.constructor=C,C.constructor=T,C[u]=T.displayName="GeneratorFunction",d.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===T||"GeneratorFunction"===(t.displayName||t.name))},d.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(w),e},d.awrap=function(e){return{__await:e}},_(I.prototype),I.prototype[c]=function(){return this},d.AsyncIterator=I,d.async=function(e,t,n,r){var o=new I(x(e,t,n,r));return d.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(w),w[u]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},d.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},d.values=A,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return a.type="throw",a.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),g}}}function x(e,t,n,r){var o=t&&t.prototype instanceof E?t:E,i=Object.create(o.prototype),s=new O(r||[]);return i._invoke=function(e,t,n){var r=p;return function(o,i){if(r===f)throw new Error("Generator is already running");if(r===m){if("throw"===o)throw i;return D()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=k(s,n);if(a){if(a===g)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=S(e,t,n);if("normal"===c.type){if(r=n.done?m:h,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=m,n.method="throw",n.arg=c.arg)}}}(e,n,s),i}function S(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function E(){}function T(){}function C(){}function _(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function I(e){function n(r,o,s,a){var c=S(e[r],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&i.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var r;this._invoke=function(e,o){function i(){return new t((function(t,r){n(e,o,t,r)}))}return r=r?r.then(i,i):i()}}function k(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,k(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=S(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,g;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,g):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function A(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}return{next:D}}function D(){return{value:r,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())}).call(this,n(0))},function(e,t,n){"use strict";(function(t){const r=n(37),o=n(2),i=n(606),s=n(73),a=n(1)("createPeerConnection");e.exports=function(e){let n=e.window,c=e.config,u=e.constraints;a.debug("called");const l=r(c);l.iceServers=i(o,l.iceServers),s()&&(l.sdpSemantics="plan-b");const d=new n.RTCPeerConnection(l,u);return t.resolve(d)}}).call(this,n(0))},function(e,t,n){"use strict";const r=n(7),o=n(271),i={Edge(e){let t=!1;return e.map((e=>{if(!e)return;const n=e.urls||e.url&&[e.url];if(!n)return;const i=n.filter((e=>0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||t?0===e.indexOf("stun:"):(t=!0,!0)));return 0!==i.length?r(o(e,["url","urls"]),{urls:i}):void 0})).filter((e=>void 0!==e))},Safari:e=>e.map((e=>{if(void 0!==e.urls&&void 0===e.url)return e;const t=e.urls||e.url&&[e.url];return r(o(e,["url","urls"]),{urls:t})}))};e.exports=function(e,t){let n=e.name;e.isEdge&&(n=e.isLegacyEdge?"Edge":"ChromiumEdge");const r=i[n];return r?r(t):t}},function(e,t,n){"use strict";const r=n(51),o=n(2),i="42001f",s="42e01f",a=e=>{let t=e.sdp,n=e.from,r=e.to;return t.replace(new RegExp(`^(a=fmtp:\\d+ .*profile-level-id=)${n}`,"gmi"),`$1${r}`)};e.exports={local:{offer:function(e,t){let n=void 0===e?{}:e,c=n.numSimulcastStreams,u=n.audioBitrate,l=n.priorityVideoCodec,d=void 0===l?"":l,p=n.codecFlags,h=void 0===p?{}:p,f=n.enableStereo,m=void 0!==f&&f,g=n.enableDtx,b=void 0!==g&&g,y=n.replaceBaselineProfile,v=void 0!==y&&y,w=r.filterExcessSSRCs(t);c>1&&(w=r.enableSimulcast(w,c)),u>0&&(w=r.setAudioBitrate(w,u)),w=r.modifyReceiveStereo(w,!1),w=r.modifySendStereo(w,Boolean(m)),w=r.modifyDtx(w,Boolean(b)),o.isLegacyEdge||Object.keys(h).filter((e=>!1===h[e])).forEach((e=>{w=r.removeVideoCodec(w,e)})),d&&!o.isLegacyEdge?w=r.reprioritizeVideoCodec(w,d,"top"):"h264"!==d&&(w=r.reprioritizeVideoCodec(w,"h264","bottom"));let x=w;return v&&(x=a({sdp:x,from:i,to:s})),{local:w,remote:x}},answer:function(e,t){let n=void 0===e?{}:e,o=n.audioBitrate,c=n.codecFlags,u=n.enableStereo,l=void 0!==u&&u,d=n.enableDtx,p=void 0!==d&&d,h=n.replaceBaselineProfile,f=void 0!==h&&h,m=t;o>0&&(m=r.setAudioBitrate(m,o)),m=r.modifyReceiveStereo(m,Boolean(l)),m=r.modifySendStereo(m,!1),m=r.modifyDtx(m,Boolean(p)),c&&Object.keys(c).filter((e=>!1===c[e])).forEach((e=>{m=r.removeVideoCodec(m,e)}));let g=m;return f&&(g=a({sdp:g,from:i,to:s})),{local:m,remote:g}}},remote:{offer:(e,t)=>{let n=e.replaceBaselineProfile,r=void 0!==n&&n,o=t;if(-1===o.indexOf("a=rtcp-fb")){const e="a=rtcp-fb:* ccm fir\r\na=rtcp-fb:* nack ";o=o.replace(/^m=video(.*)$/gim,`m=video$1\r\n${e}`)}return r&&(o=a({sdp:o,from:s,to:i})),{local:o}},answer:function(e,t){let n=void 0===e?{}:e,o=n.audioBitrate,c=n.replaceBaselineProfile,u=void 0!==c&&c,l=t;return o>0&&(l=r.setAudioBitrate(l,o)),u&&(l=a({sdp:l,from:s,to:i})),{local:l}}}}},function(e,t,n){var r=n(39),o=n(54),i=n(41),s=n(25),a=n(275),c=n(609),u=n(233),l=n(97),d=n(263),p=n(276),h=r?r.iterator:void 0;e.exports=function(e){if(!e)return[];if(s(e))return a(e)?d(e):o(e);if(h&&e[h])return c(e[h]());var t=i(e);return("[object Map]"==t?u:"[object Set]"==t?l:p)(e)}},function(e,t){e.exports=function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}},function(e,t,n){var r=n(33);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},function(e,t,n){"use strict";e.exports=(e,t)=>{let n=[],r=null;if("function"==typeof e.getReceivers){const t=e.getReceivers().find((e=>"audio"===e.track.kind));t&&(n=t.getSynchronizationSources())}else r=new Error("peerConnection does not support getReceivers function");t&&t(r,n)}},function(e,t,n){"use strict";(function(t){const r=n(613),o=function(e){this.pending=[],this._processBinding=this.maybeProcessPending.bind(this),e&&this.setPeerConnection(e)};o.prototype.setPeerConnection=function(e){if(this.pc)throw new Error("Peer connection already set");this.pc=e,this._forwardIceCandidate=r(this.pc,"addIceCandidate"),this.pc.addEventListener("signalingstatechange",this._processBinding),this.maybeProcessPending()},o.prototype.canAddCandidates=function(){return!!(this.pc&&"closed"!==this.pc.iceConnectionState&&this.pc.remoteDescription&&this.pc.remoteDescription.type&&this.pc.localDescription&&this.pc.localDescription.type)},o.prototype.addIceCandidate=function(e){if(this.canAddCandidates())return this._forwardIceCandidate(e);const n=this.pending;return new t(((t,r)=>{n.push({iceCandidate:e,resolve:t,reject:r})}))},o.prototype.maybeProcessPending=function(){this.canAddCandidates()&&this.process()},o.prototype.process=function(){for(;this.pending.length;){const e=this.pending.shift();this._forwardIceCandidate(e.iceCandidate).then(e.resolve).catch(e.reject)}},o.prototype.destroy=function(){this.pc&&this.pc.removeEventListener("signalingstatechange",this._processBinding),this._processBinding=null,this.pc=null},e.exports=o}).call(this,n(0))},function(e,t,n){"use strict";(function(t){e.exports=function(e,n){const r=e[n];return function(n){return new t(((t,o)=>{const i=r.apply(e,[n,t,o]);i&&"function"==typeof i.then&&t(i)}))}}}).call(this,n(0))},function(e,t,n){"use strict";const r=n(156),o=n(2),i=n(1)("offerProcessor"),s=n(51),a=n(615);e.exports=function(e,t,n,c,u,l,d,p,h,f,m,g){const b=(e,t)=>n=>{i.error(e),i.error(n),f&&f(e,n,t)},y=t=>{const n=s.hasSendStereo(l.sdp),o=s.hasSendDtx(l.sdp),i=s.getAudioBitrate(l.sdp),a=r(u,"local","answer",{enableStereo:n,enableDtx:o,audioBitrate:i,replaceBaselineProfile:g,codecFlags:d},t.sdp),p=new c({type:t.type,sdp:a.local}),f={type:t.type,sdp:a.remote};return e.setLocalDescription(p).then((()=>h(f))).catch(b("Error while setting LocalDescription","SetLocalDescription"))},v=new c({type:l.type,sdp:r(u,"remote","offer",{replaceBaselineProfile:g},l.sdp).local}),w=b("Error while setting RemoteDescription","SetRemoteDescription");return a(v,p,o,t,n).then((()=>(m(!0),v))).catch((e=>{if(m(!1),!s.hasMediaType(v.sdp,"audio"))throw new Error("Unsupported video without audio for fallback");i.debug("Couldn't set remote description",v,e,", trying without video");const t=new c({type:l.type,sdp:s.disableMediaType(v.sdp,"video")});return i.debug("offer without video",t.sdp),t})).then((t=>e.setRemoteDescription(t))).then((()=>e.createAnswer().then(y).catch(b("Error while setting createAnswer","CreateAnswer")))).catch(w)}},function(e,t,n){"use strict";(function(t){const r=n(73);e.exports=(e,n,o,i,s)=>{if(!i)return t.resolve(!0);const a={iceServers:[]};r()&&(a.sdpSemantics="plan-b");const c=new i(a),u=()=>{try{c.close()}catch(e){}};return c.setRemoteDescription(new s(e)).then((()=>{u()})).catch((e=>{throw u(),e}))}}).call(this,n(0))},function(e,t,n){"use strict";const r=n(62),o=n(617);e.exports=function(e){let t=[];const n={};let i={sentMessages:0,recvMessages:0};const s=function(e){const n=new o(e);return t.push(n),n.on("close",(()=>{!function(e){t.filter((t=>e!==t))}(n)})),n};return n.add=function(t,n){return s(e.createDataChannel(t,n))},n.addMany=function(e){for(const t in e)e.hasOwnProperty(t)&&n.add(t,e[t])},n.get=function(e,n){return r(t,(t=>t.equals(e,n)))},n.getOrAdd=function(e,t){let r=n.get(e,t);return r||(r=n.add(e,t)),r},n.getQosData=function(){const e={sentMessages:0,recvMessages:0};return t.forEach((t=>{e.sentMessages+=t.getQosData().sentMessages,e.recvMessages+=t.getQosData().recvMessages})),e},n.sampleQos=function(){const e=n.getQosData(),t={sentMessages:e.sentMessages-i.sentMessages,recvMessages:e.recvMessages-i.recvMessages};return i=e,t},n.destroy=function(){t.forEach((e=>{e.close()})),t=[]},e.addEventListener("datachannel",(e=>{s(e.channel)})),n}},function(e,t,n){"use strict";const r=n(6),o=n(1)("DataChannel"),i=function(e){this.data=e.data,this.source=e.source,this.lastEventId=e.lastEventId,this.origin=e.origin,this.timeStamp=e.timeStamp,this.type=e.type,this.ports=e.ports,this.path=e.path};e.exports=function(e){const t={},n=[],s={sentMessages:0,recvMessages:0},a=function(e){return n.push(e),t},c=function(n){return e.send(n),s.sentMessages++,t};return r(t,!0),t.label=e.label,t.id=e.id,t.reliable=e.reliable,t.negotiated=e.negotiated,t.ordered=e.ordered,t.protocol=e.protocol,t._channel=e,t.close=function(){e.close()},t.equals=function(e,n){if(t.label!==e)return!1;for(const e in n)if(n.hasOwnProperty(e)&&t[e]!==n[e])return!1;return!0},t.getQosData=function(){return s},t.send=a,e.addEventListener("open",(function(){t.send=c,function(){let e;for(;e=n.shift();)t.send(e)}()}),!1),e.addEventListener("close",(function(e){t.send=a,t.trigger("close",e)}),!1),e.addEventListener("error",(function(e){o.error(e)}),!1),e.addEventListener("message",(function(e){const n=new i(e);s.recvMessages++,t.trigger("message",n)}),!1),t}},function(e,t,n){"use strict";const r=n(7),o=n(156),i=n(1)("subscribeProcessor");e.exports=function(e){let t=e.peerConnection,n=e.NativeRTCSessionDescription,s=e.sdpTransforms,a=e.numSimulcastStreams,c=e.offerOverrides,u=e.offerConstraints,l=e.replaceBaselineProfile;const d=(e,t)=>n=>{i.error(e,n);const r=new Error(e);throw r.reason=n,r.prefix=t,r};return i.debug("subscribeProcessor: creating offer"),t.createOffer(u).then((e=>{i.debug("subscribeProcessor: offer created",e);const u=o(s,"local","offer",r({numSimulcastStreams:a,replaceBaselineProfile:l},c),e.sdp),p=new n({type:e.type,sdp:u.local}),h=new n({type:e.type,sdp:u.remote});return i.debug("subscribeProcessor: setting local description"),t.setLocalDescription(p).then((()=>h),d("Error while setting LocalDescription","SetLocalDescription"))}),d("Error while creating Offer","CreateOffer")).then((e=>({sdp:e.sdp,type:e.type})))}},function(e,t,n){"use strict";var r=n(3),o=r(n(12)),i=r(n(13));const s=n(51),a=s.mediaDirections,c=a.RECVONLY,u=a.INACTIVE,l=function(){var e=(0,i.default)(o.default.mark((function e(t,n){var r,i,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.createOffer();case 4:return r=e.sent,e.next=7,t.setLocalDescription(r);case 7:i=t.remoteDescription.sdp,a=s.changeMediaDirection(i,n),t.setRemoteDescription({type:t.remoteDescription.type,sdp:a});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();e.exports={changeMediaDirectionToInactive:e=>l(e,u),changeMediaDirectionToRecvOnly:e=>l(e,c)}},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.__esModule=!0,t.parseStatsOldAPI=g,t.parseStatsNewAPI=b,t.default=function(e,t,n,r,o){return l?b(e,t,n,r,o):g(e,0,n,0,o)};const o=n(2),i=n(5),s=n(1)("QoS"),a=n(51),c=n(279),u=n(621),l=n(102)(),d=n(158),p=["audioCodec","audioSentBytes","audioSentPackets","audioSentPacketsLost","audioRtt","videoCodec","videoHeight","videoHeightInput","videoSentBytes","videoFrameRateSent","videoSentPackets","videoRtt","videoSentPacketsLost","videoWidthInput","videoWidth"],h=["audioCodec","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoCodec","videoHeight","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost","videoFrameRateReceived","videoWidth"],f=(e,t)=>s.debug(`Raw stats for peer conn ${e.id}:`,t),m=e=>{const t=e.portNumber||e.port;return`${e.ipAddress||e.address||e.ip}:${t}`};function g(e,t,n,r,o){const i=e=>(Number(e.stat("googFrameRateSent"))>0?(n.videoSentBytes=Number(e.stat("bytesSent")),n.videoSentPackets=Number(e.stat("packetsSent")),n.videoSentPacketsLost=Number(e.stat("packetsLost")),n.videoRtt=Number(e.stat("googRtt"))/1e3,n.videoFrameRate=Number(e.stat("googFrameRateInput")),n.videoWidth=Number(e.stat("googFrameWidthSent")),n.videoHeight=Number(e.stat("googFrameHeightSent")),n.videoFrameRateSent=Number(e.stat("googFrameRateSent")),n.videoWidthInput=Number(e.stat("googFrameWidthInput")),n.videoHeightInput=Number(e.stat("googFrameHeightInput")),n.videoCodec=e.stat("googCodecName")):Number(e.stat("googFrameRateReceived"))>0&&(n.videoRecvBytes=Number(e.stat("bytesReceived")),n.videoRecvPackets=Number(e.stat("packetsReceived")),n.videoRecvPacketsLost=Number(e.stat("packetsLost")),n.videoFrameRate=Number(e.stat("googFrameRateOutput")),n.videoFrameRateReceived=Number(e.stat("googFrameRateReceived")),n.videoFrameRateDecoded=Number(e.stat("googFrameRateDecoded")),n.videoWidth=Number(e.stat("googFrameWidthReceived")),n.videoHeight=Number(e.stat("googFrameHeightReceived")),n.videoCodec=e.stat("googCodecName")),null),s=e=>{Number(e.stat("audioInputLevel"))>0?(n.audioSentPackets=Number(e.stat("packetsSent")),n.audioSentPacketsLost=Number(e.stat("packetsLost")),n.audioSentBytes=Number(e.stat("bytesSent")),n.audioCodec=e.stat("googCodecName"),n.audioRtt=Number(e.stat("googRtt"))/1e3):Number(e.stat("audioOutputLevel"))>0&&(n.audioRecvPackets=Number(e.stat("packetsReceived")),n.audioRecvPacketsLost=Number(e.stat("packetsLost")),n.audioRecvBytes=Number(e.stat("bytesReceived")),n.audioCodec=e.stat("googCodecName"))};e.getStats((t=>{if(t.result){const r=t.result();f(e,r);const o=(e,t)=>r.filter((n=>n.id===t.stat(e)))[0],a=e=>o("localCandidateId",e),u=e=>o("remoteCandidateId",e);for(let e=0;e<r.length;e++){const t=r[e];t.stat&&("true"===t.stat("googActiveConnection")&&(t.stat("googChannelId").indexOf("audio")>-1?(n.audioLocalAddress=t.stat("googLocalAddress"),n.audioRemoteAddress=t.stat("googRemoteAddress"),n.audioLocalCandidateType=t.stat("googLocalCandidateType"),n.audioRemoteCandidateType=t.stat("googRemoteCandidateType"),n.audioTransportType=t.stat("googTransportType"),n.audioLocalRelayProtocol=c(a(t).stat("priority")),n.audioRemoteRelayProtocol=c(u(t).stat("priority"))):t.stat("googChannelId").indexOf("video")>-1&&(n.videoLocalAddress=t.stat("googLocalAddress"),n.videoRemoteAddress=t.stat("googRemoteAddress"),n.videoLocalCandidateType=t.stat("googLocalCandidateType"),n.videoRemoteCandidateType=t.stat("googRemoteCandidateType"),n.videoTransportType=t.stat("googTransportType"),n.videoLocalRelayProtocol=c(a(t).stat("priority")),n.videoRemoteRelayProtocol=c(u(t).stat("priority")))),s(t),i(t))}"videoCodec"in n&&!n.videoLocalAddress&&["LocalAddress","RemoteAddress","LocalCandidateType","RemoteCandidateType","TransportType","LocalRelayProtocol","RemoteRelayProtocol"].forEach((e=>{n[`video${e}`]=n[`audio${e}`]}))}o(null,n)}))}function b(e,t,n,s,c){const l=e=>{const t={packetsSent:"videoSentPackets",packetsLost:"videoSentPacketsLost",bytesSent:"videoSentBytes",framesPerSecond:"videoFrameRate",framesSent:"videoFrameRateSent",framesReceived:"videoFramesReceived",frameWidth:"videoWidth",frameHeight:"videoHeight"},r=["videoSentPackets","videoSentBytes"];for(const o in t)if(o in e){const i=t[o];r.includes(i)&&Number.isSafeInteger(n[i])?n[i]+=e[o]:n[i]=e[o]}};e.getStats(null).then((g=>{let b,y,v,w,x,S,E,T;const C=[],_=r=>{const c=r.type.toLowerCase().replace(/[^a-z]/g,""),p=r.id.toLowerCase();if(/(in|out)boundrtp$/.test(c)){const u=/rtp/.test(p),h=u&&/audio/.test(p),f=u&&/video/.test(p),m=h||"audio"===r.kind,g=f||"video"===r.kind;if(m?((t,r)=>{if("outboundrtp"===r?(n.audioSentPackets=t.packetsSent,n.audioSentPacketsLost=t.packetsLost,n.audioSentBytes=t.bytesSent):"inboundrtp"===r&&(n.audioRecvPackets=t.packetsReceived,n.audioRecvPacketsLost=t.packetsLost,n.audioRecvBytes=t.bytesReceived),void 0===n.audioCodec&&-1!==["Safari"].indexOf(i.env.name)&&void 0!==t.codecId){const r=("answer"===e.remoteDescription.type?e.remoteDescription:e.localDescription).sdp,o=t.codecId.lastIndexOf("_"),i=a.getCodecsAndCodecMap(r,"audio");-1!==o&&void 0!==i&&(n.audioCodec=i.codecMap[t.codecId.substring(o+1)])}})(r,c):g&&((r,c)=>{if("outboundrtp"===c?l(r):"inboundrtp"===c&&(n.videoRecvPackets=r.packetsReceived,n.videoRecvPacketsLost=r.packetsLost,n.videoRecvBytes=r.bytesReceived),(o.isFirefox&&["outboundrtp","inboundrtp"].includes(c)||!s&&"inboundrtp"===c)&&(n.videoFrameRate=(()=>{if(!("videoSentBytes"in n?n.videoSentBytes>0:n.videoRecvBytes>0))return 0;let e=0;if(o.isFirefox&&o.version<96)e=Number(r.framerateMean);else{const o="outboundrtp"===c?"framesEncoded":"framesDecoded";n[o]=r[o],e=d({currentStatFrames:r[o],currentTimestamp:r.timestamp,prevStatFrames:t[o],prevTimestamp:t.timeStamp||Date.now()})}return e})()),void 0===n.videoCodec&&-1!==["Safari"].indexOf(i.env.name)&&void 0!==r.codecId){const t=("answer"===e.remoteDescription.type?e.remoteDescription:e.localDescription).sdp,o=r.codecId.lastIndexOf("_"),i=a.getCodecsAndCodecMap(t,"video");-1!==o&&void 0!==i&&(n.videoCodec=i.codecMap[r.codecId.substring(o+1)])}})(r,c),r.hasOwnProperty("roundTripTime")){const e=r.mediaType||r.kind;"video"===e?C.push(r.roundTripTime):"audio"===e&&(n.audioRtt=r.roundTripTime)}if("remoteinboundrtp"===c&&r.hasOwnProperty("packetsLost")){const e=`${r.kind}SentPacketsLost`;n[e]||(n[e]=0),n[e]+=r.packetsLost}}else if("transport"===c){const e=r.selectedCandidatePairId;e&&(w=u(e,g))}else"localcandidate"===c?(b=r.candidateType,v=m(r),S=r.protocol||r.transport):"remotecandidate"===c?(y=r.candidateType,x=m(r)):"track"===c&&0!==p.indexOf("video")?(E=r.frameWidth,T=r.frameHeight,l(r)):"mediasource"===c&&(r.hasOwnProperty("framesPerSecond")&&(n.videoFrameRate=r.framesPerSecond),r.hasOwnProperty("width")&&(n.videoWidthInput=r.width),r.hasOwnProperty("height")&&(n.videoHeightInput=r.height))};if("function"==typeof g[Symbol.iterator]){f(e,Array.from(g));for(var I,k=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}(g);!(I=k()).done;){const e=I.value;_(Array.isArray(e)?e[1]:e)}}else{f(e,g);for(const e in g)g.hasOwnProperty(e)&&_(g[e])}if(e.currentRemoteDescription&&(n.useDtx=a.hasSendDtx(e.currentRemoteDescription.sdp)),s&&(n.videoRtt=(()=>{if(0===C.length)return null;const e=C.filter((e=>e>0)),t=e.reduce(((e,t)=>e+t),0);return e.length?t/e.length:0})()),(n.audioRecvBytes||n.audioSentBytes)&&(n.audioLocalCandidateType=b,n.audioLocalAddress=v,n.audioRemoteCandidateType=y,n.audioRemoteAddress=x,n.audioTransportType=S,n.audioLocalRelayProtocol=w,void 0===n.audioCodec)){const t=("answer"===e.remoteDescription.type?e.remoteDescription:e.localDescription).sdp,r=a.getCodecs(t,"audio");n.audioCodec=r[0]}if((n.videoRecvBytes||n.videoSentBytes)&&(n.videoLocalCandidateType=b,n.videoLocalAddress=v,n.videoRemoteCandidateType=y,n.videoRemoteAddress=x,n.videoTransportType=S,n.videoLocalRelayProtocol=w,void 0===n.videoCodec)){const t=("answer"===e.remoteDescription.type?e.remoteDescription:e.localDescription).sdp,r=a.getCodecs(t,"video");n.videoCodec=r[0]}!function(e,t){(t?p:h).forEach((t=>{e.hasOwnProperty(t)||(e[t]=null)}))}(n,s),n.videoWidth=n.videoWidth||E,n.videoHeight=n.videoHeight||T,c(null,n)})).catch((function(e){c(e)}))}},function(e,t,n){"use strict";const r=n(279);e.exports=(e,t)=>{let n="";if(!e||!t)return n;const o=t.get(e);if(o){const e=o.localCandidateId;if(e){const o=t.get(e);if(o){const e=o.relayProtocol,t=o.priority;n=e?`TURN/${e.toUpperCase()}`:r(t)}}}return n}},function(e,t,n){"use strict";var r=n(3);t.__esModule=!0,t.default=void 0;var o=r(n(18));let i=function(){function e(){(0,o.default)(this,"value",null),(0,o.default)(this,"changeCount",0)}return e.prototype.onValue=function(e){e&&e!==this.value&&(this.value&&(this.changeCount+=1),this.value=e)},e}();t.default=i},function(e,t,n){var r=n(9),o=n(624),i=n(229),s=Math.max,a=Math.min;e.exports=function(e,t,n){var c,u,l,d,p,h,f=0,m=!1,g=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=c,r=u;return c=u=void 0,f=t,d=e.apply(r,n)}function v(e){return f=e,p=setTimeout(x,t),m?y(e):d}function w(e){var n=e-h;return void 0===h||n>=t||n<0||g&&e-f>=l}function x(){var e=o();if(w(e))return S(e);p=setTimeout(x,function(e){var n=t-(e-h);return g?a(n,l-(e-f)):n}(e))}function S(e){return p=void 0,b&&c?y(e):(c=u=void 0,d)}function E(){var e=o(),n=w(e);if(c=arguments,u=this,h=e,n){if(void 0===p)return v(h);if(g)return clearTimeout(p),p=setTimeout(x,t),y(h)}return void 0===p&&(p=setTimeout(x,t)),d}return t=i(t)||0,r(n)&&(m=!!n.leading,l=(g="maxWait"in n)?s(i(n.maxWait)||0,t):l,b="trailing"in n?!!n.trailing:b),E.cancel=function(){void 0!==p&&clearTimeout(p),f=0,c=h=u=p=void 0},E.flush=function(){return void 0===p?d:S(o())},E}},function(e,t,n){var r=n(14);e.exports=function(){return r.Date.now()}},function(e,t,n){"use strict";const r=n(50);t.check=function(e){void 0===e&&(e={});const t=e.env||n(2);return"Chrome"===t.name&&t.userAgent.toLowerCase().indexOf("android")>-1&&t.version<65},t.once=r((()=>t.check()))},function(e,t,n){"use strict";const r=n(36),o=n(5);e.exports=function(e){let t,n,i,s,a;const c=this;let u=e.archiving;const l=e.archivingStarted||"Archiving on",d=e.archivingEnded||"Archiving off";let p=!0;const h=function(e){s.nodeValue=e,t.setAttribute("title",e)},f=function(){a&&(clearTimeout(a),a=null),u?o.addClass(n,"OT_active"):o.removeClass(n,"OT_active"),o.removeClass(c.domElement,"OT_archiving-"+(u?"off":"on")),o.addClass(c.domElement,"OT_archiving-"+(u?"on":"off")),e.show&&u?(h(l),o.addClass(i,"OT_mode-on"),o.removeClass(i,"OT_mode-auto"),c.setDisplayMode("on"),a=setTimeout((()=>{o.addClass(i,"OT_mode-auto"),o.removeClass(i,"OT_mode-on")}),5e3)):e.show&&!p?(o.addClass(i,"OT_mode-on"),o.removeClass(i,"OT_mode-auto"),c.setDisplayMode("on"),h(d),a=setTimeout((()=>{c.setDisplayMode("off")}),5e3)):c.setDisplayMode("off")};r(this,{mode:u&&e.show?"on":"off",nodeName:"h1",htmlAttributes:{className:"OT_archiving OT_edge-bar-item OT_edge-bottom"},onCreate(){t=o.createElement("div",{className:"OT_archiving-light-box"},""),n=o.createElement("div",{className:"OT_archiving-light"},""),t.appendChild(n),i=o.createElement("div",{className:"OT_archiving-status OT_mode-on OT_edge-bar-item OT_edge-bottom"},""),s=document.createTextNode(""),i.appendChild(s),c.domElement.appendChild(t),c.domElement.appendChild(i),f()}}),this.setShowArchiveStatus=function(t){e.show=t,c.domElement&&f.call(c)},this.setArchiving=function(e){u=e,p=!1,c.domElement&&f.call(c)}}},function(e,t,n){"use strict";e.exports=function(e){void 0===e&&(e={});const t=e.global||(void 0!==typeof window?window:n.g);return()=>t.navigator&&t.navigator.mediaDevices}},function(e,t,n){"use strict";(function(t){const r=n(7),o=n(9),i=n(106),s=n(629),a=n(27),c=n(22),u=n(6);e.exports=function(e){void 0===e&&(e={});const l=e.env||n(2),d=e.Errors||n(4),p=e.otError||n(11)(),h=e.logging||n(1)("getUserMedia"),f=e.screenSharing||n(162)(),m=e.getDisplayMediaExtensionHelper||n(287),g=e.customGetUserMedia,b=e.global||(void 0!==typeof window?window:__webpack_require__.g),y=e.analytics||new a,v=b.navigator,w=b.location,x=()=>{return g||(v.mediaDevices?(e=v.mediaDevices).getUserMedia.bind(e):void 0);var e},S=function(){const e=x();return e?e(...arguments):t.reject(new Error("Cannot find getUserMedia"))},E=()=>{return g||(v.mediaDevices&&v.getDisplayMedia?v.getDisplayMedia.bind(v):v.mediaDevices&&v.mediaDevices.getDisplayMedia?(e=v.mediaDevices).getDisplayMedia.bind(e):void 0);var e},T=function(){const e=E();return e?e(...arguments):t.reject(new Error("Cannot find getDisplayMedia"))},C=(()=>{const e={name:d.USER_MEDIA_ACCESS_DENIED,message:"End-user denied permission to hardware devices"},t={name:d.NOT_SUPPORTED,message:"A constraint specified is not supported by the browser."},n={name:d.CONSTRAINTS_NOT_SATISFIED,message:"It's not possible to satisfy one or more constraints passed into the getUserMedia function"},o={name:d.NO_DEVICES_FOUND,message:"No voice or video input devices are available on this machine."},i={name:d.HARDWARE_UNAVAILABLE,message:"The selected voice or video devices are unavailable. Verify that the chosen devices are not in use by another application."},a={name:d.UNABLE_TO_CAPTURE_SCREEN,message:"Unable to capture screen. Unknown error occurred"},c={AbortError:{name:d.UNABLE_TO_CAPTURE_MEDIA,message:"Unable to capture media. Unknown error occurred"},NotAllowedError:e,NotFoundError:o,NotReadableError:i,OverconstrainedError:n,SecurityError:r({},e,{message:"End-user denied permission to hardware devices or user media support may be disabled on this page"}),TypeError:n,PermissionDeniedError:e,PermissionDismissedError:e,NotSupportedError:t,ConstraintNotSatisfiedError:n,MandatoryUnsatisfiedError:n,OverConstrainedError:n,DevicesNotFoundError:o,NoDevicesFoundError:o,HardwareUnavailableError:i,SourceUnavailableError:i,TrackStartError:i,ScreenCaptureError:a,TabCaptureError:a};return s({objectToTrack:c,keys:["PermissionDeniedError","PermissionDismissedError","NotSupportedError","ConstraintNotSatisfiedError","MandatoryUnsatisfiedError","OverConstrainedError","DevicesNotFoundError","NoDevicesFoundError","HardwareUnavailableError","SourceUnavailableError","TrackStartError","ScreenCaptureError","TabCaptureError"],onUsage(e){y.logEvent({action:"DeprecatedPropertyUsage:getUserMedia:errorMap",variation:"Event",payload:{key:e}})}}),c})(),_=(e,t)=>{let n=e;"AbortError"===n&&"string"==typeof t&&t.match(/(screen|tab).?capture/i)&&(n="ScreenCaptureError");const r=C[n];let o;return o=r?p(r.name,new Error(`${r.message} (getUserMedia error: ${e})`)):new Error(`Unknown error while getting user media: ${e}`),o.originalMessage=t,o.originalName=e,o};return function(e,n){if(void 0===n&&(n=!1),h.debug("getUserMedia wrapper called with",e),function(e){if(!e||!o(e))return!0;for(const t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}(e))return h.error("Couldn't get UserMedia: All constraints were false"),u(t.reject(p(d.NO_VALID_CONSTRAINTS,new Error("Video and Audio was disabled, you need to enable at least one"))));const r=n&&m.isSupportedInThisBrowser?T:S,s=u(r(e).catch((e=>{const n=(e=>{if(o(e)&&e.name){let t=e.name,n=e.message;if("Cannot find getUserMedia"!==n&&"Cannot find getDisplayMedia"!==n||(t="Chrome"===l.name&&l.version>73&&"https:"!==b.location.protocol?"NotAllowedError":"NotSupportedError"),"Safari"===l.name&&"Error"===t){const n=Object.prototype.toString.call(e).match(/^\[object (\w+Error)\]$/);n&&(t=n[1])}const r=_(t,n);return r.constraintName=e.constraint||e.constraintName,r instanceof c||y.logEvent({action:"UnexpectedError:getUserMedia:parseErrorEvent",variation:"Event",payload:{name:r.name,message:r.message,originalMessage:r.originalMessage}}),r}if("string"==typeof e){const t=_(e);return y.logEvent({action:"CheckUnreachable:getUserMedia:parseErrorEvent",variation:"Event",payload:{info:"error is string",error:e}}),t}return y.logEvent({action:"CheckUnreachable:getUserMedia:parseErrorEvent",variation:"Event",payload:{info:"error was not string or object with name property",error:e}}),new Error("Unknown error type while getting media")})(e);if(n.name===d.UNABLE_TO_CAPTURE_SCREEN)return new t(((e,t)=>{f.checkCapability((e=>{if("chrome"===e.extensionRequired){if(e.extensionRegistered&&!e.extensionInstalled){const e=p(d.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,n);e.message="Screen sharing extension not installed see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",t(e)}else if(!e.extensionRegistered){const e=p(d.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,n);e.message="Screen sharing extension not registered see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",t(e)}}else t(n)}))}));throw n})).then((e=>(h.debug("got stream:",{stream:e,tracks:e.getTracks(),trackLabels:e.getTracks().map((e=>e.label))}),e)))),a=-1!==w.protocol.indexOf("https")?500:100;let g=!0;const v=()=>{g=!1};return s.then(v,v),i(a).then((()=>{if(!g)return;const e=()=>s.emit("accessDialogClosed");s.emit("accessDialogOpened"),s.then(e,e)})),s}}}).call(this,n(0))},function(e,t,n){"use strict";e.exports=function(e){let t=void 0===e?{}:e,n=t.objectToTrack,r=t.keys,o=t.onUsage;if(!Array.isArray(r)&&void 0!==r)throw new Error("keys must be an array, or undefined");if("function"!=typeof o)throw new Error("onUsage must be a function");if(null==n)throw new Error("Expected objectToTrack to be a trackable object");Object.keys(n).forEach((e=>{if(void 0!==r&&-1===r.indexOf(e))return;let t=n[e];Object.defineProperty(n,e,{get:()=>(o(e),t),set(n){t=n,o(e,t)},enumerable:!0})}))}},function(e,t,n){"use strict";const r=n(2),o=n(631).isCallbackBasedAPI;let i=n(265),s=null;const a=(e,t)=>{s.getSources(e,t)},c=(e,t)=>{s.getSources(e).then((e=>{t(void 0,e)}),t)},u=(e,t)=>{(o?a:c)({types:[e]},((n,r)=>{if(n)return void t(n);const o=r[0];if(!o)return void t(new Error("Could not find Electron source for screensharing"));const i={audio:!1,video:{mandatory:{chromeMediaSource:e,chromeMediaSourceId:o.id}}};t(void 0,i)}))};e.exports=function(e){void 0===e&&(e={});try{const t=()=>{let e=void 0!==typeof window?window:__webpack_require__.g;for(;"function"!=typeof e.require&&e.parent&&e.parent!==e;)e=e.parent;return e},n=()=>{const e=t();return(e.require?e.require("electron"):e.electron).desktopCapturer};s=e.desktopCapturer||(r.isElectron?n():null),i=e.isElectronScreenSharingSource||i}catch(e){}return{isSupportedInThisBrowser:null!==s,autoRegisters:!0,extensionRequired:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!0,window:!0,browser:!0},register:()=>({isInstalled:e=>e(!0),getConstraints(e,t,n){i(e)?n(void 0,{audio:!0,video:!1}):u(e,n)}})}}},function(e,t,n){"use strict";const r=n(2).version<78,o=!r;e.exports={isCallbackBasedAPI:r,isPromiseBasedAPI:o}},function(e,t,n){"use strict";const r=n(2),o=n(160).default;e.exports={isSupportedInThisBrowser:!!r.isFirefox&&!o,autoRegisters:!0,extensionRequired:!1,extensionInstalled:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:!0,browser:!1},register:()=>({isInstalled(e){e("object"==typeof OTScreenSharing)},getConstraints(e,t,n){t.video={mediaSource:e},t.browserWindow&&(t.video.browserWindow=t.browserWindow,delete t.browserWindow),void 0!==t.scrollWithPage&&(t.video.scrollWithPage=t.scrollWithPage,delete t.scrollWithPage),n(void 0,t)}})}},function(e,t,n){"use strict";var r=n(3),o=r(n(12)),i=r(n(13)),s=r(n(20));const a=n(634).normaliseOptions,c=n(288).isMediaStreamTrack,u=n(148),l=n(7),d=n(140),p=n(289).default,h=n(4),f=n(48),m=n(11),g=n(290).isValidVideoContentHint,b=n(6),y=n(149),v=n(2),w=n(264),x="getUserMedia request was aborted";e.exports=function(e){void 0===e&&(e={}),["deviceHelpers","getUserMediaHelper"].forEach((t=>{u(e[t],`${t} dependency must be injected into processPubOptions`)}));const t=e.generateConstraintInfo||n(255),r=e.global||(void 0!==typeof window?window:__webpack_require__.g),S=e.logging||n(1)("processPubOptions"),E=e.navigator||r.navigator,T=e.screenSharing||n(162)(),C=e.env||v,_=n(635)({navigator:E||{}}),I=e,k=I.deviceHelpers,R=I.getUserMediaHelper;return(e,n,u)=>{const v=a(e,n,S),E=y(v.videoSource),I=c(v.audioSource),N=c(v.videoSource),O=!I&&null!==v.audioSource,A=!N&&null!==v.videoSource,D=O||A,L=e=>"boolean"==typeof e,P=!E||I||w,V=d(v,{mirror:!E&&!N,publishAudio:!0,publishVideo:!0,showControls:!0,fitMode:E?"contain":"cover",audioFallbackEnabled:P,insertDefaultUI:!0,enableRenegotiation:!1,enableStereo:!1,enableDtx:!1,disableAudioProcessing:!1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0});if(void 0===V.videoContentHint||g(V.videoContentHint)||(S.warn(`${n}: Invalid content hint. Valid content hints are "text", "detail", "motion", or ""`),V.videoContentHint=""),V.name&&(V.name=String(V.name)),L(V.enableDtx)||(V.enableDtx=!1),L(V.enableStereo)||(V.enableStereo=!1),V.constraints)S.warn(`${n}: You have passed your own constraints not using ours`);else{const e=t((0,s.default)({isScreenSharing:E,isCustomAudioTrack:I,isCustomVideoTrack:N},f(V,["audioSource","publishAudio","videoSource","publishVideo","resolution","maxResolution","frameRate","facingMode","enableRenegotiation","enableStereo","disableAudioProcessing","echoCancellation","noiseSuppression","autoGainControl"]),{env:C,usingOptionalMandatoryStyle:_(E)}));l(V,e)}const M={isScreenSharing:E,isCustomAudioTrack:I,isCustomVideoTrack:N,shouldAllowAudio:P,properties:V};return b(M),M.getUserMedia=(0,i.default)(o.default.mark((function e(){var t,s,a,c,l,d,f,g,b;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return M.emit("accessDialogOpened",...t)},s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return M.emit("accessDialogClosed",...t)},D){e.next=7;break}return a=new r.MediaStream,I&&a.addTrack(v.audioSource),N&&a.addTrack(v.videoSource),e.abrupt("return",a);case 7:if(!E){e.next=15;break}return e.next=10,T.getConstraints({onAccessDialogOpened:t,onAccessDialogClosed:s,videoSource:v.videoSource,constraints:V.constraints});case 10:if(V.constraints=e.sent,!u()){e.next=13;break}throw m(h.CANCEL,new Error(x));case 13:e.next=25;break;case 15:return e.next=17,k.shouldAskForDevices();case 17:if(c=e.sent,!u()){e.next=20;break}throw m(h.CANCEL,new Error(x));case 20:S.debug(`${n}: shouldAskForDevices:`,c),c.video||(S.warn(`${n}: Setting video constraint to false, there are no video sources`),V.constraints.video=!1),c.audio||(S.warn(`${n}: Setting audio constraint to false, there are no audio sources`),V.constraints.audio=!1),M.videoDevices=c.videoDevices,M.audioDevices=c.audioDevices;case 25:if(l=V.constraints,S.debug(`${n}: onConstraintsFound`,l),!u()){e.next=29;break}throw m(h.CANCEL,new Error(x));case 29:return d="Failed to acquire functional stream, this might be caused by the following iOS bug: https://bugs.webkit.org/show_bug.cgi?id=188088",f="Failed to acquire functional stream, this might be caused by the following iOS bug: https://bugs.webkit.org/show_bug.cgi?id=204106",g=e=>"NotReadableError"===e.originalName&&"Failed starting capture of a video track"===e.originalMessage,b=function(){var e=(0,i.default)(o.default.mark((function e(){var r,i,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=R(l,E)).on("accessDialogOpened",t),r.on("accessDialogClosed",s),e.prev=3,e.next=6,r;case 6:if(i=e.sent,!(C.isiOS&&V.publishVideo&&i.getVideoTracks().length&&"ended"===i.getVideoTracks()[0].readyState)){e.next=11;break}throw i.getTracks().forEach((e=>e.stop())),new Error(d);case 11:return e.abrupt("return",i);case 14:if(e.prev=14,e.t0=e.catch(3),!C.isiOS){e.next=34;break}if(!(g(e.t0)&&C.iOSVersion>=13&&C.iOSVersion<14)){e.next=32;break}return e.prev=18,a=R({audio:!0,video:!1},!1),e.next=22,a;case 22:e.sent.getTracks().forEach((e=>e.stop())),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(18),S.debug(`${n}: error disposing audio track`,e.t1);case 29:throw new Error(f);case 32:if(e.t0.name!==h.HARDWARE_UNAVAILABLE){e.next=34;break}throw new Error(d);case 34:throw e.t0;case 35:return e.prev=35,setTimeout((()=>{r.off("accessDialogOpened",t),r.off("accessDialogClosed",s)})),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[3,14,35,38],[18,26]])})));return function(){return e.apply(this,arguments)}}(),e.next=35,p(b,((e,t)=>!(![d,f].includes(e.message)||1!==t||u())&&1e3))();case 35:if(a=e.sent,!u()){e.next=39;break}throw a.getTracks().forEach((e=>{e.stop()})),m(h.CANCEL,new Error(x));case 39:return I&&a.addTrack(v.audioSource),N&&a.addTrack(v.videoSource),e.abrupt("return",a);case 42:case"end":return e.stop()}}),e)}))),M}}},function(e,t,n){"use strict";const r=n(288).isMediaStreamTrack,o=n(37),i=n(2);t.normaliseOptions=(e,t,n)=>{const s=e&&"object"==typeof e?o(e):{};if(!1===s.audioSource&&(s.audioSource=null),!1===s.videoSource&&(s.videoSource=null),void 0===s.minVideoBitrate||"number"==typeof s.minVideoBitrate&&s.minVideoBitrate>0||(n.warn(`${t}: Invalid minVideoBitrate in publisher properties. minVideoBitrate must be a positive number`),delete s.minVideoBitrate),void 0===s.audioBitrate||s.audioBitrate>=6e3&&s.audioBitrate<=51e4||(n.warn(`${t}: Invalid audioBitrate in publisher properties. audioBitrate must be a number between 6000 and 510000 bits per second`),delete s.audioBitrate),"Firefox"===i.name&&i.version<49){const e="Firefox 48 and below";r(s.audioSource)&&(s.audioSource=null,n.warn(`${t}: Cannot use custom tracks with ${e}. Setting audioSource to null`)),r(s.videoSource)&&(s.videoSource=null,n.warn(`${t}: Cannot use custom tracks with ${e}. Setting videoSource to null`))}return s}},function(e,t,n){"use strict";const r=n(2),o=r.name,i=r.version,s=n(258);e.exports=function(e){let t=(void 0===e?{}:e).navigator,n=void 0===t?window.navigator:t;return function(e){return e&&!s||!(n.mediaDevices&&n.mediaDevices.getUserMedia)||"Chrome"===o&&i<61}}},function(e,t,n){"use strict";e.exports=function(e){void 0===e&&(e={}),["processPubOptions"].forEach((t=>{if(!e[t])throw new Error(`${t} dependency must be injected into OT.getUserMedia`)}));const t=e.logging||n(1)("getUserMedia"),r=e.processPubOptions;return function(e){return void 0===e&&(e={}),r(e,"OT.getUserMedia",(()=>!1)).getUserMedia().catch((e=>{throw t.error(`OT.getUserMedia failed to getUserMedia: ${e}`),e}))}}},function(e,t,n){"use strict";e.exports=function(e,t){const n=(t,n)=>()=>{throw new Error(`Cannot ${t} ${n}, ${e} is destroyed`)};Object.keys(t).forEach((e=>{"function"==typeof t[e]?t[e]=n("call",e):Object.defineProperty(t,e,{get:n("get",e),set:n("set",e)})}))}},function(e,t,n){"use strict";e.exports=e=>{if("srcObject"in e)return;const t=window&&window.URL;"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(e,"srcObject",{get(){return this._srcObject},set(e){const n=this;if(this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e)return this.src=t.createObjectURL(e),e.addEventListener("addtrack",(()=>{n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)})),e.addEventListener("removetrack",(()=>{n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)})),this._srcObject;this.src=""}})}},function(e,t,n){"use strict";e.exports=e=>{return!(!(t=e)||"function"!=typeof t.getBoundingClientRect)&&(e=>{const t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,r=window.innerWidth||document.documentElement.clientWidth,o=t.top<=n&&t.top+t.height>=0,i=t.left<=r&&t.left+t.width>=0;return o&&i})(e)&&(e=>{const t=e=>!(!e.style||"hidden"!==e.style.visibility)||!!e.parentNode&&t(e.parentNode);return null!==e.offsetParent&&!t(e)})(e);var t}},function(e,t,n){"use strict";const r=n(104),o=n(5),i={0:"rotate(0deg)",270:"rotate(90deg)",90:"rotate(-90deg)",180:"rotate(180deg)"};e.exports=function(e,t,n){let s=n;r(e,{isRotated:{get(){return this.orientation()&&(270===this.orientation().videoOrientation||90===this.orientation().videoOrientation)}},orientation:{get:()=>s,set(n){s=n;const r=i[n.videoOrientation]||i.ROTATED_NORMAL;switch(o.env.name){case"Chrome":case"Safari":t().style.webkitTransform=r;break;default:t().style.transform=r}e.trigger("orientationChanged",s)}},audioChannelType:{get(){return"mozAudioChannelType"in this.domElement?this.domElement.mozAudioChannelType:"unknown"},set(e){"mozAudioChannelType"in this.domElement&&(this.domElement.mozAudioChannelType=e)}}})}},function(e,t,n){"use strict";e.exports=function(){return function(e,t,n){const r=[];function o(o){setTimeout((()=>{if(r.length)if(function(e){return e.getTracks().every((e=>"ended"===e.readyState))}(e))s(),"function"==typeof t&&t();else{const e=o.target;i(e),"function"==typeof n&&n(e)}}),100)}function i(e){e.removeEventListener&&e.removeEventListener("ended",o),e.onended===o&&(e.onended=null);const t=r.indexOf(e);t>=0&&r.splice(t,1)}function s(){r.slice().forEach(i)}function a(){e.getTracks().forEach((e=>{r.push(e),e.onended=o,e.addEventListener&&e.addEventListener("ended",o)}))}return a(),{stop:s,refresh:()=>{s(),a()}}}}},function(e,t,n){var r=n(64),o=n(99),i=n(35);e.exports=function(e,t){var n={};return t=i(t,3),o(e,(function(e,o,i){r(n,o,t(e,o,i))})),n}},function(e,t,n){"use strict";e.exports=function(e,t){const n=setTimeout((()=>{e(((e,n)=>{if(!e)for(let e=0;e<n.length;e+=1){const r=n[e];-1===r.id.indexOf("_send")||"ssrc"!==r.type||"audio"!==r.kind&&"audio"!==r.mediaType||0!==parseInt(r.bytesSent,10)||t()}}))}),3e3);return function(){clearTimeout(n)}}},function(e,t,n){"use strict";e.exports=function(e,t,n){void 0===n&&(n=!1);let r=null,o=0,i=null,s=n;const a=e=>"inbound-rtp"===e.type&&"audio"===(e.kind||e.mediaType),c=e=>e.id===i&&"track"===e.type&&"audio"===(e.kind||e.mediaType),u=setInterval((()=>{e(((e,n)=>{if(e)return;const l=n.find(a)||{};i=l.trackId;const d=n.find(c);if(d){const e=d.audioLevel,n=d.totalSamplesReceived;if(void 0===e)return;((e,t)=>e===r&&t===o)(e,n)?(clearInterval(u),t("audioLevelStuck")):((e,t)=>!s&&0===e&&0===r&&t>o)(e,n)&&(clearInterval(u),t("audioLevelStuckAt0")),r=e,o=n}}))}),500);return n||setTimeout((()=>{s=!0}),3e3),{stop:()=>{clearInterval(u)}}}},function(e,t,n){"use strict";(function(t){const r=new(n(27));e.exports=function(e){void 0===e&&(e={});const o=e.analytics||r,i=e.errors||n(4),s=e.ExceptionCodes||n(8),a=e.otError||n(11)(),c=e.sessionObjects||n(21),u=e.uuid||n(19);return function(e){void 0===e&&(e=()=>{});const n=u();function r(t){t?e(a(i.REPORT_ISSUE_FAILED,new Error("Error calling OT.reportIssue(). Check the client's network connection."),s.REPORT_ISSUE_ERROR)):e(null,n)}0===c.sessions.length()?o.logEvent({action:"ReportIssue",variation:"Event",payload:{reportIssueId:n}},null,r):t.all(c.sessions.map((e=>e.reportIssue({id:n})))).then((()=>r()),(e=>r(e)))}}}).call(this,n(0))},function(e,t,n){"use strict";e.exports=e=>{let t=e.window,n=!1;try{const e=Object.defineProperty({},"passive",{get(){n=!0}});t.addEventListener("testPassive",null,e),t.removeEventListener("testPassive",null,e)}catch(e){}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(r=n(298))&&r.__esModule?r:{default:r},s=function(){},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.internalIsCanceled=!1,this.listeners=[]}return o(e,[{key:"isCanceled",value:function(){return this.internalIsCanceled}},{key:"cancel",value:function(){this.internalIsCanceled||(this.internalIsCanceled=!0,this.listeners.forEach((function(e){return e()})),this.listeners=null)}},{key:"throwIfCanceled",value:function(){if(this.internalIsCanceled)throw new i.default("Operation has been canceled.")}},{key:"onCancel",value:function(e){var t=this;return this.internalIsCanceled?s:(this.listeners.push(e),function(){if(t.listeners){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1)}})}},{key:"fork",value:function(){if(this.internalIsCanceled)return e.CANCELED;var t=new e;return this.onCancel((function(){return t.cancel()})),t}}]),e}();t.default=a,a.CANCELED=new a,a.CANCELED.internalIsCanceled=!0},function(e,t,n){"use strict";(function(t){const r=n(63),o=n(299).default,i=n(154);n(107)(),e.exports=function(e,n){const s=r(e),a=new t((t=>{const n=()=>{(e.videoWidth()>2||e.videoHeight()>2)&&t(!0)};s.on("videoDimensionsChanged",n),n()}));return o(i(a,n,(()=>!1)),(()=>s.removeAll()))}}).call(this,n(0))},function(e,t,n){"use strict";(function(t){const r=n(63),o=n(299).default,i=n(154);n(107)(),e.exports=function(e,n){void 0===n&&(n=5e3);const s=r(e),a=new t((e=>{s.on("timeupdate",e),s.on("loadedmetadata",e)}));return o(i(a,n,(()=>!1)),(()=>s.removeAll()))}}).call(this,n(0))},function(e,t,n){"use strict";const r=n(1)("WidgetView:fixMini");e.exports=function(e){const t=e.clientWidth,n=e.clientHeight;e.classList.remove("OT_micro"),e.classList.remove("OT_mini"),(t<64||n<64)&&(e.classList.add("OT_micro"),r.debug("OT_micro class added",{clientWidth:t,clientHeight:n,microWidth:64,microHeight:64})),(t<128||n<128)&&(e.classList.add("OT_mini"),r.debug("OT_mini class added",{clientWidth:t,clientHeight:n,miniWidth:128,miniHeight:128}))}},function(e,t,n){"use strict";const r=n(19);e.exports=function(e,t){let n,o;if(e&&e.nodeName?(n=e,n.getAttribute("id")&&0!==n.getAttribute("id").length||n.setAttribute("id",`OT_${r()}`),o=n.getAttribute("id")):e&&(n=document.getElementById(e),n&&(o=e)),o||(o=`OT_${r().replace(/-/g,"_")}`),!n)return n=document.createElement("div"),n.id=o,n.setAttribute("id",o),n.style.backgroundColor="#000000",document.body.appendChild(n),n;const i=document.createElement("div");switch(i.id=`OT_${r()}`,t){case"append":return n.appendChild(i),i;case"before":return n.parentNode.insertBefore(i,n),i;case"after":return n.parentNode.insertBefore(i,n.nextSibling),i;default:for(;n.firstChild;)n.removeChild(n.firstChild);return n}}},function(e,t,n){"use strict";e.exports=function(e,t){return void 0===t&&(t="px"),String(parseFloat(e,10))===String(e).trim()?`${String(e).trim()}${t}`:e}},function(e,t,n){"use strict";(function(t){const r=n(74);e.exports=function(e,n){let o=void 0===n?{}:n,i=o.frequency,s=void 0===i?60:i,a=o.timeout,c=void 0===a?2e3:a;return new t(((t,n)=>{let o;const i=new r((()=>{(function(){try{return e()}catch(e){return!1}})()&&(clearTimeout(o),i.stop(),t())}),s);o=setTimeout((()=>{i.stop(),n(new Error("TIMEOUT"))}),c),i.start()}))}}).call(this,n(0))},function(e,t,n){"use strict";const r=n(11)(),o=n(4),i=n(8);e.exports=e=>"404"===String(e.code)?r(o.STREAM_NOT_FOUND,new Error("stream not found"),i.UNABLE_TO_SUBSCRIBE):"409"===String(e.code)&&"streamLimitExceeded"===e.message?r(o.STREAM_LIMIT_EXCEEDED,new Error("The limit for concurrent streams in the session has been reached"),i.STREAM_LIMIT_EXCEEDED):r(o.UNABLE_TO_SUBSCRIBE,new Error(`subscriberCreate failed with unexpected code ${e.code}: ${e.message}`),i.UNEXPECTED_SERVER_RESPONSE)},function(e,t,n){"use strict";const r=n(26),o=n(49),i=n(103),s=n(23)();e.exports=e=>{let t=e.subscriber,n=e.audioLevelSampler,a=0,c=0;const u=new i((()=>{const e=t.listenerCount(r.AUDIO_LEVEL_UPDATED);o()-c>1e4&&0===e?u.stop():(a=n.sample(),e>0&&t.dispatchEvent(new s.AudioLevelUpdatedEvent(a)))}));return Object.defineProperty(t,"loudness",{get:()=>(u.start(),c=o(),a),set(){throw new TypeError("Cannot set readonly property loudness")},configurable:!0}),t.listenerCount(r.AUDIO_LEVEL_UPDATED)&&u.start(),t.on("audioLevelUpdated:added",(()=>{u.start()})),t.once(r.SUBSCRIBER_DESTROYED,(()=>{u.stop()})),{destroy(){n.destroy(),u.stop()}}}},function(e,t,n){"use strict";const r=n(254),o=n(145),i=n(657),s=n(301),a=n(302),c=n(159)(),u=n(658),l=n(1)("Subscriber");e.exports=function(e,t){void 0===t&&(t={});const n=t.hasGetSynchronizationSupport;if(e){if(i({hasGetSynchronizationSupport:n}))return new r(e.getSynchronizationSources);if(s())return new r(e.getStats);if(a()){let e;try{e=t.audioContext||c()}catch(e){l.warn("Failed to get AudioContext()",e)}if(u(e))return new o(e)}}}},function(e,t,n){"use strict";const r=n(2),o=()=>window.RTCRtpReceiver&&"getSynchronizationSources"in window.RTCRtpReceiver.prototype;e.exports=function(e){return void 0===e&&(e={}),(e.hasGetSynchronizationSupport||o)()&&!r.isFirefox}},function(e,t,n){"use strict";e.exports=e=>(void 0!==typeof window?window:n.g).AudioContext&&e instanceof(void 0!==typeof window?window:n.g).AudioContext||(void 0!==typeof window?window:n.g).webkitAudioContext&&e instanceof(void 0!==typeof window?window:n.g).webkitAudioContext},function(e,t,n){"use strict";const r=n(36),o=n(5);e.exports=function(e){let t=!1,n=!1;const i=function(e){const r=["auto","on"].indexOf(this.getDisplayMode())>-1;o.removeClass(e,"OT_video-disabled OT_video-disabled-warning OT_active"),r&&(t?o.addClass(e,"OT_video-disabled"):n&&o.addClass(e,"OT_video-disabled-warning"),o.addClass(e,"OT_active"))}.bind(this);this.disableVideo=function(e){t=e,!0===e&&(n=!1),i(this.domElement)},this.setWarning=function(e){n=e,i(this.domElement)},r(this,{mode:e.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-disabled-indicator"}});const s=this.setDisplayMode.bind(this);this.setDisplayMode=function(e){s(e),i(this.domElement)}}},function(e,t,n){"use strict";const r=n(36),o=n(5);e.exports=function(e){let t=!1;const n=e=>{const n=["auto","on"].indexOf(this.getDisplayMode())>-1;o.removeClass(e,["OT_audio-blocked","OT_active"].join(" ")),n&&(t&&o.addClass(e,"OT_audio-blocked"),o.addClass(e,"OT_active"))};this.setAudioBlocked=e=>{t=e,n(this.domElement)},r(this,{mode:e.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-blocked-indicator"}});const i=this.setDisplayMode.bind(this);this.setDisplayMode=e=>{i(e),n(this.domElement)}}},function(e,t,n){"use strict";const r=n(36),o=n(5);e.exports=function(e){let t=!1;const n=e=>{const n=["auto","on"].indexOf(this.getDisplayMode())>-1;o.removeClass(e,["OT_active"].join(" ")),n&&t&&o.addClass(e,"OT_active")};this.setVideoUnsupported=e=>{t=e,n(this.domElement)},r(this,{mode:e.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-unsupported"},htmlContent:'<div class="OT_video-unsupported-bar"></div><div class="OT_video-unsupported-img"></div><span class="OT_video-unsupported-text">Video format not supported</span>'});const i=this.setDisplayMode.bind(this);this.setDisplayMode=e=>{i(e),n(this.domElement)}}},function(e,t,n){"use strict";const r=n(48),o=n(7),i=n(62),s=n(75),a=n(158);e.exports=function(e,t){let n;void 0===t&&(t=5e3);let c=!1;const u={},l=()=>{c||e(((e,a)=>{if(!c){if(!e){const e=function(e){return void 0===e&&(e=[]),i(e,(e=>s.isVideoInboundRtpStat(e)))}(a);e?o(u,r(e,["timestamp","framesDecoded"])):u.timestamp||o(u,{timestamp:Date.now(),framesDecoded:0})}n=setTimeout(l,t)}}))};return l(),{getFrameRateFromStat:e=>a({currentStatFrames:e.framesDecoded,currentTimestamp:e.timestamp,prevStatFrames:u.framesDecoded,prevTimestamp:u.timestamp}),destroy(){c=!0,n&&(clearTimeout(n),n=null)}}}},function(e,t,n){"use strict";e.exports=e=>{let t=e.connectivityState,n=e.onWarning,r=e.onTimeout,o=e.warningMs,i=e.timeoutMs;const s=[],a=()=>{s.forEach((e=>clearTimeout(e)))};t.observe({onEnterConnecting(){s.push(setTimeout(n,o),setTimeout(r,i))},onEnterConnected:a,onEnterDisconnected:a})}},function(e,t,n){"use strict";const r=n(305);e.exports=e=>{let t=e.onInvalidTransition;return new r({init:"disconnected",transitions:[{name:"beginConnect",from:"disconnected",to:"connecting"},{name:"connect",from:"connecting",to:"connected"},{name:"fail",from:["connecting","connected"],to:"disconnected"},{name:"cancel",from:["connecting","connected"],to:"disconnected"},{name:"disconnect",from:["connecting","connected"],to:"disconnected"}],methods:{onInvalidTransition:t}})}},function(e,t,n){"use strict";const r=n(74);e.exports=e=>{let t=e.connectivityState,n=e.logAttempt;const o=new r(n,.2,6);t.observe({onEnterConnecting(){o.start()},onEnterDisconnected(){o.stop()},onEnterConnected(){o.stop()}})}},function(e,t,n){var r=n(667),o=n(260),i=r((function(e,t,n){return e+(n?" ":"")+o(t)}));e.exports=i},function(e,t,n){var r=n(668),o=n(669),i=n(672),s=RegExp("[']","g");e.exports=function(e){return function(t){return r(i(o(t).replace(s,"")),e,"")}}},function(e,t){e.exports=function(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}},function(e,t,n){var r=n(670),o=n(59),i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=o(e))&&e.replace(i,r).replace(s,"")}},function(e,t,n){var r=n(671)({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"});e.exports=r},function(e,t){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},function(e,t,n){var r=n(673),o=n(674),i=n(59),s=n(675);e.exports=function(e,t,n){return e=i(e),void 0===(t=n?void 0:t)?o(e)?s(e):r(e):e.match(t)||[]}},function(e,t){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(n)||[]}},function(e,t){var n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return n.test(e)}},function(e,t){var n="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",o="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+o+"]",s="\\d+",a="["+n+"]",c="[^\\ud800-\\udfff"+o+s+"\\u2700-\\u27bf"+n+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",d="["+r+"]",p="(?:"+a+"|"+c+")",h="(?:"+d+"|"+c+")",f="(?:['](?:d|ll|m|re|s|t|ve))?",m="(?:['](?:D|LL|M|RE|S|T|VE))?",g="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",b="[\\ufe0e\\ufe0f]?",y=b+g+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",u,l].join("|")+")"+b+g+")*",v="(?:"+["[\\u2700-\\u27bf]",u,l].join("|")+")"+y,w=RegExp([d+"?"+a+"+"+f+"(?="+[i,d,"$"].join("|")+")",h+"+"+m+"(?="+[i,d+p,"$"].join("|")+")",d+"?"+p+"+"+f,d+"+"+m,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",s,v].join("|"),"g");e.exports=function(e){return e.match(w)||[]}},function(e,t,n){"use strict";e.exports=(e,t)=>{const n=e.getSenders().find((e=>"video"===e.track.kind)),r=n.getParameters();r.encodings.forEach((e=>{e.active=t})),n.setParameters(r)}},function(e,t,n){"use strict";const r=n(48);e.exports=e=>r(e,["audioDeviceId","audioFallbackEnabled","audioSource","channels","classNames","constraints","disableAudioProcessing","echoCancellation","noiseSuppression","autoGainControl","enableRenegotiation","enableStereo","facingMode","fitMode","frameRate","height","insertDefaultUI","insertMode","audioBitrate","maxResolution","minVideoBitrate","mirror","name","publishAudio","publishVideo","resolution","showControls","style","videoContentHint","videoDeviceId","videoDimensions","videoFilter","videoSource","width"])},function(e,t,n){"use strict";const r=n(26),o=n(49),i=n(103),s=n(23)();e.exports=e=>{let t=e.publisher,n=e.widgetView,a=0,c=0;const u=new i((()=>{const e=t.listenerCount(r.AUDIO_LEVEL_UPDATED);if(o()-c>1e4&&0===e)return void u.stop();const i=n&&n.video();if(i){const n=i.getAudioInputLevel();a=n,e>0&&t.dispatchEvent(new s.AudioLevelUpdatedEvent(n))}}));Object.defineProperty(t,"loudness",{get:()=>(u.start(),c=o(),a),set(){throw new TypeError("Cannot set readonly property loudness")}}),t.listenerCount(r.AUDIO_LEVEL_UPDATED)&&u.start(),t.on("audioLevelUpdated:added",(()=>{u.start()})),t.once(r.PUBLISHER_DESTROYED,(()=>{u.stop()}))}},function(e,t,n){"use strict";var r=n(3),o=r(n(12)),i=r(n(13));e.exports=function(e){let t=!1;return function(){var n=(0,i.default)(o.default.mark((function n(){var r,i,s,a=arguments;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=2;break}throw new Error("The previous call to this function has not yet completed.");case 2:for(t=!0,n.prev=3,r=a.length,i=new Array(r),s=0;s<r;s++)i[s]=a[s];return n.next=7,e.call(this,...i);case 7:return n.abrupt("return",n.sent);case 8:return n.prev=8,t=!1,n.finish(8);case 11:case"end":return n.stop()}}),n,this,[[3,,8,11]])})));return function(){return n.apply(this,arguments)}}()}},function(e,t,n){"use strict";const r=n(11)(),o=n(4);e.exports=function(e){const t=document.createElement("canvas");if(!t.captureStream)throw r(o.NOT_SUPPORTED,new Error("Your browser does not support HTMLCanvasElement.captureStream()"));t.width=e.width,t.height=e.height,t.getContext("2d").fillRect(0,0,1,1);const n=t.captureStream().getVideoTracks()[0];return n.isCreatedCanvas=!0,n.enabled=!1,n}},function(e,t,n){"use strict";e.exports=(e,t)=>{if(!e)return null;const n=e.getVideoTracks()[0];return n?((e,t)=>(e=>e.getSettings&&e.getSettings().deviceId)(e)||(e=>{let t;return e.getConstraints&&e.getConstraints().deviceId&&(t=e.getConstraints().deviceId.exact),t})(e)||((e,t)=>{let n;if(t&&t.length){const r=t.find((t=>t.label===e.label));r&&(n=r.deviceId)}return n})(e,t))(n,t):null}},function(e,t,n){"use strict";const r=n(4),o=n(8),i=n(11)();e.exports=e=>[403,404,409].includes(parseInt(e.code,10))?i(r.STREAM_CREATE_FAILED,new Error(`Failed to create stream in server model: ${e.message}`),o.UNABLE_TO_PUBLISH):i(r.UNEXPECTED_SERVER_RESPONSE,new Error(`Unexpected server response: ${e.message}`),o.UNEXPECTED_SERVER_RESPONSE)},function(e,t,n){"use strict";var r=n(3),o=r(n(12)),i=r(n(13));const s=n(2),a=n(684),c=n(686),u=n(1)("MediaProcessor");function l(e){var t=this;void 0===e&&(e={});const n=e,r=n.ML,s=void 0===r?a:r,l=n.MediaTransform,d=void 0===l?c:l;let p,h,f;this.isValidVideoFilter=e=>{const t=e.type;return d.isSupported(t)&&d.isValidConfig(e)},this.setVideoFilter=function(){var e=(0,i.default)(o.default.mark((function e(n){var r,i,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.type,i=d.getConfigurator(r)){e.next=5;break}return u.warn(`Ignoring: filter "${r}" isn't supported`),e.abrupt("return");case 5:if(a=i.getConfig(n)){e.next=9;break}return u.warn(`Ignoring: couldn't configure filter ${r}`),e.abrupt("return");case 9:if(!t.getVideoFilter()){e.next=20;break}return e.prev=11,e.next=14,t.destroy();case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(11),u.warn(`Ignoring, couldn't remove previous filter: ${e.t0}`),e.abrupt("return");case 20:return e.next=22,s.createConnector(a);case 22:p=e.sent,h=n;case 24:case"end":return e.stop()}}),e,null,[[11,16]])})));return function(t){return e.apply(this,arguments)}}(),this.getVideoFilter=()=>h,this.getOriginalVideoTrack=()=>f,this.setMediaStream=function(){var e=(0,i.default)(o.default.mark((function e(t){var n,r,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getVideoTracks(),r=n[0]){e.next=4;break}return u.warn("Ignoring. No video track found"),e.abrupt("return",null);case 4:return i=null,e.prev=5,e.next=8,p.setTrack(r);case 8:i=e.sent,f=r,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),u.error(`Error setting media stream: ${e.t0}`);case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),this.setVideoTrack=function(){var e=(0,i.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,p.setTrack(t);case 4:n=e.sent,f=t,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),u.err(`Error setting video track: ${e.t0}`);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this._setConnector=e=>{p=e},this.destroy=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.destroy();case 2:p=null,h=null,f=null;case 5:case"end":return e.stop()}}),e)})))}l.isSupported=function(e){void 0===e&&(e={});const t=e,n=t.env,r=void 0===n?s:n,o=t.ML,i=void 0===o?a:o;return r.isChrome&&i.isSupported()},e.exports=l},function(e,t,n){"use strict";const r={isSupported:()=>"undefined"!=typeof MediaStreamTrackProcessor&&"undefined"!=typeof MediaStreamTrackGenerator,setMetadata:n(685).setMetadata,createConnector:n(308).createVonageMediaProcessorConnector};e.exports=r},function(e,t,n){"use strict";n.r(t),function(e,r){function o(){return new e(((e,t)=>{"undefined"==typeof MediaStreamTrackProcessor||"undefined"==typeof MediaStreamTrackGenerator?t("Your browser does not support the MediaStreamTrack API for Insertable Streams of Media."):e()}))}n.d(t,"MediaProcessor",(function(){return mt})),n.d(t,"MediaProcessorConnector",(function(){return bt})),n.d(t,"isSupported",(function(){return o})),n.d(t,"setMetadata",(function(){return Ve}));class i{}i.updates={transformer_new:"New transformer",transformer_null:"Null transformer"},i.errors={transformer_none:"No transformers provided",transformer_start:"Cannot start transformer",transformer_transform:"Cannot transform frame",transformer_flush:"Cannot flush transformer"};var s={exports:{}},a=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},c=a,u=Object.prototype.toString;function l(e){return Array.isArray(e)}function d(e){return void 0===e}function p(e){return"[object ArrayBuffer]"===u.call(e)}function h(e){return null!==e&&"object"==typeof e}function f(e){if("[object Object]"!==u.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function m(e){return"[object Function]"===u.call(e)}function g(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),l(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var b={isArray:l,isArrayBuffer:p,isBuffer:function(e){return null!==e&&!d(e)&&null!==e.constructor&&!d(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===u.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&p(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:h,isPlainObject:f,isUndefined:d,isDate:function(e){return"[object Date]"===u.call(e)},isFile:function(e){return"[object File]"===u.call(e)},isBlob:function(e){return"[object Blob]"===u.call(e)},isFunction:m,isStream:function(e){return h(e)&&m(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===u.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:g,merge:function e(){var t={};function n(n,r){f(t[r])&&f(n)?t[r]=e(t[r],n):f(n)?t[r]=e({},n):l(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)g(arguments[r],n);return t},extend:function(e,t,n){return g(t,(function(t,r){e[r]=n&&"function"==typeof t?c(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},y=b;function v(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var w=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(y.isURLSearchParams(t))r=t.toString();else{var o=[];y.forEach(t,(function(e,t){null!=e&&(y.isArray(e)?t+="[]":e=[e],y.forEach(e,(function(e){y.isDate(e)?e=e.toISOString():y.isObject(e)&&(e=JSON.stringify(e)),o.push(v(t)+"="+v(e))})))})),r=o.join("&")}if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e},x=b;function S(){this.handlers=[]}S.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},S.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},S.prototype.forEach=function(e){x.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var E=S,T=b,C=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},_=C,I=function(e,t,n,r,o){var i=new Error(e);return _(i,t,n,r,o)},k=I,R=b,N=R.isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),R.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),R.isString(r)&&s.push("path="+r),R.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},O=b,A=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],D=b,L=D.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=D.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function P(e){this.message=e}P.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},P.prototype.__CANCEL__=!0;var V=P,M=b,F=N,W=w,Z=L,B=I,G=J,U=V,$=b,X=function(e,t){T.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},j=C,z={"Content-Type":"application/x-www-form-urlencoded"};function H(e,t){!$.isUndefined(e)&&$.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var Y,K={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==r&&"[object process]"===Object.prototype.toString.call(r))&&(Y=function(t){return new e((function(e,n){var r,o=t.data,i=t.headers,s=t.responseType;function a(){t.cancelToken&&t.cancelToken.unsubscribe(r),t.signal&&t.signal.removeEventListener("abort",r)}M.isFormData(o)&&delete i["Content-Type"];var c=new XMLHttpRequest;if(t.auth){var u=t.auth.username||"",l=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.Authorization="Basic "+btoa(u+":"+l)}var d,p,h=(d=t.baseURL,p=t.url,d&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(p)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(d,p):p);function f(){if(c){var r="getAllResponseHeaders"in c?function(e){var t,n,r,o={};return e?(O.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=O.trim(e.substr(0,r)).toLowerCase(),n=O.trim(e.substr(r+1)),t){if(o[t]&&A.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}(c.getAllResponseHeaders()):null;(function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(k("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)})((function(t){e(t),a()}),(function(e){n(e),a()}),{data:s&&"text"!==s&&"json"!==s?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:t,request:c}),c=null}}if(c.open(t.method.toUpperCase(),W(h,t.params,t.paramsSerializer),!0),c.timeout=t.timeout,"onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(f)},c.onabort=function(){c&&(n(B("Request aborted",t,"ECONNABORTED",c)),c=null)},c.onerror=function(){n(B("Network Error",t,null,c)),c=null},c.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",r=t.transitional||G.transitional;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(B(e,t,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},M.isStandardBrowserEnv()){var m=(t.withCredentials||Z(h))&&t.xsrfCookieName?F.read(t.xsrfCookieName):void 0;m&&(i[t.xsrfHeaderName]=m)}"setRequestHeader"in c&&M.forEach(i,(function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete i[t]:c.setRequestHeader(t,e)})),M.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),s&&"json"!==s&&(c.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&c.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(r=function(e){c&&(n(!e||e&&e.type?new U("canceled"):e),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(r),t.signal&&(t.signal.aborted?r():t.signal.addEventListener("abort",r))),o||(o=null),c.send(o)}))}),Y),transformRequest:[function(e,t){return X(t,"Accept"),X(t,"Content-Type"),$.isFormData(e)||$.isArrayBuffer(e)||$.isBuffer(e)||$.isStream(e)||$.isFile(e)||$.isBlob(e)?e:$.isArrayBufferView(e)?e.buffer:$.isURLSearchParams(e)?(H(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):$.isObject(e)||t&&"application/json"===t["Content-Type"]?(H(t,"application/json"),function(e,t,n){if($.isString(e))try{return(0,JSON.parse)(e),$.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||K.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&$.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw j(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};$.forEach(["delete","get","head"],(function(e){K.headers[e]={}})),$.forEach(["post","put","patch"],(function(e){K.headers[e]=$.merge(z)}));var J=K,q=b,Q=J,ee=function(e){return!(!e||!e.__CANCEL__)},te=b,ne=function(e,t,n){var r=this||Q;return q.forEach(n,(function(n){e=n.call(r,e,t)})),e},re=ee,oe=J,ie=V;function se(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ie("canceled")}var ae=b,ce=function(e,t){t=t||{};var n={};function r(e,t){return ae.isPlainObject(e)&&ae.isPlainObject(t)?ae.merge(e,t):ae.isPlainObject(t)?ae.merge({},t):ae.isArray(t)?t.slice():t}function o(n){return ae.isUndefined(t[n])?ae.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function i(e){if(!ae.isUndefined(t[e]))return r(void 0,t[e])}function s(n){return ae.isUndefined(t[n])?ae.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function a(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a};return ae.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||o,r=t(e);ae.isUndefined(r)&&t!==a||(n[e]=r)})),n},ue="0.25.0",le={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){le[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var de={};le.transitional=function(e,t,n){function r(e,t){return"[Axios v0.25.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,o,i){if(!1===e)throw new Error(r(o," has been removed"+(t?" in "+t:"")));return t&&!de[o]&&(de[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}};var pe={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),o=r.length;o-- >0;){var i=r[o],s=t[i];if(s){var a=e[i],c=void 0===a||s(a,i,e);if(!0!==c)throw new TypeError("option "+i+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:le},he=b,fe=w,me=E,ge=function(t){return se(t),t.headers=t.headers||{},t.data=ne.call(t,t.data,t.headers,t.transformRequest),t.headers=te.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),te.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||oe.adapter)(t).then((function(e){return se(t),e.data=ne.call(t,e.data,e.headers,t.transformResponse),e}),(function(n){return re(n)||(se(t),n&&n.response&&(n.response.data=ne.call(t,n.response.data,n.response.headers,t.transformResponse))),e.reject(n)}))},be=ce,ye=pe,ve=ye.validators;function we(e){this.defaults=e,this.interceptors={request:new me,response:new me}}we.prototype.request=function(t,n){if("string"==typeof t?(n=n||{}).url=t:n=t||{},!n.url)throw new Error("Provided config url is not valid");(n=be(this.defaults,n)).method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;void 0!==r&&ye.assertOptions(r,{silentJSONParsing:ve.transitional(ve.boolean),forcedJSONParsing:ve.transitional(ve.boolean),clarifyTimeoutError:ve.transitional(ve.boolean)},!1);var o=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(n)||(i=i&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var s,a=[];if(this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)})),!i){var c=[ge,void 0];for(Array.prototype.unshift.apply(c,o),c=c.concat(a),s=e.resolve(n);c.length;)s=s.then(c.shift(),c.shift());return s}for(var u=n;o.length;){var l=o.shift(),d=o.shift();try{u=l(u)}catch(e){d(e);break}}try{s=ge(u)}catch(t){return e.reject(t)}for(;a.length;)s=s.then(a.shift(),a.shift());return s},we.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=be(this.defaults,e),fe(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},he.forEach(["delete","get","head","options"],(function(e){we.prototype[e]=function(t,n){return this.request(be(n||{},{method:e,url:t,data:(n||{}).data}))}})),he.forEach(["post","put","patch"],(function(e){we.prototype[e]=function(t,n,r){return this.request(be(r||{},{method:e,url:t,data:n}))}}));var xe=we,Se=V;function Ee(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new e((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){var t,n=r._listeners.length;for(t=0;t<n;t++)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(t){var n,o=new e((function(e){r.subscribe(e),n=e})).then(t);return o.cancel=function(){r.unsubscribe(n)},o},t((function(e){r.reason||(r.reason=new Se(e),n(r.reason))}))}Ee.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Ee.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},Ee.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},Ee.source=function(){var e;return{token:new Ee((function(t){e=t})),cancel:e}};var Te=Ee,Ce=b,_e=b,Ie=a,ke=xe,Re=ce,Ne=function e(t){var n=new ke(t),r=Ie(ke.prototype.request,n);return _e.extend(r,ke.prototype,n),_e.extend(r,n),r.create=function(n){return e(Re(t,n))},r}(J);Ne.Axios=ke,Ne.Cancel=V,Ne.CancelToken=Te,Ne.isCancel=ee,Ne.VERSION=ue,Ne.all=function(t){return e.all(t)},Ne.spread=function(e){return function(t){return e.apply(null,t)}},Ne.isAxiosError=function(e){return Ce.isObject(e)&&!0===e.isAxiosError},s.exports=Ne,s.exports.default=Ne;var Oe=s.exports;class Ae{isEmpty(){return!this.isPresent()}static of(e){if(null!=e)return new De(e);throw new TypeError("The passed value was null or undefined.")}static ofNonNull(e){return Ae.of(e)}static ofNullable(e){return null!=e?new De(e):new Le}static empty(){return new Le}static from(e){switch(e.kind){case"present":return Ae.of(e.value);case"empty":return Ae.empty();default:throw new TypeError("The passed value was not an Option type.")}}}class De extends Ae{constructor(e){super(),this.payload=e}isPresent(){return!0}get(){return this.payload}ifPresent(e){e(this.payload)}ifPresentOrElse(e,t){e(this.payload)}filter(e){return e(this.payload)?this:Ae.empty()}map(e){const t=e(this.payload);return Ae.ofNullable(t)}flatMap(e){return e(this.payload)}or(e){return this}orElse(e){return this.payload}orElseGet(e){return this.payload}orElseThrow(e){return this.payload}orNull(){return this.payload}orUndefined(){return this.payload}toOption(){return{kind:"present",value:this.payload}}matches(e){return e.present(this.payload)}toJSON(e){return this.payload}}class Le extends Ae{isPresent(){return!1}constructor(){super()}get(){throw new TypeError("The optional is not present.")}ifPresent(e){}ifPresentOrElse(e,t){t()}filter(e){return this}map(e){return Ae.empty()}flatMap(e){return Ae.empty()}or(e){return e()}orElse(e){return e}orElseGet(e){return this.orElse(e())}orElseThrow(e){throw e()}orNull(){return null}orUndefined(){}toOption(){return{kind:"empty"}}matches(e){return e.empty()}toJSON(e){return null}}let Pe;function Ve(e){Pe=e}class Me{constructor(){const e=Pe;this._report={action:Ae.empty(),applicationId:Ae.ofNullable(void 0!==e?e.appId:null),timestamp:Date.now(),fps:Ae.empty(),framesTransformed:Ae.empty(),guid:Ae.empty(),highestFrameTransformCpu:Ae.empty(),message:Ae.empty(),source:Ae.ofNullable(void 0!==e?e.sourceType:null),transformedFps:Ae.empty(),transformerType:Ae.empty(),variation:Ae.empty(),videoHeight:Ae.empty(),videoWidth:Ae.empty(),version:"1.1.1",error:Ae.empty()}}action(e){return this._report.action=Ae.ofNullable(e),this}framesTransformed(e){return this._report.framesTransformed=Ae.ofNullable(e),this}fps(e){return this._report.fps=Ae.ofNullable(e),this}guid(e){return this._report.guid=Ae.ofNullable(e),this}message(e){return this._report.message=Ae.ofNullable(e),this}transformedFps(e){return this._report.transformedFps=Ae.ofNullable(e),this}transformerType(e){return this._report.transformerType=Ae.ofNullable(e),this}variation(e){return this._report.variation=Ae.ofNullable(e),this}videoHeight(e){return this._report.videoHeight=Ae.ofNullable(e),this}videoWidth(e){return this._report.videoWidth=Ae.ofNullable(e),this}error(e){return this._report.error=Ae.ofNullable(e),this}build(){return this._report}}class Fe{static report(t){return new e(((e,n)=>{null!==t.applicationId&&null!==t.source?Oe.create().post("https://hlg.tokbox.com/prod/logging/vcp_webrtc",(e=>JSON.stringify(e,((e,t)=>{if(null!==t)return t})))(t),{timeout:1e4,timeoutErrorMessage:"Request timeout",headers:{"Content-Type":"application/json"}}).then((t=>{console.log(t),e("success")})).catch((e=>{console.log(e),n(e)})):e("success")}))}}var We,Ze=new Uint8Array(16);function Be(){if(!We&&!(We="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return We(Ze)}var Ge=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ue(e){return"string"==typeof e&&Ge.test(e)}for(var $e=[],Xe=0;Xe<256;++Xe)$e.push((Xe+256).toString(16).substr(1));function je(e,t,n){var r=(e=e||{}).random||(e.rng||Be)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=($e[e[t+0]]+$e[e[t+1]]+$e[e[t+2]]+$e[e[t+3]]+"-"+$e[e[t+4]]+$e[e[t+5]]+"-"+$e[e[t+6]]+$e[e[t+7]]+"-"+$e[e[t+8]]+$e[e[t+9]]+"-"+$e[e[t+10]]+$e[e[t+11]]+$e[e[t+12]]+$e[e[t+13]]+$e[e[t+14]]+$e[e[t+15]]).toLowerCase();if(!Ue(n))throw TypeError("Stringified UUID is invalid");return n}(r)}const ze=new WeakMap,He=new WeakMap,Ye=new WeakMap,Ke=Symbol("anyProducer"),Je=e.resolve(),qe=Symbol("listenerAdded"),Qe=Symbol("listenerRemoved");let et=!1;function tt(e){if("string"!=typeof e&&"symbol"!=typeof e)throw new TypeError("eventName must be a string or a symbol")}function nt(e){if("function"!=typeof e)throw new TypeError("listener must be a function")}function rt(e,t){const n=He.get(e);return n.has(t)||n.set(t,new Set),n.get(t)}function ot(e,t){const n="string"==typeof t||"symbol"==typeof t?t:Ke,r=Ye.get(e);return r.has(n)||r.set(n,new Set),r.get(n)}function it(t,n){n=Array.isArray(n)?n:[n];let r=!1,o=()=>{},i=[];const s={enqueue(e){i.push(e),o()},finish(){r=!0,o()}};for(const e of n)ot(t,e).add(s);return{async next(){return i?0===i.length?r?(i=void 0,this.next()):(await new e((e=>{o=e})),this.next()):{done:!1,value:await i.shift()}:{done:!0}},async return(e){i=void 0;for(const e of n)ot(t,e).delete(s);return o(),arguments.length>0?{done:!0,value:await e}:{done:!0}},[Symbol.asyncIterator](){return this}}}function st(e){if(void 0===e)return ut;if(!Array.isArray(e))throw new TypeError("`methodNames` must be an array of strings");for(const t of e)if(!ut.includes(t)){if("string"!=typeof t)throw new TypeError("`methodNames` element must be a string");throw new Error(`${t} is not Emittery method`)}return e}const at=e=>e===qe||e===Qe;class ct{static mixin(e,t){return t=st(t),n=>{if("function"!=typeof n)throw new TypeError("`target` must be function");for(const e of t)if(void 0!==n.prototype[e])throw new Error(`The property \`${e}\` already exists on \`target\``);Object.defineProperty(n.prototype,e,{enumerable:!1,get:function(){return Object.defineProperty(this,e,{enumerable:!1,value:new ct}),this[e]}});const r=t=>function(...n){return this[e][t](...n)};for(const e of t)Object.defineProperty(n.prototype,e,{enumerable:!1,value:r(e)});return n}}static get isDebugEnabled(){if("object"!=typeof r)return et;const{env:e}=r||{env:{}};return"emittery"===e.DEBUG||"*"===e.DEBUG||et}static set isDebugEnabled(e){et=e}constructor(e={}){ze.set(this,new Set),He.set(this,new Map),Ye.set(this,new Map),this.debug=e.debug||{},void 0===this.debug.enabled&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(e,t,n,r)=>{r=JSON.stringify(r),"symbol"==typeof n&&(n=n.toString());const o=new Date,i=`${o.getHours()}:${o.getMinutes()}:${o.getSeconds()}.${o.getMilliseconds()}`;console.log(`[${i}][emittery:${e}][${t}] Event Name: ${n}\n\tdata: ${r}`)})}logIfDebugEnabled(e,t,n){(ct.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,n)}on(e,t){nt(t),e=Array.isArray(e)?e:[e];for(const n of e)tt(n),rt(this,n).add(t),this.logIfDebugEnabled("subscribe",n,void 0),at(n)||this.emit(qe,{eventName:n,listener:t});return this.off.bind(this,e,t)}off(e,t){nt(t),e=Array.isArray(e)?e:[e];for(const n of e)tt(n),rt(this,n).delete(t),this.logIfDebugEnabled("unsubscribe",n,void 0),at(n)||this.emit(Qe,{eventName:n,listener:t})}once(t){return new e((e=>{const n=this.on(t,(t=>{n(),e(t)}))}))}events(e){e=Array.isArray(e)?e:[e];for(const t of e)tt(t);return it(this,e)}async emit(t,n){tt(t),this.logIfDebugEnabled("emit",t,n),function(t,n,r){const o=Ye.get(t);if(o.has(n))for(const e of o.get(n))e.enqueue(r);if(o.has(Ke)){const t=e.all([n,r]);for(const e of o.get(Ke))e.enqueue(t)}}(this,t,n);const r=rt(this,t),o=ze.get(this),i=[...r],s=at(t)?[]:[...o];await Je,await e.all([...i.map((async e=>{if(r.has(e))return e(n)})),...s.map((async e=>{if(o.has(e))return e(t,n)}))])}async emitSerial(e,t){tt(e),this.logIfDebugEnabled("emitSerial",e,t);const n=rt(this,e),r=ze.get(this),o=[...n],i=[...r];await Je;for(const e of o)n.has(e)&&await e(t);for(const n of i)r.has(n)&&await n(e,t)}onAny(e){return nt(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),ze.get(this).add(e),this.emit(qe,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return it(this)}offAny(e){nt(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(Qe,{listener:e}),ze.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(const t of e)if(this.logIfDebugEnabled("clear",t,void 0),"string"==typeof t||"symbol"==typeof t){rt(this,t).clear();const e=ot(this,t);for(const t of e)t.finish();e.clear()}else{ze.get(this).clear();for(const e of He.get(this).values())e.clear();for(const e of Ye.get(this).values()){for(const t of e)t.finish();e.clear()}}}listenerCount(e){e=Array.isArray(e)?e:[e];let t=0;for(const n of e)if("string"!=typeof n){void 0!==n&&tt(n),t+=ze.get(this).size;for(const e of He.get(this).values())t+=e.size;for(const e of Ye.get(this).values())t+=e.size}else t+=ze.get(this).size+rt(this,n).size+ot(this,n).size+ot(this).size;return t}bindMethods(e,t){if("object"!=typeof e||null===e)throw new TypeError("`target` must be an object");t=st(t);for(const n of t){if(void 0!==e[n])throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(e,n,{enumerable:!1,value:this[n].bind(this)})}}}const ut=Object.getOwnPropertyNames(ct.prototype).filter((e=>"constructor"!==e));Object.defineProperty(ct,"listenerAdded",{value:qe,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(ct,"listenerRemoved",{value:Qe,writable:!1,enumerable:!0,configurable:!1});var lt,dt=ct;function pt(e){return function(e){if("object"==typeof(t=e)&&null!==t&&"message"in t&&"string"==typeof t.message)return e;var t;try{return new Error(JSON.stringify(e))}catch{return new Error(String(e))}}(e).message}(lt||(lt={})).FPS_DROP="fps_drop";class ht extends dt{constructor(e,t){super(),this.index_=t,this.uuid_=je(),this.framesTransformed_=0,this.transformer_=e,this.shouldStop_=!1,this.isFlashed_=!1,this.framesFromSource_=0,this.fps_=0,this.mediaTransformerQosReportStartTimestamp_=0,this.videoHeight_=0,this.videoWidth_=0,this.trackExpectedRate_=-1,this.transformerType_="Custom","getTransformerType"in e&&(this.transformerType_=e.getTransformerType());const n=(new Me).action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Create").build();Fe.report(n)}setTrackExpectedRate(e){this.trackExpectedRate_=e}async start(e){if(this.transformer_&&"function"==typeof this.transformer_.start)try{await this.transformer_.start(e)}catch(e){const t=(new Me).action("MediaTransformer").guid(this.uuid_).message(i.errors.transformer_start).transformerType(this.transformerType_).variation("Error").error(pt(e)).build();Fe.report(t);const n={eventMetaData:{transformerIndex:this.index_},error:e,function:"start"};this.emit("error",n)}}async transform(e,t){var n,r,o,s;if(0===this.mediaTransformerQosReportStartTimestamp_&&(this.mediaTransformerQosReportStartTimestamp_=Date.now()),this.videoHeight_=null!=(n=null==e?void 0:e.displayHeight)?n:0,this.videoWidth_=null!=(r=null==e?void 0:e.displayWidth)?r:0,++this.framesFromSource_,this.transformer_)if(this.shouldStop_)e.close(),this.flush(t),t.terminate();else try{await(null==(s=(o=this.transformer_).transform)?void 0:s.call(o,e,t)),++this.framesTransformed_,500===this.framesTransformed_&&this.mediaTransformerQosReport()}catch(e){const t=(new Me).action("MediaTransformer").guid(this.uuid_).message(i.errors.transformer_transform).transformerType(this.transformerType_).variation("Error").error(pt(e)).build();Fe.report(t);const n={eventMetaData:{transformerIndex:this.index_},error:e,function:"transform"};this.emit("error",n)}}async flush(e){if(this.transformer_&&"function"==typeof this.transformer_.flush&&!this.isFlashed_){this.isFlashed_=!0;try{await this.transformer_.flush(e)}catch(e){const t=(new Me).action("MediaTransformer").guid(this.uuid_).message(i.errors.transformer_flush).transformerType(this.transformerType_).variation("Error").error(pt(e)).build();Fe.report(t);const n={eventMetaData:{transformerIndex:this.index_},error:e,function:"flush"};this.emit("error",n)}}this.mediaTransformerQosReport();const t=(new Me).action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Delete").build();Fe.report(t)}stop(){console.log("[Pipeline] Stop stream."),this.shouldStop_=!0}mediaTransformerQosReport(){let e=(Date.now()-this.mediaTransformerQosReportStartTimestamp_)/1e3,t=this.framesFromSource_/e,n=this.framesTransformed_/e;if(-1!=this.trackExpectedRate_&&.8*this.trackExpectedRate_>t){const e={eventMetaData:{transformerIndex:this.index_},warningType:lt.FPS_DROP,dropInfo:{requested:this.trackExpectedRate_,current:t}};this.emit("warn",e)}const r=(new Me).action("MediaTransformer").fps(t).transformedFps(n).framesTransformed(this.framesTransformed_).guid(this.uuid_).transformerType(this.transformerType_).videoHeight(this.videoHeight_).videoWidth(this.videoWidth_).variation("QoS").build();Fe.report(r),this.mediaTransformerQosReportStartTimestamp_=0,this.framesFromSource_=0,this.framesTransformed_=0}}class ft extends dt{constructor(e){super(),this.transformers_=[],this.trackExpectedRate_=-1;for(let t=0;t<e.length;t++){let n=new ht(e[t],t);n.on("error",(e=>{this.emit("error",e)})),n.on("warn",(e=>{this.emit("warn",e)})),this.transformers_.push(n)}}setTrackExpectedRate(e){this.trackExpectedRate_=e;for(let e of this.transformers_)e.setTrackExpectedRate(this.trackExpectedRate_)}async start(e,t){if(this.transformers_&&0!==this.transformers_.length){try{let n=e;for(let t of this.transformers_)e=e.pipeThrough(new TransformStream(t));e.pipeTo(t).then((async()=>{console.log("[Pipeline] Setup."),await t.abort(),await n.cancel()})).catch((async r=>{e.cancel().then((()=>{console.log("[Pipeline] Shutting down streams after abort.")})).catch((e=>{console.error("[Pipeline] Error from stream transform:",e)})),await t.abort(r),await n.cancel(r)}))}catch(e){return void this.destroy()}console.log("[Pipeline] Pipeline started.")}else console.log("[Pipeline] No transformers.")}async destroy(){console.log("[Pipeline] Destroying Pipeline.");for(let e of this.transformers_)e.stop()}}class mt extends dt{constructor(){super(),this.uuid_=je(),this.trackExpectedRate_=-1;const e=(new Me).action("MediaProcessor").guid(this.uuid_).variation("Create").build();Fe.report(e)}setTrackExpectedRate(e){this.trackExpectedRate_=e,this.pipeline_&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_)}transform(e,t){return this.readable_=e,this.writable_=t,this.transformInternal()}transformInternal(){return new e(((e,t)=>{if(!this.transformers_||0===this.transformers_.length){const e=(new Me).action("MediaProcessor").guid(this.uuid_).message(i.errors.transformer_none).variation("Error").build();Fe.report(e),t("[MediaProcessor] Need to set transformers.")}this.pipeline_&&this.pipeline_.destroy(),this.pipeline_=new ft(this.transformers_),this.pipeline_.on("warn",(e=>{this.emit("warn",e)})),this.pipeline_.on("error",(e=>{this.emit("error",e)})),-1!=this.trackExpectedRate_&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_),this.pipeline_.start(this.readable_,this.writable_).then((()=>{e()})).catch((e=>{t(e)}))}))}setTransformers(t){const n=(new Me).action("MediaProcessor").guid(this.uuid_).message(i.updates.transformer_new).variation("Update").build();return Fe.report(n),this.transformers_=t,this.readable_&&this.writable_?this.transformInternal():e.resolve()}destroy(){return new e((e=>{this.pipeline_&&this.pipeline_.destroy();const t=(new Me).action("MediaProcessor").guid(this.uuid_).variation("Delete").build();Fe.report(t),e()}))}}class gt{constructor(){this.processor_=null,this.generator_=null}init(t){return new e(((e,n)=>{try{this.processor_=new MediaStreamTrackProcessor(t)}catch(e){console.log(`[InsertableStreamHelper] MediaStreamTrackProcessor failed: ${e}`),n(e)}try{"audio"===t.kind?this.generator_=new MediaStreamTrackGenerator({kind:"audio"}):"video"===t.kind?this.generator_=new MediaStreamTrackGenerator({kind:"video"}):n("kind not supported")}catch(e){console.log(`[InsertableStreamHelper] MediaStreamTrackGenerator failed: ${e}`),n(e)}e()}))}getReadable(){return this.processor_.readable}getWriteable(){return this.generator_.writable}getProccesorTrack(){return this.generator_}}class bt{constructor(e){this.insertableStreamHelper_=new gt,this.mediaProcessor_=e}setTrack(t){return new e(((e,n)=>{this.insertableStreamHelper_.init(t).then((()=>{this.mediaProcessor_.transform(this.insertableStreamHelper_.getReadable(),this.insertableStreamHelper_.getWriteable()).then((()=>{e(this.insertableStreamHelper_.getProccesorTrack())})).catch((e=>{n(e)}))})).catch((e=>{n(e)}))}))}destroy(){return new e(((e,t)=>{this.mediaProcessor_?this.mediaProcessor_.destroy().then((()=>{e()})).catch((e=>{t(e)})):t("no processor")}))}}}.call(this,n(0),n(43))},function(e,t,n){"use strict";const r={backgroundBlur:n(687)},o=e=>!!r[e],i=e=>o(e)?r[e]:null,s={isSupported:o,getConfigurator:i,isValidConfig:e=>{const t=e.type;return!!o(t)&&i(t).isValidConfig(e)}};e.exports=s},function(e,t,n){"use strict";var r=n(3)(n(20));const o=n(308).BlurRadius,i=n(688),s=o.High,a=e=>"low"===e||"high"===e,c={isValidConfig:e=>{if("backgroundBlur"!==(null==e?void 0:e.type))return!1;const t=e.blurStrength;return!t||a(t)},getConfig:function(e){void 0===e&&(e={});const t=(0,r.default)({},i.getConfig(),{transformerType:"BackgroundBlur",radius:s}),n=e.blurStrength;return a(n)&&(t.radius=(e=>"low"===e?o.Low:o.High)(n)),t}};e.exports=c},function(e,t,n){"use strict";const r=n(34)().onlyLocal(),o={getConfig:function(e){void 0===e&&(e={});const t=e.staticConfig,n=((void 0===t?r:t).apiUrl.includes("anvil.opentok.com")?"https://static.opentok.com":"https://www.dev.tokbox.com")+"/v1.3.0/ml-transformers";return{wasmAssetUriPath:`${n}/`,tfliteAssetUriPath:`${n}/models/`}}};e.exports=o},function(e,t,n){"use strict";e.exports=e=>null===e||!1===e},function(e,t,n){"use strict";e.exports=e=>{var t;e&&(null==(t=e.videoSource)?void 0:t.canvas)&&(!e||!("videoContentHint"in e))&&(e.videoContentHint="detail")}},function(e,t,n){"use strict";const r=n(149);e.exports=e=>{var t;e||(e={});const n=!!r(null==(t=e)?void 0:t.videoSource);e.capableSimulcastScreenshare=n&&(e=>!!(null==e?void 0:e.scalableScreenshare))(e)}},function(e,t,n){var r=n(693),o=n(99),i=n(35);e.exports=function(e,t){return r(e,i(t,3),o)}},function(e,t){e.exports=function(e,t,n){var r;return n(e,(function(e,n,o){if(t(e,n,o))return r=n,!1})),r}},function(e,t,n){"use strict";(function(t){const r=n(51),o=n(73);e.exports=e=>{let n,i,s=e.RTCPeerConnection,a=e.env,c=e.stream,u=e.codecFlags;if(a.isLegacyEdge)return!0;const l=()=>{try{n.close()}catch(e){}try{i.close()}catch(e){}n=null,i=null};try{const e={iceServers:[]};o()&&(e.sdpSemantics="plan-b"),n=new s(e),i=new s(e),n.addStream(c)}catch(e){return l(),t.resolve(!1)}return n.createOffer().then((e=>{const t={type:e.type,sdp:e.sdp};return Object.keys(u).forEach((e=>{u[e]||(t.sdp=r.removeVideoCodec(t.sdp,e))})),i.setRemoteDescription(t)})).then((()=>!0)).catch((()=>!1)).then((e=>(l(),e)))}}).call(this,n(0))},function(e,t,n){"use strict";const r=n(4).INVALID_PARAMETER;e.exports=e=>{let t=e.otError;return e=>{if(!e)return;const n=(e,n)=>{if(!e)throw t(r,new Error(`iceConfig invalid: ${n}`))};"includeServers"in e&&n(-1!==["all","custom"].indexOf(e.includeServers),".includeServers must be all or custom"),"transportPolicy"in e&&n(-1!==["all","relay"].indexOf(e.transportPolicy),".transportPolicy must be all or relay"),n(Array.isArray(e.customServers),".customServers must be an array"),e.customServers.forEach((e=>{n(e.urls||!("url"in e),"ice servers need .urls, not .url"),n("string"==typeof e.urls||Array.isArray(e.urls),"ice server .urls must be a string or an array"),n(!e.username||"string"==typeof e.username,"ice server .username must be a string if present"),n(!e.credential||"string"==typeof e.credential,"ice server .credential must be a string if present")}))}}},function(e,t,n){"use strict";const r=n(8);e.exports=function(e){switch(e){case r.AUTHENTICATION_ERROR:case r.INVALID_SESSION_ID:case r.TERMS_OF_SERVICE_FAILURE:case r.UNEXPECTED_SERVER_RESPONSE:return e;case r.ANVIL_EMPTY_RESPONSE_BODY:case r.ANVIL_CONNECT_FAILED:return r.CONNECT_FAILED;case r.ANVIL_BADLY_FORMED_RESPONSE:case r.ANVIL_INVALID_HTTP_STATUS:case r.ANVIL_XDOMAIN_OR_PARSING_ERROR:case r.ANVIL_UNKNOWN_HTTP_ERROR:case r.ANVIL_UNEXPECTED_ERROR_CODE:default:return r.UNEXPECTED_SERVER_RESPONSE}}},function(e,t,n){"use strict";const r=n(8),o=n(4);e.exports={NOT_CONNECTED:{code:o.NOT_CONNECTED,message:"Cannot use forceMute functionality. You are not connected to the session.",exceptionCode:r.NOT_CONNECTED},PERMISSION_DENIED:{code:o.PERMISSION_DENIED,message:"This token does not allow forceMute usage. The role must be at least `moderator` to enable this functionality",exceptionCode:r.UNABLE_TO_FORCE_MUTE},INVALID_PARAMETER:{code:o.INVALID_PARAMETER,message:"Invalid Parameter. Check that you have passed valid parameter values into the method call.",exceptionCode:r.INVALID_PARAMETER},NOT_FOUND:{code:o.NOT_FOUND,message:"The stream does not exist."},UNEXPECTED_SERVER_RESPONSE:{code:o.UNEXPECTED_SERVER_RESPONSE,message:"An unexpected error occurred.",exceptionCode:r.UNEXPECTED_SERVER_RESPONSE}}},function(e,t,n){"use strict";(function(e){var r=n(3);t.__esModule=!0,t.default=function(t){void 0===t&&(t={});const r=t.convertRumorError||n(311),d=t.Dispatcher||n(315),p=t.ExceptionCodes||n(8),h=t.hasIceRestartsCapability||n(312),f=t.hasRenegotiationCapability||n(715),m=t.logging||n(1)("RaptorSocket"),g=t.Message||n(316),b=t.OTHelpers||n(5),y=t.RumorSocket||(0,l.default)(),v=t.Signal||n(317),w=t.SignalError||n(720),x=function t(n,l,h,f,x,S,E){var T=this;let C,_,I,k,R,N,O,A;void 0===E&&(E=[]);const D=x||new d,L=b.statable(this,["disconnected","connecting","connected","error","disconnecting"],"disconnected"),P=function(e){e.action&&e.variation||m.debug("Expected action and variation"),S.logEvent((0,s.default)({sessionId:_,partnerId:C,p2p:N,messagingServer:O,connectionId:n},e))},V=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t[0];L(r?"error":"connected"),R(...t)},M=e=>{let t="clientDisconnected";!this.is("disconnecting")&&A&&(t="networkDisconnected"),e&&4001===e.code&&(t="networkTimedout"),L("disconnected"),D.onClose(t)},F=e=>{A=!0,m.error(e)},W=()=>{D.onReconnecting()},Z=()=>{P({action:"Reconnect",variation:"Success",retries:this._rumor.reconnectRetriesCount(),messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId}),D.onReconnected()},B=()=>{P({action:"Reconnect",variation:"Attempt",retries:this._rumor.reconnectRetriesCount(),messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId})},G=e=>{"connectionLimitExceeded"===e.message&&(e.code=p.CONNECTION_LIMIT_EXCEEDED),e.reason="ConnectToSession";const t=r(e);P({action:"Reconnect",variation:"Failure",failureReason:e.reason,failureCode:t.code,failureMessage:t.message,messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId})};Object.defineProperty(this,"socketId",{get(){return this._rumor.socketID}}),this.connect=function(r,o,i,s){if(!this.is("disconnected","error"))return void m.warn("Cannot connect the Raptor Socket as it is currently connected. You should disconnect first.");L("connecting"),C=o.partnerId,_=o.sessionId,N=o.p2pEnabled,O=o.messagingServer,I=r,R=s,k={apiKey:C,sessionId:_};const a=`/v2/partner/${C}/session/${_}`;this._rumor=new t.RumorSocket({messagingURL:h,notifyDisconnectAddress:f,connectionId:n,enableReconnection:o.reconnection}),this._rumor.on("close",M),this._rumor.on("error",F),this._rumor.on("reconnecting",W),this._rumor.on("reconnectAttempt",B),this._rumor.on("reconnectFailure",G),this._rumor.on("reconnected",Z),this._rumor.on("message",D.dispatch.bind(D));const u=e=>{V({reason:"WebSocketConnection",code:e.code,message:e.message})};this._rumor.once("error",u),this._rumor.once("open",(()=>{this._rumor.removeListener("error",u),m.debug(`connected. Subscribing to ${a} on ${h}`),this._rumor.subscribe([a]);const n=E;(t.hasIceRestartsCapability()||t.hasRenegotiationCapability())&&o.renegotiation&&n.push("renegotiation");const r=g.connections.create({apiKey:C,sessionId:_,connectionId:this._rumor.id,connectionEventsSuppressed:i.connectionEventsSuppressed,capabilities:n}),s=new e((e=>{const t=n=>{n.id===this._rumor.id&&(e(n),x.off("connection#created",t))};x.on("connection#created",t)}));this.publish(r,{"X-TB-TOKEN-AUTH":I},!0,((e,t)=>{if(e)return"connectionLimitExceeded"===e.message&&(e.code=p.CONNECTION_LIMIT_EXCEEDED),void V({reason:"ConnectToSession",code:e.code,message:e.message,socketId:this.socketId});const n=t&&t.data?JSON.parse(t.data):null;n&&(n.connection&&0!==n.connection.length||(n.connection=[],Array.isArray(n.stream)&&n.stream.forEach((e=>{let t=e.connection;return n.connection.push(t)}))));const r=(e,t)=>{e?V({reason:"GetSessionState",code:e.code,message:e.message,socketId:this.socketId}):V(void 0,t)};s.then((e=>{n.connection.some((t=>t.id===e.id))||n.connection.unshift(e);const t=(0,c.default)();D.registerCallback(t,r),D.emit("session#read",n,t)}))}))}))},this.disconnect=function(){this.is("disconnected")||(L("disconnecting"),this._rumor.disconnect())},this.publish=function(e,t,n,r){r=r||function(){};const o=(0,a.default)(r),i=(0,c.default)();if(m.debug(`Publish (ID:${i}) ${e}`),this._rumor.readyState!==y.OPEN||this._rumor.reconnecting&&!n){const e=new Error("Not connected.");return e.code=500,o(e),void m.error("cannot publish until the socket is connected.")}return D.registerCallback(i,o),this._rumor.publish([f],e,(0,s.default)({},t,{"Content-Type":"application/x-raptor+v2","TRANSACTION-ID":i,"X-TB-FROM-ADDRESS":this._rumor.id}),n,(function(e){e&&o(...arguments)})),i},this.send=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=()=>{}),T.publish((0,u.default)(e),t,n,r)},this.streamCreate=function(e,t,n,r,o,i,s,a){const c={apiKey:C,sessionId:_,streamId:t,name:e,audioFallbackEnabled:n,channels:r,minBitrate:o,maxBitrate:i,sourceStreamId:s},u=g.streams.create(c);this.publish(u,{},!0,((e,n)=>{a(e,t,n)}))},this.streamDestroy=function(e,t){this.publish(g.streams.destroy(C,_,e,t),{},!0)},this.streamChannelUpdate=function(e,t,n){this.publish(g.streamChannels.update(C,_,e,t,n),{},!0)},this.subscriberCreate=function(e,t,n,r,o){const i={apiKey:C,sessionId:_,streamId:e,subscriberId:t,connectionId:this._rumor.id,channelsToSubscribeTo:n,sourceStreamId:r};this.publish(g.subscribers.create(i),{},!0,o)},this.subscriberDestroy=function(e,t){this.publish(g.subscribers.destroy(C,_,e,t),{},!0)},this.subscriberUpdate=function(e,t,n){this.publish(g.subscribers.update(C,_,e,t,n),{},!0)},this.subscriberChannelUpdate=function(e,t,n,r){this.publish(g.subscriberChannels.update(C,_,e,t,n,r),{},!0)},this.forceDisconnect=function(e,t){this.publish(g.connections.destroy({apiKey:C,sessionId:_,connectionId:e}),{},!0,t)},this.forceUnpublish=function(e,t){this.publish(g.streams.destroy(C,_,e),{},!0,t)},this.forceMuteStream=function(e,t){const n={streamId:e,active:!0};this.publish(g.forceMute.update((0,o.default)({},k,n)),{},!0,t)},this.forceMuteAll=function(e,t,n){const r={excludedStreamIds:e,active:t};this.publish(g.forceMute.update((0,o.default)({},k,r)),{},!0,n)},this.signal=function(e,t,n){const r=new v(_,this._rumor.id,e||{});r.valid?this.publish(r.toRaptorMessage(),{},r.retryAfterReconnect,(e=>{let o,s,a;const c=[400,403,404,413,500];if(e){const t=parseInt(e.code,10);c.includes(t)?(s=t,a=e.message):(s=p.UNEXPECTED_SERVER_RESPONSE,a="Unexpected server response. Try this operation again later."),o=new w(s,a)}else{const e=r.data?typeof r.data:null;n("signal","send",{type:e})}t&&(0,i.default)(t)&&t(o,r.toHash())})):t&&(0,i.default)(t)&&t(new w(r.error.code,r.error.reason),r.toHash())},this.id=function(){return this._rumor&&this._rumor.id}};return x.hasIceRestartsCapability=h,x.hasRenegotiationCapability=f,x.RumorSocket=y,x};var o=r(n(20)),i=r(n(15)),s=r(n(7)),a=r(n(50)),c=r(n(19)),u=r(n(313)),l=r(n(699))}).call(this,n(0))},function(e,t,n){"use strict";var r=n(3);t.__esModule=!0,t.default=function(e){let t=(void 0===e?{}:e).WebSocket,n=void 0===t?u.default:t;const r=(0,i.default)(),l=(0,a.default)({EventEmitter:o.default,WebSocket:n,logging:s.default,allocateId:r});return(0,c.default)({EventEmitter:o.default,ReconnectableSocket:l,logging:s.default,allocateId:r})};var o=r(n(42)),i=r(n(700)),s=r(n(1)),a=r(n(701)),c=r(n(706)),u=r(n(711))},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){let e=0;return()=>(e+=1,e)}},function(e,t,n){"use strict";var r=n(3);t.__esModule=!0,t.default=void 0;var o=r(n(12)),i=r(n(13)),s=r(n(157)),a=r(n(46)),c=r(n(60)),u=r(n(18)),l=r(n(314)),d=n(76),p=r(n(702)),h=r(n(63)),f=r(n(703)),m=r(n(705));const g=e=>function(){e(...arguments)},b=e=>1e3===e||e>=3e3&&e<=4999,y=d.codes.CLOSE_TIMEOUT;t.default=e=>{var t,n;let r=e.EventEmitter,d=e.WebSocket,v=e.logging,w=e.allocateId,x=e.BUFFER_DRAIN_INTERVAL,S=void 0===x?100:x,E=e.BUFFER_DRAIN_MAX_RETRIES,T=void 0===E?10:E;return n=t=function(e){function t(n){var r;const a="string"==typeof n?{url:n}:n,c=a.url,d=a.connectTimeout,h=void 0===d?15e3:d,m=a.pingThreshold,b=void 0===m?3e3:m,y=a.pingWarningDelay,x=void 0===y?100:y,S=a.disconnectThreshold,E=void 0===S?5900:S,T=a.reconnectMaxDuration,C=void 0===T?6e4:T;if(!c)throw new Error("Must provide url");r=e.call(this)||this,(0,u.default)((0,s.default)(r),"_url",void 0),(0,u.default)((0,s.default)(r),"_id",w()),(0,u.default)((0,s.default)(r),"_logger",v(`ReconnectableSocket:${r._id}`)),(0,u.default)((0,s.default)(r),"_webSocket",void 0),(0,u.default)((0,s.default)(r),"_connectTimer",void 0),(0,u.default)((0,s.default)(r),"_pingTimer",void 0),(0,u.default)((0,s.default)(r),"_pingWarningTimer",void 0),(0,u.default)((0,s.default)(r),"_disconnectTimer",void 0),(0,u.default)((0,s.default)(r),"_queuedMessages",[]),(0,u.default)((0,s.default)(r),"_draining",!1),r.readyStateMachine=(0,f.default)({reconnectMaxDuration:C,CLOSED:t.CLOSED,CLOSING:t.CLOSING}),r._url=c,(0,l.default)({logger:r._logger,obj:(0,s.default)(r),eventNames:["error","open","message","needsPing","reconnecting","reconnectAttempt","reconnectFailure","reconnected","close"]}),r.readyStateMachine.observe("onEnterOpen",(e=>{let t=e.from;r._resetPingTimers(),r._resetDisconnectTimer(),r._connectTimer.clear(),"reconnecting"===t?(r._queuedMessages.forEach((e=>r.send(e,!0))),r._queuedMessages=[],r.emit("reconnected")):r.emit("open")})),r.readyStateMachine.observe("onEnterClosed",((e,t)=>{r.emit("close",t)})),r.readyStateMachine.observe("onEnterClosing",g(function(){var e=(0,i.default)(o.default.mark((function e(t,n){var i,s,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.from,s=n.code,a=n.reason,r._clearTimers(),e.next=5,r._clearSocket({drain:"open"===i,code:s,reason:a});case 5:"reconnecting"===i&&r.emit("reconnectFailure",{code:s,reason:a}),setTimeout((()=>{r.readyStateMachine.closed({code:s,reason:a})}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())),r.readyStateMachine.observe("onEnterReconnecting",(()=>{r.emit("reconnecting")})),r.readyStateMachine.observe("onDisconnect",g(function(){var e=(0,i.default)(o.default.mark((function e(t,n){var i,s,a,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.from,s=t.to,a=n.code,c=n.reason,"reconnecting"!==s){e.next=10;break}if(!r._draining){e.next=5;break}return e.abrupt("return");case 5:return r._clearTimers(),r.emit("reconnectAttempt"),e.next=9,r._clearSocket({drain:"open"===i,code:a,reason:c});case 9:r._createSocket();case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));const _=(e,t)=>new p.default({name:e,duration:t,logger:r._logger});return r._connectTimer=_("connect",h),r._pingTimer=_("ping",b),r._pingWarningTimer=_("pingWarning",x),r._disconnectTimer=_("disconnect",E),r._createSocket(),r}(0,c.default)(t,e),(0,a.default)(t,[{key:"url",get:function(){return"function"==typeof this._url?this._url():this._url}},{key:"reconnecting",get:function(){return"reconnecting"===this.readyStateMachine.state}},{key:"binaryType",get:function(){return this._webSocket.binaryType}},{key:"bufferedAmount",get:function(){return this._webSocket.bufferedAmount}},{key:"protocol",get:function(){return this._webSocket.protocol}},{key:"extensions",get:function(){return this._webSocket.extensions}},{key:"readyState",get:function(){return{reconnecting:t.OPEN,open:t.OPEN,closing:t.CLOSING,closed:t.CLOSED,connecting:t.CONNECTING}[this.readyStateMachine.state]}}]);var n=t.prototype;return n._createSocket=function(){const e=new d(this.url);e.binaryType="arraybuffer";const n=(0,h.default)(e);n.on("open",(()=>{this.readyStateMachine.open()})),n.on("close",(e=>{let t=e.code,n=e.reason;this.readyStateMachine.disconnect({code:t,reason:n})})),n.on("error",(e=>{this.emit("error",e)})),n.on("message",(e=>{this.readyState!==t.CLOSING&&this._resetDisconnectTimer(),this.emit("message",e)})),this._webSocket=e,this._webSocketEvents=n,this._connectTimer.reset((()=>{const e={code:y,reason:"Timeout while opening connection"},t=new Error(e.reason);t.code=y,this.emit("error",t),this.readyStateMachine.disconnect(e)}))},n._clearSocket=function(){var e=(0,i.default)(o.default.mark((function e(n){var r,i,s,a,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(r=void 0===n?{}:n).drain,s=void 0!==i&&i,a=r.code,c=r.reason,this._draining=!0,this._webSocketEvents&&this._webSocketEvents.removeAll(),this._webSocket.readyState===t.CLOSED){e.next=8;break}if(!s){e.next=7;break}return e.next=7,(0,m.default)(this._webSocket,{BUFFER_DRAIN_INTERVAL:S,BUFFER_DRAIN_MAX_RETRIES:T});case 7:try{!b(a)||void 0===a&&void 0===c?this._webSocket.close():this._webSocket.close(a,c)}catch(e){v.error("Could not close websocket",e)}case 8:this._draining=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.send=function(e,n){void 0===n&&(n=!0),this.readyState===t.OPEN&&this._resetPingTimers();const r=()=>{try{return this._webSocket.send(e),"sent"}catch(e){if(this._webSocket.readyState===d.OPEN)return this._logger.debug("webSocket.send threw exception even though it was open:",e),"dropped";throw e}};if("reconnecting"===this.readyStateMachine.state){if(this._webSocket.readyState===d.OPEN)try{r()}catch(e){}return n?(this._queuedMessages.push(e),"queued"):(this._logger.debug("Dropping message during reconnection since retryAfterReconnect is false:",e),"dropped")}return r()},n.close=function(e,n){if(this.readyState===t.CLOSING)throw new Error("Can not call close on a closing ReconnectableSocket");if(this.readyState===t.CLOSED)throw new Error("Can not call close on an already closed ReconnectableSocket");this.readyStateMachine.close({code:e,reason:n})},n._resetPingTimers=function(){this._pingWarningTimer.clear(),this._pingTimer.reset((()=>{this._pingWarningTimer.reset((()=>{this._logger.warn("Did not send message after needsPing event. Other side may disconnect.")})),this.emit("needsPing")}))},n._resetDisconnectTimer=function(){this._disconnectTimer.reset((()=>this.readyStateMachine.disconnect({code:y,reason:"No activity"})))},n._clearTimers=function(){[this._disconnectTimer,this._connectTimer,this._pingTimer,this._pingWarningTimer].forEach((e=>e.clear()))},t}(r),(0,u.default)(t,"CONNECTING",d.CONNECTING),(0,u.default)(t,"OPEN",d.OPEN),(0,u.default)(t,"CLOSING",d.CLOSING),(0,u.default)(t,"CLOSED",d.CLOSED),n}},function(e,t,n){"use strict";var r=n(3);t.__esModule=!0,t.default=void 0;var o=r(n(18));let i=function(){function e(e){let t=e.name,n=e.logger,r=e.duration;(0,o.default)(this,"name",void 0),(0,o.default)(this,"logger",void 0),(0,o.default)(this,"duration",void 0),(0,o.default)(this,"currId",void 0),this.name=t,this.logger=n,this.duration=r}var t=e.prototype;return t.reset=function(e){this.clear();const t=setTimeout((()=>{void 0!==this.currId&&(this.logger.spam(`${this.name} timer with id ${this.currId} expired, entering callback`),this.currId=void 0,e())}),this.duration);this.currId=t,this.logger.spam(`Started ${this.name} timer with id ${this.currId}, expires in ${this.duration}ms`)},t.clear=function(){void 0!==this.currId&&(clearTimeout(this.currId),this.logger.spam(`Cleared ${this.name} timer with id ${this.currId}`),this.currId=void 0)},t.isRunning=function(){return void 0!==this.currId},e}();t.default=i},function(e,t,n){"use strict";var r=n(3);t.__esModule=!0,t.default=void 0;var o=r(n(305)),i=r(n(704)),s=n(76);const a=(0,r(n(1)).default)("ReconnectableSocketStateMachine"),c=s.codes.CLOSE_UNSUPPORTED,u=s.codes.CLOSE_UNEXPECTED_CONDITION;t.default=e=>{let t,n=e.reconnectMaxDuration,r=e.CLOSED,s=e.CLOSING;return new o.default({init:"connecting",methods:{onInvalidTransition(e,t,n){a.error("Invalid state transition",{transition:e,from:t,to:n})}},transitions:[{name:"open",from:["connecting","reconnecting"],to:"open"},{name:"close",from:["connecting","reconnecting","open"],to:"closing"},{name:"closed",from:"closing",to:"closed"},{name:"disconnect",from:["reconnecting","open","connecting"],to:function(e){let o=e.code;return"open"!==this.state&&t||(t=(0,i.default)(n)),n>0&&!t()&&-1===[c,u].indexOf(o)&&-1===[r,s].indexOf(this.readyState)?"reconnecting":"closing"}}]})}},function(e,t,n){"use strict";e.exports=e=>{let t=!1;return setTimeout((()=>{t=!0}),e),()=>t}},function(e,t,n){"use strict";var r=n(3);t.__esModule=!0,t.default=void 0;var o=r(n(12)),i=r(n(13)),s=r(n(106)),a=function(){var e=(0,i.default)(o.default.mark((function e(t,n){var r,i,a,c,u,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=(r=void 0===n?{}:n).BUFFER_DRAIN_INTERVAL,a=void 0===i?100:i,c=r.BUFFER_DRAIN_MAX_RETRIES,u=void 0===c?10:c,l=0;case 2:if(!(l<u)){e.next=10;break}if(0!==t.bufferedAmount){e.next=5;break}return e.abrupt("break",10);case 5:return e.next=7,(0,s.default)(a);case 7:l+=1,e.next=2;break;case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t.default=a},function(e,t,n){"use strict";var r=n(108),o=n(3);t.__esModule=!0,t.default=void 0;var i=o(n(157)),s=o(n(46)),a=o(n(60)),c=o(n(18)),u=o(n(19)),l=o(n(314)),d=o(n(707)),p=r(n(172)),h=o(n(710)),f=n(76);t.default=e=>{var t,n;let r=e.EventEmitter,o=e.ReconnectableSocket,m=e.logging,g=e.allocateId;return n=t=function(e){function t(t){var n;let r=t.messagingURL,s=t.notifyDisconnectAddress,a=t.connectionId,p=t.enableReconnection,b=t.pingThreshold,y=void 0===b?2e3:b,v=t.disconnectThreshold,w=void 0===v?(p?3:25)*y-100:v,x=t.reconnectMaxDuration,S=void 0===x?p?6e4:0:x;n=e.call(this)||this,(0,c.default)((0,i.default)(n),"url",void 0),(0,c.default)((0,i.default)(n),"id",void 0),(0,c.default)((0,i.default)(n),"_opened",!1),(0,c.default)((0,i.default)(n),"_socket",void 0),(0,c.default)((0,i.default)(n),"_reconnectAttempts",0),(0,c.default)((0,i.default)(n),"_socketID",(0,u.default)()),(0,c.default)((0,i.default)(n),"_receivedTransactionIDs",[]),(0,c.default)((0,i.default)(n),"_notifyDisconnectAddress",void 0),(0,c.default)((0,i.default)(n),"_enableReconnection",void 0),(0,c.default)((0,i.default)(n),"_pendingMessages",[]),(0,c.default)((0,i.default)(n),"_logger",m(`RumorSocket:${g()}`)),(0,l.default)({logger:n._logger,obj:(0,i.default)(n),eventNames:["open","message","error","reconnecting","reconnectAttempt","reconnectFailure","reconnected","close"]}),n.url=r,n.id=a,n._notifyDisconnectAddress=s,n._enableReconnection=p,n.on("error",(e=>{n._logger.error(e.message)}));try{n._socket=new o({url:()=>n._enableReconnection?[n.url,n.url.indexOf("?")>=0?"&":"?",`socketId=${n._socketID}`,n._socket&&n._socket.reconnecting?"&reconnect=true":"",`&attempt=${(0,u.default)()}`].join(""):n.url,pingThreshold:y,disconnectThreshold:w,reconnectMaxDuration:S})}catch(e){n._logger.error(e),n.emit("error",new h.default(f.codes.CLOSE_CONNECT_EXCEPTION))}const E=()=>{n._opened=!0,n._socket.send(d.default.Connect(n.id,s).serialize()),n.emit("open",n.id)};return n._socket.once("open",E),n._socket.on("message",(e=>n._receiveMessage(e))),n._socket.once("close",(e=>{n._logger.debug(`ReconnectableSocket closed (code: ${e.code})`),n._clearPendingMessages(),-1===[f.codes.CLOSE_NORMAL,f.codes.CLOSE_GOING_AWAY,f.codes.CLOSE_TIMEOUT].indexOf(e.code)&&n.emit("error",new h.default(e.code,e.reason||e.message)),n.emit("close",e)})),n._socket.on("error",(e=>{let t=e.code;return n.emit("error",new h.default(t))})),n._socket.on("needsPing",(()=>{n._socket.send(d.default.Ping().serialize())})),n._socket.on("reconnecting",(()=>{n._opened&&(n._clearPendingMessagesWhichShouldntRetry(),n.emit("reconnecting"),n._reconnectAttempts=0)})),n._socket.on("reconnectAttempt",(()=>{n._opened&&(n._reconnectAttempts+=1,n._socket.send(d.default.Disconnect("1").serialize(),!1),n.emit("reconnectAttempt"))})),n._socket.on("reconnected",(()=>{n._opened?(n._pendingMessages.forEach((e=>{n._socket.send(e.rumorMessage.serialize())})),n.emit("reconnected")):E()})),n._socket.on("reconnectFailure",(()=>{n._opened&&(n._logger.debug(`Reconnecting failed as connectivity was not restored within ${S}ms`),n.emit("reconnectFailure",new h.default))})),n}(0,a.default)(t,e),(0,s.default)(t,[{key:"readyState",get:function(){return this._socket?this._socket.readyState:o.CONNECTING}},{key:"reconnecting",get:function(){return this._opened&&this._socket&&this._socket.reconnecting}}]);var n=t.prototype;return n._clearPendingMessagesWhichShouldntRetry=function(){const e=this._pendingMessages.filter((e=>!e.retryAfterReconnect));this._pendingMessages=this._pendingMessages.filter((e=>e.retryAfterReconnect)),e.forEach((e=>{const t=new Error("Not connected.");t.code=500,e.completion(t)}))},n._clearPendingMessages=function(){this._pendingMessages.forEach((e=>{const t=new Error("Not connected.");t.code=500,e.completion(t)})),this._pendingMessages=[]},n._sendAck=function(e){this._socket.send(d.default.Status([e.fromAddress],{"TRANSACTION-ID":e.headers["TRANSACTION-ID"],"X-TB-FROM-ADDRESS":this.id}).serialize())},n._receiveMessage=function(e){const t=d.default.deserialize(e.data);if(t.type!==p.PONG){if(this._logger.debug("Received:",t),t.transactionId&&(this._pendingMessages=this._pendingMessages.filter((e=>(e.rumorMessage.transactionId===t.transactionId&&(this._logger.debug("Marking",t.transactionId," as received"),e.completion(void 0,t)),e.rumorMessage.transactionId!==t.transactionId)))),t.transactionId&&t.type!==p.STATUS){if(this._sendAck(t),this._receivedTransactionIDs.indexOf(t.transactionId)>=0)return;this._receivedTransactionIDs.push(t.transactionId)}this.emit("message",t)}},n.publish=function(e,t,n,r,o){void 0===o&&(o=()=>{});const i=d.default.Publish(e,t,n);if("dropped"===this._socket.send(i.serialize(),!1)&&!r){const e=new Error("Not connected.");return e.code=500,void o(e)}this._pendingMessages.push({rumorMessage:i,retryAfterReconnect:r,completion:o})},n.subscribe=function(e){this._socket.send(d.default.Subscribe(e).serialize())},n.unsubscribe=function(e){this._socket.send(d.default.Unsubscribe(e).serialize())},n.disconnect=function(){if(this.readyState===t.OPEN&&this._socket.send(d.default.Disconnect().serialize()),this._socket.readyState!==o.CLOSED&&this._socket.readyState!==o.CLOSING){const e=f.codes.CLOSE_NORMAL;this._socket.close(e,f.messages[e])}},n.status=function(e,t){this._socket.send(d.default.Status(e,{"TRANSACTION-ID":t,"X-TB-FROM-ADDRESS":this.id}).serialize())},n.reconnectRetriesCount=function(){return this._reconnectAttempts},n.messageQueueSize=function(){return this._pendingMessages.length},(0,s.default)(t,[{key:"socketID",get:function(){return this._socketID}}]),t}(r),(0,c.default)(t,"CONNECTING",o.CONNECTING),(0,c.default)(t,"OPEN",o.OPEN),(0,c.default)(t,"CLOSING",o.CLOSING),(0,c.default)(t,"CLOSED",o.CLOSED),n}},function(e,t,n){"use strict";var r=n(108),o=n(3);t.__esModule=!0,t.default=void 0;var i=o(n(18)),s=o(n(19)),a=n(708),c=r(n(172));let u=function(){function e(e,t,n,r){(0,i.default)(this,"type",void 0),(0,i.default)(this,"toAddress",void 0),(0,i.default)(this,"headers",void 0),(0,i.default)(this,"data",void 0),this.type=e,this.toAddress=t,this.headers=n,this.data=r,this.fromAddress=this.headers["X-TB-FROM-ADDRESS"],this.transactionId=this.headers["TRANSACTION-ID"],this.status=this.headers.STATUS,this.isError=this.status&&"2"!==this.status[0]}return e.prototype.serialize=function(){let e,t,n,r,o=8,i=7;const s=[],c=[],u=[];for(i++,n=0;n<this.toAddress.length;n++)s.push(new a.TextEncoder("utf-8").encode(this.toAddress[n])),i+=2,i+=s[n].length;i++,n=0;for(const e in this.headers)this.headers.hasOwnProperty(e)&&(c.push(new a.TextEncoder("utf-8").encode(e)),u.push(new a.TextEncoder("utf-8").encode(this.headers[e])),i+=4,i+=c[n].length,i+=u[n].length,n++);t=new a.TextEncoder("utf-8").encode(this.data),i+=t.length;const l=new ArrayBuffer(i),d=new Uint8Array(l,0,i);for(i-=4,d[0]=(4278190080&i)>>>24,d[1]=(16711680&i)>>>16,d[2]=(65280&i)>>>8,d[3]=(255&i)>>>0,d[4]=0,d[5]=0,d[6]=this.type,d[7]=this.toAddress.length,n=0;n<s.length;n++)for(e=s[n],d[o++]=e.length>>8&255,d[o++]=e.length>>0&255,r=0;r<e.length;r++)d[o++]=e[r];for(d[o++]=c.length,n=0;n<c.length;n++){for(e=c[n],d[o++]=e.length>>8&255,d[o++]=e.length>>0&255,r=0;r<e.length;r++)d[o++]=e[r];for(e=u[n],d[o++]=e.length>>8&255,d[o++]=e.length>>0&255,r=0;r<e.length;r++)d[o++]=e[r]}for(n=0;n<t.length;n++)d[o++]=t[n];return l},e.deserialize=function(t){let n,r,o,i,s,c,u,l;(void 0!==typeof window?window:__webpack_require__.g).Buffer&&(void 0!==typeof window?window:__webpack_require__.g).Buffer.isBuffer(t)&&(t=(e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;++t)n[t]=e[t];return t})(t));let d=8;const p=new Uint8Array(t);n=p[6];const h=[];for(l=0;l<p[7];l++)u=p[d++]<<8,u+=p[d++],r=new Uint8Array(t,d,u),h[l]=new a.TextDecoder("utf-8").decode(r),d+=u;for(o=p[d++],i={},l=0;l<o;l++)u=p[d++]<<8,u+=p[d++],r=new Uint8Array(t,d,u),s=new a.TextDecoder("utf-8").decode(r),d+=u,u=p[d++]<<8,u+=p[d++],r=new Uint8Array(t,d,u),c=new a.TextDecoder("utf-8").decode(r),i[s]=c,d+=u;const f=new Uint8Array(t,d);return new e(n,h,i,new a.TextDecoder("utf-8").decode(f))},e.Connect=function(t,n){const r={uniqueId:t,"TRANSACTION-ID":(0,s.default)(),notifyDisconnectAddress:n};return new e(c.CONNECT,[],r,"")},e.Disconnect=function(t){return new e(c.DISCONNECT,[],{reconnect:t},"")},e.Subscribe=function(t){return new e(c.SUBSCRIBE,t,{},"")},e.Unsubscribe=function(t){return new e(c.UNSUBSCRIBE,t,{},"")},e.Publish=function(t,n,r){return new e(c.MESSAGE,t,r||{},n||"")},e.Status=function(t,n){return new e(c.STATUS,t,n||{},"")},e.Ping=function(){return new e(c.PING,[],{},"")},e}();t.default=u},function(e,t,n){"use strict";var r=n(108);t.__esModule=!0,t.TextDecoder=t.TextEncoder=void 0;var o=r(n(709));const i=(void 0!==typeof window?window:__webpack_require__.g).TextEncoder||o.TextEncoder;t.TextEncoder=i;const s=(void 0!==typeof window?window:__webpack_require__.g).TextDecoder||o.TextDecoder;t.TextDecoder=s},function(e,t,n){"use strict";function r(e,t,n){return t<=e&&e<=n}function o(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function i(e){this.tokens=[].slice.call(e)}n.r(t),n.d(t,"TextEncoder",(function(){return l})),n.d(t,"TextDecoder",(function(){return u})),i.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var s=-1;function a(e,t){if(e)throw TypeError("Decoder error");return t||65533}var c="utf-8";function u(e,t){if(!(this instanceof u))return new u(e,t);if((e=void 0!==e?String(e).toLowerCase():c)!==c)throw new Error("Encoding not supported. Only utf-8 is supported");t=o(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function l(e,t){if(!(this instanceof l))return new l(e,t);if((e=void 0!==e?String(e).toLowerCase():c)!==c)throw new Error("Encoding not supported. Only utf-8 is supported");t=o(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function d(e){var t=e.fatal,n=0,o=0,i=0,c=128,u=191;this.handler=function(e,l){if(-1===l&&0!==i)return i=0,a(t);if(-1===l)return s;if(0===i){if(r(l,0,127))return l;if(r(l,194,223))i=1,n=l-192;else if(r(l,224,239))224===l&&(c=160),237===l&&(u=159),i=2,n=l-224;else{if(!r(l,240,244))return a(t);240===l&&(c=144),244===l&&(u=143),i=3,n=l-240}return n<<=6*i,null}if(!r(l,c,u))return n=i=o=0,c=128,u=191,e.prepend(l),a(t);if(c=128,u=191,n+=l-128<<6*(i-(o+=1)),o!==i)return null;var d=n;return n=i=o=0,d}}function p(e){e.fatal,this.handler=function(e,t){if(-1===t)return s;if(r(t,0,127))return t;var n,o;r(t,128,2047)?(n=1,o=192):r(t,2048,65535)?(n=2,o=224):r(t,65536,1114111)&&(n=3,o=240);for(var i=[(t>>6*n)+o];n>0;){var a=t>>6*(n-1);i.push(128|63&a),n-=1}return i}}u.prototype={decode:function(e,t){var n;n="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=o(t),this._streaming||(this._decoder=new d({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var r,a=new i(n),c=[];!a.endOfStream()&&(r=this._decoder.handler(a,a.read()))!==s;)null!==r&&(Array.isArray(r)?c.push.apply(c,r):c.push(r));if(!this._streaming){do{if((r=this._decoder.handler(a,a.read()))===s)break;null!==r&&(Array.isArray(r)?c.push.apply(c,r):c.push(r))}while(!a.endOfStream());this._decoder=null}return c.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===c[0]?(this._BOMseen=!0,c.shift()):this._BOMseen=!0)),function(e){for(var t="",n=0;n<e.length;++n){var r=e[n];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return t}(c)}},l.prototype={encode:function(e,t){e=e?String(e):"",t=o(t),this._streaming||(this._encoder=new p(this._options)),this._streaming=Boolean(t.stream);for(var n,r=[],a=new i(function(e){for(var t=String(e),n=t.length,r=0,o=[];r<n;){var i=t.charCodeAt(r);if(i<55296||i>57343)o.push(i);else if(56320<=i&&i<=57343)o.push(65533);else if(55296<=i&&i<=56319)if(r===n-1)o.push(65533);else{var s=e.charCodeAt(r+1);if(56320<=s&&s<=57343){var a=1023&i,c=1023&s;o.push(65536+(a<<10)+c),r+=1}else o.push(65533)}r+=1}return o}(e));!a.endOfStream()&&(n=this._encoder.handler(a,a.read()))!==s;)Array.isArray(n)?r.push.apply(r,n):r.push(n);if(!this._streaming){for(;(n=this._encoder.handler(a,a.read()))!==s;)Array.isArray(n)?r.push.apply(r,n):r.push(n);this._encoder=null}return new Uint8Array(r)}}},function(e,t,n){"use strict";var r=n(108),o=n(3);t.__esModule=!0,t.default=void 0;var i=o(n(18)),s=r(n(76));t.default=function(e,t){void 0===e&&(e=s.codes.CLOSE_FALLBACK_CODE),void 0===t&&(t=s.messages[e]||"No message available from code."),(0,i.default)(this,"code",void 0),(0,i.default)(this,"message",void 0),this.code=e,this.message=t}},function(e,t,n){"use strict";var r=n(3);t.__esModule=!0,t.default=void 0;var o=r(n(712)),i=(void 0!==typeof window?window:__webpack_require__.g).WebSocket?(void 0!==typeof window?window:__webpack_require__.g).WebSocket:o.default;t.default=i},function(e,t,n){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(e,t,n){"use strict";const r=n(714);e.exports=function(e){const t=r(e.data);return t.transactionId=e.transactionId,t.fromAddress=e.headers["X-TB-FROM-ADDRESS"],t}},function(e,t,n){"use strict";e.exports=function(e){if(0===e.length)return{};const t=JSON.parse(e),n=t.uri.substr(1).split("/");n.shift(),""===n[n.length-1]&&n.pop(),t.params={};for(let e=0,r=n.length;e<r-1;e+=2)t.params[n[e]]=n[e+1];return n.length%2==0?"channel"===n[n.length-2]&&n.length>6?t.resource=`${n[n.length-4]}_${n[n.length-2]}`:t.resource=n[n.length-2]:"channel"===n[n.length-1]&&n.length>5?t.resource=`${n[n.length-3]}_${n[n.length-1]}`:t.resource=n[n.length-1],t.signature=`${t.resource}#${t.method}`,t}},function(e,t,n){"use strict";const r=n(2).name,o=n(61).once;e.exports=()=>o()&&["Chrome","Firefox","Safari"].indexOf(r)>-1},function(e,t,n){"use strict";const r=n(2),o=n(61).once;e.exports=()=>o()&&("Chrome"===r.name||"Firefox"===r.name||"Node"===r.name||"Safari"===r.name||"Edge"===r.name)},function(e,t,n){"use strict";const r=n(61).once;e.exports=()=>r()},function(e,t,n){"use strict";e.exports="DTLS_SRTP"},function(e,t,n){"use strict";e.exports=function(e){let t=e.supportsWebRTC;return{supportsWebRTC:"true"===t||!0===t}}},function(e,t,n){"use strict";e.exports=function(e,t){this.code=e,this.message=t,this.reason=t}},function(e,t,n){"use strict";e.exports=function(e){const t=[];this.enqueue=function(){t.push(Array.prototype.slice.call(arguments))},this.triggerAll=function(){let n;for(;n=t.shift();)e.trigger(...n)}}},function(e,t,n){"use strict";var r=n(3)(n(20));const o=n(207),i=n(240),s=n(57),a=n(7),c=n(141),u=n(8),l=n(723),d=n(724),p=n(289).default,h={EMPTY_RESPONSE:"Response body was empty, probably due to connectivity loss",BADLY_FORMED:"Unknown error: JSON response was badly formed",NO_ERROR:"No error message",UNEXPECTED_SERVER_RESPONSE:e=>`Unexpected server response (${e}). Try this operation again later.`},f=[0,600,1200];e.exports=function(e){let t=void 0===e?{}:e,n=t.axios,m=void 0===n?o:n,g=t.retryDelays,b=void 0===g?f:g;return p((function(e){let t=e.anvilUrl,n=e.sessionId,o=e.token,p=e.clientVersion,f=e.connectionId;const g=i.parse(t,!0),b=i.format({protocol:g.protocol,auth:g.auth,host:g.host,pathname:i.resolve((g.pathname||"").replace(/\/?$/,"/"),`session/${n}`),query:(0,r.default)({},g.query,{extended:!0})});return m.get(b,{validateStatus:e=>e>=200&&e<300,headers:{"X-OPENTOK-AUTH":o,"X-TB-VERSION":1,"X-TB-CLIENT-VERSION":p,"X-TB-CONNECTIONID":f,Accept:"application/json"}}).catch((e=>{if(e.response){const t=new Error(h.UNEXPECTED_SERVER_RESPONSE(`${e.response.statusCode}${e.response.status?` ${e.response.status}`:""}`));throw t.code=u.ANVIL_INVALID_HTTP_STATUS,t.name=l(t.code),t}if(e.request){const e=new Error(h.CONNECT_FAILED);throw e.code=u.ANVIL_CONNECT_FAILED,e.name=l(e.code),e}{const t=u.ANVIL_UNKNOWN_HTTP_ERROR,n=l(e.code);throw a(e,{code:t,name:n}),e}})).then((e=>{let t=e.data;if("string"==typeof t){if(t.length>0)try{JSON.parse(t)}catch(e){throw e.message=h.UNEXPECTED_SERVER_RESPONSE(e.toString()),e.code=u.ANVIL_XDOMAIN_OR_PARSING_ERROR,e.name=l(e.code),e}const e=new Error(0===t.length?h.EMPTY_RESPONSE:h.BADLY_FORMED);throw e.code=0===t.length?u.ANVIL_EMPTY_RESPONSE_BODY:u.ANVIL_BADLY_FORMED_RESPONSE,e.name=l(e.code),e}if(null===t||0===t.length){const e=new Error(h.EMPTY_RESPONSE);throw e.code=u.ANVIL_EMPTY_RESPONSE_BODY,e.name=l(e.code),e}const n=t.filter((e=>null!=e.error))[0];if(n){const e=d(s(n,"error.code","500"));"Invalid token format"===s(n,"error.errorMessage.message")&&(n.error.errorMessage.message+=` Token: ${o}`);const t=new Error(s(n,"error.errorMessage.message",void 0===e?`Unknown error: ${n.error.code}`:h.NO_ERROR));throw t.code=e||u.ANVIL_UNEXPECTED_ERROR_CODE,t.name=l(t.code),t}return new c(t[0])}))}),((e,t)=>e.code&&e.code>=3e3&&e.code<=3007&&b[t]))}},function(e,t,n){"use strict";const r=n(8),o=n(4),i={[r.ANVIL_BADLY_FORMED_RESPONSE]:o.BADLY_FORMED_RESPONSE,[r.ANVIL_INVALID_HTTP_STATUS]:o.INVALID_HTTP_STATUS,[r.ANVIL_XDOMAIN_OR_PARSING_ERROR]:o.XDOMAIN_OR_PARSING_ERROR,[r.ANVIL_UNKNOWN_HTTP_ERROR]:o.UNKNOWN_HTTP_ERROR,[r.ANVIL_UNEXPECTED_ERROR_CODE]:o.UNEXPECTED_ERROR_CODE,[r.ANVIL_EMPTY_RESPONSE_BODY]:o.EMPTY_RESPONSE_BODY,[r.ANVIL_CONNECT_FAILED]:o.CONNECT_FAILED,[r.AUTHENTICATION_ERROR]:o.AUTHENTICATION_ERROR,[r.INVALID_SESSION_ID]:o.INVALID_SESSION_ID,[r.TERMS_OF_SERVICE_FAILURE]:o.TERMS_OF_SERVICE_FAILURE,[r.UNEXPECTED_SERVER_RESPONSE]:o.UNEXPECTED_SERVER_RESPONSE};e.exports=function(e){return i[e]}},function(e,t,n){"use strict";const r=n(8),o={400:r.INVALID_SESSION_ID,403:r.AUTHENTICATION_ERROR,404:r.INVALID_SESSION_ID,409:r.TERMS_OF_SERVICE_FAILURE,500:r.UNEXPECTED_SERVER_RESPONSE};e.exports=function(e){return o[e]}},function(e,t,n){"use strict";e.exports=function(e){void 0===e&&(e={});const t=e.Session||n(310)(),r=e.sessionObjects||n(21);return function(e,n,o){null==n&&(n=e,e=null),Array.isArray(n)&&1===n.length&&(n=n[0]);let i=r.sessions.get(n);return i||(i=new t(e,n,o),r.sessions.add(i)),i}}},function(e,t,n){"use strict";var r=n(3),o=r(n(12)),i=r(n(13));const s=n(727),a=n(273),c=n(2),u=n(4),l=n(8),d=n(11)(),p=n(51),h=n(73),f=n(142)(void 0!==typeof window?window:__webpack_require__.g);function m(e){return a(s(e,["AV1X","AV1","VP9","rtx","red","ulpfec","H265","X-H264UC","x-ulpfecuc"]))}const g=function(){var e=(0,i.default)(o.default.mark((function e(){var t,n,r,i,s,a,g;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof window){e.next=2;break}return e.abrupt("return",{videoEncoders:[],videoDecoders:[]});case 2:if(t=f.RTCPeerConnection,!window.RTCRtpSender||!("getCapabilities"in window.RTCRtpSender)){e.next=7;break}return n=m(n=window.RTCRtpSender.getCapabilities("video").codecs.map((e=>e.mimeType||e.name)).map((e=>e.replace("video/","")))),e.abrupt("return",{videoEncoders:n,videoDecoders:n});case 7:if("Chrome"!==c.name||"captureStream"in window.HTMLCanvasElement.prototype){e.next=9;break}return e.abrupt("return",{videoEncoders:["VP8"],videoDecoders:["VP8"]});case 9:if(!c.isLegacyEdge){e.next=11;break}return e.abrupt("return",{videoEncoders:["H264","VP8"],videoDecoders:["H264","VP8"]});case 11:return(r=window.document.createElement("canvas")).getContext("2d"),i=r.captureStream(),e.prev=14,a={iceServers:[]},h()&&(a.sdpSemantics="plan-b"),(s=new t(a)).addTrack?s.addTrack(i.getVideoTracks()[0],i):s.addStream&&s.addStream(i),e.next=21,s.createOffer();case 21:return g=e.sent,n=m(n=p.getCodecs(g.sdp,"video")||[]),e.abrupt("return",{videoEncoders:n,videoDecoders:n});case 27:throw e.prev=27,e.t0=e.catch(14),d(u.UNABLE_TO_ACCESS_MEDIA_ENGINE,new Error("OT.getSupportedCodecs was not able to get the list of supported codecs"),l.UNABLE_TO_ACCESS_MEDIA_ENGINE);case 30:return e.prev=30,s.close(),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[14,27,30,33]])})));return function(){return e.apply(this,arguments)}}();e.exports=g},function(e,t,n){var r=n(728),o=n(238),i=n(87),s=n(129),a=i((function(e,t){return s(e)?r(e,o(t,1,s,!0)):[]}));e.exports=a},function(e,t,n){var r=n(92),o=n(93),i=n(128),s=n(33),a=n(68),c=n(94);e.exports=function(e,t,n,u){var l=-1,d=o,p=!0,h=e.length,f=[],m=t.length;if(!h)return f;n&&(t=s(t,a(n))),u?(d=i,p=!1):t.length>=200&&(d=c,p=!1,t=new r(t));e:for(;++l<h;){var g=e[l],b=null==n?g:n(g);if(g=u||0!==g?g:0,p&&b==b){for(var y=m;y--;)if(t[y]===b)continue e;f.push(g)}else d(t,b,u)||f.push(g)}return f}},function(e,t,n){"use strict";const r=n(24)().getInputMediaDevices;e.exports=function(e){r().then((t=>e(void 0,t)),e)}},function(e,t,n){"use strict";var r=n(3),o=r(n(12)),i=r(n(13));e.exports=function(e){void 0===e&&(e={});const t=e.deviceHelpers||n(24)(),r=t.hasAudioOutputApiSupport,s=t.hasDevice,a=e.getAudioOutputDevices||n(321),c=e.updateSubscribersSinkId||n(323),u=n(11)(),l=n(4),d=function(){var e=(0,i.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r()){e.next=2;break}throw u(l.UNSUPPORTED_BROWSER,new Error("setAudioOutputDevice is not supported in your browser."));case 2:return e.next=4,a();case 4:if(n=e.sent,s(n,t)){e.next=8;break}throw u(l.INVALID_AUDIO_OUTPUT_SOURCE,new Error("The requested device is not valid."));case 8:return e.prev=8,e.next=11,c(t);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(8),u(l.REQUESTED_DEVICE_PERMISSION_DENIED,new Error("No permission to use the requested device."));case 16:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t){return e.apply(this,arguments)}}();return d}},function(e,t,n){"use strict";var r=n(3),o=r(n(12)),i=r(n(13));const s=n(732)(),a=n(24)(),c=a.hasAudioOutputApiSupport,u=a.getNativeMediaDevices;e.exports=()=>{if(c()){const e=u();let t=!1;e.addEventListener("devicechange",(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return t=!0,e.next=5,s();case 5:t=!1;case 6:case"end":return e.stop()}}),e)}))))}}},function(e,t,n){"use strict";var r=n(3),o=r(n(12)),i=r(n(13));e.exports=function(e){void 0===e&&(e={});const t=e.deviceHelpers||n(24)(),r=t.getAudioOutputMediaDevices,s=t.getDefaultAudioOutputDeviceId,a=t.hasDevice,c=e.currentAudioOutputDevice||n(105),u=c.getCurrentAudioOutputDeviceId,l=c.setCurrentAudioOutputDeviceId,d=e.updateSubscribersSinkId||n(323),p=e.logging||n(1)("currentAudioOutputDevice"),h=function(){var e=(0,i.default)(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:if(0!==(t=e.sent).length){e.next=6;break}return l(""),e.abrupt("return");case 6:if(!a(t,u())){e.next=9;break}return e.abrupt("return");case 9:return n=s(t),l(n),e.prev=11,e.next=14,d(n);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(11),p.debug("Failed to set the default audio output device.",e.t0);case 19:case"end":return e.stop()}}),e,null,[[11,16]])})));return function(){return e.apply(this,arguments)}}();return h}}])},module.exports=factory()},6800:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GPGPUContext:()=>dt,MathBackendWebGL:()=>_r,forceHalfFloat:()=>kr,gpgpu_util:()=>o,setWebGLContext:()=>u,version_webgl:()=>Ir,webgl:()=>Rr,webgl_util:()=>r});var r={};n.r(r),n.d(r,{assertNotComplex:()=>he,bindCanvasToFramebuffer:()=>B,bindColorTextureToFramebuffer:()=>G,bindTextureToProgramUniformSampler:()=>Z,bindTextureUnit:()=>V,bindVertexBufferToProgramAttribute:()=>P,callAndCheck:()=>y,canBeRepresented:()=>v,createFragmentShader:()=>E,createFramebuffer:()=>L,createProgram:()=>_,createStaticIndexBuffer:()=>N,createStaticVertexBuffer:()=>R,createTexture:()=>A,createVertexShader:()=>S,getBatchDim:()=>H,getExtensionOrThrow:()=>x,getFramebufferErrorMessage:()=>X,getMaxTexturesInShader:()=>ie,getNumChannels:()=>O,getProgramUniformLocation:()=>W,getProgramUniformLocationOrThrow:()=>F,getRowsCols:()=>Y,getShapeAs3D:()=>K,getTextureShapeFromLogicalShape:()=>J,getWebGLDisjointQueryTimerVersion:()=>se,getWebGLErrorMessage:()=>w,getWebGLMaxTextureSize:()=>ne,hasExtension:()=>ae,isCapableOfRenderingToFloatTexture:()=>ue,isDownloadFloatTextureEnabled:()=>le,isReshapeFree:()=>Q,isWebGLFenceEnabled:()=>pe,isWebGLVersionEnabled:()=>ce,linkProgram:()=>I,logShaderSourceAndInfoLog:()=>C,resetMaxTextureSize:()=>re,resetMaxTexturesInShader:()=>oe,unbindColorTextureFromFramebuffer:()=>U,unbindTextureUnit:()=>M,validateFramebuffer:()=>$,validateProgram:()=>k,validateTextureSize:()=>D});var o={};n.r(o),n.d(o,{bindVertexProgramAttributeStreams:()=>rt,createBufferFromOutputTexture:()=>st,createFloat16MatrixTexture:()=>Ke,createFloat16PackedMatrixTexture:()=>nt,createFloat32MatrixTexture:()=>He,createIndexBuffer:()=>Xe,createPackedMatrixTexture:()=>et,createUnsignedBytesMatrixTexture:()=>qe,createVertexBuffer:()=>$e,createVertexShader:()=>Ue,downloadByteEncodedFloatMatrixFromOutputTexture:()=>ct,downloadFloat32MatrixFromBuffer:()=>at,downloadMatrixFromPackedOutputTexture:()=>lt,downloadPackedMatrixFromBuffer:()=>ut,getInternalFormatForFloat16MatrixTexture:()=>Ye,getInternalFormatForFloat16PackedMatrixTexture:()=>tt,getInternalFormatForFloat32MatrixTexture:()=>ze,getInternalFormatForPackedMatrixTexture:()=>Qe,getInternalFormatForUnsignedBytesMatrixTexture:()=>Je,uploadDenseMatrixToTexture:()=>ot,uploadPixelDataToTexture:()=>it});var i={};n.r(i),n.d(i,{addImpl:()=>xt,bincountImpl:()=>Et,bincountReduceImpl:()=>Tt,ceilImpl:()=>kt,concatImpl:()=>Rt,equalImpl:()=>Nt,expImpl:()=>Ot,expm1Impl:()=>At,floorImpl:()=>Dt,gatherNdImpl:()=>Lt,gatherV2Impl:()=>Pt,greaterEqualImpl:()=>Mt,greaterImpl:()=>Vt,lessEqualImpl:()=>Wt,lessImpl:()=>Ft,linSpaceImpl:()=>Zt,logImpl:()=>Bt,maxImpl:()=>Gt,maximumImpl:()=>Ut,minimumImpl:()=>$t,multiplyImpl:()=>Xt,negImpl:()=>zt,notEqualImpl:()=>Ht,prodImpl:()=>Kt,rangeImpl:()=>Jt,rsqrtImpl:()=>qt,scatterImpl:()=>Qt,sigmoidImpl:()=>en,simpleAbsImpl:()=>ht,sliceImpl:()=>tn,sparseFillEmptyRowsImpl:()=>nn,sparseReshapeImpl:()=>rn,sparseSegmentReductionImpl:()=>on,sqrtImpl:()=>sn,squaredDifferenceImpl:()=>an,stridedSliceImpl:()=>cn,stringNGramsImpl:()=>ln,stringSplitImpl:()=>pn,stringToHashBucketFastImpl:()=>hn,subImpl:()=>fn,tileImpl:()=>gn,topKImpl:()=>vn,transposeImpl:()=>Yt,uniqueImpl:()=>wn});var s=n(5958);const a={},c={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function u(e,t){a[e]=t}function l(e,t){if(!(e in a)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;return n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete a[e]}),!1),1===e?n.getContext("webgl",c)||n.getContext("experimental-webgl",c):n.getContext("webgl2",c)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;a[e]=n}const n=a[e];return null==n||n.isContextLost()?(delete a[e],l(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),a[e])}var d,p,h;function f(e,t){return[t,e]}function m(e){const t=s.D5U.sizeFromShape(e),n=Math.ceil(t/4);return s.D5U.sizeToSquarishShape(n)}function g(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function b(e,t){const n=e;let r,o,i,a,c,u,l,d,p,h;return 2===(0,s.OBj)().getNumber("WEBGL_VERSION")?(r=n.R32F,o=n.R16F,i=n.RGBA16F,a=n.RGBA32F,c=n.RED,l=4,d=1,p=n.HALF_FLOAT,h=n.FLOAT,u=n.RGBA8):(r=e.RGBA,o=e.RGBA,i=e.RGBA,a=n.RGBA,c=e.RGBA,l=4,d=4,p=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,u=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:c,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:d,textureTypeHalfFloat:p,textureTypeFloat:h}}function y(e,t){const n=t();return(0,s.OBj)().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+w(e,t))}(e),n}function v(e){return!!((0,s.OBj)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function w(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function x(e,t){return j(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}function S(e,t){const n=j(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(y(e,(()=>e.shaderSource(n,t))),y(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function E(e,t){const n=j(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(y(e,(()=>e.shaderSource(n,t))),y(e,(()=>e.compileShader(n))),(0,s.OBj)().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw C(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(d||(d={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(p||(p={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(h||(h={}));const T=/ERROR: [0-9]+:([0-9]+):/g;function C(e,t){const n=T.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const r=+n[1],o=e.split("\n"),i=o.length.toString().length+2,a=o.map(((e,t)=>s.D5U.rightPad((t+1).toString(),i)+e));let c=0;for(let e=0;e<a.length;e++)c=Math.max(a[e].length,c);const u=a.slice(0,r-1),l=a.slice(r-1,r),d=a.slice(r);console.log(u.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${s.D5U.rightPad(l[0],c)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}function _(e){return j(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}function I(e,t){if(y(e,(()=>e.linkProgram(t))),!(0,s.OBj)().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function k(e,t){if(y(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function R(e,t){const n=j(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return y(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),y(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}function N(e,t){const n=j(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return y(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),y(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}function O(){return 2===(0,s.OBj)().getNumber("WEBGL_VERSION")?1:4}function A(e){return j(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}function D(e,t){const n=(0,s.OBj)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}function L(e){return j(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}function P(e,t,n,r,o,i,s){const a=e.getAttribLocation(t,n);return-1!==a&&(y(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),y(e,(()=>e.vertexAttribPointer(a,o,e.FLOAT,!1,i,s))),y(e,(()=>e.enableVertexAttribArray(a))),!0)}function V(e,t,n){z(e,n),y(e,(()=>e.activeTexture(e.TEXTURE0+n))),y(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}function M(e,t){z(e,t),y(e,(()=>e.activeTexture(e.TEXTURE0+t))),y(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}function F(e,t,n){return j(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}function W(e,t,n){return e.getUniformLocation(t,n)}function Z(e,t,n,r){y(e,(()=>V(e,t,r))),y(e,(()=>e.uniform1i(n,r)))}function B(e){y(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),y(e,(()=>e.viewport(0,0,e.canvas.width,e.canvas.height))),y(e,(()=>e.scissor(0,0,e.canvas.width,e.canvas.height)))}function G(e,t,n){y(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),y(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function U(e,t){y(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),y(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function $(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+X(e,t))}function X(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function j(e,t,n){const r=y(e,(()=>t()));if(null==r)throw new Error(n);return r}function z(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error(`textureUnit must be in [gl.TEXTURE0, gl.TEXTURE${n}].`)}function H(e,t=2){return s.D5U.sizeFromShape(e.slice(0,e.length-t))}function Y(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function K(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[H(e),...Y(e)]),t}function J(e,t=!1){let n=(0,s.OBj)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map(((t,n)=>n>=e.length-2?s.D5U.nearestLargerEven(e[n]):e[n]))).length&&(e=[2,e[0]])),2!==e.length){const t=s.D5U.squeezeShape(e);e=t.newShape}let r=s.D5U.sizeFromShape(e);if(e.length<=1&&r<=n)return[1,r];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){const t=H(e);let n=2,o=2;return e.length&&([n,o]=Y(e)),r=t*(n/2)*(o/2),s.D5U.sizeToSquarishShape(r).map((e=>2*e))}return s.D5U.sizeToSquarishShape(r)}function q(e){return e%2==0}function Q(e,t){if(e=e.slice(-2),t=t.slice(-2),s.D5U.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(q(n)&&q(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&q(e[0])&&q(t[0])}let ee,te;function ne(e){if(null==ee){const t=l(e);ee=t.getParameter(t.MAX_TEXTURE_SIZE)}return ee}function re(){ee=null}function oe(){te=null}function ie(e){if(null==te){const t=l(e);te=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,te)}function se(e){if(0===e)return 0;let t;const n=l(e);return t=ae(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:ae(n,"EXT_disjoint_timer_query")?1:0,t}function ae(e,t){return null!=e.getExtension(t)}function ce(e){try{if(null!=l(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function ue(e){if(0===e)return!1;const t=l(e);if(1===e){if(!ae(t,"OES_texture_float"))return!1}else if(!ae(t,"EXT_color_buffer_float"))return!1;return de(t)}function le(e){if(0===e)return!1;const t=l(e);if(1!==e){if(ae(t,"EXT_color_buffer_float"))return de(t);const e="EXT_color_buffer_half_float";if(ae(t,e)){const n=t.getExtension(e);return function(e,t){const n=b(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),i}(t,n)}return!1}return!!ae(t,"OES_texture_float")&&(!!ae(t,"WEBGL_color_buffer_float")&&de(t))}function de(e){const t=b(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function pe(e){return 2===e&&null!=l(e).fenceSync}function he(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&s.D5U.assert("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the WebGL backend.`))}))}const fe=(0,s.OBj)();function me(){let e,t,n,r,o,i,a,c,u,l;return 2===(0,s.OBj)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",o="texture",i="outputColor",a="out vec4 outputColor;",c="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",o="texture2D",i="gl_FragColor",a="",c="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:a,defineSpecialNaN:c,defineSpecialInf:u,defineRound:l}}function ge(e,t,n="index"){const r=s.D5U.computeStrides(t);return r.map(((t,o)=>`int ${e[o]} = ${n} / ${t}; ${o===r.length-1?`int ${e[o+1]} = ${n} - ${e[o]} * ${t}`:`index -= ${e[o]} * ${t}`};`)).join("")}function be(e,t,n="index"){const r=s.D5U.computeStrides(t);return r.map(((t,o)=>`int ${e[o]} = ${n} / outShapeStrides[${o}]; ${o===r.length-1?`int ${e[o+1]} = ${n} - ${e[o]} * outShapeStrides[${o}]`:`index -= ${e[o]} * outShapeStrides[${o}]`};`)).join("")}function ye(e){const t=s.D5U.computeStrides(e).map((e=>e.toString()));return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}fe.registerFlag("HAS_WEBGL",(()=>fe.getNumber("WEBGL_VERSION")>0)),fe.registerFlag("WEBGL_VERSION",(()=>ce(2)?2:ce(1)?1:0)),fe.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),fe.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===fe.get("WEBGL_VERSION"))),fe.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),fe.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),fe.registerFlag("WEBGL_PACK",(()=>fe.getBool("HAS_WEBGL"))),fe.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>fe.getBool("WEBGL_PACK"))),fe.registerFlag("WEBGL_PACK_CLIP",(()=>fe.getBool("WEBGL_PACK"))),fe.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>fe.getBool("WEBGL_PACK"))),fe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>fe.getBool("WEBGL_PACK"))),fe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>fe.getBool("WEBGL_PACK"))),fe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>fe.getBool("WEBGL_PACK"))),fe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>fe.getBool("WEBGL_PACK"))),fe.registerFlag("WEBGL_PACK_REDUCE",(()=>fe.getBool("WEBGL_PACK"))),fe.registerFlag("WEBGL_LAZILY_UNPACK",(()=>fe.getBool("WEBGL_PACK"))),fe.registerFlag("WEBGL_CONV_IM2COL",(()=>fe.getBool("WEBGL_PACK"))),fe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>ne(fe.getNumber("WEBGL_VERSION")))),fe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>ie(fe.getNumber("WEBGL_VERSION")))),fe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=fe.getNumber("WEBGL_VERSION");return 0===e?0:se(e)})),fe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>fe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!s.C2$.isMobile())),fe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>ue(fe.getNumber("WEBGL_VERSION")))),fe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!fe.getBool("WEBGL_FORCE_F16_TEXTURES")&&fe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),fe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>le(fe.getNumber("WEBGL_VERSION")))),fe.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>pe(fe.getNumber("WEBGL_VERSION")))),fe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>fe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),fe.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),fe.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>s.C2$.isMobile()?1:-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),fe.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),fe.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),fe.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),fe.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128));const ve="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:we}=s.Wap;function xe(e,t,n){const r=[];if(e.forEach((e=>{const t=s.D5U.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(r.push(`uniform sampler2D ${e.name};`),r.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){const{uniformShape:t}=Oe(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push(`uniform int ${e.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${e.name}Shape;`)}r.push(`uniform ivec2 ${e.name}TexShape;`)}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const o=r.join("\n"),i=e.map((e=>function(e,t,n=!1,r){let o="";o+=n?Ee(e,r):Se(e,r);const i=e.shapeInfo.logicalShape,a=t.logicalShape;return i.length<=a.length&&(o+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=e.shapeInfo.logicalShape.length,a=t.logicalShape.length,c=we(e.shapeInfo.logicalShape,t.logicalShape),u=Ne(a),l=a-i;let d;const p=["x","y","z","w","u","v"];d=0===i?"":a<2&&c.length>=1?"coords = 0;":c.map((e=>`coords.${p[e+l]} = 0;`)).join("\n");let h="";h=a<2&&i>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${p[t+l]}`)).join(", ");let f="return outputValue;";const m=1===s.D5U.sizeFromShape(e.shapeInfo.logicalShape),g=1===s.D5U.sizeFromShape(t.logicalShape);if(1!==i||m||g){if(m&&!g)f=1===a?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(c.length){const e=i-2,t=i-1;c.indexOf(e)>-1&&c.indexOf(t)>-1?f="return vec4(outputValue.x);":c.indexOf(e)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(t)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${o}() {\n      ${u} coords = getOutputCoords();\n      ${d}\n      vec4 outputValue = get${r}(${h});\n      ${f}\n    }\n  `}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=t.texShape,a=e.shapeInfo.texShape,c=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&c===u&&null==e.shapeInfo.flatOffset&&s.D5U.arraysEqual(a,i))return`\n      float ${o}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const l=Ne(u),d=we(e.shapeInfo.logicalShape,t.logicalShape),p=u-c;let h;const f=["x","y","z","w","u","v"];h=0===c?"":u<2&&d.length>=1?"coords = 0;":d.map((e=>`coords.${f[e+p]} = 0;`)).join("\n");let m="";return m=u<2&&c>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${f[t+p]}`)).join(", "),`\n    float ${o}() {\n      ${l} coords = getOutputCoords();\n      ${h}\n      return get${r}(${m});\n    }\n  `}(e,t)),o}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),a=t.texShape,c=me(),u=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(c);let l,d,p=function(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${Te}\n    ${Ce}\n    ${_e}\n  `}(c);return t.isPacked?(l=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===r[0]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `:1===r[1]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `:n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(s.D5U.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const o=Math.ceil(e[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),i=o*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),i=o*Math.ceil(e[e.length-2]/2);let s=i,a="",c="b, r, c";for(let t=2;t<e.length-1;t++)s*=e[e.length-t-1],a=`\n      int b${t} = index / ${s};\n      index -= b${t} * ${s};\n    `+a,c=`b${t}, `+c;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${a}\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec${e.length}(${c});\n    }\n  `}(e,t,n)}}(t.logicalShape,a,n.enableShapeUniforms),d=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(c)):(l=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){return 1===t[0]?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `:1===t[1]?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `:n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t,n);case 2:return function(e,t,n){return s.D5U.arraysEqual(e,t)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===e[1]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===e[0]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${be(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`;const r=ge(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(e,t,n);case 4:return function(e,t,n){if(n)return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${be(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `;const r=ge(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t,n);case 5:return function(e,t){const n=ge(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const n=ge(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,a,n.enableShapeUniforms),d=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(c)),n.packedInputs&&(p+=Ie),[p,u,d,o,l,i,n.userCode].join("\n")}function Se(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[o,i]=e.shapeInfo.texShape;if(1===o&&1===i)return`\n      float ${r}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const s=ke(n);if(t)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `;const[a,c]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${a}, ${c}, ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${Re(e)}\n      }\n    `;const o=e.shapeInfo.texShape,i=o[0],s=o[1];if(1===s&&1===i)return`\n      float ${r}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const a=ke(n);return 1===s?t?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:1===i?t?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${s}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:t?`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${i}, ${s}, index + ${a});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&s.D5U.arraysEqual(n,i)){if(t)return`\n      float ${o}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `;const e=i[0];return`\n    float ${o}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${i[1]}.0, ${e}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:a,keptDims:c}=s.D5U.squeezeShape(n),u=a;if(u.length<n.length){const n=["row","col"];return`\n      ${Se(Ae(e,u),t)}\n      float ${o}(int row, int col) {\n        return ${o}(${De(n,c)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${Re(e)}\n      }\n    `;const l=i[0],d=i[1],p=ke(r);return 1===d?t?`\n      float ${o}(int row, int col) {\n        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col) {\n      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `:1===l?t?`\n      float ${o}(int row, int col) {\n        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col) {\n      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${d}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `:t?`\n      float ${o}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${p};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n  float ${o}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${p};\n    vec2 uv = uvFromFlat(${l}, ${d}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],a=n[2],{newShape:c,keptDims:u}=s.D5U.squeezeShape(n),l=c;if(l.length<n.length){const n=["row","col","depth"];return`\n        ${Se(Ae(e,l),t)}\n        float ${o}(int row, int col, int depth) {\n          return ${o}(${De(n,u)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${i}, ${a}, 1)));\n        ${Re(e)}\n      }\n    `;const d=e.shapeInfo.texShape,p=d[0],h=d[1],f=e.shapeInfo.flatOffset;if(h===i&&null==f)return t?`\n      float ${o}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${o}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${a}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${h}.0, ${p}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(h===a&&null==f)return t?`\n      float ${o}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${p}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const m=ke(r);return t?`\n    float ${o}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * ${i} + col * ${a} + depth + ${m};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `:`\n      float ${o}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${i} + col * ${a} + depth + ${m};\n        vec2 uv = uvFromFlat(${p}, ${h}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],a=n[2]*i,c=n[1]*a,{newShape:u,keptDims:l}=s.D5U.squeezeShape(n);if(u.length<n.length){const n=["row","col","depth","depth2"];return`\n      ${Se(Ae(e,u),t)}\n      float ${o}(int row, int col, int depth, int depth2) {\n        return ${o}(${De(n,l)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${c}, ${a}, ${i}, 1)));\n        ${Re(e)}\n      }\n    `;const d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],f=p[1],m=`int stride2 = ${r}Shape[3];`,g=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(f===c&&null==d)return t?`\n      float ${o}(int row, int col, int depth, int depth2) {\n        ${m}\n        ${g}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${a}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${h}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(f===i&&null==d)return t?`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${h}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;const y=ke(r);return t?`\n    float ${o}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${m}\n      ${g}\n      ${b}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `:`\n    float ${o}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${c} + col * ${a} +\n          depth * ${i} + depth2;\n      vec2 uv = uvFromFlat(${h}, ${f}, index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],i=t[3]*o,a=t[2]*i,c=t[1]*a,{newShape:u,keptDims:l}=s.D5U.squeezeShape(t);if(u.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\n      ${Se(Ae(e,u))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${De(t,l)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${c}, ${a}, ${i}, ${o})) +\n          depth3;\n        ${Re(e)}\n      }\n    `;const d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],f=p[1];if(f===c&&null==d)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${a}, ${i}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(f===o&&null==d)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${c} + col * ${a} + depth * ${i} +\n          depth2 * ${o} + depth3 + ${ke(n)};\n      vec2 uv = uvFromFlat(${h}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:i}=s.D5U.squeezeShape(t);if(o.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${Se(Ae(e,o))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${De(t,i)});\n      }\n    `}const a=t[5],c=t[4]*a,u=t[3]*c,l=t[2]*u,d=t[1]*l;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${d}, ${l}, ${u}, ${c})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${a}, 1)));\n        ${Re(e)}\n      }\n    `;const p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,f=h[0],m=h[1];if(m===d&&null==p)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${l}, ${u}, ${c}, ${a})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${m}.0, ${f}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(m===a&&null==p)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${m}.0, ${f}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${d} + col * ${l} + depth * ${u} +\n          depth2 * ${c} + depth3 * ${a} + depth4 + ${ke(n)};\n      vec2 uv = uvFromFlat(${f}, ${m}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function Ee(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name;return`\n    vec4 ${"get"+t.charAt(0).toUpperCase()+t.slice(1)}() {\n      return ${me().texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,i=me();if(t)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${i.texture2D}(${n}, uv);\n    }\n  `;const s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${s[0]}, ${s[1]}, index);\n      return ${i.texture2D}(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,a=i[0],c=i[1],u=me();if(null!=i&&s.D5U.arraysEqual(n,i))return t?`\n      vec4 ${o}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${u.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${o}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${c}.0, ${a}.0);\n\n        return ${u.texture2D}(${r}, uv);\n      }\n    `;if(t)return`\n    vec4 ${o}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${u.texture2D}(${r}, uv);\n    }\n  `;const l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`\n    vec4 ${o}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(n[1]/2)}, ${l[0]}, ${l[1]}, row, col);\n      return ${u.texture2D}(${r}, uv);\n    }\n  `}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){const r=[1,2],i=["b","row","col"];return`\n        ${Ee(Ae(e,n.slice(1)),t)}\n        vec4 ${o}(int b, int row, int col) {\n          return ${o}(${De(i,r)});\n        }\n      `}const a=me();if(t)return`\n    vec4 ${o}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${a.texture2D}(${r}, uv);\n    }\n  `;const c=s[0],u=s[1],l=Math.ceil(n[2]/2);return`\n    vec4 ${o}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${c}, ${u}, ${l*Math.ceil(n[1]/2)}, ${l}, b, row, col);\n      return ${a.texture2D}(${r}, uv);\n    }\n  `}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=me();if(t)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);\n    }\n  `;const i=e.shapeInfo.logicalShape,s=i.length,a=e.shapeInfo.texShape,c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=c[0],l=c[1],d=Math.ceil(i[s-1]/2);let p=d*Math.ceil(i[s-2]/2),h="int b, int row, int col",f=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let e=2;e<s-1;e++)h=`int b${e}, `+h,p*=i[s-e-1],f=`b${e} * ${p} + `+f;return`\n    vec4 ${r}(${h}) {\n      int index = ${f};\n      int texR = index / ${l};\n      int texC = index - texR * ${l};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${u});\n      return ${o.texture2D}(${n}, uv);\n    }\n  `}(e,t)}}const Te="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Ce="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",_e="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Ie="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function ke(e){return`offset${e}`}function Re(e){const t=e.name,n=s.D5U.sizeFromShape(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function Ne(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function Oe(e,t,n){const{newShape:r,keptDims:o}=s.D5U.squeezeShape(t),i=t.length,a=e&&3===i&&1===t[0],c=a?t.slice(1):r,u=!e&&i>1&&!s.D5U.arraysEqual(t,n)&&r.length<i||a;return{useSqueezeShape:u,uniformShape:u?c:t,keptDims:o}}function Ae(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function De(e,t){return t.map((t=>e[t])).join(", ")}function Le(e,t,n){const r={},o={},i={},a=[];let c,u,l,d=null,p=null;p=e.getUniformLocation(n,"NAN",!1),1===(0,s.OBj)().getNumber("WEBGL_VERSION")&&(d=e.getUniformLocation(n,"INFINITY",!1));const h=!1;for(let s=0;s<t.variableNames.length;s++){const a=t.variableNames[s];r[a]=e.getUniformLocation(n,a,h),r[`offset${a}`]=e.getUniformLocation(n,`offset${a}`,h),t.enableShapeUniforms&&(o[`${a}Shape`]=e.getUniformLocation(n,`${a}Shape`,h),i[`${a}TexShape`]=e.getUniformLocation(n,`${a}TexShape`,h))}return t.enableShapeUniforms&&(c=e.getUniformLocation(n,"outShape",h),l=e.getUniformLocation(n,"outShapeStrides",h),u=e.getUniformLocation(n,"outTexShape",h)),t.customUniforms&&t.customUniforms.forEach(((t,r)=>{a[r]=e.getUniformLocation(n,t.name,h)})),{uniformLocations:r,customUniformLocations:a,infLoc:d,nanLoc:p,inShapesLocations:o,inTexShapesLocations:i,outShapeLocation:c,outShapeStridesLocation:l,outTexShapeLocation:u}}function Pe(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,n)=>{const r=e.logicalShape,o=t[n],i=o.shape;if(!s.D5U.arraysEqual(r,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${i} must match`);if(e.isUniform&&o.isUniform)return;const a=e.texShape,c=o.isUniform?null:o.texData.texShape;if(!s.D5U.arraysEqual(a,c))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${c} must match`)}))}function Ve(e){return(0,s.OBj)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class Me{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=d.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=me();this.outputShape=e,this.enableShapeUniforms=Ve(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?be(["r","c","d"],e):ge(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}class Fe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=d.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=me();this.outputShape=e,this.enableShapeUniforms=Ve(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?be(["r","c","d"],e):ge(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}class We{constructor(e){this.variableNames=["A"],this.outTexUsage=p.DOWNLOAD;const t=me();this.outputShape=e,this.userCode=`\n      ${ve}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}class Ze{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=p.DOWNLOAD;const t=me();this.outputShape=e,this.userCode=`\n      ${ve}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}class Be{constructor(e,t=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=me();this.outputShape=e,this.enableShapeUniforms=Ve(this.outputShape.length);let r="result";t&&(r="floor(result * 255. + 0.5)"),this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":ye(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ${n.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${n.output} = vec4(${r}, 0., 0., 0.);\n      }\n    `}}class Ge{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=me();this.outputShape=e,this.enableShapeUniforms=Ve(this.outputShape.length);let r="",o="result";t&&(o="floor(result * 255. + 0.5)");for(let t=0;t<=1;t++)for(let o=0;o<=1;o++){const i=2*t+o;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${o};\n          if (localCoords[1] + ${t} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${t};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${i}] = values[0];\n            } else if (offset == 1) {\n              result[${i}] = values[1];\n            } else if (offset == 2) {\n              result[${i}] = values[2];\n            } else {\n              result[${i}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":ye(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${n.output} = ${o};\n        }\n    `}}function Ue(e){const t=me();return S(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}function $e(e){return R(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Xe(e){return N(e,new Uint16Array([0,1,2,2,1,3]))}function je(e,t,n,r,o,i){D(t,n);const a=A(e),c=e.TEXTURE_2D;return y(e,(()=>e.bindTexture(c,a))),y(e,(()=>e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),y(e,(()=>e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),y(e,(()=>e.texParameteri(c,e.TEXTURE_MIN_FILTER,e.NEAREST))),y(e,(()=>e.texParameteri(c,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===(0,s.OBj)().getNumber("WEBGL_VERSION")?y(e,(()=>e.texImage2D(c,0,r,t,n,0,o,i,null))):y(e,(()=>e.texStorage2D(c,1,r,t,n))),y(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:a,texShape:[n,t]}}function ze(e){return e.internalFormatFloat}function He(e,t,n,r){const[o,i]=f(t,n);return je(e,o,i,ze(r),r.textureFormatFloat,e.FLOAT)}function Ye(e){return e.internalFormatHalfFloat}function Ke(e,t,n,r){const[o,i]=f(t,n);return je(e,o,i,Ye(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function Je(e){return e.downloadTextureFormat}function qe(e,t,n,r){const[o,i]=f(t,n);return je(e,o,i,Je(r),e.RGBA,e.UNSIGNED_BYTE)}function Qe(e){return e.internalFormatPackedFloat}function et(e,t,n,r){const[o,i]=g(t,n);return je(e,o,i,Qe(r),e.RGBA,e.FLOAT)}function tt(e){return e.internalFormatPackedHalfFloat}function nt(e,t,n,r){const[o,i]=g(t,n);return je(e,o,i,tt(r),e.RGBA,r.textureTypeHalfFloat)}function rt(e,t,n){return y(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),P(e,t,"clipSpacePos",n,3,20,0)&&P(e,t,"uv",n,2,20,12)}function ot(e,t,n,r,o,i){let a,c,u;y(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),o instanceof Uint8Array?(a=new Uint8Array(n*r*4),c=e.UNSIGNED_BYTE,u=e.RGBA):(a=new Float32Array(n*r*4),c=e.FLOAT,u=i.internalFormatPackedFloat),a.set(o),2===(0,s.OBj)().getNumber("WEBGL_VERSION")?y(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,c,a))):y(e,(()=>e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,c,a))),y(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}function it(e,t,n){y(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===(0,s.OBj)().getNumber("WEBGL_VERSION")?y(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):y(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===(0,s.OBj)().getNumber("WEBGL_VERSION")?y(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):y(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),y(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}function st(e,t,n,r){const o=e.createBuffer();y(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o)));const i=16*t*n;return y(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ))),y(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),y(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),o}function at(e,t,n){const r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function ct(e,t,n,r){const[o,i]=f(t,n),s=new Uint8Array(t*n*4);return y(e,(()=>e.readPixels(0,0,o,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,s))),new Float32Array(s.buffer)}function ut(e,t,n,r,o,i,s,a){const c=e,u=new Float32Array(function(e,t){const[n,r]=g(e,t);return n*r*4}(i,s));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,u),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),u}function lt(e,t,n){const r=new Float32Array(t*n*4);return y(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}class dt{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const t=(0,s.OBj)().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,u(t,e)):this.gl=l(t);let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===(0,s.OBj)().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=x(this.gl,e),ae(this.gl,t))this.textureHalfFloatExtension=x(this.gl,t);else if((0,s.OBj)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),ae(this.gl,r))this.colorBufferHalfFloatExtension=x(this.gl,r);else if((0,s.OBj)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",ae(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!ae(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=$e(this.gl),this.indexBuffer=Xe(this.gl),this.framebuffer=L(this.gl),this.textureConfig=b(this.gl,this.textureHalfFloatExtension)}get debug(){return(0,s.OBj)().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;y(e,(()=>e.finish())),y(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),y(e,(()=>e.deleteFramebuffer(this.framebuffer))),y(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),y(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),y(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),He(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),Ke(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),qe(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),it(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),ot(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),nt(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),et(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(U(this.gl,this.framebuffer),this.outputTexture=null),y(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>ct(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,o,i){return ut(this.gl,e,0,0,0,o,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return at(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=st(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if((0,s.OBj)().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,o=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(o,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=o}else(0,s.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,(0,s.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>lt(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=Ue(t));const n=_(t);return y(t,(()=>t.attachShader(n,this.vertexShader))),y(t,(()=>t.attachShader(n,e))),I(t,n),this.debug&&k(t,n),this.vertexAttrsAreBound||(this.setProgram(n),this.vertexAttrsAreBound=rt(t,this.program,this.vertexBuffer)),n}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&y(this.gl,(()=>this.gl.deleteProgram(e)))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&k(this.gl,this.program),y(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?F(this.gl,e,t):W(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),y(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Z(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,o]=g(t,n);this.setOutputMatrixTextureDriver(e,r,o)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&k(this.gl,this.program),$(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),y(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),y(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=x(this.gl,2===(0,s.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===(0,s.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===(0,s.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await s.D5U.repeatedTry((()=>this.disposed||this.isQueryAvailable(e,(0,s.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,(0,s.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||s.D5U.repeatedTry((()=>(this.pollItems(),0===this.itemsToPoll.length)))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),G(this.gl,e,this.framebuffer),this.debug&&$(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(G(this.gl,this.outputTexture,this.framebuffer),this.debug&&$(this.gl)):U(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;G(r,e,this.framebuffer),this.debug&&$(r),this.outputTexture=e,y(r,(()=>r.viewport(0,0,t,n))),y(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),y(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function pt(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&s.D5U.assert("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}function ht(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}function ft(e){return(t,n,r,o,i)=>{const a=s.Wap.assertAndGetBroadcastShape(t,n),c=a.length,u=s.D5U.computeStrides(a),l=s.D5U.sizeFromShape(a),d=s.D5U.getTypedArrayFromDType(i,l),p=t.length,h=n.length,f=s.D5U.computeStrides(t),m=s.D5U.computeStrides(n),g=s.Wap.getBroadcastDims(t,a),b=s.Wap.getBroadcastDims(n,a);if(g.length+b.length===0)for(let t=0;t<d.length;++t)d[t]=e(r[t%r.length],o[t%o.length]);else for(let t=0;t<d.length;++t){const n=s.D5U.indexToLoc(t,c,u),i=n.slice(-p);g.forEach((e=>i[e]=0));const a=s.D5U.locToIndex(i,p,f),l=n.slice(-h);b.forEach((e=>l[e]=0));const y=s.D5U.locToIndex(l,h,m);d[t]=e(r[a],o[y])}return[d,a]}}function mt(e){const{inputs:t,backend:n}=e,{real:r,imag:o}=t,i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,a=n.makeTensorInfo(r.shape,"complex64");return n.data.get(a.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(o.shape,"float32",s)},a}function gt(e,t,n="float32"){if("complex64"===n)return mt({inputs:{real:gt(e,t,"float32"),imag:gt(e,t,"float32")},backend:e});const r=s.D5U.makeZerosTypedArray(s.D5U.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function bt(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function yt(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dtype:i}=r;if("complex64"===i){if("complex64"===o.dtype)return bt({inputs:{x:o},backend:n});const e=gt(n,o.shape,o.dtype),t=yt({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),r=mt({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===o.dtype){const e=function(e){const{inputs:t,backend:n}=e,{input:r}=t,o=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,i)}({inputs:{input:o},backend:n}),t=yt({inputs:{x:e},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(e),t}if(!s.D5U.hasEncodingLoss(o.dtype,i)){const e=bt({inputs:{x:o},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:i}}if("int32"===i){const e=n.data.get(o.dataId).values,t=Int32Array.from(e);return n.makeTensorInfo(o.shape,"int32",t)}if("bool"===i){const e=n.data.get(o.dataId).values,t=s.D5U.toTypedArray([0],o.dtype),[r,i]=ft(((e,t)=>e!==t?1:0))(o.shape,[],e,t,"bool");return n.makeTensorInfo(i,"bool",r)}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${i}`)}function vt(e,t,n,r){return null==n?({inputs:n,backend:o})=>{const{a:i,b:a}=n,c=o;pt([i,a],e);const u=c.data.get(i.dataId).values,l=c.data.get(a.dataId).values,d="string"===i.dtype?s.Wap.fromUint8ToStringArray(u):u,p="string"===i.dtype?s.Wap.fromUint8ToStringArray(l):l,h=r||i.dtype,[f,m]=t(i.shape,a.shape,d,p,h);return c.makeTensorInfo(m,h,f)}:({inputs:e,backend:o})=>{const{a:i,b:s}=e,a=o;if("complex64"===i.dtype||"complex64"===s.dtype){const e=yt({inputs:{x:i},backend:a,attrs:{dtype:"complex64"}}),t=a.data.get(e.dataId),r=t.complexTensorInfos.real,o=t.complexTensorInfos.imag,c=a.data.get(r.dataId).values,u=a.data.get(o.dataId).values,l=yt({inputs:{x:s},backend:a,attrs:{dtype:"complex64"}}),d=a.data.get(l.dataId),p=d.complexTensorInfos.real,h=d.complexTensorInfos.imag,f=a.data.get(p.dataId).values,m=a.data.get(h.dataId).values,[g,b,y]=n(i.shape,s.shape,c,u,f,m),v=a.makeTensorInfo(y,"float32",g),w=a.makeTensorInfo(y,"float32",b),x=mt({inputs:{real:v,imag:w},backend:a});return a.disposeIntermediateTensorInfo(e),a.disposeIntermediateTensorInfo(l),a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(w),x}{const e=a.data.get(i.dataId).values,n=a.data.get(s.dataId).values,o=r||i.dtype,[c,u]=t(i.shape,s.shape,e,n,o);return a.makeTensorInfo(u,o,c)}}}function wt(e){return(t,n,r,o,i,a)=>{const c=s.Wap.assertAndGetBroadcastShape(t,n),u=s.D5U.sizeFromShape(c),l=c.length,d=s.D5U.computeStrides(c),p=s.D5U.getTypedArrayFromDType("float32",u),h=s.D5U.getTypedArrayFromDType("float32",u),f=s.Wap.getBroadcastDims(t,c),m=s.Wap.getBroadcastDims(n,c),g=s.Wap.mergeRealAndImagArrays(r,o),b=s.Wap.mergeRealAndImagArrays(i,a),y=t.length,v=s.D5U.computeStrides(t),w=n.length,x=s.D5U.computeStrides(n);if(f.length+m.length===0)for(let t=0;t<p.length;t++){const n=t%g.length,r=t%b.length,o=e(g[2*n],g[2*n+1],b[2*r],b[2*r+1]);p[t]=o.real,h[t]=o.imag}else for(let t=0;t<p.length;t++){const n=s.D5U.indexToLoc(t,l,d),r=n.slice(-y);f.forEach((e=>r[e]=0));const o=s.D5U.locToIndex(r,y,v),i=n.slice(-w);m.forEach((e=>i[e]=0));const a=s.D5U.locToIndex(i,w,x),c=e(g[2*o],g[2*o+1],b[2*a],b[2*a+1]);p[t]=c.real,h[t]=c.imag}return[p,h,c]}}s.SYM,s.Zz9,s.iJz,s.xJR,s.RFZ;const xt=ft(((e,t)=>e+t)),St=wt(((e,t,n,r)=>({real:e+n,imag:t+r})));function Et(e,t,n,r,o){const i=s.D5U.sizeFromShape(r),a=s.D5U.makeZerosTypedArray(o,n);for(let n=0;n<e.length;n++){const r=e[n];if(r<0)throw new Error("Input x must be non-negative!");r>=o||(a[r]+=i>0?t[n]:1)}return a}function Tt(e,t,n,r=!1){const o=e.shape[0],i=e.shape[1],a=(0,s.f3b)([o,n],t.dtype);for(let s=0;s<o;s++)for(let o=0;o<i;o++){const i=e.get(s,o);if(i<0)throw new Error("Input x must be non-negative!");i>=n||(r?a.set(1,s,i):t.size>0?a.set(a.get(s,i)+t.get(s,o),s,i):a.set(a.get(s,i)+1,s,i))}return a}function Ct(e){return(t,n,r)=>{const o=s.D5U.getTypedArrayFromDType(n,t.length);for(let n=0;n<t.length;++n)o[n]=e(t[n],r);return o}}function _t(e,t,n){return({inputs:r,attrs:o,backend:i})=>{const{x:a}=r;if(pt(a,e),"string"===a.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const c=i,u=c.data.get(a.dataId).values,l=s.D5U.sizeFromShape(a.shape),d=n||a.dtype,p=s.D5U.getArrayFromDType(d,l);for(let e=0;e<l;++e)p[e]=t(u[e],o);return c.makeTensorInfo(a.shape,d,p)}}function It(e,t,n){return({inputs:r,attrs:o,backend:i})=>{const{x:s}=r;if(pt(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const a=i,c=a.data.get(s.dataId).values,u=n||s.dtype,l=t(c,u,o);return a.makeTensorInfo(s.shape,u,l)}}vt(s.mm_,xt,St),s.mm_;const kt=Ct((e=>Math.ceil(e)));function Rt(e,t,n,r){const o=s.D5U.getArrayFromDType(n,s.D5U.sizeFromShape(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=s.D5U.sizeFromShape(e.shape);o.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const i="string"===n?s.Wap.fromUint8ToStringArray(e.vals):e.vals;let a=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)o[s+t]=i[a++]}r+=e.shape[1]}))}return o}It(s.gJX,kt),s.gJX;const Nt=ft(((e,t)=>e===t?1:0)),Ot=(vt(s.hdR,Nt,null,"bool"),s.hdR,Ct((e=>Math.exp(e)))),At=(It(s.NEP,Ot,"float32"),s.NEP,Ct((e=>Math.expm1(e)))),Dt=(It(s.Y0y,At),s.Y0y,Ct((e=>Math.floor(e))));function Lt(e,t,n,r,o,i,a,c,u){const l=(0,s.f3b)([r,i],n);for(let n=0;n<r;n++){const r=[];let s=0;for(let t=0;t<o;t++){const i=e[n*o+t];s+=i*a[t],r.push(i)}if(s<0||s>=u/i)throw new Error(`Invalid indices: ${r} does not index into ${c}`);for(let e=0;e<i;e++)l.values[n*i+e]=t.get(...t.indexToLoc(s*i+e))}return l}function Pt(e,t,n){const r=(0,s.f3b)(n,e.dtype);for(let n=0;n<r.size;++n){const o=r.indexToLoc(n).slice(),i=o[0],s=o[2],a=t.locToIndex([i,s]);o[2]=t.values[a];const c=e.locToIndex(o);0<=c&&c<e.values.length&&(r.values[n]=e.values[c])}return r}It(s.OR,Dt),s.OR;const Vt=ft(((e,t)=>e>t?1:0)),Mt=(vt(s.iZT,Vt,null,"bool"),s.iZT,ft(((e,t)=>e>=t?1:0))),Ft=(vt(s.Acj,Mt,null,"bool"),s.Acj,ft(((e,t)=>e<t?1:0))),Wt=(vt(s.vtC,Ft,null,"bool"),s.vtC,ft(((e,t)=>e<=t?1:0)));function Zt(e,t,n){const r=(t-e)/(n-1),o=s.D5U.makeZerosTypedArray(n,"float32");o[0]=e;for(let e=1;e<o.length;e++)o[e]=o[e-1]+r;return o}vt(s.CAk,Wt,null,"bool"),s.CAk;const Bt=Ct((e=>Math.log(e)));function Gt(e,t,n,r){const o=s.D5U.getTypedArrayFromDType(r,s.D5U.sizeFromShape(n));for(let n=0;n<o.length;++n){const r=n*t;let i=e[r];for(let n=0;n<t;++n){const t=e[r+n];(Number.isNaN(t)||t>i)&&(i=t)}o[n]=i}return o}It(s.ZbH,Bt),s.ZbH;const Ut=ft(((e,t)=>Math.max(e,t))),$t=(vt(s.BMI,Ut),s.BMI,ft(((e,t)=>Math.min(e,t)))),Xt=(vt(s.q8u,$t),s.q8u,ft(((e,t)=>e*t))),jt=wt(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})));function zt(e,t,n){const r=s.D5U.createScalarValue(-1,n);return Xt([],t,r,e,n)}vt(s.wYn,Xt,jt),s.wYn,s.kuV;const Ht=ft(((e,t)=>e!==t?1:0));function Yt(e,t,n,r,o){const i=t.length,a=s.D5U.sizeFromShape(t),c=s.D5U.computeStrides(t),u=s.D5U.computeStrides(o),l=s.D5U.getTypedArrayFromDType(n,s.D5U.sizeFromShape(o));for(let t=0;t<a;++t){const n=s.D5U.indexToLoc(t,i,c),o=new Array(n.length);for(let e=0;e<o.length;e++)o[e]=n[r[e]];l[s.D5U.locToIndex(o,i,u)]=e[t]}return l}function Kt(e,t,n,r){const[o,i]=s.Wap.computeOutAndReduceShapes(e,r),a=(0,s.x8V)(t,"int32"),c=s.D5U.makeZerosTypedArray(s.D5U.sizeFromShape(o),a),u=s.D5U.sizeFromShape(i);for(let e=0;e<c.length;++e){const t=e*u;let r=1;for(let e=0;e<u;++e)r*=n[t+e];c[e]=r}return{outVals:c,outShape:o,outDtype:a}}function Jt(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return s.D5U.makeZerosTypedArray(0,r);const o=Math.abs(Math.ceil((t-e)/n)),i=s.D5U.makeZerosTypedArray(o,r);t<e&&1===n&&(n=-1),i[0]=e;for(let e=1;e<i.length;e++)i[e]=i[e-1]+n;return i}vt(s.yQU,Ht,null,"bool"),s.yQU,s.G3Y,s.DlI;const qt=Ct((e=>1/Math.sqrt(e)));function Qt(e,t,n,r,o,i,a,c,u,l){const d=[r/o,o],p=e.values,h=t.values;if(0===r)return(0,s.f3b)(n,t.dtype);const f=(0,s.f3b)(d,t.dtype);"string"==typeof u||"number"==typeof u?f.values.fill(u):"boolean"==typeof u&&f.values.fill(+u);for(let e=0;e<i;e++){const i=[];let s=0;for(let t=0;t<a;t++){const n=p[e*a+t];i.push(n),s+=n*c[t]}if(s<0||s>=r/o)throw new Error(`Invalid indices: ${i} does not index into ${n}`);for(let n=0;n<o;n++)l?f.values[s*o+n]+=h[e*o+n]:f.values[s*o+n]=0===t.rank?h[0]:h[e*o+n]}return f}It(s.bV0,qt),s.bV0;const en=Ct((e=>1/(1+Math.exp(-e))));function tn(e,t,n,r,o){const i=s.kuN.isSliceContinous(r,t,n),a=s.D5U.sizeFromShape(n),c=s.D5U.computeStrides(r);if(i){const n=s.kuN.computeFlatOffset(t,c);return"string"===o?e.slice(n,n+a):e.subarray(n,n+a)}const u="string"===o?s.Wap.fromUint8ToStringArray(e):e,l=(0,s.f3b)(r,o,u),d=(0,s.f3b)(n,o);for(let e=0;e<d.size;++e){const n=d.indexToLoc(e),r=n.map(((e,n)=>e+t[n]));d.set(l.get(...r),...n)}return"string"===o?s.Wap.fromStringArrayToUint8(d.values):d.values}function nn(e,t,n,r,o,i,a){const c=t[0],u=i[0],l=new Array(u),d=new Array(c),p=t[1];if(0===u){if(0!==c)throw new Error(s.Wap.getSparseFillEmptyRowsIndicesDenseShapeMismatch(c));return[s.D5U.getArrayFromDType(n,0),[0,p],s.D5U.getArrayFromDType(o,0),l,d]}let h=!0,f=0;const m=new Array(u).fill(0);for(let t=0;t<c;++t){const n=e[t*p];if(n<0)throw new Error(s.Wap.getSparseFillEmptyRowsNegativeIndexErrorMessage(t,n));if(n>=u)throw new Error(s.Wap.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(t,n,u));++m[n],h=h&&n>=f,f=n}let g=!0;for(let e=0;e<u;++e){const t=0===m[e];l[e]=t,g=g&&!t,m[e]=Math.max(m[e],1),e>0&&(m[e]+=m[e-1])}if(g&&h){const t=e,n=r;for(let e=0;e<c;++e)d[e]=e;return[t,[c,p],n,l,d]}{const t=m[u-1],i=s.D5U.getArrayFromDType(n,t*p),h=s.D5U.getArrayFromDType(o,t),f=new Array(u).fill(0);for(let t=0;t<c;++t){const n=e[t*p],o=f[n],s=(0===n?0:m[n-1])+o;f[n]++;for(let n=0;n<p;++n)i[s*p+n]=e[t*p+n];h[s]=r[t],d[t]=s}for(let e=0;e<u;++e)if(0===f[e]){const t=0===e?0:m[e-1];i[t*p+0]=e;for(let e=1;e<p;++e)i[t*p+e]=0;h[t]=a}return[i,[t,p],h,l,d]}}function rn(e,t,n,r,o){const i=s.D5U.sizeFromShape(r),a=t[0],c=o.length,u=[];let l=1,d=-1;for(let e=0;e<c;++e){const t=o[e];if(-1===t){if(-1!==d)throw new Error(s.Wap.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(d,e));d=e,u.push(1)}else{if(t<0)throw new Error(s.Wap.getSparseReshapeNegativeOutputDimErrorMessage(e,t));l*=t,u.push(t)}}if(-1!==d){if(l<=0)throw new Error(s.Wap.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());const e=Math.trunc(i/l);if(l*e!==i)throw new Error(s.Wap.getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[d]=e}if(s.D5U.sizeFromShape(u)!==i)throw new Error(s.Wap.getSparseReshapeInputOutputMismatchErrorMessage(r,u));const p=r.length,h=[];if(p>0){h[p-1]=1;for(let e=p-2;e>=0;--e)h[e]=h[e+1]*r[e+1]}const f=[];if(c>0){f[c-1]=1;for(let e=c-2;e>=0;--e)f[e]=f[e+1]*u[e+1]}const m=s.D5U.getArrayFromDType(n,a*c);for(let t=0;t<a;++t){let n=0;for(let r=0;r<p;++r)n+=e[t*p+r]*h[r];for(let e=0;e<c;++e)m[t*c+e]=Math.trunc(n/f[e]),n%=f[e]}return[m,[a,c],u]}function on(e,t,n,r,o,i=!1,a=0){const c=r.length,u=[t[0],e.length/t[0]],l=u[1],d=c>0?o[c-1]+1:0;if(d<0)throw new Error(s.Wap.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());const p=t.slice();p[0]=d;const h=p.reduce(((e,t)=>e*t),1),f=s.D5U.getArrayFromDType(n,h);if(0===c)return d>0&&f.fill(a),[f,p];if(d<=0)throw new Error(s.Wap.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let m=0,g=1,b=0,y=o[m];for(;;){let t=0;if(g<c){if(t=o[g],y===t){++g;continue}if(y>=t)throw new Error(s.Wap.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=d)throw new Error(s.Wap.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,d));y>b&&f.fill(a,b*l,y*l);for(let t=m;t<g;++t){const n=r[t];if(n<0||n>=u[0])throw new Error(s.Wap.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(t,r[t],u[0]));for(let t=0;t<l;t++)f[y*l+t]+=e[n*l+t]}if(i)for(let e=0;e<l;e++)f[y*l+e]/=g-m;if(m=g,++g,b=y+1,y=t,g>c)break}return b<d&&f.fill(a,b*l,d*l),[f,p]}_t(s.a5O,(e=>1/(1+Math.exp(-e)))),s.a5O,s.p2w;const sn=Ct((e=>Math.sqrt(e))),an=(_t(s.FKq,(e=>Math.sqrt(e))),s.FKq,ft(((e,t)=>{const n=e-t;return n*n})));function cn(e,t,n,r){const o=(0,s.f3b)(e,t.dtype);for(let e=0;e<o.size;e++){const i=o.indexToLoc(e),s=new Array(i.length);for(let e=0;e<s.length;e++)s[e]=i[e]*n[e]+r[e];o.set(t.get(...s),...i)}return o}vt(s._tC,an),s._tC;class un{constructor(e,t,n,r,o,i){this.separator=s.D5U.encodeString(e),this.nGramWidths=t,this.leftPad=s.D5U.encodeString(n),this.rightPad=s.D5U.encodeString(r),this.padWidth=o,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,o,i){for(let s=0;s<o;++s){const a=this.getPadWidth(i),c=Math.max(0,a-s),u=Math.max(0,a-(o-(s+1))),l=i-(c+u),d=t+(c>0?0:s-a);let p=0;p+=c*this.leftPad.length;for(let t=0;t<l;++t)p+=e[d+t].length;p+=u*this.rightPad.length,p+=(c+u+l-1)*this.separator.length,n[r+s]=new Uint8Array(p);const h=n[r+s];let f=0;const m=e=>e.forEach((e=>h[f++]=e));for(let e=0;e<c;++e)m(this.leftPad),m(this.separator);for(let t=0;t<l-1;++t)m(e[d+t]),m(this.separator);if(l>0){m(e[d+l-1]);for(let e=0;e<u;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<u-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let o=1;o<r;++o){let r=t[o]>=e;if(r=r&&t[o]<=n,!r)throw new Error(`Invalid split value ${t[o]}, must be in [${e}, ${n}]`);e=t[o]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const o=r-1,i=s.D5U.getArrayFromDType("int32",r);if(0===n||0===r){const e=new Array(n);for(let e=0;e<=o;++e)i[e]=0;return[e,i]}i[0]=0;for(let e=1;e<=o;++e){const n=t[e]-t[e-1];let r=0;this.nGramWidths.forEach((e=>{r+=this.getNumNGrams(n,e)})),this.preserveShort&&n>0&&0===r&&(r=1),i[e]=i[e-1]+r}const a=new Array(i[o]);for(let n=0;n<o;++n){const r=t[n];let o=i[n];if(this.nGramWidths.forEach((i=>{const s=t[n+1]-t[n],c=this.getNumNGrams(s,i);this.createNGrams(e,r,a,o,c,i),o+=c})),this.preserveShort&&o===i[n]){const i=t[n+1]-t[n];if(0===i)continue;const s=i+2*this.padWidth,c=1;this.createNGrams(e,r,a,o,c,s)}}return[a,i]}}function ln(e,t,n,r,o,i,s,a){return new un(n,r,o,i,s,a).compute(e,t)}function dn(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const o=t[0];let i=e.indexOf(o);for(;-1!==i;){const t=e.subarray(0,i);n&&0===t.length||r.push(t),i=(e=e.subarray(i+1)).indexOf(o)}return void(n&&0===e.length||r.push(e))}let o=0;for(let i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){const t=e.subarray(o,i);n&&0===t.length||r.push(t),o=i+1}}function pn(e,t,n){const r=e.length,o=[];let i=0,a=0;const c=new Array(r);for(let s=0;s<r;++s){const r=o.length;dn(e[s],t,n,o);const u=o.length-r;c[s]=u,i+=u,a=Math.max(a,u)}const u=s.D5U.getArrayFromDType("int32",2*i),l=new Array(i),d=[r,a];let p=0;for(let e=0;e<r;++e)for(let t=0;t<c[e];++t)u[2*p]=e,u[2*p+1]=t,l[p]=o[p],++p;return[u,l,d]}function hn(e,t){const n=s.D5U.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=s.D5U.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}const fn=ft(((e,t)=>e-t)),mn=wt(((e,t,n,r)=>({real:e-n,imag:t-r})));function gn(e,t){const n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];const r=(0,s.f3b)(n,e.dtype);for(let t=0;t<r.values.length;++t){const n=r.indexToLoc(t),o=new Array(e.rank);for(let t=0;t<o.length;t++)o[t]=n[t]%e.shape[t];const i=e.locToIndex(o);r.values[t]=e.values[i]}return r}vt(s.Tr8,fn,mn),s.Tr8;const bn=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function yn(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,i=t-n+1,s=Math.log(o),a=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*a*(o-a)/o)*Math.sign(i-o/2);yn(e,t,Math.max(n,Math.floor(t-i*a/o+c)),Math.min(r,Math.floor(t+(o-i)*a/o+c)))}const o=e[t];let i=n,a=r;for(s.D5U.swap(e,n,t),bn(e[r],o)>0&&s.D5U.swap(e,n,r);i<a;){for(s.D5U.swap(e,i,a),i++,a--;bn(e[i],o)<0;)i+=1;for(;bn(e[a],o)>0;)a-=1}0===bn(e[n],o)?s.D5U.swap(e,n,a):(a+=1,s.D5U.swap(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}}function vn(e,t,n,r,o){const i=t[t.length-1],[a,c]=[e.length/i,i],u=s.D5U.getTypedArrayFromDType(n,a*r),l=s.D5U.getTypedArrayFromDType("int32",a*r);for(let t=0;t<a;t++){const n=t*c,i=e.subarray(n,n+c);let s=new Array(i.length);i.forEach(((e,t)=>s[t]={value:e,index:t})),r<s.length&&(yn(s,r),s=s.slice(0,r)),o&&s.sort(bn);const a=t*r,d=u.subarray(a,a+r),p=l.subarray(a,a+r);for(let e=0;e<r;e++)d[e]=s[e].value,p[e]=s[e].index}const d=t.slice();return d[d.length-1]=r,[(0,s.f3b)(d,n,u),(0,s.f3b)(d,"int32",l)]}function wn(e,t,n,r){const o=s.D5U.parseAxisParam(t,n)[0],i=[1,n[0],1];for(let e=0;e<o;e++)i[0]*=n[e];i[1]=n[o];for(let e=o+1;e<n.length;e++)i[2]*=n[e];const a={},c=new Int32Array(n[o]),u=new s.YDk(i,r,e),l=[],d=1===i[0]&&1===i[2];for(let t=0;t<n[o];t++){let n;if(d)n=e[t].toString();else{const e=[];for(let n=0;n<i[0];n++)for(let r=0;r<i[2];r++)e.push(u.get(n,t,r));n=e.join(",")}if(void 0!==a[n])c[t]=a[n];else{const e=Object.keys(a).length;a[n]=e,c[t]=e,l.push(t)}}const p=i.slice();p[1]=Object.keys(a).length;const h=new s.YDk(p,r);l.forEach(((e,t)=>{for(let n=0;n<i[0];n++)for(let r=0;r<i[2];r++)h.set(u.get(n,e,r),n,t,r)}));const f=n.slice();return f[o]=p[1],{outputValues:h.values,outputShape:f,indices:c}}const{addImpl:xn,bincountImpl:Sn,bincountReduceImpl:En,ceilImpl:Tn,concatImpl:Cn,equalImpl:_n,expImpl:In,expm1Impl:kn,floorImpl:Rn,gatherNdImpl:Nn,gatherV2Impl:On,greaterImpl:An,greaterEqualImpl:Dn,lessImpl:Ln,lessEqualImpl:Pn,linSpaceImpl:Vn,logImpl:Mn,maxImpl:Fn,maximumImpl:Wn,minimumImpl:Zn,multiplyImpl:Bn,negImpl:Gn,notEqualImpl:Un,prodImpl:$n,rangeImpl:Xn,rsqrtImpl:jn,scatterImpl:zn,sigmoidImpl:Hn,simpleAbsImpl:Yn,sliceImpl:Kn,sparseFillEmptyRowsImpl:Jn,sparseReshapeImpl:qn,sparseSegmentReductionImpl:Qn,sqrtImpl:er,stridedSliceImpl:tr,stringNGramsImpl:nr,stringSplitImpl:rr,stringToHashBucketFastImpl:or,subImpl:ir,tileImpl:sr,topKImpl:ar,transposeImpl:cr,uniqueImpl:ur}=i;function lr(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function dr(e,t){return 1===t?[e]:lr(e,t)}class pr{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Ve(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=dr("rc",this.rank),t=Ne(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),o=this.getOutput(e);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${n}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${o}));\n          }\n        }\n      `}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let o=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let t=2;t<this.rank;t++)o=`${e[e.length-1-t]},`+o;t.push(o)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${t[0]};\n      int c = ${t[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${n};\n      bool rEdge = rp1 >= ${r};\n    `}getOutput(e){const t=this.getSourceCoordsArr(e);return 1===this.rank?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),\n            cEdge ? 0. : getA(${t[1]}),\n            rEdge ? 0. : getA(${t[2]}),\n            rEdge || cEdge ? 0. : getA(${t[3]})`}}class hr{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Ve(this.outputShape.length);let n="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${e}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${e>0?"}":""}\n      `}var r,o;this.userCode=`\n      ${r=t,o=this.enableShapeUniforms,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${o?function(e,t,n="index"){const r=function(e,t){const n=e.length,r=e.map((e=>`${t}[${e}]`)),o=new Array(n-1);o[n-2]=r[n-1];for(let e=n-3;e>=0;--e)o[e]=`(${o[e+1]} * ${r[e+1]})`;return o}(e.map(((e,t)=>t)),t);return r.map(((t,o)=>`int ${e[o]} = ${n} / ${r[o]}; ${o===r.length-1?`int ${e[o+1]} = ${n} - ${e[o]} * ${r[o]}`:`index -= ${e[o]} * ${r[o]}`};`)).join("")}(["r","c","d"],"inputShape"):ge(["r","c","d"],r)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":ye(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class fr{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){const r=gr(t,n),o=br(e,r,n);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);const i=mr(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const e=this.freeTextures[o].shift();return this.usedTextures[o].push(e),e}let s;return r===h.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===h.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===h.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===h.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===h.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(s),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),s}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const o=gr(n,r),i=br(t,o,r);i in this.freeTextures||(this.freeTextures[i]=[]);const a=mr(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,r),c=(0,s.OBj)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==c&&this._numBytesAllocated>c?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[i],l=u.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(l,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function mr(e,t,n,r,o){const i=function(e,t){switch(e){case h.PACKED_2X2_FLOAT32:return Qe(t);case h.PACKED_2X2_FLOAT16:return tt(t);case h.UNPACKED_FLOAT32:return ze(t);case h.UNPACKED_FLOAT16:return Ye(t);case h.PACKED_4X1_UNSIGNED_BYTE:return Je(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,r);let s;if(o){const[t,n]=g(e[0],e[1]);s=t*n}else{const[t,n]=f(e[0],e[1]);s=t*n}const a=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}(n,i);return s*a}function gr(e,t){if(e===p.UPLOAD)return h.PACKED_2X2_FLOAT32;if(e===p.RENDER||null==e)return function(e){return(0,s.OBj)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?h.PACKED_2X2_FLOAT32:h.UNPACKED_FLOAT32:e?h.PACKED_2X2_FLOAT16:h.UNPACKED_FLOAT16}(t);if(e===p.DOWNLOAD||e===p.PIXELS)return h.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function br(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}class yr{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Ve(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const vr="return abs(x);",wr="return x;";class xr{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Ve(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class Sr{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Ve(this.outputShape.length);const t=e.length,n=dr("rc",t),r=Ne(t),o=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),i=n.slice(-2),s=t<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${o});\n\n        setOutput(getChannel(packedInput, ${s}));\n      }\n    `}}const Er=s.GDt.ZA,Tr={},Cr=(0,s.OBj)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class _r extends s.Zuw{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!(0,s.OBj)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof dt)t=e;else{const n=l((0,s.OBj)().getNumber("WEBGL_VERSION"),e);t=new dt(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=l((0,s.OBj)().getNumber("WEBGL_VERSION"));t=new dt(e),this.binaryCache=((n=(0,s.OBj)().getNumber("WEBGL_VERSION"))in Tr||(Tr[n]={}),Tr[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new fr(this.gpgpu),this.numMBBeforeWarning=null==(0,s.OBj)().global.screen?1024:(0,s.OBj)().global.screen.height*(0,s.OBj)().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new s.JLz(this,(0,s.SRH)())}nextDataId(){return _r.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,t,n){if(((0,s.OBj)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,s.OBj)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:p.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){this.texData.get(e).refCount++}decRef(e){this.texData.has(e)&&this.texData.get(e).refCount--}move(e,t,n,r,o){if((0,s.OBj)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:p.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:o,slice:i,shape:a,isPacked:c}=t;if(null!=i){let t;t=c?new xr(a,wr):new yr(a,wr);const n=this.runWebGLProgram(t,[{dataId:e,shape:a,dtype:r}],r),o=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),o}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const u=null!=this.activeTimers;let l,d;if(u&&(l=s.D5U.now()),"complex64"===r){const e=this.readSync(o.real.dataId),t=this.readSync(o.imag.dataId);d=s.Wap.mergeRealAndImagArrays(e,t)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=s.D5U.now()-l),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:o,dtype:i,complexTensorInfos:a,isPacked:c}=t;if(null!=o){let t;t=c?new xr(r,wr):new yr(r,wr);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:i}],i),o=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),o}if(null!=n)return this.convertAndCacheOnCPU(e);if((0,s.OBj)().getBool("DEBUG")&&!(0,s.OBj)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===(0,s.OBj)().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u,l,d=null;if("complex64"!==i&&(0,s.OBj)().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const t=this.texData.get(u.dataId);d=this.gpgpu.createBufferFromTexture(t.texture.texture,...m(r))}if(this.pendingRead.set(e,[]),"complex64"!==i&&await this.gpgpu.createAndWaitForFence(),"complex64"===i){const e=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),t=e[0],n=e[1];l=s.Wap.mergeRealAndImagArrays(t,n)}else if(null==d)l=this.getValuesFromTexture(e);else{const e=s.D5U.sizeFromShape(r);l=this.gpgpu.downloadFloat32MatrixFromBuffer(d,e)}if(null!=u&&this.disposeIntermediateTensorInfo(u),null!=d){const e=this.gpgpu.gl;y(e,(()=>e.deleteBuffer(d)))}const p=this.convertAndCacheOnCPU(e,l),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach((e=>e(p))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&(0,s.SRH)().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,t={}){const n=this.texData.get(e),{values:r,shape:o,slice:i,dtype:a,isPacked:c,texture:u}=n;if("complex64"===a)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){let n;n=c?new xr(o,wr):new yr(o,wr);const r=this.runWebGLProgram(n,[{dataId:e,shape:o,dtype:a}],a),i=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),i}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const l=this.decode(e,t.customTexShape),d=(0,s.SRH)().makeTensorFromTensorInfo(l),p=this.texData.get(l.dataId);return Object.assign({tensorRef:d},p.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>s.D5U.decodeString(e)));return(0,s.f3b)(e.shape,e.dtype,n)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,s.f3b)(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!v(n)){if((0,s.OBj)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),o=s.D5U.sizeFromShape(t);if((0,s.OBj)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),i=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...m(t)).subarray(0,o);return this.disposeIntermediateTensorInfo(n),i}const i=(0,s.OBj)().getBool("WEBGL_PACK")&&!0===r,a=i?K(t):t,c=i?new Ze(a):new We(a),u=this.runWebGLProgram(c,[{shape:a,dtype:n,dataId:e}],"float32"),l=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(l.texture.texture,l.texShape[0],l.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return(0,s.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const o=s.D5U.flatten(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),i=s.D5U.flatten(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if((0,s.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(o);a.kernelMs=s.D5U.sum(e),a.getExtraProfileInfo=()=>e.map(((e,t)=>({name:i[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return(0,s.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:s.D5U.now(),endMs:null}}endTimer(e){return(0,s.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=s.D5U.now(),e)}async getQueryTime(e){if((0,s.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:o,isPacked:i,slice:s}=this.texData.get(e),a=s&&s.origDataId||e,c=this.dataRefCount.get(a);c>1?this.dataRefCount.set(a,c-1):(this.dataRefCount.delete(a),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,o,i)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=Cr){return(0,s.OBj)().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&s.D5U.sizeFromShape(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){s.Wap.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return Er(e.shape,t)}packedUnaryOp(e,t,n){const r=new xr(e.shape,t),o=this.compileAndRun(r,[e],n);return(0,s.SRH)().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=Yn(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if((0,s.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,vr,e.dtype);const t=new yr(e.shape,vr),n=this.compileAndRun(t,[e]);return(0,s.SRH)().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&s.D5U.isString(n[0])){const o=n.map((e=>s.D5U.encodeString(e)));r=this.write(o,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return(0,s.SRH)().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new Sr(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new pr(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[H(e.shape),...Y(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},o=[H(t),...Y(t)],i=new hr(o,n),s=[n],a=this.runWebGLProgram(i,[r],e.dtype,s,!0);return{dataId:a.dataId,shape:t,dtype:a.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:o,dtype:i}=n;if(null!=t){const e=s.D5U.sizeFromShape(o),n=t[0]*t[1]*4;s.D5U.assert(e<=n,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const a=K(o);let c;c=r?new Fe(a):new Me(a);const u=[null!=t?t:m(a)];return{dtype:i,shape:o,dataId:this.runWebGLProgram(c,[{shape:a,dtype:i,dataId:e}],i,u,!0,t).dataId}}runWebGLProgram(e,t,n,r,o=!1,i){const a=this.makeTensorInfo(e.outputShape,n),c=this.texData.get(a.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===d.DENSE){const t=null!=i?i:m(e.outputShape);c.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(c.usage=e.outTexUsage),0===s.D5U.sizeFromShape(a.shape))return c.values=s.D5U.getTypedArrayFromDType(a.dtype,0),a;const u=[],l=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&s.D5U.sizeFromShape(t.shape)<=(0,s.OBj)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),u.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!Q(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),u.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(a.dataId);const p={shape:a.shape,texData:c,isUniform:!1},h=function(e,t,n){let r="";t.concat(n).forEach((t=>{const o=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const i=t.texData.texShape,{useSqueezeShape:a,uniformShape:c,keptDims:u}=Oe(e.packedInputs,t.shape,i);let l="",d="",p="";if(1===c.length&&e.packedInputs){const e=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];l=`${e[0]>1}_${e[1]>1}`}else if(2!==c.length||e.packedInputs){if(c.length>2&&!e.packedInputs){const e=s.D5U.computeStrides(c);p=`${e[0]===i[1]}_${e[e.length-1]===i[1]}`}}else d=`${c[0]>1}_${c[1]>1}`;const h=t.shape.length,f=2===c.length&&s.D5U.arraysEqual(t.shape,i),m=1===s.D5U.sizeFromShape(t.shape),g=s.Wap.getBroadcastDims(t.shape,n.shape),b=!e.packedInputs&&h===n.shape.length&&s.D5U.arraysEqual(i,n.texData.texShape),y=e.packedInputs||c.length>2?"":`${i[0]>1}_${i[1]>1}`;r+=`${h}_${b}_${a?u:""}_${c.length}_${m}_${g}_${f}_${l}_${d}_${p}_${y}_${o}`}else{const e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${o}`}}));const o=e.userCode;let i=e.constructor.name;return i+="_"+r+"_"+o+`${(0,s.OBj)().getNumber("WEBGL_VERSION")}`,i}(e,l,p),f=this.getAndSaveBinary(h,(()=>function(e,t,n,r){const o=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=o.map((e=>e.shapeInfo)),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},c=xe(o,a,t),u=E(e.gl,c),l=e.createProgram(u);return(0,s.OBj)().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:c,webGLProgram:l,inShapeInfos:i,outShapeInfo:a,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:c,webGLProgram:l,inShapeInfos:i,outShapeInfo:a},Le(e,t,l))}(this.gpgpu,e,l,p))),g=null!=this.activeTimers;let b;g&&(b=this.startTimer()),(0,s.OBj)().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,o){t.program.enableShapeUniforms||(Pe(t.inShapeInfos,n),Pe([t.outShapeInfo],[r]));const i=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,a[0],a[1]):e.setOutputMatrixTexture(i.texture,a[0],a[1]),e.setProgram(t.webGLProgram),1===(0,s.OBj)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach(((n,r)=>{const o=t.program.variableNames[r],i=t.uniformLocations[o],a=t.uniformLocations[`offset${o}`],c=t.inShapesLocations[`${o}Shape`],u=t.inTexShapesLocations[`${o}TexShape`];if(c){const{uniformShape:r}=Oe(t.program.packedInputs,n.shape,n.texData.texShape);switch(r.length){case 1:e.gl.uniform1iv(c,new Int32Array(r));break;case 2:e.gl.uniform2iv(c,new Int32Array(r));break;case 3:e.gl.uniform3iv(c,new Int32Array(r));break;case 4:e.gl.uniform4iv(c,new Int32Array(r))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=i)if(n.isUniform)if(s.D5U.sizeFromShape(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{let t=n.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(i,t)}else null!=n.texData.slice&&null!=a&&e.gl.uniform1i(a,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}));const c=t.outShapeLocation;if(c)switch(r.shape.length){case 1:e.gl.uniform1iv(c,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(c,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(c,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(c,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=s.D5U.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&o&&t.program.customUniforms.forEach(((n,r)=>{const i=t.customUniformLocations[r],s=o[r];if("float"===n.type)e.gl.uniform1fv(i,s);else if("vec2"===n.type)e.gl.uniform2fv(i,s);else if("vec3"===n.type)e.gl.uniform3fv(i,s);else if("vec4"===n.type)e.gl.uniform4fv(i,s);else if("int"===n.type)e.gl.uniform1iv(i,s);else if("ivec2"===n.type)e.gl.uniform2iv(i,s);else if("ivec3"===n.type)e.gl.uniform3iv(i,s);else{if("ivec4"!==n.type)throw Error(`uniform type ${n.type} is not supported yet.`);e.gl.uniform4iv(i,s)}})),e.executeProgram()}(this.gpgpu,f,l,p,r),u.forEach((e=>this.disposeIntermediateTensorInfo(e))),g&&(b=this.endTimer(b),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(b)}));const y=(0,s.OBj)().get("WEBGL_FLUSH_THRESHOLD");if(y>0){const e=s.D5U.now();e-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!(0,s.OBj)().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&!1===o){const e=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),e}return a}compileAndRun(e,t,n,r,o=!1){return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,o)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||((0,s.OBj)().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,s.lub)((()=>{if(!(0,s.OBj)().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=(0,s.OBj)().getBool("DEBUG");(0,s.OBj)().set("DEBUG",!1);const t=this.abs((0,s.iD$)(1e-8)).dataSync()[0];if((0,s.OBj)().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:o,texture:i,usage:a,isPacked:c}=t;if(null!=i)return;const u=null!=this.activeTimers;let l;u&&(l=s.D5U.now());let d=t.texShape;if(null==d&&(d=J(n,c),t.texShape=d),null!=o){const e=K(n);let i,a=d[1],h=d[0];const f=o instanceof Uint8Array||o instanceof Uint8ClampedArray;!c&&f||([a,h]=g(d[0],d[1])),i=c?new Ge(e,f):new Be(e,f);const m=f?[h,a]:d,b=this.makeTensorInfo(m,r),y=this.texData.get(b.dataId);y.usage=f?p.PIXELS:p.UPLOAD,y.texShape=m,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),a,h,o);const v=[[h,a]],w=!0,x=this.runWebGLProgram(i,[b],r,v,w),S=this.texData.get(x.dataId);t.texShape=S.texShape,t.isPacked=S.isPacked,t.usage=S.usage,(0,s.OBj)().get("ENGINE_COMPILE_ONLY")?this.disposeData(x.dataId):(t.texture=S.texture,t.values=null,this.texData.delete(x.dataId)),this.disposeIntermediateTensorInfo(b),u&&(this.uploadWaitMs+=s.D5U.now()-l)}else{const e=this.acquireTexture(d,a,r,c);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*s.D5U.bytesPerElement(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(e){throw e}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await(0,s.glt)(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw C(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:t,customUniformLocations:n,infLoc:r,nanLoc:o,inShapesLocations:i,inTexShapesLocations:s,outShapeLocation:a,outShapeStridesLocation:c,outTexShapeLocation:u}=Le(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=o,e.inShapesLocations=i,e.inTexShapesLocations=s,e.outShapeLocation=a,e.outShapeStridesLocation=c,e.outTexShapeLocation=u}}}_r.nextDataId=0;const Ir="3.18.0";function kr(){(0,s.OBj)().set("WEBGL_FORCE_F16_TEXTURES",!0)}s.C2$.isBrowser()&&(0,s.jqO)("webgl",(()=>new _r),2);const Rr={forceHalfFloat:kr};class Nr{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=s.Wap.assertAndGetBroadcastShape(t,n),this.enableShapeUniforms=Ve(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}class Or{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s.Wap.assertAndGetBroadcastShape(t,n);const o=this.outputShape.length;this.enableShapeUniforms=Ve(o);let i="";if(r)if(0===o||1===s.D5U.sizeFromShape(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i=`\n          ${Ne(o)} coords = getOutputCoords();\n        `,1===o)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=dr("coords",o);this.enableShapeUniforms?i+=`\n            bool nextRowOutOfBounds =\n              (${e[o-2]} + 1) >= outShape[${o} - 2];\n            bool nextColOutOfBounds =\n              (${e[o-1]} + 1) >= outShape[${o} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:i+=`\n            bool nextRowOutOfBounds =\n              (${e[o-2]} + 1) >= ${this.outputShape[o-2]};\n            bool nextColOutOfBounds =\n              (${e[o-1]} + 1) >= ${this.outputShape[o-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${i}\n\n        setOutput(result);\n      }\n    `}}function Ar(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Dr={kernelName:s.iJz,backendName:"webgl",kernelFunc:Ar};function Lr(e){const{inputs:t,backend:n}=e,{real:r,imag:o}=t,i=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(i.dataId),a=Ar({inputs:{x:r},backend:n}),c=Ar({inputs:{x:o},backend:n});return s.complexTensorInfos={real:a,imag:c},i}const Pr={kernelName:s.Zz9,backendName:"webgl",kernelFunc:Lr},Vr="return (a < 0.) ? b * a : a;",Mr="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",Fr={kernelName:s.J$2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:i}=r,a=n.makeTensorInfo([],"float32",s.D5U.createScalarValue(i,"float32")),c=(0,s.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Or(Mr,o.shape,a.shape):new Nr(Vr,o.shape,a.shape),u=n.runWebGLProgram(c,[o,a],"float32");return n.disposeIntermediateTensorInfo(a),u}},Wr="return (a < 0.) ? b * a : a;",Zr="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",Br={kernelName:s.o0g,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:o}=t,i=(0,s.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Or(Zr,r.shape,o.shape):new Nr(Wr,r.shape,o.shape);return n.runWebGLProgram(i,[r,o],"float32")}};function Gr({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:o,backend:i})=>{const{x:a}=o,c=i,u=r||a.dtype;if(c.shouldExecuteOnCPU([a])&&null!=n){const e=c.texData.get(a.dataId),t=n(e.values,u);return c.makeTensorInfo(a.shape,u,t)}let l;return l=(0,s.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new xr(a.shape,t):new yr(a.shape,e),c.runWebGLProgram(l,[a],u)}}function Ur({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:i}){return({inputs:a,backend:c})=>{const{a:u,b:l}=a,d=c;if(r&&"complex64"===u.dtype){const t=d.texData.get(u.dataId),n=d.texData.get(l.dataId),[r,o]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((t=>{const[n,r]=t,o={dataId:n.dataId,dtype:n.dtype,shape:u.shape},i={dataId:r.dataId,dtype:r.dtype,shape:l.shape},a=new Nr(e,u.shape,l.shape);return d.runWebGLProgram(a,[o,i],(0,s.x8V)(n.dtype,r.dtype))})),i=Lr({inputs:{real:r,imag:o},backend:d});return d.disposeIntermediateTensorInfo(r),d.disposeIntermediateTensorInfo(o),i}const p=i||(0,s.x8V)(u.dtype,l.dtype);if(("string"===u.dtype||"string"===l.dtype||d.shouldExecuteOnCPU([u,l]))&&null!=o){const e=d.texData.get(u.dataId).values,t=d.texData.get(l.dataId).values,n="string"===u.dtype?s.Wap.fromUint8ToStringArray(e):e,r="string"===u.dtype?s.Wap.fromUint8ToStringArray(t):t,[i,a]=o(u.shape,l.shape,n,r,p),c=d.makeTensorInfo(a,p);return d.texData.get(c.dataId).values=i,c}let h;return h=(0,s.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new Or(t,u.shape,l.shape,n):new Nr(e,u.shape,l.shape),d.runWebGLProgram(h,[u,l],p)}}function $r(e,t=!1){if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return t?Zr:Wr;if("leakyrelu"===e)return t?Mr:Vr;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}class Xr{constructor(e,t,n,r=!1,o=!1,i=!1,s=null,a=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=Ve(this.outputShape.length);const u=r?e[1]:e[2],l=Math.ceil(u/2),d=r?"i * 2, rc.y":"rc.y, i * 2",p=o?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";s&&(m=a?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${s}\n        }`:c?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${s}\n        }`:`vec4 activation(vec4 x) {\n          ${s}\n        }`,g="result = activation(result);");const b=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let y="rc.x",v="rc.x";e[0]<t[0]?y=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(v=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`\n      ${m}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${l}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${l}; i++) {\n          int batchA = ${y};\n          int batchB = ${v};\n          vec4 a = getMatrixA(batchA, ${d});\n          vec4 b = getMatrixB(batchB, ${p});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${h[0]} * ${f[0]});\n          result += (${h[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${b}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}}class jr{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=s.Wap.assertAndGetBroadcastShape(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const zr="return a * b;";function Hr(e){const{inputs:t,backend:n}=e,{a:r,b:o}=t,i=s.Wap.upcastType(r.dtype,o.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),i=new jr("return areal * breal - aimag * bimag;",r.shape,o.shape),s=new jr("return areal * bimag + aimag * breal;",r.shape,o.shape),a=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:o.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:o.shape}],c=n.runWebGLProgram(i,a,"float32"),u=n.runWebGLProgram(s,a,"float32"),l=Lr({inputs:{real:c,imag:u},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),l}if(n.shouldExecuteOnCPU([r,o])){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),[s,a]=Bn(r.shape,o.shape,e.values,t.values,i),c=n.makeTensorInfo(a,i);return n.texData.get(c.dataId).values=s,c}let a;return a=(0,s.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Or(zr,r.shape,o.shape):new Nr(zr,r.shape,o.shape),n.runWebGLProgram(a,[r,o],i)}const Yr={kernelName:s.wYn,backendName:"webgl",kernelFunc:Hr};function Kr(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:i}=r,a=n,c=s.D5U.sizeFromShape(o.shape),u=s.D5U.inferFromImplicitShape(i,c),l=s.D5U.sizeFromShape(u);s.D5U.assert(c===l,(()=>`The new shape (${u}) has ${l} elements and the old shape (${o.shape}) has ${c} elements. The new shape and old shape must have the same number of elements.`));const d=a.texData.get(o.dataId);return!d.isPacked||Q(o.shape,u)||null!==d.texture&&Q(d.shape,u)?(a.incRef(o.dataId),{dataId:o.dataId,shape:u,dtype:o.dtype}):function(e,t,n){const r=[H(e.shape),...Y(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},i=[H(t),...Y(t)],s=new hr(i,r),a=[r],c=n.runWebGLProgram(s,[o],e.dtype,a,!0);return{dataId:c.dataId,shape:t,dtype:c.dtype}}(o,u,a)}const Jr={kernelName:s.HZH,backendName:"webgl",kernelFunc:Kr};class qr{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:o,outSize:i}=e;this.outputShape=[r,i];const a=4*Math.floor(n/4),c=n%4;let u="sumValue += dot(values, ones);";if(null!=t){const e=1/t;u=`sumValue += dot(values * ${s.D5U.isInt(e)?e.toPrecision(2):e}, ones);`}let l="";o%n>0&&(l=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${l}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===c}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${u}\n        } else if (${2===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${u}\n        } else if (${3===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}class Qr{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:o,outSize:i}=e;this.outputShape=[r,i];let s="0.0",a="";"prod"===t?s="1.0":"min"===t?(s="1.0 / 1e-20",a="min"):"max"===t&&(s="-1.0 / 1e-20",a="max");let c=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?c="sumValue":"prod"===t?c="prodValue":"all"===t?c="allValue":"any"===t&&(c="anyValue");const u=4*Math.floor(n/4),l=n%4;let d=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${a}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${a}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,p="vec4";"all"===t?(s="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===t&&(s="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");let h="";o%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${s};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${h}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${s});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${d}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===l}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${2===l}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${3===l}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${d}\n        }\n        setOutput(${c});\n      }\n    `}}function eo(e,t,n,r){const o=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=s.Wap.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let i=e;for(let s=0;s<o.length;s++){const{inSize:a,windowSize:c,outSize:u}=o[s];let l,d;l="mean"===n?0===s?new qr({windowSize:c,inSize:a,batchSize:e.shape[0],outSize:u},a):new qr({windowSize:c,inSize:a,batchSize:e.shape[0],outSize:u}):new Qr({windowSize:c,inSize:a,batchSize:e.shape[0],outSize:u},n),d=i,i=r.runWebGLProgram(l,[i],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return i}class to{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;const r=Ne(this.rank),o=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let t=0;t<e.length;t++)r[e[t]]=n[t];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${o}));\n    }\n    `}}class no{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=Ne(this.rank),o=lr("rc",this.rank),i=new Array(this.rank);for(let e=0;e<t.length;e++)i[t[e]]=o[e];const s=`vec2(${i.slice(-2).join()})`,a=`++${o[this.rank-1]} < ${n[this.rank-1]}`,c=`getChannel(getA(${i.join()}), ${s})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${c};\n      if(${a}) {\n        result[1] = ${c};\n      }\n      --${o[this.rank-1]};\n      if(++${o[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${c};\n        if(${a}) {\n          result[3] = ${c};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function ro(e,t,n){const r=(0,s.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new no(e.shape,t):new to(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function oo(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r;return function(e,t,n,r){const o=t,i=e.shape.length,a=s.D5U.parseAxisParam(o,e.shape);let c=a;const u=s.Wap.getAxesPermutation(c,i),l=null!=u;let d=e;l&&(d=ro(e,u,r),c=s.Wap.getInnerMostAxes(c.length,i)),s.Wap.assertAxesAreInnerMostDims("sum",c,i);const[p,h]=s.Wap.computeOutAndReduceShapes(d.shape,c);let f=p;n&&(f=s.Wap.expandShapeToKeepDim(p,a));const m=s.D5U.sizeFromShape(h),g=Kr({inputs:{x:d},attrs:{shape:[s.D5U.sizeFromShape(e.shape)/m,m]},backend:r}),b=eo(g,(0,s.z4k)(e.dtype),"sum",r),y=Kr({inputs:{x:b},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(b),l&&r.disposeIntermediateTensorInfo(d),y}(o,i,a,n)}const io={kernelName:s.GBy,backendName:"webgl",kernelFunc:oo};function so(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{perm:i}=r,s=n,a=o.shape.length,c=new Array(a);for(let e=0;e<c.length;e++)c[e]=o.shape[i[e]];let u;if(s.shouldExecuteOnCPU([o])){const e=s.texData.get(o.dataId).values,t=cr(e,o.shape,o.dtype,i,c);u=s.makeTensorInfo(c,o.dtype),s.texData.get(u.dataId).values=t}else u=ro(o,i,s);return u}const ao={kernelName:s.G3Y,backendName:"webgl",kernelFunc:so};function co({a:e,b:t,transposeA:n,transposeB:r,backend:o,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:c=0,activation:u=null}){const l=e.shape.length,d=t.shape.length,p=n?e.shape[l-2]:e.shape[l-1],h=r?t.shape[d-1]:t.shape[d-2],f=n?e.shape[l-1]:e.shape[l-2],m=r?t.shape[d-2]:t.shape[d-1],g=e.shape.slice(0,-2),b=t.shape.slice(0,-2),y=s.D5U.sizeFromShape(g),v=s.D5U.sizeFromShape(b),w=s.Jyw.assertAndGetBroadcastShape(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([f,m]);s.D5U.assert(p===h,(()=>`Error in matMul: inner shapes (${p}) and (${h}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`));const x=n?[y,p,f]:[y,f,p],S=r?[v,m,h]:[v,h,m],E=Kr({inputs:{x:e},backend:o,attrs:{shape:x}}),T=Kr({inputs:{x:t},backend:o,attrs:{shape:S}}),C=[E,T],_=Math.max(y,v),I=n?E.shape[1]:E.shape[2],k=null!=i,R=null!=a,N="leakyrelu"===u,O=null!=u?$r(u,!0):null;let A;if((1===f||1===m)&&I>1e3&&!1===(k||R||N||null!=O)){let e=E,t=T;n&&(e=so({inputs:{x:E},backend:o,attrs:{perm:[0,2,1]}}),C.push(e)),r&&(t=so({inputs:{x:T},backend:o,attrs:{perm:[0,2,1]}}),C.push(t));const i=1===m;let s=e;1!==m&&(s=Kr({inputs:{x:e},backend:o,attrs:{shape:[_,I,1]}}),C.push(s));const a=1===m?2:1;let c=t;i&&(c=Kr({inputs:{x:t},backend:o,attrs:{shape:[_,1,I]}}),C.push(c));const u=Hr({inputs:{a:s,b:c},backend:o});A=oo({inputs:{x:u},backend:o,attrs:{axis:a,keepDims:!0}}),C.push(u)}else{const u=(0,s.x8V)(e.dtype,t.dtype),l=new Xr(x,S,[_,f,m],n,r,k,O,R,N),d=[E,T];if(null!=i&&d.push(i),R&&d.push(a),N){const e=o.makeTensorInfo([],"float32",s.D5U.createScalarValue(c,"float32"));d.push(e),C.push(e)}A=o.runWebGLProgram(l,d,u)}const D=Kr({inputs:{x:A},backend:o,attrs:{shape:w}});C.push(A);for(const e of C)o.disposeIntermediateTensorInfo(e);return D}const uo={kernelName:s.usg,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:i,bias:s,preluActivationWeights:a}=t,{transposeA:c,transposeB:u,activation:l,leakyreluAlpha:d}=r;return co({a:o,b:i,transposeA:c,transposeB:u,backend:n,bias:s,preluActivationWeights:a,leakyreluAlpha:d,activation:l})}},lo="return abs(x);",po={kernelName:s.SYM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=Yn(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let o;return o=(0,s.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new xr(r.shape,lo):new yr(r.shape,lo),n.runWebGLProgram(o,[r],r.dtype)}},ho=Gr({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),fo={kernelName:s.VGw,backendName:"webgl",kernelFunc:ho},mo=Gr({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),go={kernelName:s.SpW,backendName:"webgl",kernelFunc:mo},bo="return a + b;",yo=Ur({opSnippet:bo,packedOpSnippet:bo,supportsComplex:!0,cpuKernelImpl:xn}),vo={kernelName:s.mm_,backendName:"webgl",kernelFunc:yo};class wo{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`float v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class xo{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}const So={kernelName:s.Xze,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,o=n;if(1===o.length)return Ar({inputs:{x:o[0]},backend:r});if(o.length>(0,s.OBj)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(o.length/2),n=e({inputs:o.slice(0,t),backend:r}),i=e({inputs:o.slice(t),backend:r});return e({inputs:[n,i],backend:r})}const i=o.map((e=>e.dtype)).reduce(((e,t)=>(0,s.x8V)(e,t))),a=o.map((e=>e.shape)),c=(0,s.OBj)().getBool("WEBGL_PACK")?new xo(o[0].shape,a):new wo(o[0].shape,a);return r.runWebGLProgram(c,o,i)}},Eo={kernelName:s.oT6,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r,c=o.shape.length,u=s.D5U.parseAxisParam(i,o.shape);let l=u;const d=s.Wap.getAxesPermutation(l,c);let p=o;null!=d&&(p=so({inputs:{x:o},backend:n,attrs:{perm:d}}),l=s.Wap.getInnerMostAxes(l.length,c)),s.Wap.assertAxesAreInnerMostDims("all",l,c);const[h,f]=s.Wap.computeOutAndReduceShapes(p.shape,l),m=Kr({inputs:{x:p},backend:n,attrs:{shape:[-1,s.D5U.sizeFromShape(f)]}}),g=eo(m,m.dtype,"all",n);let b;return b=Kr(a?{inputs:{x:g},backend:n,attrs:{shape:s.Wap.expandShapeToKeepDim(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=d&&n.disposeIntermediateTensorInfo(p),b}},To={kernelName:s.IKK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r,c=o.shape.length,u=s.D5U.parseAxisParam(i,o.shape);let l=u;const d=s.Wap.getAxesPermutation(l,c);let p=o;null!=d&&(p=so({inputs:{x:o},backend:n,attrs:{perm:d}}),l=s.Wap.getInnerMostAxes(l.length,c)),s.Wap.assertAxesAreInnerMostDims("any",l,c);const[h,f]=s.Wap.computeOutAndReduceShapes(p.shape,l),m=Kr({inputs:{x:p},backend:n,attrs:{shape:[-1,s.D5U.sizeFromShape(f)]}}),g=eo(m,m.dtype,"any",n);let b;return b=Kr(a?{inputs:{x:g},backend:n,attrs:{shape:s.Wap.expandShapeToKeepDim(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=d&&n.disposeIntermediateTensorInfo(p),b}};class Co{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:o,outSize:i}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];const s="max"===t?">":"<",a=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${a};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${s} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class _o{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,s.D5U.assert(e.length>2,(()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`));const o=e[e.length-1],i=Math.ceil(o/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");const a=this.outputShape,c=a.length,u=Ne(c),l=dr("coords",c);let d,p;if(1===i){p=c+1;const e=Ne(p);d=`\n        ${e} sourceLocR = ${e}(${l.join()}, 0);\n        ++${l[c-1]};\n        ${e} sourceLocG = ${e}(${l.join()}, 0);\n        ++${l[c-2]};\n        ${e} sourceLocA = ${e}(${l.join()}, 0);\n        --${l[c-1]};\n        ${e} sourceLocB = ${e}(${l.join()}, 0);\n        --${l[c-2]};`}else p=c,d=`\n        ${u} sourceLocR = coords;\n        ++${l[c-1]};\n        ${u} sourceLocG = coords;\n        ++${l[c-2]};\n        ${u} sourceLocA = coords;\n        --${l[c-1]};\n        ${u} sourceLocB = coords;\n        --${l[c-2]};`;const h=["x","y","z","w","u","v"].slice(0,p),f="."+h[p-1],m=h.map((e=>"int "+e)),g=dr("sourceLocR",p-1).concat("inIdx.r"),b=dr("sourceLocG",p-1).concat("inIdx.g"),y=dr("sourceLocB",p-1).concat("inIdx.b"),v=dr("sourceLocA",p-1).concat("inIdx.a"),w="max"===n?"greaterThan":"lessThan",x=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${b.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${v.join()})));`,S=`vec4(\n            getAChannel(${g.join()}),\n            hasNextCol ? getAChannel(${b.join()}) : 0.,\n            hasNextRow ? getAChannel(${y.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,E=r?"":`\n      float getBestIndicesAChannel(${m.join()}) {\n        return getChannel(getBestIndicesA(${h.join()}),\n                                          vec2(${h.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${m.join()}) {\n        return getChannel(getA(${h.join()}),\n                               vec2(${h.slice(-2).join()}));\n      }\n      ${E}\n      void main() {\n        ${u} coords = getOutputCoords();\n        bool hasNextCol = ${l[c-1]} < ${a[c-1]-1};\n        bool hasNextRow = ${l[c-2]} < ${a[c-2]-1};\n        ${d}\n        ivec4 srcIdx = ivec4(sourceLocR${f}, sourceLocG${f},\n          sourceLocB${f}, sourceLocA${f}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${S};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${x}\n          vec4 candidate = ${S};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function Io(e,t,n,r=null){let o=t.shape[0],i=t.shape[1];null!=r&&(o=r.shape[0],i=r.shape[1]);const a=s.Wap.computeOptimalWindowSize(i),c={windowSize:a,inSize:i,batchSize:o,outSize:Math.ceil(i/a)},u=new Co(c,n,null==r),l=[t];null!=r&&l.push(r);const d=e.runWebGLProgram(u,l,"int32");if(1===d.shape[1])return d;const p=Io(e,t,n,d);return e.disposeIntermediateTensorInfo(d),p}function ko(e,t,n,r=null){const o=null!=r?r.shape:t.shape,i=o[o.length-1],a=s.Wap.computeOptimalWindowSize(i),c=new _o(o,a,n,null==r),u=null==r?[t]:[t,r],l=e.runWebGLProgram(c,u,"int32");if(l.shape.length===t.shape.length){const r=ko(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function Ro(e,t,n,r){const o=[n];if(s.Wap.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!(0,s.OBj)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],i=e.texData.get(t.dataId);let a=t;null!==i&&i.isPacked&&(a=e.unpackTensor(t),n.push(a));const[c,u]=s.Wap.computeOutAndReduceShapes(a.shape,o),l=s.D5U.sizeFromShape(u),d=Kr({inputs:{x:a},backend:e,attrs:{shape:[-1,l]}});n.push(d);const p=Io(e,d,r);n.push(p);const h=Kr({inputs:{x:p},backend:e,attrs:{shape:c}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),h}return ko(e,t,r)}const No={kernelName:s.sJF,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i}=r;let a=s.D5U.parseAxisParam(i,o.shape);const c=s.Wap.getAxesPermutation(a,o.shape.length);let u=o;const l=[];null!=c&&(u=so({inputs:{x:o},backend:n,attrs:{perm:c}}),l.push(u),a=s.Wap.getInnerMostAxes(a.length,u.shape.length)),s.Wap.assertAxesAreInnerMostDims("argMax",[a[0]],u.shape.length);const d=Ro(n,u,a[0],"max");return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}},Oo={kernelName:s.aJk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i}=r;let a=s.D5U.parseAxisParam(i,o.shape);const c=s.Wap.getAxesPermutation(a,o.shape.length);let u=o;const l=[];null!=c&&(u=so({inputs:{x:o},backend:n,attrs:{perm:c}}),l.push(u),a=s.Wap.getInnerMostAxes(a.length,u.shape.length)),s.Wap.assertAxesAreInnerMostDims("argMin",[a[0]],u.shape.length);const d=Ro(n,u,a[0],"min");return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}},Ao=Gr({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),Do={kernelName:s.M2y,backendName:"webgl",kernelFunc:Ao},Lo=Gr({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),Po={kernelName:s.qw7,backendName:"webgl",kernelFunc:Lo},Vo=Gr({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),Mo={kernelName:s.jMg,backendName:"webgl",kernelFunc:Vo},Fo=Ur({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),Wo={kernelName:s.QCc,backendName:"webgl",kernelFunc:Fo},Zo=Gr({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),Bo={kernelName:s.Oyi,backendName:"webgl",kernelFunc:Zo};class Go{constructor(e,t,n,r=!1,o=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,s=e.strideHeight,a=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let b="0.0";if(f||(b="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${s}, ${a});\n        const ivec2 pads = ivec2(${p}, ${h});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${l};\n              wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?o?m:g:`wR * ${d} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let y=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(y="avgValue / count");const v=4*Math.floor(i/4),w=i%4,x=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${s}, ${a});\n      const ivec2 pads = ivec2(${p}, ${h});\n      const float initializationValue = ${b};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${b});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${l};\n            wR += ${c}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${v}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${x}\n          }\n\n          int xC = xCCorner + ${v};\n          if (${1===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${2===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${3===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${x}\n          }\n        }\n        setOutput(${y});\n      }\n    `}}class Uo{constructor(e,t,n,r=!1,o=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,s=e.strideDepth,a=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,d=e.dilationWidth,p=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;const y="avg"===t;let v="0.0";if(y||(v="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${s}, ${a}, ${c});\n        const ivec3 pads = ivec3(${m}, ${g}, ${b});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${p};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${h};\n                wR += ${l}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${d}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${t} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?o?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${h} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let w=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(w="avgValue / count");const x=4*Math.floor(i/4),S=i%4,E=`\n      if (${y}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${s}, ${a}, ${c});\n      const ivec3 pads = ivec3(${m}, ${g}, ${b});\n      const float initializationValue = ${v};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${v});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${p};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h};\n            wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${x}; wC += 4) {\n              int xC = xCCorner + wC * ${d};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${d}, ch)\n              );\n\n              ${E}\n            }\n\n            int xC = xCCorner + ${x};\n            if (${1===S}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${E}\n            } else if (${2===S}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${E}\n            } else if (${3===S}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\n                initializationValue\n              );\n\n              ${E}\n            }\n          }\n          setOutput(${w});\n        }\n      }\n    `}}const $o={kernelName:s.JhU,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;he(o,"avgPool");const{filterSize:i,strides:a,pad:c,dimRoundingMode:u}=r;s.D5U.assert(s.Wap.eitherStridesOrDilationsAreOne(a,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`));const l=s.Wap.computePool2DInfo(o.shape,i,a,1,c,u);if(1===l.filterWidth&&1===l.filterHeight&&s.D5U.arraysEqual(l.inShape,l.outShape))return Ar({inputs:{x:o},backend:n});const d=new Go(l,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}},Xo={kernelName:s._k9,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:i,strides:a,pad:c,dimRoundingMode:u,dataFormat:l}=r,d=s.Wap.computePool3DInfo(o.shape,i,a,[1,1,1],c,u,l),p=new Uo(d,"avg",!1);return n.runWebGLProgram(p,[o],"float32")}};class jo{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,s=e.dilationWidth,a=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=a-1-e.padInfo.top,l=c-1-e.padInfo.left,d=1/(t*n);this.userCode=`\n      const ivec2 pads = ivec2(${u}, ${l});\n      const float avgMultiplier = float(${d});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${a};\n            wR += ${i}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${c};\n            wC+= ${s}) {\n            float dyC = float(dyCCorner + wC) / ${o}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class zo{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,s=e.strideWidth,a=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,h=l-1-e.padInfo.front,f=d-1-e.padInfo.top,m=p-1-e.padInfo.left,g=1/(t*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${h}, ${f}, ${m});\n      const float avgMultiplier = float(${g});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${l};\n            wD += ${a}) {\n          float dyD = float(dyDCorner + wD) / ${o}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${d};\n              wR += ${c}) {\n            float dyR = float(dyRCorner + wR) / ${i}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${p};\n                wC += ${u}) {\n              float dyC = float(dyCCorner + wC) / ${s}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const Ho={kernelName:s.IMb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,a=i,{filterSize:c,strides:u,pad:l,dimRoundingMode:d}=r,p=s.Wap.computePool3DInfo(a.shape,c,u,[1,1,1],l,d),h=new zo(p);return n.runWebGLProgram(h,[o],a.dtype)}},Yo={kernelName:s.ROF,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,a=i;he([o,i],"avgPoolGrad");const{filterSize:c,strides:u,pad:l}=r,d=s.Wap.computePool2DInfo(a.shape,c,u,1,l),p=new jo(d);return n.runWebGLProgram(p,[o],a.dtype)}},Ko={kernelName:s.XLW,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:i}=t,{transposeA:s,transposeB:a}=r;return co({a:o,b:i,transposeA:s,transposeB:a,backend:n})}};class Jo{constructor(e,t,n,r,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],s.Wap.assertAndGetBroadcastShape(e,t),s.Wap.assertAndGetBroadcastShape(e,n);let a="0.0";null!=r&&(s.Wap.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let c="1.0";null!=o&&(s.Wap.assertAndGetBroadcastShape(e,o),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${a};\n        float scale = ${c};\n        float inv = scale * inversesqrt(variance + float(${i}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class qo{constructor(e,t,n,r,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],s.Wap.assertAndGetBroadcastShape(e,t),s.Wap.assertAndGetBroadcastShape(e,n);let a="vec4(0.0)";null!=r&&(s.Wap.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let c="vec4(1.0)";null!=o&&(s.Wap.assertAndGetBroadcastShape(e,o),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${a};\n        vec4 scale = ${c};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${i}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const Qo={kernelName:s.sHE,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,mean:o,variance:i,offset:a,scale:c}=e;s.D5U.assert(o.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),s.D5U.assert(null==a||o.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),s.D5U.assert(null==c||o.shape.length===c.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:u}=n;null==u&&(u=.001);const l=[r,o,i];let d=null;null!=a&&(d=a.shape,l.push(a));let p=null;null!=c&&(p=c.shape,l.push(c));const h=(0,s.OBj)().getBool("WEBGL_PACK_NORMALIZATION")?new qo(r.shape,o.shape,i.shape,d,p,u):new Jo(r.shape,o.shape,i.shape,d,p,u);return t.runWebGLProgram(h,l,l[0].dtype)}};class ei{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=Ne(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return ti.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let r;r=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${e.map(((e,t)=>`sourceLoc.${ti[t]} = start[${t}] + coords.${ti[t]};`)).join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${r}\n        setOutput(getSource(${n}));\n      }\n    `}}const ti=["x","y","z","w","u","v"];class ni{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=Ne(this.rank),n=dr("coords",this.rank),r=dr("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,i=`getChannel(getSource(${r.join()}), ${o})`,s=`\n      result.x = ${i};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${i};\n        --${r[this.rank-1]};\n      }\n    `,a=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${i};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${i};\n        }\n      }\n    `,c=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`)).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${c}\n        vec4 result = vec4(0.);\n        ${s}\n        ${a}\n        setOutput(result);\n      }\n    `}}function ri(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:i,size:a}=r,[c,u]=s.kuN.parseSliceParams(o,i,a);if(s.kuN.assertParamsValid(o,c,u),0===s.D5U.sizeFromShape(u))return n.makeTensorInfo(u,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||"string"===o.dtype){const e=n.texData.get(o.dataId),t=Kn(e.values,c,u,o.shape,o.dtype);return n.makeTensorInfo(u,o.dtype,t)}const{isPacked:l}=n.texData.get(o.dataId),d=s.kuN.isSliceContinous(o.shape,c,u);if(l||!d){const e=(0,s.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ni(u):new ei(u),t=[c];return n.runWebGLProgram(e,[o],o.dtype,t)}return n.uploadToGPU(o.dataId),function(e,t,n,r){const o=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),a=r.texData.get(i.dataId);Object.assign(a,o),a.refCount=1,a.shape=n,a.dtype=e.dtype;let c=s.kuN.computeFlatOffset(t,s.D5U.computeStrides(e.shape));o.slice&&(c+=o.slice.flatOffset),a.slice={flatOffset:c,origDataId:o.slice&&o.slice.origDataId||e.dataId};const u=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,u+1),i}(o,c,u,n)}const oi={kernelName:s.p2w,backendName:"webgl",kernelFunc:ri},ii={kernelName:s.zws,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:i,crops:a}=r;s.D5U.assert(o.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const c=i.reduce(((e,t)=>e*t)),u=s.Wap.getReshaped(o.shape,i,c),l=s.Wap.getPermuted(u.length,i.length),d=s.Wap.getReshapedPermuted(o.shape,i,c),p=s.Wap.getSliceBeginCoords(a,i.length),h=s.Wap.getSliceSize(d,a,i.length),f=[],m=Kr({inputs:{x:o},backend:n,attrs:{shape:u}}),g=so({inputs:{x:m},backend:n,attrs:{perm:l}}),b=Kr({inputs:{x:g},backend:n,attrs:{shape:d}}),y=ri({inputs:{x:b},backend:n,attrs:{begin:p,size:h}});return f.push(m),f.push(g),f.push(b),f.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}},si={kernelName:s.zvY,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:i}=t,{size:s}=r,a=n.readSync(o.dataId),c=n.readSync(i.dataId),u=Sn(a,c,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,u)}},ai={kernelName:s.eEB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:o}=t,i=n.readSync(r.dataId),a=n.readSync(o.dataId),c=s.Wap.assertAndGetBroadcastShape(Array.from(i),Array.from(a));return n.makeTensorInfo([c.length],"int32",Int32Array.from(c))}},ci=Ur({opSnippet:"return float(a != b);",cpuKernelImpl:Un,dtype:"bool"}),ui={kernelName:s.yQU,backendName:"webgl",kernelFunc:ci};function li(e){const{inputs:t,backend:n}=e,{input:r}=t;return Ar({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const di={kernelName:s.xJR,backendName:"webgl",kernelFunc:li},pi={kernelName:s.RFZ,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:o}=t,{x:i}=n,{dtype:a}=o;if("complex64"===a){if("complex64"===i.dtype)return Ar({inputs:{x:i},backend:r});const t=s.lls(i.shape),n=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),o=Lr({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),o}if("complex64"===i.dtype){const t=li({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:a}});return r.disposeIntermediateTensorInfo(t),n}if(!s.D5U.hasEncodingLoss(i.dtype,a)){const e=Ar({inputs:{x:i},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:a}}if("int32"===a)return function(e,t){const n=new yr(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===a){const e=r.makeTensorInfo([],"bool",s.D5U.getTypedArrayFromDType("bool",1)),t=ci({inputs:{a:i,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${a}`)}},hi="return ceil(x);",fi=Gr({opSnippet:hi,packedOpSnippet:hi,cpuKernelImpl:Tn}),mi={kernelName:s.gJX,backendName:"webgl",kernelFunc:fi};class gi{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class bi{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const yi={kernelName:s.xnO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{clipValueMin:i,clipValueMax:a}=r;let c;c=(0,s.OBj)().getBool("WEBGL_PACK_CLIP")?new bi(o.shape):new gi(o.shape);const u=[[i],[a]];return n.runWebGLProgram(c,[o],o.dtype,u)}};class vi{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function wi(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const xi={kernelName:s.yj2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=n.texData.get(r.dataId),i=new vi(r.shape),s=[wi(r,o.complexTensorInfos.real),wi(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(i,s,s[0].dtype)}};class Si{constructor(e){this.outputShape=[],this.outputShape=s.Wap.computeOutShape(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let e=1;e<t.length;e++){const r=t[e-1];n.push(`else if (yC < ${t[e]}) setOutput(getT${e}(yR, yC-${r}));`)}const r=t.length,o=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${o}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class Ei{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=s.Wap.computeOutShape(e,t);const n=this.outputShape,r=n.length,o=Ne(r),i=dr("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>`T${t}`));const c=new Array(e.length-1);c[0]=e[0][t];for(let n=1;n<c.length;n++)c[n]=c[n-1]+e[n][t];const u=a[t],l=a.slice(-2),d=a.join();let p=`if (${u} < ${c[0]}) {\n        return getChannel(\n            getT0(${d}), vec2(${l.join()}));\n        }`;for(let e=1;e<c.length;e++){const t=c[e-1];p+=`\n        if (${u} < ${c[e]}  && ${u} >= ${c[e-1]}) {\n          return getChannel(\n            getT${e}(${Ti(a,u,t)}),\n            vec2(${Ti(l,u,t)}));\n        }`}const h=c.length,f=c[c.length-1];p+=`\n        return getChannel(\n          getT${h}(${Ti(a,u,f)}),\n          vec2(${Ti(l,u,f)}));`,this.userCode=`\n      float getValue(${a.map((e=>"int "+e))}) {\n        ${p}\n      }\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${i}), 0., 0., 0.);\n\n        ${i[r-1]} = ${i[r-1]} + 1;\n        if (${i[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${i});\n        }\n\n        ${i[r-2]} = ${i[r-2]} + 1;\n        if (${i[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${i});\n        }\n\n        ${i[r-1]} = ${i[r-1]} - 1;\n        if (${i[r-2]} < ${n[r-2]} &&\n            ${i[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${i});\n        }\n        setOutput(result);\n      }\n    `}}function Ti(e,t,n){const r=e.indexOf(t);return e.map(((e,t)=>t===r?`${e} - ${n}`:e)).join()}function Ci(e){const{inputs:t,backend:n}=e,{input:r}=t;return Ar({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const _i={kernelName:s.J_u,backendName:"webgl",kernelFunc:Ci};function Ii(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>li({inputs:{input:e},backend:n}))),o=e.map((e=>Ci({inputs:{input:e},backend:n}))),i=Ii(r,t,n),s=Ii(o,t,n),a=Lr({inputs:{real:i,imag:s},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),o.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),a}let o=n.shouldExecuteOnCPU(e);if("string"===r&&(o=!0),o){const o=e.map((e=>{const r=s.D5U.sizeFromShape(e.shape.slice(t));return Kr({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),i=o.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),a=s.Wap.computeOutShape(o.map((e=>e.shape)),1),c=1===o[0].shape[0],u=Cn(i,a,r,c),l=s.Wap.computeOutShape(e.map((e=>e.shape)),t),d=n.makeTensorInfo(l,r,u);return o.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}if(e.length>(0,s.OBj)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const r=Math.floor(e.length/2),o=Ii(e.slice(0,r),t,n),i=Ii(e.slice(r),t,n),s=Ii([o,i],t,n);return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),s}if((0,s.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const o=new Ei(e.map((e=>e.shape)),t);return n.runWebGLProgram(o,e,r)}const{tensors2D:i,outShape:a}=function(e,t,n){const r=s.Wap.computeOutShape(e.map((e=>e.shape)),t);return{tensors2D:e.map((e=>Kr({inputs:{x:e},attrs:{shape:[-1,s.D5U.sizeFromShape(e.shape.slice(t))]},backend:n}))),outShape:r}}(e,t,n),c=new Si(i.map((e=>e.shape))),u=n.runWebGLProgram(c,i,r);i.forEach((e=>n.disposeIntermediateTensorInfo(e)));const l=Kr({inputs:{x:u},attrs:{shape:a},backend:n});return n.disposeIntermediateTensorInfo(u),l}function ki(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,i=s.D5U.parseAxisParam(o,t[0].shape)[0],a=s.Wap.computeOutShape(t.map((e=>e.shape)),i);if(0===s.D5U.sizeFromShape(a))return n.makeTensorInfo(a,t[0].dtype,[]);const c=t.filter((e=>s.D5U.sizeFromShape(e.shape)>0));if(1===c.length)return Ar({inputs:{x:c[0]},backend:n});const u=c.map((e=>e.shape));return s.Wap.assertParamsConsistent(u,i),Ii(c,i,n)}const Ri={kernelName:s.Eh3,backendName:"webgl",kernelFunc:ki};class Ni{constructor(e,t=!1,n=null,r=!1,o=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,s=e.padInfo.left,a=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,b=m?2:3,y=m?3:1;let v="",w="";n&&(v=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:o?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,w="result = activation(result);");const x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${v}\n\n      const ivec2 strides = ivec2(${a}, ${c});\n      const ivec2 pads = ivec2(${i}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${y}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${b}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${d}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${p}; wC++) {\n            int xC = xCCorner + wC * ${l};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${h}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${h}) *\n                    getW(wR, wC, ${h}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${h}, xR, xC) *\n                    getW(wR, wC, ${h}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${h}, d2),\n                getW(wR, wC, ${h} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${h}),\n                  getX(batch, xR, xC, ${h} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${h}, xR, xC),\n                  getX(batch, ${h} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${h}, d2),\n                getW(wR, wC, ${h} + 1, d2),\n                getW(wR, wC, ${h} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${h}),\n                  getX(batch, xR, xC, ${h} + 1),\n                  getX(batch, xR, xC, ${h} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${h}, xR, xC),\n                  getX(batch, ${h} + 1, xR, xC),\n                  getX(batch, ${h} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${x}\n        ${w}\n        setOutput(result);\n      }\n    `}}class Oi{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,i=e.strideHeight,s=e.strideWidth,a=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,l=e.filterDepth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${o}, ${i}, ${s});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${l}; wF++) {\n          int xF = xFCorner + wF * ${a};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${d}; wR++) {\n            int xR = xRCorner + wR * ${c};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${p}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${h}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${h}) *\n                  getW(wF, wR, wC, ${h}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1),\n                  getX(batch, xF, xR, xC, ${h} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2),\n                  getW(wF, wR, wC, ${h} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Ai{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Ve(this.outputShape.length);const{dataFormat:n}=t,r=me(),o="channelsLast"===n,i=o?0:1,s=o?1:2,a=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":`if(blockIndex < ${e[1]} && pos < ${e[0]}) {`;let c="";for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)c+=`\n          blockIndex = rc.y + ${t};\n          pos = rc.x + ${e};\n\n          ${a}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${i}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${s}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${o}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*e+t}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*e+t}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${c}\n\n        ${r.output} = result;\n      }\n    `}}function Di({x:e,filter:t,convInfo:n,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:c=null}){const u=e.shape,l=r.texData.get(e.dataId),d=n.inChannels,p=u[0]*u[1]*u[2],h=n.outChannels,f="channelsLast"===n.dataFormat;let m;const g=[];if(null!=i&&!f&&3===i.shape.length){const e=so({inputs:{x:i},backend:r,attrs:{perm:[1,2,0]}});g.push(e),i=e}if((1!==p&&1!==h||!(d>1e3))&&l.isPacked&&f&&null!=l.texture&&u[2]%2!=0&&s.D5U.arraysEqual(l.shape.slice(-3),u.slice(-3))){const d=u[0]*u[1]*(u[2]+1),p={dataId:e.dataId,shape:[1,d,n.inChannels],dtype:e.dtype},h=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,s.D5U.assert(Q(l.shape,p.shape),(()=>`packed reshape ${l.shape} to ${p.shape} isn't free`));const f=Kr({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});g.push(f);const b=co({a:p,b:f,backend:r,transposeA:!1,transposeB:!1,bias:o,activation:c,preluActivationWeights:i,leakyreluAlpha:a}),y=r.texData.get(b.dataId);s.D5U.assert(y.isPacked,(()=>"batchMatMul result is expected to be packed")),l.shape=h,y.shape=n.outShape,m=Ar({inputs:{x:b},backend:r}),m.shape=n.outShape,g.push(b)}else{const s=f?e:so({inputs:{x:e},backend:r,attrs:{perm:[0,2,3,1]}}),u=s.shape,l=Kr({inputs:{x:s},backend:r,attrs:{shape:[1,u[0]*u[1]*u[2],n.inChannels]}}),d=Kr({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),p=co({a:l,b:d,transposeA:!1,transposeB:!1,backend:r,bias:o,activation:c,preluActivationWeights:i,leakyreluAlpha:a}),h=Kr({inputs:{x:p},backend:r,attrs:{shape:[n.batchSize,n.outHeight,n.outWidth,n.outChannels]}});m=f?h:so({inputs:{x:h},backend:r,attrs:{perm:[0,3,1,2]}}),f||(g.push(s),g.push(h)),g.push(l),g.push(d),g.push(p)}for(const e of g)r.disposeIntermediateTensorInfo(e);return m}function Li({x:e,filter:t,convInfo:n,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:c=null}){const{filterWidth:u,filterHeight:l,inChannels:d,outWidth:p,outHeight:h,dataFormat:f}=n,m="channelsLast"===f,g=u*l*d,b=h*p,y=[g,b],v=[];if(null!=i&&!m&&3===i.shape.length){const e=so({inputs:{x:i},backend:r,attrs:{perm:[1,2,0]}});v.push(e),i=e}const w=Kr({inputs:{x:e},backend:r,attrs:{shape:e.shape.slice(1)}}),x=Kr({inputs:{x:t},backend:r,attrs:{shape:[1,g,s.D5U.sizeFromShape(t.shape)/g]}});v.push(w),v.push(x);const S=new Ai(y,n),E=[w.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],T=r.runWebGLProgram(S,[w],"float32",E),C=Kr({inputs:{x:T},backend:r,attrs:{shape:[1,y[0],y[1]]}});v.push(T),v.push(C);const _=null!=o,I=null!=i,k="leakyrelu"===c,R=c?$r(c,!0):null,N=new Xr(C.shape,x.shape,[1,b,n.outChannels],!0,!1,_,R,I,k),O=[C,x];if(o&&O.push(o),I&&O.push(i),k){const e=r.makeTensorInfo([],"float32",s.D5U.createScalarValue(a,"float32"));O.push(e),v.push(e)}const A=r.runWebGLProgram(N,O,"float32"),D=Kr({inputs:{x:A},backend:r,attrs:{shape:[1,h,p,n.outChannels]}}),L=m?D:so({inputs:{x:D},backend:r,attrs:{perm:[0,3,1,2]}});m||v.push(D),v.push(A);for(const e of v)r.disposeIntermediateTensorInfo(e);return L}const Pi={kernelName:s.mhS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:a,pad:c,dataFormat:u,dilations:l,dimRoundingMode:d}=r,p=s.Wap.convertConv2DDataFormat(u),h=s.Wap.computeConv2DInfo(o.shape,i.shape,a,l,c,d,!1,p);let f;if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if((0,s.OBj)().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])f=Li({x:o,filter:i,convInfo:h,backend:n});else{const e=new Ni(h);f=n.runWebGLProgram(e,[o,i],"float32")}else f=Di({x:o,filter:i,convInfo:h,backend:n});const m=Kr({inputs:{x:f},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(f),m}};class Vi{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i="channelsLast"===e.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${o};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              if (${i}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Mi{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i="channelsLast"===e.dataFormat,s=t-1-e.padInfo.top,a=n-1-e.padInfo.left,c=i?1:2,u=i?2:3,l=i?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${s}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${l}];\n\n        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${o}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${i}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Fi{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,i=e.padInfo.top,s=e.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${o};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${i};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${s};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Wi{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,s=e.strideWidth,a=t-1-e.padInfo.front,c=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${a}, ${c}, ${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${o}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${i}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${s}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const Zi={kernelName:s.wUP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:a,pad:c,dataFormat:u,dimRoundingMode:l,filterShape:d}=r,p=s.Wap.convertConv2DDataFormat(u),h=s.Wap.computeConv2DInfo(o.shape,d,a,1,c,l,!1,p),f=new Vi(h);return n.runWebGLProgram(f,[o,i],"float32")}},Bi={kernelName:s.wm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{inputShape:a,strides:c,pad:u,dataFormat:l,dimRoundingMode:d}=r,p=s.Wap.convertConv2DDataFormat(l),h=s.Wap.computeConv2DInfo(a,i.shape,c,1,u,d,!1,p),f=new Mi(h);return n.runWebGLProgram(f,[o,i],"float32")}},Gi={kernelName:s.x12,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:a,pad:c,dilations:u}=r,l=s.Wap.computeConv3DInfo(o.shape,i.shape,a,u,c),d=new Oi(l);return n.runWebGLProgram(d,[o,i],"float32")}},Ui={kernelName:s.o2y,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:a,pad:c,filterShape:u}=r,l=s.Wap.computeConv3DInfo(o.shape,u,a,1,c),d=new Fi(l);return n.runWebGLProgram(d,[o,i],"float32")}},$i={kernelName:s.ik2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{pad:a,strides:c,inputShape:u}=r,l=s.Wap.computeConv3DInfo(u,i.shape,c,1,a),d=new Wi(l);return n.runWebGLProgram(d,[o,i],"float32")}},Xi=Gr({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),ji={kernelName:s.mc4,backendName:"webgl",kernelFunc:Xi},zi=Gr({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),Hi={kernelName:s.TR1,backendName:"webgl",kernelFunc:zi};class Yi{constructor(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,s,a,c]=e,[u]=t,[l,d]=n;this.outputShape=[u,l,d,c];const p="bilinear"===r?1:0,[h,f]=[s-1+".0",a-1+".0"],[m,g,b]=l>1?[""+(s-1)/(l-1),"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${h}`],[y,v,w]=d>1?[""+(a-1)/(d-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${y});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${i}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${v};\n\n        float in_y = ${b};\n        if( in_y < 0.0 || in_y > ${h} ) {\n          setOutput(float(${o}));\n          return;\n        }\n        float in_x = ${w};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${o}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${p} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const Ki={kernelName:s.VcC,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:o,boxes:i,boxInd:s}=t,{cropSize:a,method:c,extrapolationValue:u}=r,l=new Yi(o.shape,i.shape,a,c,u);return n.runWebGLProgram(l,[o,i,s],"float32")}};var Ji;!function(e){e.Prod="*",e.Sum="+"}(Ji||(Ji={}));class qi{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const o=this.outputShape.length,i=this.op===Ji.Prod?"1.0":"0.0",s=n?i:`getX(${Qi(o,"coords",this.op)})`,a=this.outputShape[this.outputShape.length-1];let c="",u="";n?(c=r?"end != "+(a-1):"end != 0",u=r?"end + 1":"end - 1"):(c=r?`end + pow2 < ${a}`:"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${Ne(o)} coords = getOutputCoords();\n        int end = ${es(o,"coords",this.op)};\n        float val = ${s};\n        int pow2 = int(pow(2.0, index));\n        if (${c}) {\n          int idx = ${u};\n          ${es(o,"coords",this.op)} = idx;\n          val ${this.op}= getX(${Qi(o,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}}function Qi(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function es(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function ts(e,t,n,r,o,i){const a=t.shape.length,c=s.Wap.getAxesPermutation([r],a);let u=t;null!=c&&(u=so({inputs:{x:t},backend:n,attrs:{perm:c}}));const l=s.Wap.getInnerMostAxes(1,a)[0];if(l!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);const d=u.shape[l];let p=Ar({inputs:{x:u},backend:n});for(let t=0;t<=Math.ceil(Math.log2(d))-1;t++){const r=new qi(e,u.shape,!1,i),o=[[t]],s=p;p=n.runWebGLProgram(r,[p],p.dtype,o),n.disposeIntermediateTensorInfo(s)}if(o){const t=new qi(e,u.shape,o,i),r=p;p=n.runWebGLProgram(t,[p],p.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=c){const e=so({inputs:{x:p},backend:n,attrs:{perm:s.Wap.getUndoAxesPermutation(c)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(u),e}return p}const ns={kernelName:s.Byc,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,exclusive:s,reverse:a}=r;return ts(Ji.Prod,o,n,i,s,a)}},rs={kernelName:s.iHb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,exclusive:s,reverse:a}=r;return ts(Ji.Sum,o,n,i,s,a)}},os={kernelName:s.QRR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:i}=t,{size:s,binaryOutput:a}=r;if(1===o.shape.length){const e=n.readSync(o.dataId),t=n.readSync(i.dataId),r=Sn(e,t,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,r)}if(2===o.shape.length){const e=n.bufferSync(o),t=n.bufferSync(i),r=En(e,t,s,a);return n.makeTensorInfo(r.shape,i.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}};class is{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const ss={kernelName:s.T0n,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:i,dataFormat:s}=r,a=o.shape[0],c=("NHWC"===s?o.shape[1]:o.shape[2])*i,u=("NHWC"===s?o.shape[2]:o.shape[3])*i,l=("NHWC"===s?o.shape[3]:o.shape[1])/(i*i),d=new is("NHWC"===s?[a,c,u,l]:[a,l,c,u],i,s);return n.runWebGLProgram(d,[o],o.dtype)}};class as{constructor(e,t=!1,n=null,r=!1,o=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ve(this.outputShape.length);const i=e.filterHeight,s=e.filterWidth,a=e.outChannels/e.inChannels;let c="",u="";n&&(c=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:o?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,u="result = activation(result);");const l=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${c}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${a};\n        int q = d2 - d1 * ${a};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${i}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${s}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${l}\n        ${u}\n        setOutput(result);\n      }\n    `}}class cs{constructor(e,t=!1,n=null,r=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ve(this.outputShape.length);const i=e.outChannels/e.inChannels,a=e.padInfo.left,c=e.strideWidth,u=e.dilationWidth,l=e.filterHeight,d=e.filterWidth,p=d;let h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<d;e++)h+=`\n          vec4 xTexelC${2*e};\n          int xTexelC${2*e}Ready;\n          vec4 xTexelC${2*e+1};\n          int xTexelC${2*e+1}Ready;\n          vec4 xC${e};`;h+=`\n    for (int r = 0; r < ${l}; r++) {\n      `;for(let e=0;e<d;e++)h+=`\n          xTexelC${2*e} = vec4(0.0);\n          xTexelC${2*e}Ready = 0;\n          xTexelC${2*e+1} = vec4(0.0);\n          xTexelC${2*e+1}Ready = 0;\n          xC${e} = vec4(0.0);`;h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let e=0;e<(p+1)/2;e++){const t=2*e;if(h+=`\n          xC = xCCorner + ${t*u};\n          `,1===c){if(t<d&&(a%2==1?(h+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n              `,h+=1===u&&t>0?`\n                xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${t} = vec4(previous.zw, xTexelC${t}.xy);\n                  } else {\n                    xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\n                  }\n                  `):h+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xC${t} = xTexelC${t};\n                `,t+1<d)){const e=a%2==0?s.D5U.nearestLargerEven(u):u;u%2==0&&a%2==1||u%2!=0&&a%2!=1?(h+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                    xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${t+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${t+1}Ready = 1;\n                  }\n                  `,u>1&&(h+=`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                      xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                      xTexelC${t}Ready = 1;\n                    }\n                    `),h+=`\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\n                  `):h+=1===e?`\n                    xC${t+1} = xTexelC${t};\n                    `:`\n                    xCOffset = xC + ${e};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                      xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${t+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${t+1}Ready = 1;\n                    }\n\n                    xC${t+1} = xTexelC${t+1};\n                    `}}else t<d&&(a%2==1?(h+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n              `,t+1<d&&(h+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\n                `)):(h+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(\n                  xTexelC${t}.xy, xTexelC${t+1}.xy);\n              `,t+1<d&&(h+=`\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n                `)));t<d&&(h+=`\n            wTexel = getW(r, ${t}, d1, q);\n            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);\n          `,t+1<d&&(h+=`\n              wTexel = getW(r, ${t+1}, d1, q);\n              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}h+="\n    }\n  ",h+="\n      }\n    ";let f="",m="";n&&(f=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:o?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,m="result = activation(result);");const g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${f}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${i};\n        int q = d2 - d1 * ${i};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${h}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${g}\n        ${m}\n        setOutput(result);\n      }\n    `}}const us={kernelName:s.cie,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:a,pad:c,dilations:u,dimRoundingMode:l}=r;let d=u;null==d&&(d=[1,1]),s.D5U.assert(s.Wap.eitherStridesOrDilationsAreOne(a,d),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${d}'`));const p=s.Wap.computeConv2DInfo(o.shape,i.shape,a,d,c,l,!0);let h;h=(0,s.OBj)().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels==1?new cs(p):new as(p);const f=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];return n.runWebGLProgram(h,[o,i],"float32",f)}};class ls{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${i} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${o};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class ds{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${o}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${a}; dm++) {\n              int d2 = d1 * ${a} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const ps={kernelName:s.sL$,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:a,dilations:c,pad:u,dimRoundingMode:l,filterShape:d}=r,p=s.Wap.computeConv2DInfo(o.shape,d,a,c,u,l,!0),h=new ls(p);return n.runWebGLProgram(h,[o,i],"float32")}},hs={kernelName:s.y7R,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{strides:a,dilations:c,pad:u,dimRoundingMode:l,inputShape:d}=r,p=s.Wap.computeConv2DInfo(d,i.shape,a,c,u,l,!0),h=new ds(p);return n.runWebGLProgram(h,[o,i],"float32")}};class fs{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const ms={kernelName:s.$w,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=[...r.shape,...r.shape],i=s.D5U.sizeFromShape(r.shape),a=Kr({inputs:{x:r},backend:n,attrs:{shape:[i]}}),c=new fs(i),u=n.runWebGLProgram(c,[a],a.dtype),l=Kr({inputs:{x:u},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),l}};class gs{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:o,strideWidth:i,filterHeight:s,filterWidth:a,dilationHeight:c,dilationWidth:u}=e,{top:l,left:d}=r;this.userCode=`\n      const ivec2 strides = ivec2(${o}, ${i});\n      const ivec2 pads = ivec2(${l}, ${d});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${s}; h++) {\n          int hIn = hBeg + h * ${c};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${a}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const bs={kernelName:s.p4S,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:a,pad:c,dilations:u}=r,l=s.Wap.computeDilation2DInfo(o.shape,i.shape,a,c,"NHWC",u);let d;const p=new gs(l);d=n.runWebGLProgram(p,[o,i],"float32");const h=Kr({inputs:{x:d},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(d),h}},ys={kernelName:s.$g6,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:o}=r,i=t,{allDims:a,summedDims:c,idDims:u}=s.Wap.decodeEinsumEquation(o,i.length);s.Wap.checkEinsumDimSizes(a.length,u,i);const{path:l,steps:d}=s.Wap.getEinsumComputePath(c,u),p=d.length;let h=null,f=a.length;const m=[];for(let e=0;e<p;++e){for(const t of d[e]){const{permutationIndices:e,expandDims:r}=s.Wap.getEinsumPermutation(f,u[t]);let o;s.Wap.isIdentityPermutation(e)?o=i[t]:(o=so({inputs:{x:i[t]},backend:n,attrs:{perm:e}}),m.push(o));const a=o.shape.slice();for(let e=0;e<r.length;++e)a.splice(r[e],0,1);s.D5U.arraysEqual(o.shape,a)||(o=Kr({inputs:{x:o},backend:n,attrs:{shape:a}}),m.push(o)),null===h?h=o:(h=Hr({inputs:{a:o,b:h},backend:n}),m.push(h))}e<p-1&&(l[e]>=0&&(h=oo({inputs:{x:h},backend:n,attrs:{axis:l[e]-(a.length-f),keepDims:!1}}),m.push(h)),f--)}for(const e of m)e!==h&&n.disposeIntermediateTensorInfo(e);return h}},vs=Gr({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),ws={kernelName:s.SX0,backendName:"webgl",kernelFunc:vs},xs={kernelName:s.HEU,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:o}=t,i=(0,s.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Or("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,o.shape):new Nr("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,o.shape);return n.runWebGLProgram(i,[r,o],r.dtype)}},Ss=Ur({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:_n}),Es={kernelName:s.hdR,backendName:"webgl",kernelFunc:Ss},Ts=Gr({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${s.Wap.ERF_P};\n  float a1 = ${s.Wap.ERF_A1};\n  float a2 = ${s.Wap.ERF_A2};\n  float a3 = ${s.Wap.ERF_A3};\n  float a4 = ${s.Wap.ERF_A4};\n  float a5 = ${s.Wap.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),Cs={kernelName:s.Omj,backendName:"webgl",kernelFunc:Ts},_s=Gr({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:In,dtype:"float32"}),Is={kernelName:s.NEP,backendName:"webgl",kernelFunc:_s};function ks(e){const{inputs:t,attrs:n,backend:r}=e,{dim:o}=n,{input:i}=t,a=i.shape.length,c=i.shape.slice();let u=o;return o<0&&(s.D5U.assert(-(a+1)<=o,(()=>`Axis must be in the interval [${-(a+1)}, ${a}]`)),u=a+o+1),c.splice(u,0,1),Kr({inputs:{x:i},backend:r,attrs:{shape:c}})}const Rs={kernelName:s.YFo,backendName:"webgl",kernelFunc:ks},Ns="return exp(x) - 1.0;",Os=Gr({opSnippet:Ns,packedOpSnippet:Ns,cpuKernelImpl:kn}),As={kernelName:s.Y0y,backendName:"webgl",kernelFunc:Os};class Ds{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const o=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=n?`${r}.0`:"1.0";let s;if("real"===e)s="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);s="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${o};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${s}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${i};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function Ls(e,t,n){const r=n.texData.get(e.dataId),o=s.D5U.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],a=Kr({inputs:{x:e},backend:n,attrs:{shape:[o/i,i]}}),c=a.shape,u=new Ds("real",c,t),l=new Ds("imag",c,t),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:c},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:c}],p=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(l,d,"float32"),f=Lr({inputs:{real:p,imag:h},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h);const m=Kr({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(f),m}const Ps={kernelName:s.vwp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return Ls(r,!1,n)}};class Vs{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function Ms(e){const{backend:t,attrs:n}=e,{shape:r,value:o}=n;let{dtype:i}=n;if(i=i||s.D5U.inferDtype(o),"string"===i){const e=s.D5U.getArrayFromDType(i,s.D5U.sizeFromShape(r));return e.fill(o),t.makeTensorInfo(r,i,e)}{const e=new Vs(r,o),n=[[o]];return t.runWebGLProgram(e,[],i,n)}}const Fs={kernelName:s.deh,backendName:"webgl",kernelFunc:Ms};class Ws{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const Zs={kernelName:s.Uyb,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,o=new Ws(n.shape);return r.runWebGLProgram(o,[n],n.dtype)}},Bs="return floor(x);",Gs=Gr({opSnippet:Bs,packedOpSnippet:Bs,cpuKernelImpl:Rn}),Us={kernelName:s.OR,backendName:"webgl",kernelFunc:Gs},$s=Ur({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Xs={kernelName:s.jeX,backendName:"webgl",kernelFunc:$s};class js{constructor(e){this.variableNames=["A"];const t=me(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class zs{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=me(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}const Hs={kernelName:s.eBW,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:o}=t;const{numChannels:i}=r,a="undefined"!=typeof HTMLVideoElement&&o instanceof HTMLVideoElement,c="undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement,[u,l]=a?[o.videoWidth,o.videoHeight]:[o.width,o.height],d=[l,u],h=[l,u,i];(c||a)&&(null==Ys&&(Ys=document.createElement("canvas").getContext("2d")),Ys.canvas.width=u,Ys.canvas.height=l,Ys.drawImage(o,0,0,u,l),o=Ys.canvas);const f=n.makeTensorInfo(d,"int32");n.texData.get(f.dataId).usage=p.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);const m=(0,s.OBj)().getBool("WEBGL_PACK")?new zs(h):new js(h),g=n.runWebGLProgram(m,[f],"int32");return n.disposeData(f.dataId),g}};let Ys;const Ks={kernelName:s._V0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i,bias:a,preluActivationWeights:c}=t,{strides:u,pad:l,dataFormat:d,dilations:p,dimRoundingMode:h,activation:f,leakyreluAlpha:m}=r,g=s.Wap.convertConv2DDataFormat(d),b=s.Wap.computeConv2DInfo(o.shape,i.shape,u,p,l,h,!1,g);let y;const v=[];if(1!==b.filterHeight||1!==b.filterWidth||1!==b.dilationHeight||1!==b.dilationWidth||1!==b.strideHeight||1!==b.strideWidth||"SAME"!==b.padInfo.type&&"VALID"!==b.padInfo.type)if((0,s.OBj)().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])y=Li({x:o,filter:i,convInfo:b,backend:n,bias:a,activation:f,preluActivationWeights:c,leakyreluAlpha:m});else{const e=null!=a,t=null!=c,r="leakyrelu"===f,u=f?$r(f,!1):null,l=new Ni(b,e,u,t,r),p=[o,i],h=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=Kr({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(e&&p.push(h(a,d)),t&&p.push(h(c,d)),r){const e=n.makeTensorInfo([],"float32",s.D5U.createScalarValue(m,"float32"));p.push(e),v.push(e)}y=n.runWebGLProgram(l,p,"float32")}else y=Di({x:o,filter:i,convInfo:b,backend:n,bias:a,activation:f,preluActivationWeights:c,leakyreluAlpha:m});const w=Kr({inputs:{x:y},backend:n,attrs:{shape:b.outShape}});return v.push(y),v.forEach((e=>n.disposeIntermediateTensorInfo(e))),w}},Js={kernelName:s.luS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i,bias:a,preluActivationWeights:c}=t,{strides:u,pad:l,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=[];let g=d;null==g&&(g=[1,1]),s.D5U.assert(s.Wap.eitherStridesOrDilationsAreOne(u,g),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${g}'`));const b=s.Wap.computeConv2DInfo(o.shape,i.shape,u,g,l,p,!0),y=(0,s.OBj)().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels==1,v=h?$r(h,y):null,w=[o,i],x=null!=a,S=null!=c,E="leakyrelu"===h;if(x&&w.push(a),S&&w.push(c),E){const e=n.makeTensorInfo([],"float32",s.D5U.createScalarValue(f,"float32"));w.push(e),m.push(e)}let T;T=y?new cs(b,x,v,S,E):new as(b,x,v,S,E);const C=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],_=n.runWebGLProgram(T,w,"float32",C);return m.forEach((e=>n.disposeIntermediateTensorInfo(e))),_}};class qs{constructor(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;const r=Ne(t.length),o=Ne(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${o} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${i};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}const Qs={kernelName:s.q1x,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:o}=t,i=o.shape,a=i[i.length-1],c=s.D5U.sizeFromShape(r.shape),[u,l,d,p]=s.Wap.prepareAndValidate(r,o),h=Kr({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),f=Kr({inputs:{x:r},backend:n,attrs:{shape:[s.D5U.sizeFromShape(r.shape)/d,d]}});if(n.shouldExecuteOnCPU([r,o])||"string"===r.dtype){const e=n.readSync(o.dataId),t=n.bufferSync(r),i=Nn(e,t,r.dtype,l,a,d,p,r.shape,c);return n.makeTensorInfo(u,r.dtype,i.values)}const m=new qs(a,p,[l,d]),g=n.runWebGLProgram(m,[f,h],f.dtype),b=Kr({inputs:{x:g},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),b}};class ea{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=Ne(this.rank),r=function(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let t=0;t<e.length;t++)2===t?r.push("index"):r.push(`${n[t]}`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${r}));\n      }\n    `}}function ta(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,indices:i}=t,{axis:a,batchDims:c}=r,u=s.D5U.parseAxisParam(a,o.shape)[0];if((0,s.OBj)().get("DEBUG")){const e=n.readSync(i.dataId),t=o.shape[u];for(let n=0;n<e.length;++n){const r=e[n];s.D5U.assert(r<=t-1&&r>=0,(()=>`GatherV2: the index value ${r} is not in [0, ${t-1}]`))}}const l=s.Wap.segment_util.collectGatherOpShapeInfo(o,i,u,c),d=s.D5U.sizeFromShape(i.shape),p=[],h=Kr({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),f=Kr({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,d/l.batchSize]}});p.push(h),p.push(f);const m=[l.batchSize,l.outerSize,d/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([o,i])||"string"===o.dtype){const e=n.bufferSync(f),t=n.bufferSync(h),r=On(t,e,m);return p.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(l.outputShape,r.dtype,r.values)}const g=new ea(h.shape,m),b=n.runWebGLProgram(g,[h,f],h.dtype);p.push(b);const y=Kr({inputs:{x:b},backend:n,attrs:{shape:l.outputShape}});return p.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}const na={kernelName:s.qi_,backendName:"webgl",kernelFunc:ta},ra=Ur({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:An,dtype:"bool"}),oa={kernelName:s.iZT,backendName:"webgl",kernelFunc:ra},ia=Ur({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:Dn}),sa={kernelName:s.Acj,backendName:"webgl",kernelFunc:ia},aa={kernelName:s.Qg5,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return Ls(r,!0,n)}},ca=Gr({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),ua={kernelName:s.avt,backendName:"webgl",kernelFunc:ca},la=Gr({opSnippet:"return float(isinf(x));",dtype:"bool"}),da={kernelName:s.iWB,backendName:"webgl",kernelFunc:la},pa=Gr({opSnippet:"return float(isnan(x));",dtype:"bool"}),ha={kernelName:s.r7n,backendName:"webgl",kernelFunc:pa},fa=Ur({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:Ln,dtype:"bool"}),ma={kernelName:s.vtC,backendName:"webgl",kernelFunc:fa},ga=Ur({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:Pn,dtype:"bool"}),ba={kernelName:s.CAk,backendName:"webgl",kernelFunc:ga},ya={kernelName:s.e7N,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,num:i}=n,s=Vn(r,o,i);return t.makeTensorInfo([s.length],"float32",s)}},va=Gr({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:Mn}),wa={kernelName:s.ZbH,backendName:"webgl",kernelFunc:va},xa=Gr({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),Sa={kernelName:s.kU,backendName:"webgl",kernelFunc:xa},Ea=Ur({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),Ta={kernelName:s.PYm,backendName:"webgl",kernelFunc:Ea},Ca=Gr({opSnippet:"return float(!(x >= 1.0));"}),_a={kernelName:s.VfG,backendName:"webgl",kernelFunc:Ca},Ia=Ur({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),ka={kernelName:s.MZg,backendName:"webgl",kernelFunc:Ia};class Ra{constructor(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];const i=t,s=e[3]-1;let a;this.outputShape=e;const c=`float(${n}) + float(${r}) * sum`;a=.5===o?`inversesqrt(${c})`:1===o?`1.0/(${c})`:`exp(log(${c}) * float(-${o}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${i}; j <= ${i}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${s}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${a};\n        setOutput(val);\n      }\n    `}}class Na{constructor(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=t,s=e[3]-1;let a;this.outputShape=e;const c=`float(${n}) + float(${r}) * sum`;a=.5===o?`inversesqrt(${c})`:1===o?`1.0/(${c})`:`exp(log(${c}) * float(-${o}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${i};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${i}; j <= ${i}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${a};\n        setOutput(result);\n      }\n    `}}const Oa={kernelName:s.eZ0,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:i,bias:a,alpha:c,beta:u}=r,l=(0,s.OBj)().getBool("WEBGL_PACK_NORMALIZATION")?new Na(o.shape,i,a,c,u):new Ra(o.shape,i,a,c,u);return n.runWebGLProgram(l,[o],o.dtype)}};class Aa{constructor(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${o})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${o});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const Da={kernelName:s.Hhh,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o,y:i,dy:s}=t,{depthRadius:a,bias:c,alpha:u,beta:l}=r,d=new Aa(o.shape,a,c,u,l);return n.runWebGLProgram(d,[o,i,s],o.dtype)}};function La(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:i,keepDims:a}=r,c=o.shape.length,u=s.D5U.parseAxisParam(i,o.shape);let l=u;const d=s.Wap.getAxesPermutation(l,c),p=null!=d,h=n.shouldExecuteOnCPU([o]);let f=o;if(p){if(h){const e=n.texData.get(f.dataId).values,t=new Array(c);for(let e=0;e<t.length;e++)t[e]=o.shape[d[e]];const r=cr(e,o.shape,o.dtype,d,t);f=n.makeTensorInfo(t,o.dtype),n.texData.get(f.dataId).values=r}else f=ro(o,d,n);l=s.Wap.getInnerMostAxes(l.length,c)}s.Wap.assertAxesAreInnerMostDims("max",l,c);const[m,g]=s.Wap.computeOutAndReduceShapes(f.shape,l);let b,y=m;if(a&&(y=s.Wap.expandShapeToKeepDim(m,u)),h){const e=n.texData.get(f.dataId).values,t=Fn(e,s.D5U.sizeFromShape(g),y,o.dtype);b=n.makeTensorInfo(y,o.dtype),n.texData.get(b.dataId).values=t}else b=function(e,t,n,r){const o=s.D5U.sizeFromShape(t),i=Kr({inputs:{x:e},attrs:{shape:[s.D5U.sizeFromShape(e.shape)/o,o]},backend:r}),a=eo(i,e.dtype,"max",r),c=Kr({inputs:{x:a},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(a),c}(f,g,y,n);return p&&n.disposeIntermediateTensorInfo(f),b}const Pa={kernelName:s.YoZ,backendName:"webgl",kernelFunc:La},Va=Ur({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Wn}),Ma={kernelName:s.BMI,backendName:"webgl",kernelFunc:Va},Fa={kernelName:s.mTV,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;he(o,"maxPool");const{filterSize:i,strides:a,pad:c,dimRoundingMode:u}=r;s.D5U.assert(s.Wap.eitherStridesOrDilationsAreOne(a,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`));const l=s.Wap.computePool2DInfo(o.shape,i,a,1,c,u);if(1===l.filterWidth&&1===l.filterHeight&&s.D5U.arraysEqual(l.inShape,l.outShape))return Ar({inputs:{x:o},backend:n});const d=new Go(l,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}},Wa={kernelName:s.OAf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:i,strides:a,pad:c,dataFormat:u,dimRoundingMode:l}=r,d=s.Wap.computePool3DInfo(o.shape,i,a,[1,1,1],c,l,u),p=new Uo(d,"max",!1);return n.runWebGLProgram(p,[o],o.dtype)}};class Za{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,i=e.effectiveFilterWidth,s=o-1-e.padInfo.top,a=i-1-e.padInfo.left,c=o*i-1;this.userCode=`\n      const ivec2 pads = ivec2(${s}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${o};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${i}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${i} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Ba{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,i=e.dilationHeight,s=e.dilationWidth,a=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=a-1-e.padInfo.front,d=c-1-e.padInfo.top,p=u-1-e.padInfo.left,h=a*c*u-1;this.userCode=`\n      const ivec3 pads = ivec3(${l}, ${d}, ${p});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${a};\n           wD += ${o}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${c};\n              wR += ${i}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${s}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${h} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${c} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const Ga={kernelName:s.OU7,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,a=i,{filterSize:c,strides:u,pad:l,dimRoundingMode:d}=r,p=s.Wap.computePool3DInfo(a.shape,c,u,[1,1,1],l,d),h=new Uo(p,"max",!0),f=n.runWebGLProgram(h,[a],a.dtype),m=new Ba(p),g=n.runWebGLProgram(m,[o,f],a.dtype);return n.disposeIntermediateTensorInfo(f),g}},Ua={kernelName:s.OV7,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i,output:a}=t,c=i;he([i,a],"maxPoolGrad");const{filterSize:u,strides:l,pad:d,dimRoundingMode:p}=r,h=s.Wap.computePool2DInfo(c.shape,u,l,1,d,p),f=new Go(h,"max",!0),m=n.runWebGLProgram(f,[c],c.dtype),g=new Za(h),b=n.runWebGLProgram(g,[o,m],c.dtype);return n.disposeIntermediateTensorInfo(m),b}},$a={kernelName:s.vFR,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:o,strides:i,pad:a,includeBatchInIndex:c}=t,u=n;s.D5U.assert(4===r.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`));const l=[1,1];s.D5U.assert(s.Wap.eitherStridesOrDilationsAreOne(i,l),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`));const d=s.Wap.computePool2DInfo(r.shape,o,i,l,a),[p,h]=function(e,t,n,r){let o=new Go(n,"max",!1);const i=r.runWebGLProgram(o,[e],"float32");return o=new Go(n,"max",!0,!0,t),[i,r.runWebGLProgram(o,[e],"float32")]}(r,c,d,u);return[p,h]}},Xa={kernelName:s.q2K,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{keepDims:o,axis:i}=t,a=n,c=r.shape.length,u=s.D5U.parseAxisParam(i,r.shape);let l=u;const d=s.Wap.getAxesPermutation(l,c),p=null!=d,h=a.shouldExecuteOnCPU([r]),f=[];let m=r;if(p){if(h){const e=a.texData.get(m.dataId).values,t=new Array(c);for(let e=0;e<t.length;e++)t[e]=r.shape[d[e]];const n=cr(e,r.shape,r.dtype,d,t);m=a.makeTensorInfo(t,r.dtype),a.texData.get(m.dataId).values=n}else m=ro(r,d,a);f.push(m),l=s.Wap.getInnerMostAxes(l.length,c)}s.Wap.assertAxesAreInnerMostDims("sum",l,c);const[g,b]=s.Wap.computeOutAndReduceShapes(m.shape,l);let y=g;o&&(y=s.Wap.expandShapeToKeepDim(g,u));const v=function(e,t,n,r){const o=s.D5U.sizeFromShape(t),i=Kr({inputs:{x:e},attrs:{shape:[s.D5U.sizeFromShape(e.shape)/o,o]},backend:r}),a=eo(i,"float32","mean",r),c=Kr({inputs:{x:a},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(a),c}(m,b,y,a);for(const e of f)a.disposeIntermediateTensorInfo(e);return v}},ja={kernelName:s.c17,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r,c=o.shape.length,u=s.D5U.parseAxisParam(i,o.shape);let l=u;const d=s.Wap.getAxesPermutation(l,c);let p=o;null!=d&&(p=so({inputs:{x:o},backend:n,attrs:{perm:d}}),l=s.Wap.getInnerMostAxes(l.length,o.shape.length)),s.Wap.assertAxesAreInnerMostDims("min",l,c);const[h,f]=s.Wap.computeOutAndReduceShapes(p.shape,l),m=Kr({inputs:{x:p},backend:n,attrs:{shape:[-1,s.D5U.sizeFromShape(f)]}}),g=eo(m,m.dtype,"min",n);let b;return b=Kr(a?{inputs:{x:g},backend:n,attrs:{shape:s.Wap.expandShapeToKeepDim(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=d&&n.disposeIntermediateTensorInfo(p),b}},za=Ur({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Zn}),Ha={kernelName:s.q8u,backendName:"webgl",kernelFunc:za};class Ya{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=Ne(r),i=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),c="reflect"===n?0:1;this.userCode=1!==r?`\n      ${o} start = ${o}(${i});\n      ${o} end = ${o}(${s});\n\n      void main() {\n        ${o} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${c};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};\n          }\n        }\n        ${o} coords = outC - start;\n        setOutput(getX(${a}));\n      }\n    `:`\n        int start = ${i};\n        int end = ${s};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${c};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${c};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class Ka{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=Ne(r),i=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),a=dr("rc",r),c=dr("source",r),u=`${a[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${c.slice(-2).join()})`,d="reflect"===n?0:1;let p="";if(1===r){const e=`\n        ${o} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${d};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${d};\n        }\n        source -= start;\n      `;p=`\n        ${o} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${c.join()}), ${l});\n        ${a[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${c.join()}), ${l});\n        }\n      `}else{const e=`\n        ${o} source = rc;\n        ${o} lt = ${o}(lessThan(source, start));\n        ${o} gte = ${o}(greaterThanEqual(source, end));\n        ${o} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${d}) +\n                gte * ((end - 1) * 2 - source + ${d});\n        source -= start;\n      `;p=`\n        ${o} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${c.join()}), ${l});\n        ${a[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${c.join()}), ${l});\n        }\n        rc = outputLoc;\n        ${a[r-2]} += 1;\n        if(${a[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${c.join()}), ${l});\n          ${a[r-1]} += 1;\n          if(${u}) {\n            ${e}\n            result[3] = getChannel(getX(${c.join()}), ${l});\n          }\n        }\n      `}this.userCode=`\n      const ${o} start = ${o}(${i});\n      const ${o} end = ${o}(${s});\n\n      void main() {\n        ${o} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}const Ja={kernelName:s.jQs,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:o,mode:i}=n,a=(0,s.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ka(r.shape,o,i):new Ya(r.shape,o,i);return t.runWebGLProgram(a,[r],r.dtype)}},qa=Ur({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),Qa={kernelName:s.Vbg,backendName:"webgl",kernelFunc:qa};class ec{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}const tc=Ur({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),nc={kernelName:s.oHH,backendName:"webgl",kernelFunc:tc},rc="return a - b;",oc=Ur({opSnippet:rc,packedOpSnippet:rc,supportsComplex:!0,cpuKernelImpl:ir}),ic={kernelName:s.Tr8,backendName:"webgl",kernelFunc:oc};function sc(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:i}=r,a=s.D5U.parseAxisParam([i],o.shape),c=La({inputs:{x:o},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),u=s.Wap.expandShapeToKeepDim(c.shape,a),l=Kr({inputs:{x:c},backend:n,attrs:{shape:u}}),d=oc({inputs:{a:o,b:l},backend:n}),p=_s({inputs:{x:d},backend:n}),h=oo({inputs:{x:p},backend:n,attrs:{axis:a,keepDims:!1}}),f=Kr({inputs:{x:h},backend:n,attrs:{shape:u}}),m=tc({inputs:{a:p,b:f},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}const ac={kernelName:s.Gcp,backendName:"webgl",kernelFunc:sc},cc={kernelName:s.NZg,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:i,seed:s,normalized:a}=r,c=a?o:sc({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),u=c.shape[0],l=c.shape[1],d=new ec(u,l,i),p=[[s]],h=n.runWebGLProgram(d,[c],"int32",p);return a||n.disposeIntermediateTensorInfo(c),h}},uc={kernelName:s.kuV,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,o]=Gn(e.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,t)}let o;return o=(0,s.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new xr(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new yr(r.shape,"if (isnan(x)) return x;\n  return -x;\n"),n.runWebGLProgram(o,[r],r.dtype)}},lc=s.GDt.GP,dc={kernelName:s.uv1,backendName:"webgl",kernelFunc:function(e){s.Wap.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:a,iouThreshold:c,scoreThreshold:u}=r,l=n.readSync(o.dataId),d=n.readSync(i.dataId),{selectedIndices:p}=lc(l,d,a,c,u);return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}},pc=s.GDt.qP,hc={kernelName:s.cye,backendName:"webgl",kernelFunc:function(e){s.Wap.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:a,iouThreshold:c,scoreThreshold:u,padToMaxOutputSize:l}=r,d=n.readSync(o.dataId),p=n.readSync(i.dataId),{selectedIndices:h,validOutputs:f}=pc(d,p,a,c,u,l);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}},fc=s.GDt.pA,mc={kernelName:s.W0H,backendName:"webgl",kernelFunc:function(e){s.Wap.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:a,iouThreshold:c,scoreThreshold:u,softNmsSigma:l}=r,d=n.readSync(o.dataId),p=n.readSync(i.dataId),h=a,f=c,m=u,g=l,{selectedIndices:b,selectedScores:y}=fc(d,p,h,f,m,g);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class gc{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}const bc={kernelName:s.we_,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{depth:i,onValue:a,offValue:c}=r,u=s.D5U.sizeFromShape(o.shape),l=new gc(u,i,a,c),d=Kr({inputs:{x:o},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(l,[d],o.dtype);n.disposeIntermediateTensorInfo(d);const h=Kr({inputs:{x:p},backend:n,attrs:{shape:[...o.shape,i]}});return n.disposeIntermediateTensorInfo(p),h}};function yc(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=li({inputs:{input:r},backend:n}),t=yc({inputs:{x:e},backend:n}),o=Ci({inputs:{input:r},backend:n}),i=yc({inputs:{x:o},backend:n}),s=Lr({inputs:{real:t,imag:i},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),s}return Ms({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const vc={kernelName:s.RuY,backendName:"webgl",kernelFunc:yc},wc={kernelName:s.qWM,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:o}=n;if("string"===o.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===o.dtype){const t=li({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r}),i=Ci({inputs:{input:o},backend:r}),s=yc({inputs:{x:i},backend:r}),a=Lr({inputs:{real:n,imag:s},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),a}return Ms({attrs:{shape:o.shape,dtype:o.dtype,value:1},backend:r})}},xc={kernelName:s.QiL,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(1===t.length)return ks({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const i=t[0].shape,a=t[0].dtype;t.forEach((e=>{s.D5U.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),s.D5U.assert(a===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const c=[],u=ki({inputs:t.map((e=>{const t=ks({inputs:{input:e},backend:n,attrs:{dim:o}});return c.push(t),t})),backend:n,attrs:{axis:o}});return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}};class Sc{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=Ne(r),i=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${o} start = ${o}(${i});\n      ${o} end = ${o}(${s});\n\n      void main() {\n        ${o} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${o} coords = outC - start;\n          setOutput(getX(${a}));\n        }\n      }\n    `:`\n        int start = ${i};\n        int end = ${s};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class Ec{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=Ne(r),i=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),a=dr("rc",r),c=dr("source",r),u=`${a[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${c.slice(-2).join()})`,d=[`${o} rc = outputLoc;`,`${a[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${a[r-2]} += 1;\n       if(${a[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${a[r-1]} += 1;\n         if(${u}) {`],p=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let h="";for(let e=0,t=1===r?2:4;e<t;e++)h+=`\n        ${d[e]}\n        if (${p}) {\n          result[${e}] = float(value);\n        } else {\n          ${o} source = rc - start;\n          result[${e}] = getChannel(getX(${c.join()}), ${l});\n        }\n      `;h+=1===r?"} ":"}}",this.userCode=`\n      const ${o} start = ${o}(${i});\n      const ${o} end = ${o}(${s});\n\n      void main() {\n        ${o} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}const Tc=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:i,constantValue:a}=r;if(0===s.D5U.sizeFromShape(o.shape))return Ms({backend:n,attrs:{shape:i.map(((e,t)=>e[0]+o.shape[t]+e[1])),value:a,dtype:o.dtype}});const c=(0,s.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ec(o.shape,i,a):new Sc(o.shape,i,a),u=[[a]];return n.runWebGLProgram(c,[o],o.dtype,u)},Cc={kernelName:s.lyA,backendName:"webgl",kernelFunc:Tc},_c=Ur({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),Ic={kernelName:s.pe_,backendName:"webgl",kernelFunc:_c},kc={kernelName:s.DlI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r,c=o.shape.length,u=[],l=s.D5U.parseAxisParam(i,o.shape);let d=l;const p=s.Wap.getAxesPermutation(d,c);let h,f=o;if(null!=p&&(f=so({inputs:{x:o},backend:n,attrs:{perm:p}}),d=s.Wap.getInnerMostAxes(d.length,c),u.push(f)),s.Wap.assertAxesAreInnerMostDims("prod",d,c),n.shouldExecuteOnCPU([f])){const e=n.texData.get(f.dataId).values,{outVals:t,outShape:r,outDtype:o}=$n(f.shape,f.dtype,e,d);h=n.makeTensorInfo(r,o,t)}else{const[e,t]=s.Wap.computeOutAndReduceShapes(f.shape,d),r=s.D5U.sizeFromShape(t),i=Kr({inputs:{x:f},backend:n,attrs:{shape:[-1,r]}}),a=eo(i,(0,s.z4k)(o.dtype),"prod",n);h=Kr({inputs:{x:a},backend:n,attrs:{shape:e}}),u.push(i),u.push(a)}if(a){u.push(h);const e=s.Wap.expandShapeToKeepDim(h.shape,l);h=Kr({inputs:{x:h},backend:n,attrs:{shape:e}})}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}},Rc=e=>{const{backend:t,attrs:n}=e,{start:r,stop:o,step:i,dtype:s}=n,a=Xn(r,o,i,s);return t.makeTensorInfo([a.length],s,a)},Nc={kernelName:s.e6w,backendName:"webgl",kernelFunc:Rc},Oc=Gr({opSnippet:"return 1.0 / x;"}),Ac={kernelName:s.$HU,backendName:"webgl",kernelFunc:Oc},Dc=Gr({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Lc={kernelName:s.qkr,backendName:"webgl",kernelFunc:Dc},Pc=Gr({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Vc={kernelName:s.SbG,backendName:"webgl",kernelFunc:Pc};class Mc{constructor(e,t,n,r,o){this.variableNames=["A"],this.outputShape=[];const[i,s,a,c]=e;this.outputShape=[i,t,n,c];const u=[r&&t>1?s-1:s,r&&n>1?a-1:a],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${a}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class Fc{constructor(e,t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,s,a,c]=e;this.outputShape=[i,t,n,c];const u=[r&&t>1?s-1:s,r&&n>1?a-1:a],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]},\n          ${u[1]/l[1]});\n      const vec3 inputShapeRC = vec3(${s}.0, ${a}.0,\n                                     ${a}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${c-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const Wc={kernelName:s._Yw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:i,halfPixelCenters:a,size:c}=r,[u,l]=c,d=(0,s.OBj)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Fc(o.shape,u,l,i,a):new Mc(o.shape,u,l,i,a);return n.runWebGLProgram(d,[o],"float32")}};class Zc{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,o]=t,[,i,s]=e,a=[n&&i>1?r-1:r,n&&s>1?o-1:o],c=[n&&i>1?i-1:i,n&&s>1?s-1:s],u=a[0]/c[0],l=a[1]/c[1],d=1/u,p=1/l,h=2*Math.ceil(d)+2,f=2*Math.ceil(p)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${p});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${i}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${s}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${o-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const Bc={kernelName:s.zbQ,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:i}=t,{alignCorners:s}=r,a=new Zc(i.shape,o.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}};class Gc{constructor(e,t,n,r,o){this.variableNames=["A"],this.outputShape=[];const[i,s,a,c]=e;this.outputShape=[i,t,n,c];const u=[r&&t>1?s-1:s,r&&n>1?a-1:a],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let p;p=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${a}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${p};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class Uc{constructor(e,t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,s,a,c]=e;this.outputShape=[i,t,n,c];const u=[r&&t>1?s-1:s,r&&n>1?a-1:a],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let p;p=o?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]},\n          ${u[1]/l[1]});\n      const vec3 inputShapeRC = vec3(${s}.0, ${a}.0,\n                                     ${a}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${p};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${c-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const $c={kernelName:s.dpD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:i,halfPixelCenters:a,size:c}=r,[u,l]=c,d=(0,s.OBj)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Uc(o.shape,u,l,i,a):new Gc(o.shape,u,l,i,a);return n.runWebGLProgram(d,[o],o.dtype)}};class Xc{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,o]=t,[,i,s]=e,a=[n&&i>1?r-1:r,n&&s>1?o-1:o],c=[n&&i>1?i-1:i,n&&s>1?s-1:s],u=a[0]/c[0],l=a[1]/c[1],d=1/u,p=1/l,h=2*Math.ceil(d)+2,f=2*Math.ceil(p)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${p});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${i}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${s}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${a[0]}) *\n                (float(dyR) / float(${c[0]}));\n\n            float sourceFracCol =\n                float(${a[1]}) *\n                  (float(dyC) / float(${c[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${o}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const jc={kernelName:s.Hmb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:i}=t,{alignCorners:s}=r,a=new Xc(i.shape,o.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}};class zc{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const r=e.map(((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r))).join(","),o=Ne(n);this.userCode=`\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class Hc{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=dr("rc",n),o=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,i=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,s=Ne(n);function a(n){const r=e.map(((r,o)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:`${r[n]}`}(o,n)));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${o}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${s} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return a(e)}(r.slice())};\n          if(${o}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",a(e)}(r.slice())};\n          }\n          if(${i}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",a(e)}(r.slice())};\n            if(${o}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",a(e)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const Yc={kernelName:s.mKl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:i}=r,a=o.shape.length,c=s.D5U.parseAxisParam(i,o.shape);if(0===a)return Ar({inputs:{x:o},backend:n});const u=(0,s.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Hc(o.shape,c):new zc(o.shape,c);return n.runWebGLProgram(u,[o],o.dtype)}};class Kc{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let o="";o="number"==typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${o}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const Jc={kernelName:s.b9H,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:o,fillValue:i,center:a}=t,c=n,u=new Kc(r.shape,i),[l,d]=s.Wap.getImageCenter(a,r.shape[1],r.shape[2]),p=[[l,d,Math.sin(o),Math.cos(o)]];return c.runWebGLProgram(u,[r],r.dtype,p)}},qc=Gr({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Qc={kernelName:s.e07,backendName:"webgl",kernelFunc:qc},eu=Gr({opSnippet:"return inversesqrt(x);",cpuKernelImpl:jn}),tu={kernelName:s.bV0,backendName:"webgl",kernelFunc:eu};class nu{constructor(e,t,n,r,o,i,s=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const a=Ne(o.length),c=Ne(i.length);let u="";1===n?u="i":2===n&&(u="i, j");const l=`getIndices(${u})`;let d="";1===r?d="i":2===r&&(d="i, coords[1]");const p=`getUpdates(${d})`,h=t>1?"strides[j]":"strides";this.userCode=`\n        ${a} strides = ${a}(${o});\n\n        void main() {\n          ${c} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${l});\n              flattenedIndex += index * ${h};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${p};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}const ru={kernelName:s.xQA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:i}=t,{shape:a}=r,{sliceRank:c,numUpdates:u,sliceSize:l,strides:d,outputSize:p}=s.Wap.calculateShapes(i,o,a),h=[p/l,l];if(0===p)return n.makeTensorInfo(a,o.dtype);const f=Kr({inputs:{x:o},backend:n,attrs:{shape:[u,c]}}),m=Kr({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),b=new nu(u,c,f.shape.length,m.shape.length,d,h),y=n.runWebGLProgram(b,[m,f,g],m.dtype),v=Kr({inputs:{x:y},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),v}};class ou{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const o=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,i=2===(0,s.OBj)().getNumber("WEBGL_VERSION")?"while (left < right) {":o,a="left"===r?"<":"<=";this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${i}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${a} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}const iu={kernelName:s.nr8,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:o,values:i}=t,{side:s}=r,a=new ou(o.shape[0],o.shape[1],i.shape[1],s),c=[[o.shape[1]]];return n.runWebGLProgram(a,[o,i],"int32",c)}};class su{constructor(e,t,n){let r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)o="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[];for(let r=0;r<t.length;r++)s.push(`${n[r]}`),r<e&&i.push(`${n[r]}`);r=i.join(),o=s.join()}const i=Ne(n);this.userCode=`\n      void main() {\n        ${i} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${o}));\n        } else {\n          setOutput(getB(${o}));\n        }\n      }\n    `}}const au={kernelName:s.PhF,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:o,e:i}=t,a=new su(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(a,[r,o,i],(0,s.x8V)(o.dtype,i.dtype))}},cu=Gr({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${s.Wap.SELU_SCALEALPHA};\n  float scale = ${s.Wap.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),uu={kernelName:s.oFR,backendName:"webgl",kernelFunc:cu},lu=Gr({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:Hn}),du={kernelName:s.a5O,backendName:"webgl",kernelFunc:lu},pu=Gr({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),hu={kernelName:s.i5y,backendName:"webgl",kernelFunc:pu},fu=Gr({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),mu={kernelName:s.RQH,backendName:"webgl",kernelFunc:fu},gu=Gr({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),bu={kernelName:s.wYB,backendName:"webgl",kernelFunc:gu},yu=Gr({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),vu={kernelName:s.MRv,backendName:"webgl",kernelFunc:yu},wu={kernelName:s.TQc,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:i,paddings:a}=r;s.D5U.assert(o.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const c=i.reduce(((e,t)=>e*t)),u=[[0,0]];u.push(...a);for(let e=1+i.length;e<o.shape.length;++e)u.push([0,0]);const l=[],d=Tc({inputs:{x:o},backend:n,attrs:{paddings:u,constantValue:0}}),p=s.Wap.getReshaped(d.shape,i,c,!1),h=s.Wap.getPermuted(p.length,i.length,!1),f=s.Wap.getReshapedPermuted(d.shape,i,c,!1),m=Kr({inputs:{x:d},backend:n,attrs:{shape:p}}),g=so({inputs:{x:m},backend:n,attrs:{perm:h}}),b=Kr({inputs:{x:g},backend:n,attrs:{shape:f}});return l.push(d),l.push(m),l.push(g),l.forEach((e=>n.disposeIntermediateTensorInfo(e))),b}},xu={kernelName:s.O3z,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:o,denseShape:i,defaultValue:s}=t;if(1!==i.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${i.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${r.shape}`);if(1!==o.shape.length)throw new Error(`Values must be a vector, saw:\n         ${o.shape}`);if(0!==s.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${s.shape}`);const a=n.readSync(r.dataId),c=n.readSync(o.dataId),u=n.readSync(i.dataId),l=n.readSync(s.dataId)[0],[d,p,h,f,m]=Jn(a,r.shape,r.dtype,c,o.dtype,u,l);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],o.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}},Su={kernelName:s.nhH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:o,newShape:i}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==o.shape.length)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(1!==i.shape.length)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const s=Array.from(n.readSync(o.dataId)),a=n.readSync(r.dataId),c=Array.from(n.readSync(i.dataId)),[u,l,d]=qn(a,r.shape,r.dtype,s,c);return[n.makeTensorInfo(l,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}},Eu={kernelName:s.w3H,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${o.shape}`);if(1!==i.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${i.shape}`);const s=n.readSync(r.dataId),a=n.readSync(o.dataId),c=n.readSync(i.dataId),[u,l]=Qn(s,r.shape,r.dtype,a,c,!0);return n.makeTensorInfo(l,r.dtype,u)}},Tu={kernelName:s.ZjV,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${o.shape}`);if(1!==i.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${i.shape}`);const s=n.readSync(r.dataId),a=n.readSync(o.dataId),c=n.readSync(i.dataId),[u,l]=Qn(s,r.shape,r.dtype,a,c);return n.makeTensorInfo(l,r.dtype,u)}},Cu={kernelName:s.D2d,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:i,defaultValue:a}=t,{outputShape:c}=r,{sliceRank:u,numUpdates:l,sliceSize:d,strides:p,outputSize:h}=s.Wap.calculateShapes(i,o,c);if("string"===i.dtype){const e=n.bufferSync(o),t=n.bufferSync(i),r=s.D5U.decodeString(n.readSync(a.dataId)[0]),f=zn(e,t,c,h,d,l,u,p,r,!1);return n.makeTensorInfo(c,f.dtype,f.values)}const f=new nu(l,u,o.shape.length,i.shape.length,p,[h,1],!1),m=n.runWebGLProgram(f,[i,o,a],i.dtype),g=Kr({inputs:{x:m},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(m),g}},_u={kernelName:s.L8s,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:i,axis:a}=r,c=s.D5U.parseAxisParam(a,o.shape)[0],u=s.Wap.prepareSplitSize(o,i,c),l=o.shape.length,d=new Array(l).fill(0),p=o.shape.slice();return u.map((e=>{const t=[...p];t[c]=e;const r=ri({inputs:{x:o},backend:n,attrs:{begin:d,size:t}});return d[c]+=e,r}))}},Iu="return sqrt(x);",ku=Gr({opSnippet:Iu,packedOpSnippet:Iu,cpuKernelImpl:er}),Ru={kernelName:s.FKq,backendName:"webgl",kernelFunc:ku},Nu=Gr({opSnippet:"return x * x;"}),Ou={kernelName:s.bK0,backendName:"webgl",kernelFunc:Nu},Au="return (a - b) * (a - b);",Du=Ur({opSnippet:Au,packedOpSnippet:Au}),Lu={kernelName:s._tC,backendName:"webgl",kernelFunc:Du},Pu={kernelName:s.h8e,backendName:"webgl",kernelFunc:function({inputs:e,attrs:t,backend:n}){const{x:r}=e,o=`if (isnan(x)) return x;\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `,i=new yr(r.shape,o);return n.runWebGLProgram(i,[r],r.dtype)}};class Vu{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,o=Ne(n.length),i=Ne(n.length);let s="";if(1===r)s="coords * strides + begin";else{let e=0;s=n.map(((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`))).join(",")}this.userCode=`\n      ${o} begin = ${o}(${e});\n      ${o} strides = ${o}(${t});\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        setOutput(getX(${s}));\n      }\n    `}}const Mu={kernelName:s.jQk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:i,end:a,strides:c,beginMask:u,endMask:l,ellipsisMask:d,newAxisMask:p,shrinkAxisMask:h}=r,{finalShapeSparse:f,finalShape:m,isIdentity:g,sliceDim0:b,isSimpleSlice:y,begin:v,end:w,strides:x}=s.kuN.sliceInfo(o.shape,i,a,c,u,l,d,p,h);let S;if(g)S=Kr({inputs:{x:o},backend:n,attrs:{shape:m}});else if(b||y){s.D5U.assert(o.shape.length>=1,(()=>`Input must have rank at least 1, got: ${o.shape.length}`));const e=s.kuN.computeOutShape(v,w,x),t=ri({inputs:{x:o},backend:n,attrs:{begin:v,size:e}});S=Kr({inputs:{x:t},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(t)}else if(n.shouldExecuteOnCPU([o])){const e=n.readSync(o.dataId),t=(0,s.f3b)(o.shape,o.dtype,e),r=tr(f,t,x,v);S=n.makeTensorInfo(m,o.dtype,r.values)}else{const e=new Vu(v,x,f);S=n.runWebGLProgram(e,[o],o.dtype)}const E=Kr({inputs:{x:S},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(S),E}},Fu={kernelName:s._JP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:o,nGramWidths:i,leftPad:s,rightPad:a,padWidth:c,preserveShortSequences:u}=r,{data:l,dataSplits:d}=t,p=n.readSync(l.dataId),h=n.readSync(d.dataId),[f,m]=nr(p,h,o,i,s,a,c,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}},Wu={kernelName:s.s1s,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:o}=r,{input:i,delimiter:s}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(1!==i.shape.length)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(0!==s.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const a=n.readSync(i.dataId),c=n.readSync(s.dataId)[0],[u,l,d]=rr(a,c,o),p=l.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}},Zu={kernelName:s.XkS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:o}=r,{input:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const s=n.readSync(i.dataId),a=or(s,o);return n.makeTensorInfo(i.shape,"int32",a)}},Bu=Gr({opSnippet:"return tan(x);"}),Gu={kernelName:s.sEM,backendName:"webgl",kernelFunc:Bu},Uu=Gr({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),$u={kernelName:s.MIZ,backendName:"webgl",kernelFunc:Uu};class Xu{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;const r=Ne(this.rank),o=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let t=0;t<e.length;t++)r.push(`imod(${n[t]}, ${e[t]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${o}));\n      }\n    `}}function ju(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:i}=r;if("string"===o.dtype||o.shape.length>5){const e=n.readSync(o.dataId),t="string"===o.dtype?e.map((e=>s.D5U.decodeString(e))):e,r=(0,s.f3b)(o.shape,o.dtype,t),a=sr(r,i);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const a=new Xu(o.shape,i);return n.runWebGLProgram(a,[o],o.dtype)}const zu={kernelName:s.n9L,backendName:"webgl",kernelFunc:ju};class Hu{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class Yu{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function Ku(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function Ju(e){let t=1;for(;t<e;)t*=2;return t}const qu={kernelName:s.cWu,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{k:i,sorted:a}=r,c=(0,s.OBj)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=(0,s.OBj)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=o.shape,d=l[l.length-1];if(n.shouldExecuteOnCPU([o])||d<c||i>u){const e=n.readSync(o.dataId),[t,r]=ar(e,l,o.dtype,i,a);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===i)return l[l.length-1]=0,[n.makeTensorInfo(l,o.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===d)return[o,Ms({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const p=n.texData.get(o.dataId),h=null!==p&&p.isPacked,f=h?n.unpackTensor(o):o,m=s.D5U.sizeFromShape(l)/d,g=Kr({inputs:{x:f},attrs:{shape:[m,d]},backend:n});h&&Ku(n,f);const b=Ju(i),y=Ju(d);let v=null;const w=()=>null===v?[g,g]:[g,v],x=(e,t,r)=>{const o=w(),i=new Hu(r),s=[[d],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],a=v;v=n.runWebGLProgram(i,o,"int32",s),Ku(n,a)};for(let e=1;e<b;e*=2){const t=2*e;for(let n=e;n>=1;n/=2)x(t,n,[m,y])}for(let e=y;e>b;e/=2){const t=w(),r=new Yu([m,e/2]),o=[[d],[null===v?1:0],[b]],i=v;v=n.runWebGLProgram(r,t,"int32",o),Ku(n,i);const s=b/2,a=2*s;for(let e=s;e>=1;e/=2)x(a,e,v.shape)}let S=v;v=ri({inputs:{x:v},backend:n,attrs:{begin:0,size:[m,i]}}),Ku(n,S);let E=ta({inputs:{x:g,indices:v},backend:n,attrs:{axis:1,batchDims:1}});Ku(n,g);const T=l.slice(0,-1);T.push(i),S=v,v=Kr({inputs:{x:v},attrs:{shape:T},backend:n}),Ku(n,S);const C=E;return E=Kr({inputs:{x:E},attrs:{shape:T},backend:n}),Ku(n,C),[E,v]}};class Qu{constructor(e,t,n,r,o,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const s="nearest"===n?1:2;let a;switch(r){case"constant":default:a=1;break;case"reflect":a=2;break;case"wrap":a=3;break;case"nearest":a=4}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${a} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${a} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${a} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${o});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${o});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${s} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const el={kernelName:s.wx7,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o,transforms:i}=t,{interpolation:s,fillMode:a,fillValue:c,outputShape:u}=r,[l,d,p,h]=o.shape,[f,m]=null!=u?u:[d,p],g=new Qu(d,p,s,a,c,[l,f,m,h]);return n.runWebGLProgram(g,[o,i],"float32")}},tl={kernelName:s.kpP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:o}=n,{x:i}=t;he(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=r.readSync(i.dataId),{outputValues:a,outputShape:c,indices:u}=ur(s,o,i.shape,i.dtype);return[r.makeTensorInfo(c,i.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}},nl={kernelName:s.ToN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:o}=t;let{axis:i}=r;i<0&&(i+=o.shape.length);const s=o,a=s.shape.length,c=o.shape[i],u=new Array(a-1);let l=0;for(let e=0;e<a;e++)e!==i&&(u[l++]=s.shape[e]);const d=[],p=new Array(a).fill(0),h=s.shape.slice();h[i]=1;const f=new Array(c);for(let e=0;e<f.length;e++){p[i]=e;const t=ri({inputs:{x:s},backend:n,attrs:{begin:p,size:h}}),r=Kr({inputs:{x:t},backend:n,attrs:{shape:u}});f[e]=r,d.push(t)}return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class rl{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,o=e.inSize,i=e.numSegments,s=i*Math.ceil(o/n);this.outputShape=[r,s];const a=4*Math.floor(n/4),c=n%4,u="\n        sumValue += dot(values, segFilter);\n    ";let l="";o%n>0&&(l=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return initializationValue;\n        }\n      `);let d="";o%n>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${l}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${d}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${i})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${i})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}const ol=[uo,po,fo,go,vo,So,Eo,To,No,Oo,Do,Po,Mo,Wo,Bo,$o,Xo,Ho,Yo,Ko,Qo,ii,si,ai,pi,mi,yi,Pr,xi,Ri,Pi,Zi,Bi,Gi,Ui,$i,ji,Hi,Ki,ns,rs,os,ss,us,ps,hs,ms,bs,ys,ws,xs,Es,Cs,Is,Rs,As,Ps,Fs,Zs,Us,Xs,Hs,Ks,Js,Qs,na,oa,sa,Dr,aa,_i,ua,da,ha,Fr,ma,ba,ya,wa,Sa,Ta,_a,ka,Oa,Da,Pa,Ma,Fa,Wa,Ga,Ua,$a,Xa,ja,Ha,Ja,Qa,cc,Yr,uc,dc,hc,mc,ui,bc,wc,xc,Cc,Ic,Br,kc,Nc,di,nc,Ac,Lc,Vc,Jr,Wc,Bc,$c,jc,Yc,Jc,Qc,tu,ru,iu,au,uu,du,hu,mu,bu,oi,ac,vu,wu,xu,Su,Eu,Tu,Cu,_u,Ru,Ou,Lu,Pu,Mu,Fu,Wu,Zu,ic,io,Gu,$u,zu,qu,el,ao,tl,nl,{kernelName:s.Qvg,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:i}=t,{numSegments:a}=r,c=o.shape.length,u=[];let l=0;const d=s.Wap.getAxesPermutation([l],c);let p=o;null!=d&&(p=so({inputs:{x:o},backend:n,attrs:{perm:d}}),u.push(p),l=s.Wap.getInnerMostAxes(1,c)[0]);const h=s.Wap.segment_util.computeOutShape(p.shape,l,a),f=s.D5U.sizeFromShape([p.shape[l]]),m=Kr({inputs:{x:p},backend:n,attrs:{shape:[-1,f]}});u.push(m);const g=(0,s.z4k)(o.dtype),b=(e,t,r,o,i)=>{const a=e.shape[0],c=e.shape[1],l=s.Wap.segment_util.segOpComputeOptimalWindowSize(c,i),d=new rl({windowSize:l,inSize:c,batchSize:a,numSegments:i},t),p=n.compileAndRun(d,[e,r],o);if(u.push(p),p.shape[1]===i)return p;const h=Rc({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),f=ju({inputs:{x:h},backend:n,attrs:{reps:[c/l]}});return u.push(h),u.push(f),b(p,t,f,o,i)},y=Kr({inputs:{x:b(m,"unsortedSegmentSum",i,g,a)},backend:n,attrs:{shape:h}});let v=y;if(null!=d){u.push(y);const e=s.Wap.getUndoAxesPermutation(d);v=so({inputs:{x:v},backend:n,attrs:{perm:e}})}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}},vc];for(const e of ol)(0,s.wCN)(e)},2073:(e,t,n)=>{"use strict";n.d(t,{JL:()=>r,Zu:()=>o});class r{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class o{refCount(e){return i("refCount")}incRef(e){return i("incRef")}timerAvailable(){return!0}time(e){return i("time")}read(e){return i("read")}readSync(e){return i("readSync")}readToGPU(e,t){return i("readToGPU")}numDataIds(){return i("numDataIds")}disposeData(e,t){return i("disposeData")}write(e,t,n){return i("write")}move(e,t,n,r,o){return i("move")}memory(){return i("memory")}floatPrecision(){return i("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return i("dispose")}}function i(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}},3337:(e,t,n)=>{"use strict";function r(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,o=e.length,i=0,s=!1;for(;r<o;){i=r+(o-r>>>1);const a=n(t,e[i]);a>0?r=i+1:(o=i,s=!a)}return s?r:-r-1}(e,t,n||o)}(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function o(e,t){return e>t?1:e<t?-1:0}function i(e,t,n,r,o){return c(e,t,n,r,o,0)}function s(e,t,n,r,o,i){return c(e,t,n,r,o,0,!1,i,!0)}function a(e,t,n,r,o,i){return c(e,t,n,r,o,i,!0)}function c(e,t,n,o,i,s,a=!1,c=!1,p=!1){const h=[];for(let e=0;e<t.length;e++)t[e]>i&&h.push({score:t[e],boxIndex:e,suppressBeginIndex:0});h.sort(d);const f=s>0?-.5/s:0,m=[],g=[];for(;m.length<n&&h.length>0;){const t=h.pop(),{score:n,boxIndex:s,suppressBeginIndex:a}=t;if(n<i)break;let c=!1;for(let n=m.length-1;n>=a;--n){const r=u(e,s,m[n]);if(r>=o){c=!0;break}if(t.score=t.score*l(o,f,r),t.score<=i)break}t.suppressBeginIndex=m.length,c||(t.score===n?(m.push(s),g.push(t.score)):t.score>i&&r(h,t,d))}const b=m.length,y=n-b;c&&y>0&&(m.push(...new Array(y).fill(0)),g.push(...new Array(y).fill(0)));const v={selectedIndices:m};return a&&(v.selectedScores=g),p&&(v.validOutputs=b),v}function u(e,t,n){const r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),u=Math.min(o[0],o[2]),l=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),h=(a-i)*(c-s),f=(d-u)*(p-l);if(h<=0||f<=0)return 0;const m=Math.max(i,u),g=Math.max(s,l),b=Math.min(a,d),y=Math.min(c,p),v=Math.max(b-m,0)*Math.max(y-g,0);return v/(h+f-v)}function l(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function d(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}n.d(t,{GP:()=>i,qP:()=>s,pA:()=>a})},8333:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(2657);function o(e,t){const n=[];for(let e=0;e<t.length;e++)t[e]&&n.push(e);const o=(0,r.f)(e,"int32"),i=(0,r.f)([n.length,e.length],"int32");for(let t=0;t<n.length;t++){const r=o.indexToLoc(n[t]),s=t*e.length;i.values.set(r,s)}return i.toTensor()}},7097:(e,t,n)=>{"use strict";n.d(t,{BV:()=>w,wv:()=>v});var r=n(2073),o=n(2885),i=n(5938),s=n(9121),a=n(6151),c=n(4706),u=n(9122),l=n(569);class d{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new h)}profileKernel(e,t,n){let r;const i=()=>{r=n()};let s;const a=u.now();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(const e of r)e.dataSync();s=Promise.resolve({kernelMs:u.now()-a})}if((0,o.OB)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let t=0;t<r.length;t++){const n=r[t];n.data().then((t=>{p(t,n.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:s.then((e=>e.kernelMs)),extraInfo:s.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:o,extraInfo:i}=e;n.forEach((e=>{Promise.all([e.data(),r,i]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],o,n[2])}))}))}}function p(e,t,n){if("float32"!==t)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${n}'`),!0}return!1}class h{logKernelProfile(e,t,n,r,o,i){const s="number"==typeof r?l.oj(`${r}ms`,9):r.error,a=l.oj(e,25),c=t.rank,u=t.size,d=l.oj(t.shape.toString(),14);let p="";for(const e in o){const n=o[e];if(null!=n){const r=n.shape||t.shape,o=r.length;p+=`${e}: ${o}D ${o>0?r:""} `}}console.log(`%c${a}\t%c${s}\t%c${c}D ${d}\t%c${u}\t%c${p}\t%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}var f=n(4077),m=n(747);function g(e){return null!=e.kernelName}class b{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class y{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new b}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(c.Z(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new d(this.backendInstance),!0}setupRegisteredKernels(){(0,a.tr)(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){(0,a.tr)(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof r.Zu||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId||(this.registry[e]=n,this.pendingBackendInit=null,0)))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,c.Z(`Initialization of backend ${e} failed`),c.Z(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(t){return c.Z(`Initialization of backend ${e} failed`),c.Z(t.stack||t.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:o}=this.initializeBackend(n);if(o||r)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,o=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,o,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(e){throw t(),e}}nextTensorId(){return y.nextTensorId++}nextVariableId(){return y.nextVariableId++}clone(e){const t=w.runKernel(s.iJ,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e};return w.runKernel(s.RF,t,{dtype:"float32"})}})),[],{}),t}runKernel(e,t,n){if(null==this.backendName&&this.backend,null==(0,a.pI)(e,this.backendName))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let o=0;n.forEach((e=>{o+="complex64"===e.dtype?3:1}));const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=r-t-o-i;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),o=this.state.numBytes,i=this.state.numTensors;let s,c;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const u=g(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(g(e)){const{kernelName:t,inputs:o,attrs:i}=e;null==this.backendName&&this.backend;const u=(0,a.pI)(t,this.backendName);l.hu(null!=u,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),s=()=>{const e=this.backend.numDataIds();c=u.kernelFunc({inputs:o,attrs:i,backend:this.backend});const s=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,s);const a=s.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(t,o,a);n=this.saveTensorsForBackwardMode(e)}return a}}else{const{forwardFunc:t}=e,o=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};s=()=>{const e=this.backend.numDataIds();c=this.tidy((()=>t(this.backend,o)));const n=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,e,n),n}}const{inputs:d,attrs:p}=e,h=g(e)?null:e.backwardsFunc;let f;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(f=this.profiler.profileKernel(u,d,(()=>s())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),t=f.outputs):t=s()})),r&&this.addTapeNode(u,d,t,h,n,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map((e=>null!=d[e]?d[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(c)?t:t[0]}saveTensorsForBackwardMode(e){const t=e.map((e=>this.keep(this.clone(e))));return t}getTensorsForGradient(e,t,n){const r=(0,a.uk)(e);if(null!=r){const e=r.inputsToSave||[],o=r.outputsToSave||[];let i;r.saveAllInputs?(l.hu(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),i=Object.keys(t).map((e=>t[e]))):i=e.map((e=>t[e]));const s=n.filter(((e,t)=>o[t]));return i.concat(s)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let o=e;"string"===n&&l.HD(e[0])&&(o=e.map((e=>u.encodeString(e))));const i=r.write(o,t,n),s=new f.es(t,n,i,this.nextTensorId());if(this.trackTensor(s,r),"string"===n){const e=this.state.tensorInfo.get(i),t=(0,l.Ub)(o);this.state.numBytes+=t-e.bytes,e.bytes=t}return s}makeTensorFromDataId(e,t,n,r){const o={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(o,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:o}=e,i=new f.es(r,o,n,this.nextTensorId());return this.trackTensor(i,t),i}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const o=new f._w(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*l.bT(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof f._w||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*l.bT(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const e of this.state.activeProfile.kernels)e.kernelTimeMs=await e.kernelTimeMs,e.extraInfo=await e.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,o,i){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:o},c=(0,a.uk)(e);null!=c&&(r=c.gradFunc),null!=r&&(s.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=l.wT(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],o,i))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=(0,m.Vu)(e),n=new Set(t.map((e=>e.id)));for(let e=0;e<this.state.activeScope.track.length;e++){const t=this.state.activeScope.track[e];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n,r=!1){if(l.hu(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const o=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));l.hu(o instanceof f.es,(()=>"The result y returned by f() must be a tensor."));const i=function(e,t,n){const r={},o={};for(let e=0;e<t.length;e++)r[t[e].id]=!0;for(let n=0;n<e.length;n++){const i=e[n],s=i.inputs;for(const e in s){const n=s[e];let a=!1;for(let e=0;e<t.length;e++)if(r[n.id]){i.outputs.forEach((e=>r[e.id]=!0)),a=!0,o[i.id]=!0;break}if(a)break}}const i={};i[n.id]=!0;const s={};for(let t=e.length-1;t>=0;t--){const n=e[t],r=n.inputs;for(let e=0;e<n.outputs.length;e++)if(i[n.outputs[e].id]){for(const e in r)i[r[e].id]=!0,s[n.id]=!0;break}}const a=[];for(let t=0;t<e.length;t++){const n=e[t];if(o[n.id]&&s[n.id]){const e={};for(const t in n.inputs){const o=n.inputs[t];r[o.id]&&(e[t]=o)}const t=Object.assign({},n);t.inputs=e,t.outputs=n.outputs,a.push(t)}}return a}(this.state.activeTape,t,o);if(!r&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[o.id]=null==n?function(e){const t=(0,l.p8)((0,l.NA)(e),"float32");return w.makeTensor(t,e,"float32")}(o.shape):n,function(e,t,n,r){for(let o=t.length-1;o>=0;o--){const i=t[o],s=[];if(i.outputs.forEach((t=>{const n=e[t.id];null!=n?s.push(n):s.push(null)})),null==i.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(s);for(const t in i.inputs){if(!(t in a))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(a)}.`);const o=n((()=>a[t]()));if("float32"!==o.dtype)throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${o.dtype}'`);const s=i.inputs[t];if(!l.cO(o.shape,s.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${t}' has shape '${o.shape}', which does not match the shape of the input '${s.shape}'`);if(null==e[s.id])e[s.id]=o;else{const t=e[s.id];e[s.id]=r(t,o),t.dispose()}}}}(e,i,(e=>this.tidy(e)),x);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:o,grads:r}}))}customGrad(e){return l.hu(l.mf(e),(()=>"The f passed in customGrad(f) must be a function.")),(...t)=>{let n;l.hu(t.every((e=>e instanceof f.es)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const r={};return t.forEach(((e,t)=>{r[t]=e})),this.runKernelFunc({forwardFunc:(r,o)=>(n=e(...t,o),l.hu(n.value instanceof f.es,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),l.hu(l.mf(n.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),n.value),backwardsFunc:(e,r)=>{const o=n.gradFunc(e,r),i=Array.isArray(o)?o:[o];l.hu(i.length===t.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),l.hu(i.every((e=>e instanceof f.es)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const s={};return i.forEach(((e,t)=>{s[t]=()=>e})),s},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=(0,u.now)(),n=await this.backend.time(e);return n.wallMs=(0,u.now)()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new b;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function v(){const e=(0,i.D)();if(null==e._tfengine){const t=new o.qA(e);e._tfengine=new y(t)}return(0,o.iG)(e._tfengine.ENV),(0,f.Vi)((()=>e._tfengine)),e._tfengine}y.nextTensorId=0,y.nextVariableId=0;const w=v();function x(e,t){const n={a:e,b:t};return w.runKernel(s.mm,n)}},2885:(e,t,n)=>{"use strict";n.d(t,{OB:()=>s,iG:()=>c,qA:()=>o});var r=n(569);class o{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=i,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(s().getBool("IS_TEST")||s().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];s().getBool("IS_TEST")||s().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if((0,r.tI)(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);"tfjsflags"in e&&e.tfjsflags.split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}(t,n)}))}}function i(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,((e,...n)=>(function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")))),t}function s(){return a}let a=null;function c(e){a=e}},5938:(e,t,n)=>{"use strict";let r;function o(){if(null==r){let e;if("undefined"!=typeof window)e=window;else if(void 0!==n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}r=e}return r}function i(e,t){const n=function(){const e=o();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}n.d(t,{D:()=>o,R:()=>i})},4368:(e,t,n)=>{"use strict";n.d(t,{B9:()=>u,Cd:()=>d,Cn:()=>l,SR:()=>a,jq:()=>p,lu:()=>c});var r=n(7097),o=n(2885),i=n(4077),s=n(747);function a(){return r.BV}function c(e,t){return r.BV.tidy(e,t)}function u(e){(0,s.Vu)(e).forEach((e=>e.dispose()))}function l(e){return r.BV.keep(e)}function d(){return r.BV.ready()}function p(e,t,n=1){return r.BV.registerBackend(e,t,n)}(0,i.FZ)((function(e){(0,o.OB)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}))},633:(e,t,n)=>{"use strict";n.d(t,{cb:()=>o});var r=n(7097);function o(e){return r.BV.customGrad(e)}n(4077)},5958:(e,t,n)=>{"use strict";n.d(t,{SYM:()=>Ze.SY,VGw:()=>Ze.VG,SpW:()=>Ze.Sp,mm_:()=>Ze.mm,Xze:()=>Ze.Xz,oT6:()=>Ze.oT,IKK:()=>Ze.IK,sJF:()=>Ze.sJ,aJk:()=>Ze.aJ,M2y:()=>Ze.M2,qw7:()=>Ze.qw,jMg:()=>Ze.jM,QCc:()=>Ze.QC,Oyi:()=>Ze.Oy,JhU:()=>Ze.Jh,_k9:()=>Ze._k,IMb:()=>Ze.IM,ROF:()=>Ze.RO,XLW:()=>Ze.XL,zws:()=>Ze.zw,zvY:()=>Ze.zv,eEB:()=>Ze.eE,RFZ:()=>Ze.RF,gJX:()=>Ze.gJ,xnO:()=>Ze.xn,Zz9:()=>Ze.Zz,yj2:()=>Ze.yj,Eh3:()=>Ze.Eh,mhS:()=>Ze.mh,wUP:()=>Ze.wU,wm:()=>Ze.wm,x12:()=>Ze.x1,o2y:()=>Ze.o2,ik2:()=>Ze.ik,mc4:()=>Ze.mc,TR1:()=>Ze.TR,VcC:()=>Ze.Vc,Byc:()=>Ze.By,iHb:()=>Ze.iH,JLz:()=>Cn.JL,QRR:()=>Ze.QR,T0n:()=>Ze.T0,cie:()=>Ze.ci,sL$:()=>Ze.sL,y7R:()=>Ze.y7,$w:()=>Ze.$w,p4S:()=>Ze.p4,$g6:()=>Ze.$g,SX0:()=>Ze.SX,HEU:()=>Ze.HE,hdR:()=>Ze.hd,Omj:()=>Ze.Om,NEP:()=>Ze.NE,YFo:()=>Ze.YF,Y0y:()=>Ze.Y0,vwp:()=>Ze.vw,deh:()=>Ze.de,Uyb:()=>Ze.Uy,OR:()=>Ze.OR,jeX:()=>Ze.je,eBW:()=>Ze.eB,sHE:()=>Ze.sH,_V0:()=>Ze._V,luS:()=>Ze.lu,q1x:()=>Ze.q1,qi_:()=>Ze.qi,iZT:()=>Ze.iZ,Acj:()=>Ze.Ac,Qg5:()=>Ze.Qg,iJz:()=>Ze.iJ,J_u:()=>Ze.J_,avt:()=>Ze.av,iWB:()=>Ze.iW,r7n:()=>Ze.r7,Zuw:()=>Cn.Zu,eZ0:()=>Ze.eZ,Hhh:()=>Ze.Hh,J$2:()=>Ze.J$,vtC:()=>Ze.vt,CAk:()=>Ze.CA,e7N:()=>Ze.e7,ZbH:()=>Ze.Zb,kU:()=>Ze.kU,PYm:()=>Ze.PY,VfG:()=>Ze.Vf,MZg:()=>Ze.MZ,YoZ:()=>Ze.Yo,mTV:()=>Ze.mT,OAf:()=>Ze.OA,OU7:()=>Ze.OU,OV7:()=>Ze.OV,vFR:()=>Ze.vF,BMI:()=>Ze.BM,q2K:()=>Ze.q2,c17:()=>Ze.c1,q8u:()=>Ze.q8,jQs:()=>Ze.jQ,Vbg:()=>Ze.Vb,NZg:()=>Ze.NZ,wYn:()=>Ze.wY,kuV:()=>Ze.ku,uv1:()=>Ze.uv,cye:()=>Ze.cy,W0H:()=>Ze.W0,yQU:()=>Ze.yQ,we_:()=>Ze.we,qWM:()=>Ze.qW,QiL:()=>Ze.Qi,lyA:()=>Ze.ly,pe_:()=>Ze.pe,o0g:()=>Ze.o0,DlI:()=>Ze.Dl,e6w:()=>Ze.e6,xJR:()=>Ze.xJ,oHH:()=>Ze.oH,$HU:()=>Ze.$H,qkr:()=>Ze.qk,SbG:()=>Ze.Sb,HZH:()=>Ze.HZ,_Yw:()=>Ze._Y,zbQ:()=>Ze.zb,dpD:()=>Ze.dp,Hmb:()=>Ze.Hm,mKl:()=>Ze.mK,b9H:()=>Ze.b9,e07:()=>Ze.e0,bV0:()=>Ze.bV,xQA:()=>Ze.xQ,nr8:()=>Ze.nr,PhF:()=>Ze.Ph,oFR:()=>Ze.oF,a5O:()=>Ze.a5,i5y:()=>Ze.i5,RQH:()=>Ze.RQ,wYB:()=>Ze.w3,p2w:()=>Ze.p2,Gcp:()=>Ze.Gc,MRv:()=>Ze.MR,TQc:()=>Ze.TQ,O3z:()=>Ze.O3,nhH:()=>Ze.nh,w3H:()=>Ze.YW,ZjV:()=>Ze.Zj,D2d:()=>Ze.D2,L8s:()=>Ze.L8,FKq:()=>Ze.FK,bK0:()=>Ze.bK,_tC:()=>Ze._t,h8e:()=>Ze.h8,jQk:()=>Ze.m2,_JP:()=>Ze._J,s1s:()=>Ze.s1,XkS:()=>Ze.Xk,Tr8:()=>Ze.Tr,GBy:()=>Ze.GB,sEM:()=>Ze.sE,MIZ:()=>Ze.MI,esB:()=>be.es,YDk:()=>be.YD,n9L:()=>Ze.n9,cWu:()=>Ze.cW,wx7:()=>Ze.wx,G3Y:()=>Ze.G3,kpP:()=>Ze.kp,ToN:()=>Ze.To,Qvg:()=>Ze.Qv,RuY:()=>Ze.Ru,usg:()=>Ze.us,IHx:()=>mt.IHx,Wap:()=>c,Jyw:()=>We,Xhn:()=>i,f3b:()=>mt.f3b,pju:()=>mt.pju,d9v:()=>mt.d9v,zoF:()=>mt.zoF,Izb:()=>mt.Izb,C2$:()=>r,hiC:()=>mt.hiC,SRH:()=>gt.SR,OBj:()=>m.OB,dt4:()=>mt.dt4,BHj:()=>mt.BHj,io:()=>o,CnY:()=>gt.Cn,GDt:()=>u,dC7:()=>mt.dC7,glt:()=>yt,Cd_:()=>gt.Cd,jqO:()=>gt.jq,wCN:()=>Be.wC,XLQ:()=>mt.XLQ,iD$:()=>mt.iD$,XD2:()=>mt.XD2,tPi:()=>mt.tPi,kuN:()=>s,L9e:()=>mt.L9e,knu:()=>mt.knu,luU:()=>mt.luU,z4k:()=>ft.z4,XeE:()=>mt.XeE,RRF:()=>mt.RRF,odF:()=>mt.odF,lub:()=>gt.lu,HHK:()=>mt.HHK,x8V:()=>ft.x8,D5U:()=>ht,lls:()=>mt.lls});var r={};n.r(r),n.d(r,{isBrowser:()=>f,isMobile:()=>h,mockIsMobile:()=>p});var o={};n.r(o),n.d(o,{browserFiles:()=>Se,browserHTTPRequest:()=>Oe,concatenateArrayBuffers:()=>_,copyModel:()=>le,decodeWeights:()=>S,encodeWeights:()=>x,fromMemory:()=>Pe,fromMemorySync:()=>Ve,getLoadHandlers:()=>V,getModelArtifactsForJSON:()=>R,getModelArtifactsInfoForJSON:()=>N,getSaveHandlers:()=>P,http:()=>Ne,isHTTPScheme:()=>ke,listModels:()=>ce,loadWeights:()=>Ce,moveModel:()=>de,registerLoadRouter:()=>L,registerSaveRouter:()=>D,removeModel:()=>ue,weightsLoaderFactory:()=>_e,withSaveHandler:()=>Me,withSaveHandlerSync:()=>Fe});var i={};n.r(i),n.d(i,{fromPixels:()=>Ye,fromPixelsAsync:()=>ze,toPixels:()=>He});var s={};n.r(s),n.d(s,{assertParamsValid:()=>Ke,computeFlatOffset:()=>ut,computeOutShape:()=>qe,getNormalizedAxes:()=>nt,isSliceContinous:()=>ct,maskToAxes:()=>Je,parseSliceParams:()=>lt,sliceInfo:()=>dt,startForAxis:()=>st,startIndicesWithElidedDims:()=>rt,stopForAxis:()=>at,stopIndicesWithElidedDims:()=>ot,stridesForAxis:()=>it,stridesWithElidedDims:()=>Qe});var a={};n.r(a),n.d(a,{collectGatherOpShapeInfo:()=>wn,computeOutShape:()=>vn,segOpComputeOptimalWindowSize:()=>yn});var c={};n.r(c),n.d(c,{ERF_A1:()=>Mt,ERF_A2:()=>Ft,ERF_A3:()=>Wt,ERF_A4:()=>Zt,ERF_A5:()=>Bt,ERF_P:()=>Vt,PARALLELIZE_THRESHOLD:()=>Tt,SELU_SCALE:()=>Pt,SELU_SCALEALPHA:()=>Lt,applyActivation:()=>Et.QH,assertAndGetBroadcastShape:()=>We.assertAndGetBroadcastShape,assertAxesAreInnerMostDims:()=>vt.lB,assertParamsConsistent:()=>wt,assignToTypedArray:()=>Ht,axesAreInnerMostDims:()=>vt.YB,calculateShapes:()=>Dt.SU,checkEinsumDimSizes:()=>en,checkPadOnDimRoundingMode:()=>St.m,combineLocations:()=>vt.Vh,complexWithEvenIndex:()=>Xt,complexWithOddIndex:()=>jt,computeConv2DInfo:()=>St.Ix,computeConv3DInfo:()=>St.jw,computeDefaultPad:()=>St.aO,computeDilation2DInfo:()=>St.Rf,computeOptimalWindowSize:()=>Ct,computeOutAndReduceShapes:()=>vt.kz,computeOutShape:()=>xt,computePool2DInfo:()=>St.Xw,computePool3DInfo:()=>St.pl,convertConv2DDataFormat:()=>St.sl,decodeEinsumEquation:()=>qt,eitherStridesOrDilationsAreOne:()=>St.jT,expandShapeToKeepDim:()=>vt.rv,exponent:()=>Kt,exponents:()=>Yt,fromStringArrayToUint8:()=>Sn,fromUint8ToStringArray:()=>xn,getAxesPermutation:()=>vt.Q3,getBroadcastDims:()=>We.getBroadcastDims,getComplexWithIndex:()=>zt,getEinsumComputePath:()=>tn,getEinsumPermutation:()=>Qt,getFusedBiasGradient:()=>Et.pf,getFusedDyActivation:()=>Et.Fr,getImageCenter:()=>_t,getInnerMostAxes:()=>vt.sY,getPermuted:()=>kt,getReductionAxes:()=>We.getReductionAxes,getReshaped:()=>It,getReshapedPermuted:()=>Rt,getSliceBeginCoords:()=>Nt,getSliceSize:()=>Ot,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>sn,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>an,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>cn,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>dn,getSparseReshapeInputOutputMismatchErrorMessage:()=>hn,getSparseReshapeInputOutputMultipleErrorMessage:()=>pn,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>un,getSparseReshapeNegativeOutputDimErrorMessage:()=>ln,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>bn,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>fn,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>mn,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>gn,getUndoAxesPermutation:()=>vt.LJ,isIdentityPermutation:()=>nn,log:()=>Gt.c,mergeRealAndImagArrays:()=>Ut,prepareAndValidate:()=>At,prepareSplitSize:()=>on,segment_util:()=>a,shouldFuse:()=>Et.uy,slice_util:()=>s,splitRealAndImagArrays:()=>$t,tupleValuesAreOne:()=>St.I0,upcastType:()=>ft.x8,validateInput:()=>Dt.b0,validateUpdateShape:()=>Dt.l5,warn:()=>Gt.Z});var u={};n.r(u),n.d(u,{GP:()=>En.GP,qP:()=>En.qP,pA:()=>En.pA,ZA:()=>Tn.Z});var l=n(7097);let d;function p(e){d=e}function h(e){if(void 0!==d)return d;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function f(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var m=n(2885);const g=(0,m.OB)();g.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),g.registerFlag("IS_BROWSER",(()=>f())),g.registerFlag("IS_NODE",(()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node)),g.registerFlag("IS_CHROME",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),g.registerFlag("PROD",(()=>!1)),g.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>g.getBool("DEBUG"))),g.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),g.registerFlag("IS_TEST",(()=>!1)),g.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>!0)),g.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),g.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));var b=n(1661),y=n(701),v=n(569);const w={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};async function x(e,t){const n=[],r=[],o=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let i=0;i<o.length;++i){const s=o[i],a=Array.isArray(e)?e[i].tensor:e[s];if("float32"!==a.dtype&&"int32"!==a.dtype&&"bool"!==a.dtype&&"string"!==a.dtype&&"complex64"!==a.dtype)throw new Error(`Unsupported dtype in weight '${s}': ${a.dtype}`);const c={name:s,shape:a.shape,dtype:a.dtype};if("string"===a.dtype){const e=new Promise((async e=>{const t=await a.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+4*t.length,r=new Uint8Array(n);let o=0;for(let e=0;e<t.length;e++){const n=t[e],i=new Uint8Array(new Uint32Array([n.length]).buffer);r.set(i,o),o+=4,r.set(n,o),o+=n.length}e(r)}));r.push(e)}else r.push(a.data());null!=t&&(c.group=t),n.push(c)}return{data:E(await Promise.all(r)),specs:n}}function S(e,t){const n={};let r,o=0;for(const i of t){const t=i.name,s=i.dtype,a=i.shape,c=(0,v.NA)(a);let u;if("quantization"in i){const n=i.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${i.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${i.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==s)throw new Error(`Weight ${i.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${s}.`)}const a=w[n.dtype],l=e.slice(o,o+c*a),d="uint8"===n.dtype?new Uint8Array(l):new Uint16Array(l);if("float32"===s)if("uint8"===n.dtype||"uint16"===n.dtype){u=new Float32Array(d.length);for(let e=0;e<d.length;e++){const t=d[e];u[e]=t*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===r&&(r=O()),u=r(d)}else{if("int32"!==s)throw new Error(`Unsupported dtype in weight '${t}': ${s}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);u=new Int32Array(d.length);for(let e=0;e<d.length;e++){const t=d[e];u[e]=Math.round(t*n.scale+n.min)}}o+=c*a}else if("string"===s){const t=(0,v.NA)(i.shape);u=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(o,o+4))[0];o+=4;const n=new Uint8Array(e.slice(o,o+t));u.push(n),o+=t}}else{const r=w[s],i=e.slice(o,o+c*r);if("float32"===s)u=new Float32Array(i);else if("int32"===s)u=new Int32Array(i);else if("bool"===s)u=new Uint8Array(i);else{if("complex64"!==s)throw new Error(`Unsupported dtype in weight '${t}': ${s}`);{u=new Float32Array(i);const e=new Float32Array(u.length/2),r=new Float32Array(u.length/2);for(let t=0;t<e.length;t++)e[t]=u[2*t],r[t]=u[2*t+1];const o=(0,y.X)(e,a,"float32"),s=(0,y.X)(r,a,"float32");n[t]=(0,b.P)(o,s),o.dispose(),s.dispose()}}o+=c*r}"complex64"!==s&&(n[t]=(0,y.X)(u,a,s))}return n}function E(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let o=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),r.buffer}const T="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function C(e){return T?Buffer.byteLength(e):new Blob([e]).size}function _(e){if(1===e.length)return e[0];let t=0;e.forEach((e=>{t+=e.byteLength}));const n=new Uint8Array(t);let r=0;return e.forEach((e=>{n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function I(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function k(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function R(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),null!=e.weightsManifest){const[r,o]=await t(e.weightsManifest);n.weightSpecs=r,n.weightData=o}return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),n}function N(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:C(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:C(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function O(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let o=0;o<r.length;o++){const s=r[o],a=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=a}return new Float32Array(o)}}class A{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==A.instance&&(A.instance=new A),A.instance}static registerSaveRouter(e){A.getInstance().saveRouters.push(e)}static registerLoadRouter(e){A.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return A.getHandlers(e,"save")}static getLoadHandlers(e,t){return A.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?A.getInstance().loadRouters:A.getInstance().saveRouters).forEach((t=>{const o=t(e,n);null!==o&&r.push(o)})),r}}const D=e=>A.registerSaveRouter(e),L=e=>A.registerLoadRouter(e),P=e=>A.getSaveHandlers(e),V=(e,t)=>A.getLoadHandlers(e,t),M="tensorflowjs",F="models_store",W="model_info_store";function Z(){if(!(0,m.OB)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function B(e){const t=e.result;t.createObjectStore(F,{keyPath:"modelPath"}),t.createObjectStore(W,{keyPath:"modelPath"})}class G{constructor(e){if(this.indexedDB=Z(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(M,1);r.onupgradeneeded=()=>B(r),r.onsuccess=()=>{const o=r.result;if(null==t){const t=o.transaction(F,"readonly"),r=t.objectStore(F).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return o.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(o.close(),n(r.error)),t.oncomplete=()=>o.close()}else{const r=N(t),i=o.transaction(W,"readwrite");let s=i.objectStore(W);const a=s.put({modelPath:this.modelPath,modelArtifactsInfo:r});let c;a.onsuccess=()=>{c=o.transaction(F,"readwrite");const a=c.objectStore(F).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r});a.onsuccess=()=>e({modelArtifactsInfo:r}),a.onerror=e=>{s=i.objectStore(W);const t=s.delete(this.modelPath);t.onsuccess=()=>(o.close(),n(a.error)),t.onerror=e=>(o.close(),n(a.error))}},a.onerror=e=>(o.close(),n(a.error)),i.oncomplete=()=>{null==c?o.close():c.oncomplete=()=>o.close()}}},r.onerror=e=>n(r.error)}))}}G.URL_SCHEME="indexeddb://";const U=e=>{return(0,m.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(G.URL_SCHEME)?(t=e.slice(G.URL_SCHEME.length),new G(t)):null;var t};A.registerSaveRouter(U),A.registerLoadRouter(U);class ${constructor(){this.indexedDB=Z()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(M,1);n.onupgradeneeded=()=>B(n),n.onsuccess=()=>{const r=n.result,o=r.transaction(W,"readonly"),i=o.objectStore(W).getAll();i.onsuccess=()=>{const t={};for(const e of i.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},i.onerror=e=>(r.close(),t(i.error)),o.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(G.URL_SCHEME)?t.slice(G.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(M,1);r.onupgradeneeded=()=>B(r),r.onsuccess=()=>{const o=r.result,i=o.transaction(W,"readwrite"),s=i.objectStore(W),a=s.get(e);let c;a.onsuccess=()=>{if(null==a.result)return o.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=s.delete(e),i=()=>{c=o.transaction(F,"readwrite");const r=c.objectStore(F).delete(e);r.onsuccess=()=>t(a.result.modelArtifactsInfo),r.onerror=e=>n(a.error)};r.onsuccess=i,r.onerror=e=>(i(),o.close(),n(a.error))}},a.onerror=e=>(o.close(),n(a.error)),i.oncomplete=()=>{null==c?o.close():c.oncomplete=()=>o.close()}},r.onerror=e=>n(r.error)}))}}const X="/",j="tensorflowjs_models",z="info",H="model_topology",Y="weight_specs",K="weight_data",J="model_metadata";function q(e){return{info:[j,e,z].join(X),topology:[j,e,H].join(X),weightSpecs:[j,e,Y].join(X),weightData:[j,e,K].join(X),modelMetadata:[j,e,J].join(X)}}function Q(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function ee(e){const t=e.split(X);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(X)}class te{constructor(e){if(!(0,m.OB)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=q(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=N(e);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(T)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let e=0,r=t.length;e<r;e++)n+=String.fromCharCode(t[e]);return btoa(n)}(e.weightData));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:r}}catch(e){throw Q(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const o=this.LS.getItem(this.keys.modelMetadata);if(null!=o){const e=JSON.parse(o);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(null==i)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(T){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n.set([t.charCodeAt(e)],e);return n.buffer}(i),t}}te.URL_SCHEME="localstorage://";const ne=e=>{return(0,m.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(te.URL_SCHEME)?(t=e.slice(te.URL_SCHEME.length),new te(t)):null;var t};A.registerSaveRouter(ne),A.registerLoadRouter(ne);class re{constructor(){(0,v.hu)((0,m.OB)().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),(0,v.hu)("undefined"==typeof window||void 0!==window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=j+X,n=X+z;for(let r=0;r<this.LS.length;++r){const o=this.LS.key(r);o.startsWith(t)&&o.endsWith(n)&&(e[ee(o)]=JSON.parse(this.LS.getItem(o)))}return e}async removeModel(e){var t;const n=q(e=(t=e).startsWith(te.URL_SCHEME)?t.slice(te.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return Q(n),r}}const oe="://";class ie{constructor(){this.managers={}}static getInstance(){return null==ie.instance&&(ie.instance=new ie),ie.instance}static registerManager(e,t){(0,v.hu)(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(oe)&&(e=e.slice(0,e.indexOf(oe))),(0,v.hu)(e.length>0,(()=>"scheme must not be an empty string."));const n=ie.getInstance();(0,v.hu)(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}function se(e){if(-1===e.indexOf(oe))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${ie.getSchemes().join(",")}`);return{scheme:e.split(oe)[0],path:e.split(oe)[1]}}async function ae(e,t,n=!1){(0,v.hu)(e!==t,(()=>`Old path and new path are the same: '${e}'`));const r=A.getLoadHandlers(e);(0,v.hu)(r.length>0,(()=>`Copying failed because no load handler is found for source URL ${e}.`)),(0,v.hu)(r.length<2,(()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`));const o=r[0],i=A.getSaveHandlers(t);(0,v.hu)(i.length>0,(()=>`Copying failed because no save handler is found for destination URL ${t}.`)),(0,v.hu)(i.length<2,(()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`));const s=i[0],a=se(e).scheme,c=se(e).path,u=a===se(e).scheme,l=await o.load();n&&u&&await ie.getManager(a).removeModel(c);const d=await s.save(l);return n&&!u&&await ie.getManager(a).removeModel(c),d.modelArtifactsInfo}async function ce(){const e=ie.getSchemes(),t={};for(const n of e){const e=await ie.getManager(n).listModels();for(const r in e)t[n+oe+r]=e[r]}return t}async function ue(e){const t=se(e);return ie.getManager(t.scheme).removeModel(t.path)}async function le(e,t){return ae(e,t,!1)}async function de(e,t){return ae(e,t,!0)}class pe{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}}if((0,m.OB)().get("IS_BROWSER")){(0,m.OB)().setPlatform("browser",new pe);try{ie.registerManager(te.URL_SCHEME,new re)}catch(e){}try{ie.registerManager(G.URL_SCHEME,new $)}catch(e){}}let he;(0,m.OB)().get("IS_NODE")&&!(0,m.OB)().get("IS_BROWSER")&&(0,m.OB)().setPlatform("node",new class{constructor(){this.util=n(8628),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=(0,m.OB)().global.fetch?(0,m.OB)().global.fetch(e,t):(null==he&&(he=n(5410)),he(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}});var fe=n(2657),me=n(2271),ge=n(8723),be=n(4077);(0,l.wv)();const ye={buffer:fe.f,cast:me.p,clone:ge.d,print:function(e,t=!1){console.log(e.toString(t))}};function ve(e){return new Promise((e=>setTimeout(e))).then(e)}(0,be.Vp)(ye);class we{constructor(e){if(!(0,m.OB)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(we.URL_SCHEME)&&(e=e.slice(we.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=k(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=r,await ve((()=>o.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await ve((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:N(e)}}}}we.URL_SCHEME="downloads://";class xe{constructor(e){if(null==e||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),o=r.modelTopology;if(null==o)return void t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(null==r.weightsManifest)return void t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(0===this.weightsFiles.length)return void e({modelTopology:o});const i=R(r,(e=>this.loadWeights(e)));e(i)},n.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],n=[];for(const r of e)t.push(...r.weights),n.push(...r.paths);const r=this.checkManifestAndWeightFiles(e),o=n.map((e=>this.loadWeightsFile(e,r[e])));return Promise.all(o).then((e=>[t,_(e)]))}loadWeightsFile(e,t){return new Promise(((n,r)=>{const o=new FileReader;o.onload=e=>{const t=e.target.result;n(t)},o.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),o.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map((e=>I(e.name))),r={};for(const o of e)o.paths.forEach((e=>{const o=I(e);if(-1!==t.indexOf(o))throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(t.push(o),-1===n.indexOf(o))throw new Error(`Weight file with basename '${o}' is not provided.`);r[e]=this.weightsFiles[n.indexOf(o)]}));if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}function Se(e){return new xe(e)}function Ee(e,t,n,r){!function(e){(0,v.hu)(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){(0,v.hu)(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),(0,v.hu)(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),(0,v.hu)(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,r=null==r?1:r);let o=0;return Promise.all(e.map((i=>(i.then((i=>{const s=n+ ++o/e.length*(r-n);return t(s),i})),i))))}async function Te(e,t){null==t&&(t={});const n=null==t.fetchFunc?(0,m.OB)().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),o=(null==t.onProgress?await Promise.all(r):await Ee(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(o):await Ee(o,t.onProgress,.5,1)}async function Ce(e,t="",n,r){return _e((e=>Te(e,{requestInit:r})))(e,t,n)}function _e(e){return async(t,n="",r)=>{const o=t.map((()=>!1)),i={},s=null!=r?r.map((()=>!1)):[],a=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const c="quantization"in e?e.quantization.dtype:e.dtype,u=w[c]*v.NA(e.shape),l=()=>{o[t]=!0,null==i[t]&&(i[t]=[]),i[t].push({manifestEntry:e,groupOffset:n,sizeBytes:u})};null!=r?r.forEach(((t,n)=>{t===e.name&&(l(),s[n]=!0)})):l(),a.push(e.name),n+=u}))})),!s.every((e=>e))){const e=r.filter(((e,t)=>!s[t]));throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${a.join(", ")}.`)}const c=o.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),u=[];c.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;u.push(t)}))}));const l=await e(u),d={};let p=0;return c.forEach((e=>{const n=t[e].paths.length;let r=0;for(let e=0;e<n;e++)r+=l[p+e].byteLength;const o=new ArrayBuffer(r),s=new Uint8Array(o);let a=0;for(let e=0;e<n;e++){const t=new Uint8Array(l[p+e]);s.set(t,a),a+=t.byteLength}i[e].forEach((e=>{const t=S(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const e in t)d[e]=t[e]})),p+=n})),d}}A.registerSaveRouter((e=>(0,m.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(we.URL_SCHEME)?function(e="model"){return new we(e)}(e.slice(we.URL_SCHEME.length)):null));class Ie{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?((0,v.hu)("function"==typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=(0,m.OB)().platform.fetch,(0,v.hu)(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&(0,v.hu)(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=k(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:N(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(e){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return R(t,(e=>this.loadWeights(e)))}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),o=this.weightPathPrefix||n,i=[];for(const t of e)i.push(...t.weights);const s=[],a=[];for(const t of e)for(const e of t.paths)null!=this.weightUrlConverter?a.push(this.weightUrlConverter(e)):s.push(o+e+r);return this.weightUrlConverter&&s.push(...await Promise.all(a)),[i,_(await Te(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress}))]}}function ke(e){return null!=e.match(Ie.URL_SCHEME_REGEX)}Ie.URL_SCHEME_REGEX=/^https?:\/\//;const Re=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>ke(e))):ke(e),n)return Ne(e,t)}return null};function Ne(e,t){return new Ie(e,t)}function Oe(e,t){return Ne(e,t)}A.registerSaveRouter(Re),A.registerLoadRouter(Re);class Ae{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class De{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class Le{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function Pe(e,t,n,r){const o=arguments;return new Le(Ve(...o))}function Ve(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new Ae(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ae({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ae({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function Me(e){return new De(e)}function Fe(e){return new De(e)}var We=n(2200),Ze=n(9121),Be=n(6151),Ge=n(3740),Ue=n(2668),$e=n(7852);let Xe;function je(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,o=!1,i=!1,s=!1,a=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)o=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)s=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);a=!0}if(o){const t=2;if(o&&e.readyState<t)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=(0,Be.pI)(Ze.eB,l.BV.backendName)){const n={pixels:e},r={numChannels:t};return l.BV.runKernel(Ze.eB,n,r)}const[c,u]=o?[e.videoWidth,e.videoHeight]:[e.width,e.height];let d,p;if(s)d=e.getContext("2d").getImageData(0,0,c,u).data;else if(r||n)d=e.data;else if(i||o||a){if(null==Xe)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Xe=new OffscreenCanvas(1,1).getContext("2d")}else Xe=document.createElement("canvas").getContext("2d");Xe.canvas.width=c,Xe.canvas.height=u,Xe.drawImage(e,0,0,c,u),d=Xe.getImageData(0,0,c,u).data}if(4===t)p=new Int32Array(d);else{const e=c*u;p=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)p[n*t+e]=d[4*n+e]}return function(e,t,n){if((0,v.Cq)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const r=(0,Ge.C)(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,$e.H)(e,t,r,n)}(p,[u,c,t],"int32")}async function ze(e,t=3){let n=null;if((0,m.OB)().getBool("WRAP_TO_IMAGEBITMAP")&&function(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(e){t=null}n=null!=t&&t.width===e.width&&t.height===e.height?t:e}else n=e;return je(n,t)}async function He(e,t){let n=(0,Ge._1)(e,"img","toPixels");if(!(e instanceof be.es)){const e=n;n=(0,me.p)(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,o]=n.shape.slice(0,2),i=2===n.rank?1:n.shape[2];if(i>4||2===i)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${i}`);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const s=await n.data(),a="float32"===n.dtype?255:1,c=new Uint8ClampedArray(o*r*4);for(let e=0;e<r*o;++e){const t=[0,0,0,255];for(let r=0;r<i;r++){const o=s[e*i+r];if("float32"===n.dtype){if(o<0||o>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${o}.`)}else if("int32"===n.dtype&&(o<0||o>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${o}.`);1===i?(t[0]=o*a,t[1]=o*a,t[2]=o*a):t[r]=o*a}const r=4*e;c[r+0]=Math.round(t[0]),c[r+1]=Math.round(t[1]),c[r+2]=Math.round(t[2]),c[r+3]=Math.round(t[3])}if(null!=t){t.width=o,t.height=r;const e=t.getContext("2d"),n=new ImageData(c,o,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),c}const Ye=(0,Ue.op)({fromPixels_:je});function Ke(e,t,n){const r=e.shape.length;v.hu(r===t.length,(()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`)),v.hu(r===n.length,(()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`));for(let o=0;o<r;++o)v.hu(t[o]+n[o]<=e.shape[o],(()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${t[o]+n[o]}) would overflow input.shape[${o}] (${e.shape[o]})`))}function Je(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function qe(e,t,n){const r=[];for(let o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function Qe(e,t,n,r){const o=[...e];for(let e=o.length;e<r.length;e++)o.push(1);for(let e=0;e<n;e++)0===e?o[t]=1:(o.splice(t,0,1),o.pop());return o}function et(e,t,n){return n<=e?n:n-(t-1)}function tt(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function nt(e,t,n,r,o,i,s,a,c){const u=e.length;let l=new Array(u),d=new Array(u),p=new Array(u);if(t.length&&n>0){const c=t[0],u=n+1;l=rt(s,c,u,r,e),d=ot(a,c,u,o,e),p=Qe(i,c,u,e)}else for(let t=0;t<u;t++)l[t]=st(s,r,i,e,t,c),d[t]=at(a,o,i,e,t,c),p[t]=it(i,t,c);return{begin:l,end:d,strides:p}}function rt(e,t,n,r,o){const i=[...o],s=tt(n,t);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=0;else{const s=et(t,n,o);let a=r[s];e&1<<s&&(a=0),i[o]=a}return i}function ot(e,t,n,r,o){const i=[...o],s=tt(n,t);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=Number.MAX_SAFE_INTEGER;else{const s=et(t,n,o);let a=r[s];e&1<<s&&(a=Number.MAX_SAFE_INTEGER),i[o]=a}for(let e=0;e<i.length;e++){const t=o[e];i[e]<0&&(i[e]+=t),i[e]=v.uZ(0,i[e],o[e])}return i}function it(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function st(e,t,n,r,o,i){let s=t[o];const a=n[o]||1;(e&1<<o||i&1<<o||null==s)&&(s=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const c=r[o];return s<0&&(s+=c),s=v.uZ(0,s,c-1),s}function at(e,t,n,r,o,i){let s=t[o];const a=n[o]||1;(e&1<<o||i&1<<o||null==s)&&(s=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const c=r[o];return s<0&&(s+=c),s=a>0?v.uZ(0,s,c):v.uZ(-1,s,c-1),s}function ct(e,t,n){let r=n.length;for(let e=0;e<n.length;e++)if(n[e]>1){r=e;break}for(let o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function ut(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function lt(e,t,n){let r;const o=e.shape.length;let i;return r="number"==typeof t?[t,...new Array(o-1).fill(0)]:t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice(),r.forEach((e=>{v.hu(-1!==e,(()=>"slice() does not support negative begin indexing."))})),i=null==n?new Array(o).fill(-1):"number"==typeof n?[n,...new Array(o-1).fill(-1)]:n.length<o?n.concat(new Array(o-n.length).fill(-1)):n,i=i.map(((t,n)=>t>=0?t:(v.hu(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`)),e.shape[n]-r[n]))),[r,i]}function dt(e,t,n,r,o,i,s,a,c){let u;if(null==r?(u=new Array(t.length),u.fill(1)):u=r,null!=s&&0!=(s&s-1))throw new Error("Multiple ellipses in slice is not allowed.");let l=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:c};for(let e=0;e<d.dims;e++)l&&0!=(1<<e&a)&&d.numAddAxisAfterEllipsis++,1<<e&s&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const o=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<o;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,p);let h=!0,f=!0,m=!0;const g=[],b=[];for(let t=0;t<e.length;++t){if(0===p.strides[t])throw Error(`strides[${t}] must be non-zero`);const n=!!(p.shrinkAxisMask&1<<t),r=e[t];if(-1===r){g.push(n?1:-1);continue}const o=[p.beginMask&1<<t,p.endMask&1<<t],i=[p.strides[t]>0?0:-1,p.strides[t]>0?r:r-1];if(n&&p.strides[t]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===p.strides[t];const s=!!(p.beginMask&1<<t&&p.endMask&1<<t);if(p.beginValid&&p.endValid){if(n){const e=p.begin[t]<0?r+p.begin[t]:p.begin[t];if(p.begin[t]=e,p.end[t]=p.begin[t]+1,e<0||e>=r)throw Error(`slice index ${p.begin[t]} of dimension ${t} out of bounds.`)}else p.begin[t]=pt(p.begin[t],0,p.strides[t],r,o,i),p.end[t]=pt(p.end[t],1,p.strides[t],r,o,i);const e=1===p.strides[t]&&0===p.begin[t]&&p.end[t]===r;h=h&&e,f=f&&(0===t&&1===p.strides[t]||e)}else h=h&&1===p.strides[t]&&s,f=f&&(0===t&&1===p.strides[t]||s);let a,c=!1;if(p.beginValid&&p.endValid?(a=p.end[t]-p.begin[t],c=!0):n?(a=1,c=!0):s&&r>=0&&(a=p.strides[t]<0?-r:r,c=!0),c){let e;e=0===a||a<0!=p.strides[t]<0?0:Math.trunc(a/p.strides[t])+(a%p.strides[t]!=0?1:0),g.push(e)}else g.push(-1)}for(let e=0;e<p.finalShapeGatherIndices.length;++e){const t=p.finalShapeGatherIndices[e];t>=0?b.push(g[t]):-2===t&&b.push(1)}return{finalShapeSparse:b.filter(((e,t)=>-2!==p.finalShapeGatherIndices[t])),finalShape:b,isIdentity:h,sliceDim0:f,isSimpleSlice:m,begin:p.begin,end:p.end,strides:p.strides}}function pt(e,t,n,r,o,i){if(o[t])return n>0?i[t]:i[t+1&1];{const t=e<0?r+e:e;return t<i[0]?i[0]:t>i[1]?i[1]:t}}var ht=n(9122),ft=n(1221),mt=n(140),gt=n(4368);const bt="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function yt(){return new Promise((e=>bt((()=>e()))))}var vt=n(3591);function wt(e,t){const n=e[0].length;e.forEach(((e,t)=>{v.hu(e.length===n,(()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`))})),v.hu(t>=0&&t<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const r=e[0];e.forEach(((e,o)=>{for(let i=0;i<n;i++)v.hu(i===t||e[i]===r[i],(()=>`Error in concat${n}D: Shape of tensors[${o}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${o}.`))}))}function xt(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var St=n(2582),Et=n(9612);const Tt=30;function Ct(e){return e<=Tt?e:(0,v.jP)(e,Math.floor(Math.sqrt(e)))}function _t(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function It(e,t,n,r=!0){let o=[];if(r)o=o.concat(t.slice(0)),o.push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)o=o.concat([e[r+1]/t[r],t[r]]);o=o.concat(e.slice(n+1))}return o}function kt(e,t,n=!0){const r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{const n=[],o=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?o.push(r):n.push(r);r.push(...n),r.push(0),r.push(...o)}return r}function Rt(e,t,n,r=!0){const o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(let n=1;n<e.length;++n)n<=t.length?r?o.push(t[n-1]*e[n]):o.push(e[n]/t[n-1]):o.push(e[n]);return o}function Nt(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function Ot(e,t,n){const r=e.slice(0,1);for(let o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function At(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===(0,v.NA)(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const o=t.shape,i=o[o.length-1];let s=1;for(let e=0;e<o.length-1;++e)s*=o[e];const a=e.shape,c=o.slice();c.pop();let u=1;for(let e=i;e<n;++e)u*=a[e],c.push(a[e]);const l=[...(0,v.e3)(e.shape).map((e=>e/u)),1].slice(0,i);return[c,s,u,l]}var Dt=n(3028);const Lt=1.7580993408473768,Pt=1.0507009873554805,Vt=.3275911,Mt=.254829592,Ft=-.284496736,Wt=1.421413741,Zt=-1.453152027,Bt=1.061405429;var Gt=n(4706);function Ut(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function $t(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function Xt(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=0;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function jt(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=2;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function zt(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Ht(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Yt(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){const i=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}function Kt(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const Jt=/->/g;function qt(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(Jt,"").length)/"->".length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("->").');const[r,o]=e.split("->");(0,v.hu)(-1===r.indexOf("..."),(()=>'The ellipsis notation ("...") is not supported yet.'));const i=r.split(","),s=i.length;if(t!==s)throw new Error(`Expected ${s} input tensors, received ${t}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let e=0;e<o.length;++e){const t=o[e];if(!i.some((e=>-1!==e.indexOf(t))))throw new Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===a.indexOf(t)&&a.push(t)}for(let e=0;e<r.length;++e){const t=r[e];-1===a.indexOf(t)&&","!==t&&a.push(t)}const c=new Array(i.length);for(let e=0;e<s;++e){if(new Set(i[e].split("")).size!==i[e].length)throw new Error(`Found duplicate axes in input component ${i[e]}. Support for duplicate axes in input is not implemented yet.`);c[e]=[];for(let t=0;t<i[e].length;++t)c[e].push(a.indexOf(i[e][t]))}const u=a.length,l=[];for(let e=o.length;e<u;++e)l.push(e);return{allDims:a,summedDims:l,idDims:c}}function Qt(e,t){let n=new Array(e);n.fill(-1);for(let e=0;e<t.length;++e)n[t[e]]=e;const r=[];for(let t=0;t<e;++t)-1===n[t]&&r.push(t);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function en(e,t,n){const r=new Array(e);for(let e=0;e<n.length;++e){const o=n[e].shape;for(let n=0;n<t[e].length;++n)void 0===r[t[e][n]]?r[t[e][n]]=o[n]:(0,v.hu)(r[t[e][n]]===o[n],(()=>`Expected dimension ${r[t[e][n]]} at axis ${n} of input shaped ${JSON.stringify(o)}, but got dimension ${o[n]}`))}}function tn(e,t){const n=e,r=[];let o=0;0===e.length&&n.push(-1),o=e.length+1;for(let e=0;e<o;++e)r.push([]);const i=[];for(let e=0;e<n.length;++e){const o=rn(t,n[e]);for(const t of o)-1===i.indexOf(t)&&(r[e].push(t),i.push(t))}return{path:n,steps:r}}function nn(e){return e.every(((e,t)=>e===t))}function rn(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function on(e,t,n=0){let r=[];if("number"==typeof t)(0,v.hu)(e.shape[n]%t==0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const o=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);(0,v.hu)(o<=1,(()=>"There should be only one negative value in split array."));const i=t.indexOf(-1);if(-1!==i){const r=t.reduce(((e,t)=>t>0?e+t:e));t[i]=e.shape[n]-r}(0,v.hu)(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function sn(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function an(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function cn(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function un(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function ln(e,t){return`size ${e} must be non-negative, not ${t}`}function dn(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function pn(e,t){return`Input to reshape is a SparseTensor with ${(0,v.NA)(e)}\n  dense values, but the requested shape requires a multiple of ${(0,v.NA)(t)}. inputShape=${e} outputShape= ${t}`}function hn(e,t){return`Input to reshape is a tensor with ${(0,v.NA)(e)} dense values, but the requested shape has ${(0,v.NA)(t)}. inputShape=${e} outputShape=${t}`}function fn(){return"segment ids must be >= 0"}function mn(){return"segment ids are not increasing"}function gn(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function bn(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}function yn(e,t){let n,r=!1;for(e<=Tt?(n=e,r=!0):n=(0,v.jP)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=(0,v.jP)(e,n+1);return n}function vn(e,t,n){const r=[],o=e.length;for(let i=0;i<o;i++)i!==t?r.push(e[i]):r.push(n);return r}function wn(e,t,n,r){const o=t.shape.length,i=e.shape.length;if(0!==r&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let n=0;n<r;++n)if(e.shape[n]!==t.shape[n])throw new Error(`x.shape[${n}]: ${e.shape[n]} should be equal to indices.shape[${n}]: ${t.shape[n]}.`);const s=e.shape[n],a=[];let c=1,u=1,l=1;for(let t=0;t<r;++t)a.push(e.shape[t]),c*=e.shape[t];for(let t=r;t<n;t++)a.push(e.shape[t]),u*=e.shape[t];for(let e=r;e<o;e++)a.push(t.shape[e]);for(let t=n+1;t<i;t++)a.push(e.shape[t]),l*=e.shape[t];return{batchSize:c,sliceSize:l,outerSize:u,dimSize:s,outputShape:a}}function xn(e){try{return e.map((e=>(0,ht.decodeString)(e)))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function Sn(e){return e.map((e=>(0,ht.encodeString)(e)))}var En=n(3337),Tn=n(8333),Cn=n(2073)},9121:(e,t,n)=>{"use strict";n.d(t,{$H:()=>it,$g:()=>K,$w:()=>z,Ac:()=>he,BM:()=>Ae,By:()=>W,CA:()=>Se,D2:()=>Pt,Dl:()=>nt,Eh:()=>N,FK:()=>_t,G3:()=>Ht,GB:()=>It,Gc:()=>Nt,HE:()=>q,HZ:()=>at,Hh:()=>Ne,Hm:()=>ut,IK:()=>u,IM:()=>w,J$:()=>we,J_:()=>ge,Jh:()=>b,L8:()=>Rt,M2:()=>p,MI:()=>$t,MR:()=>Ct,MZ:()=>ke,NE:()=>te,NZ:()=>Ue,O3:()=>Ot,OA:()=>Pe,OR:()=>ae,OU:()=>Ve,OV:()=>Le,Om:()=>Q,Oy:()=>m,PY:()=>_e,Ph:()=>yt,QC:()=>g,QR:()=>G,Qg:()=>me,Qi:()=>qe,Qv:()=>Jt,RF:()=>C,RO:()=>y,RQ:()=>xt,Ru:()=>qt,SX:()=>J,SY:()=>r,Sb:()=>pt,Sp:()=>i,T0:()=>U,TQ:()=>kt,TR:()=>F,To:()=>Kt,Tr:()=>Gt,Uy:()=>se,VG:()=>o,Vb:()=>Ge,Vc:()=>B,Vf:()=>Ie,W0:()=>Ye,XL:()=>x,Xk:()=>Bt,Xz:()=>a,Y0:()=>re,YF:()=>ne,YW:()=>Dt,Yo:()=>Oe,Zb:()=>Te,Zj:()=>Lt,Zz:()=>k,_J:()=>Wt,_V:()=>rn,_Y:()=>lt,_k:()=>v,_t:()=>Vt,a5:()=>Tt,aJ:()=>d,av:()=>be,b9:()=>tn,bK:()=>Mt,bV:()=>mt,c1:()=>We,cW:()=>jt,ci:()=>$,cy:()=>He,de:()=>ie,dp:()=>ct,e0:()=>ft,e6:()=>rt,e7:()=>Ee,eB:()=>en,eE:()=>T,eZ:()=>Re,gJ:()=>_,h8:()=>Qt,hd:()=>ee,i5:()=>Et,iH:()=>Z,iJ:()=>fe,iW:()=>ye,iZ:()=>pe,ik:()=>V,jM:()=>f,jQ:()=>Be,je:()=>ce,kU:()=>Ce,kp:()=>Yt,ku:()=>Xe,lu:()=>on,ly:()=>Qe,m2:()=>Ft,mK:()=>ht,mT:()=>De,mc:()=>M,mh:()=>O,mm:()=>s,n9:()=>Xt,nh:()=>At,nr:()=>bt,o0:()=>tt,o2:()=>P,oF:()=>vt,oH:()=>Y,oT:()=>c,p2:()=>wt,p4:()=>H,pe:()=>et,q1:()=>de,q2:()=>Fe,q8:()=>Ze,qW:()=>Ke,qi:()=>le,qk:()=>st,qw:()=>h,r7:()=>ve,s1:()=>Zt,sE:()=>Ut,sH:()=>ue,sJ:()=>l,sL:()=>X,us:()=>nn,uv:()=>ze,vF:()=>Me,vt:()=>xe,vw:()=>oe,w3:()=>St,wU:()=>A,wY:()=>$e,we:()=>Je,wm:()=>D,wx:()=>zt,x1:()=>L,xJ:()=>ot,xQ:()=>gt,xn:()=>I,y7:()=>j,yQ:()=>je,yj:()=>R,zb:()=>dt,zv:()=>E,zw:()=>S});const r="Abs",o="Acos",i="Acosh",s="Add",a="AddN",c="All",u="Any",l="ArgMax",d="ArgMin",p="Asin",h="Asinh",f="Atan",m="Atanh",g="Atan2",b="AvgPool",y="AvgPoolGrad",v="AvgPool3D",w="AvgPool3DGrad",x="BatchMatMul",S="BatchToSpaceND",E="Bincount",T="BroadcastArgs",C="Cast",_="Ceil",I="ClipByValue",k="Complex",R="ComplexAbs",N="Concat",O="Conv2D",A="Conv2DBackpropFilter",D="Conv2DBackpropInput",L="Conv3D",P="Conv3DBackpropFilterV2",V="Conv3DBackpropInputV2",M="Cos",F="Cosh",W="Cumprod",Z="Cumsum",B="CropAndResize",G="DenseBincount",U="DepthToSpace",$="DepthwiseConv2dNative",X="DepthwiseConv2dNativeBackpropFilter",j="DepthwiseConv2dNativeBackpropInput",z="Diag",H="Dilation2D",Y="RealDiv",K="Einsum",J="Elu",q="EluGrad",Q="Erf",ee="Equal",te="Exp",ne="ExpandDims",re="Expm1",oe="FFT",ie="Fill",se="FlipLeftRight",ae="Floor",ce="FloorDiv",ue="FusedBatchNorm",le="GatherV2",de="GatherNd",pe="Greater",he="GreaterEqual",fe="Identity",me="IFFT",ge="Imag",be="IsFinite",ye="IsInf",ve="IsNan",we="LeakyRelu",xe="Less",Se="LessEqual",Ee="LinSpace",Te="Log",Ce="Log1p",_e="LogicalAnd",Ie="LogicalNot",ke="LogicalOr",Re="LRN",Ne="LRNGrad",Oe="Max",Ae="Maximum",De="MaxPool",Le="MaxPoolGrad",Pe="MaxPool3D",Ve="MaxPool3DGrad",Me="MaxPoolWithArgmax",Fe="Mean",We="Min",Ze="Minimum",Be="MirrorPad",Ge="Mod",Ue="Multinomial",$e="Multiply",Xe="Neg",je="NotEqual",ze="NonMaxSuppressionV3",He="NonMaxSuppressionV4",Ye="NonMaxSuppressionV5",Ke="OnesLike",Je="OneHot",qe="Pack",Qe="PadV2",et="Pow",tt="Prelu",nt="Prod",rt="Range",ot="Real",it="Reciprocal",st="Relu",at="Reshape",ct="ResizeNearestNeighbor",ut="ResizeNearestNeighborGrad",lt="ResizeBilinear",dt="ResizeBilinearGrad",pt="Relu6",ht="Reverse",ft="Round",mt="Rsqrt",gt="ScatterNd",bt="SearchSorted",yt="Select",vt="Selu",wt="Slice",xt="Sin",St="Sinh",Et="Sign",Tt="Sigmoid",Ct="Softplus",_t="Sqrt",It="Sum",kt="SpaceToBatchND",Rt="SplitV",Nt="Softmax",Ot="SparseFillEmptyRows",At="SparseReshape",Dt="SparseSegmentMean",Lt="SparseSegmentSum",Pt="SparseToDense",Vt="SquaredDifference",Mt="Square",Ft="StridedSlice",Wt="StringNGrams",Zt="StringSplit",Bt="StringToHashBucketFast",Gt="Sub",Ut="Tan",$t="Tanh",Xt="Tile",jt="TopK",zt="Transform",Ht="Transpose",Yt="Unique",Kt="Unpack",Jt="UnsortedSegmentSum",qt="ZerosLike",Qt="Step",en="FromPixels",tn="RotateWithOffset",nn="_FusedMatMul",rn="FusedConv2D",on="FusedDepthwiseConv2D"},6151:(e,t,n)=>{"use strict";n.d(t,{pI:()=>a,tr:()=>u,uk:()=>c,wC:()=>l});var r=n(5938),o=n(4706);const i=(0,r.R)("kernelRegistry",(()=>new Map)),s=(0,r.R)("gradRegistry",(()=>new Map));function a(e,t){const n=d(e,t);return i.get(n)}function c(e){return s.get(e)}function u(e){const t=i.entries(),n=[];for(;;){const{done:r,value:o}=t.next();if(r)break;const[i,s]=o,[a]=i.split("_");a===e&&n.push(s)}return n}function l(e){const{kernelName:t,backendName:n}=e,r=d(t,n);i.has(r)&&o.Z(`The kernel '${t}' for backend '${n}' is already registered`),i.set(r,e)}function d(e,t){return`${t}_${e}`}},4706:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o,c:()=>i});var r=n(2885);function o(...e){(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||console.warn(...e)}function i(...e){(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||console.log(...e)}},6235:(e,t,n)=>{"use strict";n.d(t,{W:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({abs_:function(e){const t=(0,i._1)(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return r.BV.runKernel(o.yj,e)}{const e={x:t};return r.BV.runKernel(o.SY,e)}}})},6407:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var r=n(7097),o=n(9121),i=n(747),s=n(3740);const a=(0,n(2668).op)({add_:function(e,t){let n=(0,s._1)(e,"a","add"),a=(0,s._1)(t,"b","add");[n,a]=(0,i.T_)(n,a);const c={a:n,b:a};return r.BV.runKernel(o.mm,c)}})},3591:(e,t,n)=>{"use strict";n.d(t,{LJ:()=>l,Q3:()=>u,Vh:()=>i,YB:()=>o,kz:()=>s,lB:()=>c,rv:()=>a,sY:()=>d});var r=n(569);function o(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function i(e,t,n){const r=e.length+t.length,o=[];let i=0,s=0;for(let a=0;a<r;a++)-1===n.indexOf(a)?o.push(e[i++]):o.push(t[s++]);return o}function s(e,t){const n=[],r=e.length;for(let o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);return[n,t.map((t=>e[t]))]}function a(e,t){return i(e,t.map((e=>1)),t)}function c(e,t,n){r.hu(o(t,n),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`))}function u(e,t){if(o(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function l(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function d(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}},3865:(e,t,n)=>{"use strict";n.d(t,{y:()=>a});var r=n(7097),o=n(9121),i=n(3740),s=n(569);const a=(0,n(2668).op)({bincount_:function(e,t,n){const a=(0,i._1)(e,"x","bincount"),c=(0,i._1)(t,"weights","bincount");s.hu("int32"===a.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${a.dtype}`)),s.hu(n>=0,(()=>`size must be non-negative, but got ${n}.`)),s.hu(c.size===a.size||0===c.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${a.shape}, weights shape: ${c.shape}.`));const u={x:a,weights:c},l={size:n};return r.BV.runKernel(o.zv,u,l)}})},8247:(e,t,n)=>{"use strict";n.d(t,{U:()=>u});var r=n(7097),o=n(9121),i=n(3740),s=n(8723),a=n(2668),c=n(4968);const u=(0,a.op)({broadcastTo_:function(e,t){let n=(0,i._1)(e,"broadcastTo","x");const a=n.shape;if(t.some((e=>!(e>0)||e%1!=0)))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=(0,c.X)(n,e)}const u=n.shape,l=Array.from(t);for(let e=t.length-1;e>=0;e--)if(u[e]===t[e])l[e]=1;else if(1!==n.shape[e])throw new Error(`broadcastTo(): [${a}] cannot be broadcast to [${t}].`);if(0===l.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0)).length)return(0,s.d)(n);const d={x:n},p={reps:l};return r.BV.runKernel(o.n9,d,p)}})},2200:(e,t,n)=>{"use strict";function r(e,t){const n=e.length,r=[];for(let o=0;o<n;o++){const i=n-1-o,s=e[i]||1;(t[t.length-1-o]||1)>1&&1===s&&r.unshift(i)}return r}function o(e,t){const n=[];for(let r=0;r<t.length;r++){const o=e[e.length-r-1],i=t.length-r-1,s=t[i];(null==o||1===o&&s>1)&&n.unshift(i)}return n}function i(e,t){const n=[],r=Math.max(e.length,t.length);for(let o=0;o<r;o++){let r=e[e.length-o-1];null==r&&(r=1);let i=t[t.length-o-1];if(null==i&&(i=1),1===r)n.unshift(i);else if(1===i)n.unshift(r);else{if(r!==i)throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`);n.unshift(r)}}return n}n.r(t),n.d(t,{assertAndGetBroadcastShape:()=>i,getBroadcastDims:()=>r,getReductionAxes:()=>o})},2657:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});var r=n(4077),o=n(569);function i(e,t="float32",n){return t=t||"float32",o.Mu(e),new r.YD(e,t,n)}},2271:(e,t,n)=>{"use strict";n.d(t,{p:()=>a});var r=n(7097),o=n(9121),i=n(3740),s=n(569);const a=(0,n(2668).op)({cast_:function(e,t){const n=(0,i._1)(e,"x","cast");if(!s.LP(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const a={x:n},c={dtype:t};return r.BV.runKernel(o.RF,a,c)}})},8723:(e,t,n)=>{"use strict";n.d(t,{d:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({clone_:function(e){const t={x:(0,i._1)(e,"x","clone","string_or_numeric")};return r.BV.runKernel(o.iJ,t)}})},1661:(e,t,n)=>{"use strict";n.d(t,{P:()=>a});var r=n(7097),o=n(9121),i=n(3740),s=n(569);const a=(0,n(2668).op)({complex_:function(e,t){const n=(0,i._1)(e,"real","complex"),a=(0,i._1)(t,"imag","complex");s.k5(n.shape,a.shape,`real and imag shapes, ${n.shape} and ${a.shape}, must match in call to tf.complex().`);const c={real:n,imag:a};return r.BV.runKernel(o.Zz,c)}})},6884:(e,t,n)=>{"use strict";n.d(t,{z:()=>c});var r=n(7097),o=n(9121),i=n(3740),s=n(569),a=n(8723);const c=(0,n(2668).op)({concat_:function(e,t=0){(0,s.hu)(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=(0,i.sI)(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===n.length)return(0,a.d)(n[0]);const c=n,u={axis:t};return r.BV.runKernel(o.Eh,c,u)}})},2582:(e,t,n)=>{"use strict";n.d(t,{I0:()=>f,Ix:()=>a,Rf:()=>o,Xw:()=>i,aO:()=>u,jT:()=>m,jw:()=>c,m:()=>b,pl:()=>s,sl:()=>g});var r=n(569);function o(e,t,n,r,o="NHWC",i){return a(e,[...t,e[3]],n,i,r,null,null,g(o))}function i(e,t,n,r,o,i,s="channelsLast"){const[c,u]=l(t);let d;if("channelsLast"===s)d=[c,u,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);d=[c,u,e[1],e[1]]}return a(e,d,n,r,o,i,!1,s)}function s(e,t,n,r,o,i,s="NDHWC"){const[a,u,l]=d(t);let p,h;if("NDHWC"===s)h="channelsLast",p=[a,u,l,e[4],e[4]];else{if("NCDHW"!==s)throw new Error(`Unknown dataFormat ${s}`);h="channelsFirst",p=[a,u,l,e[1],e[1]]}return c(e,p,n,r,o,!1,h,i)}function a(e,t,n,r,o,i,s=!1,a="channelsLast"){let[c,d,f,m]=[-1,-1,-1,-1];if("channelsLast"===a)[c,d,f,m]=e;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[c,m,d,f]=e}const[g,b,,y]=t,[v,w]=l(n),[x,S]=l(r),E=p(g,x),T=p(b,S),{padInfo:C,outHeight:_,outWidth:I}=function(e,t,n,r,o,i,s,a,c){let l,d,p;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const o=function(e,t,n,r,o){null==r&&(r=u(e,t,n));const i=e[1];return[h((e[0]-t+2*r)/n+1,o),h((i-t+2*r)/n+1,o)]}([t,n],i,r,e,a);d=o[0],p=o[1]}else if("same"===e){d=Math.ceil(t/r),p=Math.ceil(n/o);const e=Math.max(0,(d-1)*r+i-t),a=Math.max(0,(p-1)*o+s-n),c=Math.floor(e/2),u=e-c,h=Math.floor(a/2);l={top:c,bottom:u,left:h,right:a-h,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((t-i+1)/r),p=Math.ceil((n-s+1)/o);else{if("object"!=typeof e)throw Error(`Unknown padding parameter: ${e}`);{const u="channelsLast"===c?e[1][0]:e[2][0],f="channelsLast"===c?e[1][1]:e[2][1],m="channelsLast"===c?e[2][0]:e[3][0],g="channelsLast"===c?e[2][1]:e[3][1];l={top:u,bottom:f,left:m,right:g,type:0===u&&0===f&&0===m&&0===g?"VALID":"EXPLICIT"},d=h((t-i+u+f)/r+1,a),p=h((n-s+m+g)/o+1,a)}}return{padInfo:l,outHeight:d,outWidth:p}}(o,d,f,v,w,E,T,i,a),k=s?y*m:y;let R;return"channelsFirst"===a?R=[c,k,_,I]:"channelsLast"===a&&(R=[c,_,I,k]),{batchSize:c,dataFormat:a,inHeight:d,inWidth:f,inChannels:m,outHeight:_,outWidth:I,outChannels:k,padInfo:C,strideHeight:v,strideWidth:w,filterHeight:g,filterWidth:b,effectiveFilterHeight:E,effectiveFilterWidth:T,dilationHeight:x,dilationWidth:S,inShape:e,outShape:R,filterShape:t}}function c(e,t,n,r,o,i=!1,s="channelsLast",a){let[c,l,f,m,g]=[-1,-1,-1,-1,-1];if("channelsLast"===s)[c,l,f,m,g]=e;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[c,g,l,f,m]=e}const[b,y,v,,w]=t,[x,S,E]=d(n),[T,C,_]=d(r),I=p(b,T),k=p(y,C),R=p(v,_),{padInfo:N,outDepth:O,outHeight:A,outWidth:D}=function(e,t,n,r,o,i,s,a,c,l,d){let p,f,m,g;if("number"==typeof e){p={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const i=function(e,t,n,r,o,i){null==o&&(o=u(e,t,r));const s=e[1],a=e[2];return[h((e[0]-t+2*o)/r+1,i),h((s-t+2*o)/r+1,i),h((a-t+2*o)/r+1,i),1]}([t,n,r,1],a,0,o,e,d);f=i[0],m=i[1],g=i[2]}else if("same"===e){f=Math.ceil(t/o),m=Math.ceil(n/i),g=Math.ceil(r/s);const e=(f-1)*o+a-t,u=(m-1)*i+c-n,d=(g-1)*s+l-r,h=Math.floor(e/2),b=e-h,y=Math.floor(u/2),v=u-y,w=Math.floor(d/2);p={top:y,bottom:v,left:w,right:d-w,front:h,back:b,type:"SAME"}}else{if("valid"!==e)throw Error(`Unknown padding parameter: ${e}`);p={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-a+1)/o),m=Math.ceil((n-c+1)/i),g=Math.ceil((r-l+1)/s)}return{padInfo:p,outDepth:f,outHeight:m,outWidth:g}}(o,l,f,m,x,S,E,I,k,R,a),L=i?w*g:w;let P;return"channelsFirst"===s?P=[c,L,O,A,D]:"channelsLast"===s&&(P=[c,O,A,D,L]),{batchSize:c,dataFormat:s,inDepth:l,inHeight:f,inWidth:m,inChannels:g,outDepth:O,outHeight:A,outWidth:D,outChannels:L,padInfo:N,strideDepth:x,strideHeight:S,strideWidth:E,filterDepth:b,filterHeight:y,filterWidth:v,effectiveFilterDepth:I,effectiveFilterHeight:k,effectiveFilterWidth:R,dilationDepth:T,dilationHeight:C,dilationWidth:_,inShape:e,outShape:P,filterShape:t}}function u(e,t,n,r=1){const o=p(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function l(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function d(e){return"number"==typeof e?[e,e,e]:e}function p(e,t){return t<=1?e:e+(e-1)*(t-1)}function h(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function f(e){const[t,n,r]=l(e);return 1===t&&1===n&&1===r}function m(e,t){return f(e)||f(t)}function g(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function b(e,t,n){if(null!=n){if("string"==typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"==typeof t)r.hu(r.GN(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`));else{if("object"!=typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach((t=>{t.forEach((t=>{r.hu(r.GN(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`))}))}))}}}},1274:(e,t,n)=>{"use strict";n.d(t,{h:()=>c});var r=n(7097),o=n(9121),i=n(747),s=n(3740),a=n(9165);const c=(0,n(2668).op)({div_:function(e,t){let n=(0,s._1)(e,"a","div"),c=(0,s._1)(t,"b","div");if([n,c]=(0,i.T_)(n,c),"int32"===n.dtype&&"int32"===c.dtype)return(0,a.q)(n,c);const u={a:n,b:c};return r.BV.runKernel(o.oH,u,{})}})},3233:(e,t,n)=>{"use strict";n.d(t,{p:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({elu_:function(e){const t={x:(0,i._1)(e,"x","elu","float32")};return r.BV.runKernel(o.SX,t)}})},4842:(e,t,n)=>{"use strict";n.d(t,{Q:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({exp_:function(e){const t={x:(0,i._1)(e,"x","exp")};return r.BV.runKernel(o.NE,t)}})},1300:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});var r=n(7097),o=n(9121),i=n(3740),s=n(569);const a=(0,n(2668).op)({expandDims_:function(e,t=0){const n=(0,i._1)(e,"x","expandDims","string_or_numeric");s.hu(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const a={input:n},c={dim:t};return r.BV.runKernel(o.YF,a,c)}})},4006:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(7097),o=n(9121);function i(e,t,n){const i={shape:e,value:t,dtype:n};return r.BV.runKernel(o.de,{},i)}},9165:(e,t,n)=>{"use strict";n.d(t,{q:()=>a});var r=n(7097),o=n(9121),i=n(747),s=n(3740);const a=(0,n(2668).op)({floorDiv_:function(e,t){let n=(0,s._1)(e,"a","floorDiv"),a=(0,s._1)(t,"b","floorDiv");[n,a]=(0,i.T_)(n,a);const c={a:n,b:a};return r.BV.runKernel(o.je,c)}})},9612:(e,t,n)=>{"use strict";n.d(t,{QH:()=>v,pf:()=>y,Fr:()=>b,uy:()=>w});var r=n(2200),o=n(3233),i=n(9133),s=n(4841),a=n(8151),c=n(7409),u=n(3582),l=n(4968),d=n(625),p=n(7097),h=n(9121),f=n(3740);const m=(0,n(2668).op)({step_:function(e,t=0){const n={x:(0,f._1)(e,"x","step")},r={alpha:t};return p.BV.runKernel(h.h8,n,r)}});var g=n(5475);function b(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return(0,s.d)(e,m(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function y(e,t){let n=t;const o=r.getReductionAxes(e.shape,t.shape);return o.length>0&&(n=(0,g.S)(n,o)),(0,l.X)(n,e.shape)}function v(e,t,n,r){if("linear"===t)return e;if("relu"===t)return(0,c.U)(e);if("elu"===t)return(0,o.p)(e);if("relu6"===t)return(0,u.b)(e);if("prelu"===t)return(0,a.A)(e,n);if("leakyrelu"===t)return(0,i.h)(e,r);if("sigmoid"===t)return(0,d.X)(e);throw new Error(`Unknown fused activation ${t}.`)}const w=(e,t)=>!(e>0)||"linear"===t},636:(e,t,n)=>{"use strict";n.d(t,{p:()=>c});var r=n(7097),o=n(9121),i=n(747),s=n(3740),a=n(2200);const c=(0,n(2668).op)({greater_:function(e,t){let n=(0,s._1)(e,"a","greater","string_or_numeric"),c=(0,s._1)(t,"b","greater","string_or_numeric");[n,c]=(0,i.T_)(n,c),(0,a.assertAndGetBroadcastShape)(n.shape,c.shape);const u={a:n,b:c};return r.BV.runKernel(o.iZ,u)}})},7630:(e,t,n)=>{"use strict";n.d(t,{b:()=>c});var r=n(7097),o=n(9121),i=n(747),s=n(3740),a=n(2200);const c=(0,n(2668).op)({greaterEqual_:function(e,t){let n=(0,s._1)(e,"a","greaterEqual","string_or_numeric"),c=(0,s._1)(t,"b","greaterEqual","string_or_numeric");[n,c]=(0,i.T_)(n,c),(0,a.assertAndGetBroadcastShape)(n.shape,c.shape);const u={a:n,b:c};return r.BV.runKernel(o.Ac,u)}})},4386:(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({imag_:function(e){const t={input:(0,i._1)(e,"input","imag")};return r.BV.runKernel(o.J_,t)}})},9133:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({leakyRelu_:function(e,t=.2){const n={x:(0,i._1)(e,"x","leakyRelu")},s={alpha:t};return r.BV.runKernel(o.J$,n,s)}})},624:(e,t,n)=>{"use strict";n.d(t,{z:()=>c});var r=n(7097),o=n(9121),i=n(747),s=n(3740),a=n(2200);const c=(0,n(2668).op)({lessEqual_:function(e,t){let n=(0,s._1)(e,"a","lessEqual","string_or_numeric"),c=(0,s._1)(t,"b","lessEqual","string_or_numeric");[n,c]=(0,i.T_)(n,c),(0,a.assertAndGetBroadcastShape)(n.shape,c.shape);const u={a:n,b:c};return r.BV.runKernel(o.CA,u)}})},2597:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({log_:function(e){const t={x:(0,i._1)(e,"x","log","float32")};return r.BV.runKernel(o.Zb,t)}})},7474:(e,t,n)=>{"use strict";n.d(t,{K:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({log1p_:function(e){const t={x:(0,i._1)(e,"x","log1p")};return r.BV.runKernel(o.kU,t)}})},2856:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var r=n(7097),o=n(9121),i=n(3740),s=n(2200);const a=(0,n(2668).op)({logicalAnd_:function(e,t){const n=(0,i._1)(e,"a","logicalAnd","bool"),a=(0,i._1)(t,"b","logicalAnd","bool");(0,s.assertAndGetBroadcastShape)(n.shape,a.shape);const c={a:n,b:a};return r.BV.runKernel(o.PY,c)}})},8687:(e,t,n)=>{"use strict";n.d(t,{O:()=>a});var r=n(7097),o=n(9121),i=n(747),s=n(3740);const a=(0,n(2668).op)({matMul_:function(e,t,n=!1,a=!1){let c=(0,s._1)(e,"a","matMul"),u=(0,s._1)(t,"b","matMul");[c,u]=(0,i.T_)(c,u);const l={a:c,b:u},d={transposeA:n,transposeB:a};return r.BV.runKernel(o.XL,l,d)}})},3307:(e,t,n)=>{"use strict";n.d(t,{F:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({max_:function(e,t=null,n=!1){const s={x:(0,i._1)(e,"x","max")},a={reductionIndices:t,keepDims:n};return r.BV.runKernel(o.Yo,s,a)}})},5130:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({mean_:function(e,t=null,n=!1){const s={x:(0,i._1)(e,"x","mean")},a={axis:t,keepDims:n};return r.BV.runKernel(o.q2,s,a)}})},5735:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({min_:function(e,t=null,n=!1){const s={x:(0,i._1)(e,"x","min")},a={axis:t,keepDims:n};return r.BV.runKernel(o.c1,s,a)}})},4513:(e,t,n)=>{"use strict";n.d(t,{L:()=>u});var r=n(7097),o=n(9121),i=n(747),s=n(3740),a=n(2200),c=n(2271);const u=(0,n(2668).op)({minimum_:function(e,t){let n=(0,s._1)(e,"a","minimum"),u=(0,s._1)(t,"b","minimum");[n,u]=(0,i.T_)(n,u),"bool"===n.dtype&&(n=(0,c.p)(n,"int32"),u=(0,c.p)(u,"int32")),(0,a.assertAndGetBroadcastShape)(n.shape,u.shape);const l={a:n,b:u};return r.BV.runKernel(o.q8,l)}})},4841:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});var r=n(7097),o=n(9121),i=n(747),s=n(3740);const a=(0,n(2668).op)({mul_:function(e,t){let n=(0,s._1)(e,"a","mul"),a=(0,s._1)(t,"b","mul");[n,a]=(0,i.T_)(n,a);const c={a:n,b:a};return r.BV.runKernel(o.wY,c)}})},7370:(e,t,n)=>{"use strict";n.d(t,{W:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({neg_:function(e){const t={x:(0,i._1)(e,"x","neg")};return r.BV.runKernel(o.ku,t)}})},3561:(e,t,n)=>{"use strict";n.d(t,{K:()=>b});var r=n(3740),o=n(569),i=n(6235),s=n(3591),a=n(3307),c=n(5735),u=n(2668),l=n(3453),d=n(4968),p=n(9494),h=n(3261),f=n(248),m=n(5475);function g(e,t,n=null){if(0===e.rank)return(0,i.W)(e);if(1!==e.rank&&null===n)return g((0,d.X)(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return(0,m.S)((0,i.W)(e),n);if(t===1/0)return(0,a.F)((0,i.W)(e),n);if(t===-1/0)return(0,c.V)((0,i.W)(e),n);if("euclidean"===t||2===t)return(0,h._)((0,m.S)((0,l.s)((0,i.W)(e),(0,p.i)(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&2===n.length){if(1===t)return(0,a.F)((0,m.S)((0,i.W)(e),n[0]),n[1]-1);if(t===1/0)return(0,a.F)((0,m.S)((0,i.W)(e),n[1]),n[0]);if(t===-1/0)return(0,c.V)((0,m.S)((0,i.W)(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return(0,h._)((0,m.S)((0,f.h)(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const b=(0,u.op)({norm_:function(e,t="euclidean",n=null,i=!1){const a=g(e=(0,r._1)(e,"x","norm"),t,n);let c=a.shape;if(i){const t=(0,o.EC)(n,e.shape);c=s.rv(a.shape,t)}return(0,d.X)(a,c)}})},6500:(e,t,n)=>{"use strict";n.d(t,{Q:()=>c});var r=n(7097),o=n(9121),i=n(747),s=n(3740),a=n(2200);const c=(0,n(2668).op)({notEqual_:function(e,t){let n=(0,s._1)(e,"a","notEqual","string_or_numeric"),c=(0,s._1)(t,"b","notEqual","string_or_numeric");[n,c]=(0,i.T_)(n,c),(0,a.assertAndGetBroadcastShape)(n.shape,c.shape);const u={a:n,b:c};return r.BV.runKernel(o.yQ,u)}})},4917:(e,t,n)=>{"use strict";n.d(t,{i:()=>a});var r=n(7097),o=n(569),i=n(1661),s=n(9640);function a(e,t="float32"){if("complex64"===t){const t=a(e,"float32"),n=(0,s.l)(e,"float32");return(0,i.P)(t,n)}const n=(0,o.p8)((0,o.NA)(e),t);return r.BV.makeTensor(n,e,t)}},2668:(e,t,n)=>{"use strict";n.d(t,{op:()=>i});var r=n(7097),o=n(569);function i(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const i=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const s=(...e)=>{r.BV.startScope(n);try{const t=i(...e);return(0,o.tI)(t)&&console.error("Cannot return a Promise inside of tidy."),r.BV.endScope(t),t}catch(e){throw r.BV.endScope(null),e}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}},140:(e,t,n)=>{"use strict";n.d(t,{IHx:()=>r.I,f3b:()=>o.f,pju:()=>i.p,d9v:()=>s.d,zoF:()=>a.z,Izb:()=>u,hiC:()=>l.h,dt4:()=>d.d,BHj:()=>We,dC7:()=>p.d,XLQ:()=>h.X,iD$:()=>f.i,XD2:()=>m.X,tPi:()=>g.t,rVs:()=>Ze,L9e:()=>b.L,knu:()=>y.k,Z_8:()=>Be,luU:()=>v.l,XeE:()=>w.X,RRF:()=>x.R,odF:()=>C,HHK:()=>_.H,lls:()=>I.l});var r=n(6407),o=n(2657),i=n(2271),s=n(8723),a=n(6884),c=n(2668);const u=(0,c.op)({concat2d_:function(e,t){return(0,a.z)(e,t)}});var l=n(1274),d=n(1300),p=n(4841),h=n(4968),f=n(9494),m=n(625),g=n(2676),b=n(9590),y=n(2991),v=n(827),w=n(701),x=n(6092),S=n(3740),E=n(569),T=n(7852);function C(e,t,n){if((0,E.Cq)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=(0,S.C)(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,T.H)(e,t,r,n)}var _=n(4136),I=n(9640),k=n(3710),R=n(7020),N=n(8447),O=n(4415);function A(e,t,n){const r=1-e%2,o=new Float32Array(e);for(let i=0;i<e;++i){const s=2*Math.PI*i/(e+r-1);o[i]=t-n*Math.cos(s)}return(0,x.R)(o,"float32")}(0,c.op)({hammingWindow_:function(e){return A(e,.54,.46)}});const D=(0,c.op)({hannWindow_:function(e){return A(e,.5,.5)}});var L=n(4006);const P=(0,c.op)({frame_:function(e,t,n,r=!1,o=0){let i=0;const s=[];for(;i+t<=e.size;)s.push((0,g.t)(e,i,t)),i+=n;if(r)for(;i<e.size;){const r=i+t-e.size,c=(0,a.z)([(0,g.t)(e,i,t-r),(0,L.h)([r],o)]);s.push(c),i+=n}return 0===s.length?C([],[0,t]):(0,h.X)((0,a.z)(s),[s.length,t])}});(0,c.op)({stft_:function(e,t,n,r,o=D){var i;null==r&&(i=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));const s=P(e,t,n),a=(0,p.d)(s,o(t));return(0,k.Q)(a,r)}});var V=n(7097),M=n(9121);const F=(0,c.op)({cropAndResize_:function(e,t,n,r,o="bilinear",i=0){const s=(0,S._1)(e,"image","cropAndResize"),a=(0,S._1)(t,"boxes","cropAndResize","float32"),c=(0,S._1)(n,"boxInd","cropAndResize","int32"),u=a.shape[0];E.hu(4===s.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`)),E.hu(2===a.rank&&4===a.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`)),E.hu(1===c.rank&&c.shape[0]===u,(()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`)),E.hu(2===r.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`)),E.hu(r[0]>=1&&r[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${r}`)),E.hu("bilinear"===o||"nearest"===o,(()=>`method must be bilinear or nearest, but was ${o}`));const l={image:s,boxes:a,boxInd:c},d={method:o,extrapolationValue:i,cropSize:r};return V.BV.runKernel(M.Vc,l,d)}}),W=(0,c.op)({flipLeftRight_:function(e){const t=(0,S._1)(e,"image","flipLeftRight","float32");E.hu(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const n={image:t};return V.BV.runKernel(M.Uy,n,{})}});var Z=n(7501);const B=(0,c.op)({grayscaleToRGB_:function(e){const t=(0,S._1)(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];E.hu(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),E.hu(1===r,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`));const o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,(0,Z.G)(t,o)}}),G=(0,c.op)({rotateWithOffset_:function(e,t,n=0,r=.5){const o=(0,S._1)(e,"image","rotateWithOffset","float32");E.hu(4===o.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`));const i={image:o},s={radians:t,fillValue:n,center:r};return V.BV.runKernel(M.b9,i,s)}});function U(e,t,n,r,o,i){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==i&&(i=0);const s=e.shape[0];return n=Math.min(n,s),E.hu(0<=r&&r<=1,(()=>`iouThreshold must be in [0, 1], but was '${r}'`)),E.hu(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`)),E.hu(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),E.hu(1===t.rank,(()=>"scores must be a 1D tensor")),E.hu(t.shape[0]===s,(()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${t.shape[0]}`)),E.hu(0<=i&&i<=1,(()=>`softNmsSigma must be in [0, 1], but was '${i}'`)),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}const $=(0,c.op)({nonMaxSuppression_:function(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY){const i=(0,S._1)(e,"boxes","nonMaxSuppression","float32"),s=(0,S._1)(t,"scores","nonMaxSuppression","float32"),a=U(i,s,n,r,o),c={maxOutputSize:n=a.maxOutputSize,iouThreshold:r=a.iouThreshold,scoreThreshold:o=a.scoreThreshold};return V.BV.runKernel(M.uv,{boxes:i,scores:s},c)}});var X=n(3337);const j=(0,c.op)({nonMaxSuppressionWithScore_:function(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){const s=(0,S._1)(e,"boxes","nonMaxSuppression"),a=(0,S._1)(t,"scores","nonMaxSuppression"),c=U(s,a,n,r,o,i),u={boxes:s,scores:a},l={maxOutputSize:n=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:o=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},d=V.BV.runKernel(M.W0,u,l);return{selectedIndices:d[0],selectedScores:d[1]}}}),z=(0,c.op)({nonMaxSuppressionPadded_:function(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){const s=(0,S._1)(e,"boxes","nonMaxSuppression"),a=(0,S._1)(t,"scores","nonMaxSuppression"),c=U(s,a,n,r,o,null),u={boxes:s,scores:a},l={maxOutputSize:c.maxOutputSize,iouThreshold:c.iouThreshold,scoreThreshold:c.scoreThreshold,padToMaxOutputSize:i},d=V.BV.runKernel(M.cy,u,l);return{selectedIndices:d[0],validOutputs:d[1]}}}),H=(0,c.op)({resizeBilinear_:function(e,t,n=!1,r=!1){const o=(0,S._1)(e,"images","resizeBilinear");E.hu(3===o.rank||4===o.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`)),E.hu(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),E.hu(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let i=o,s=!1;3===o.rank&&(s=!0,i=(0,h.X)(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,a={images:i},c={alignCorners:n,halfPixelCenters:r,size:t},u=V.BV.runKernel(M._Y,a,c);return s?(0,h.X)(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),Y=(0,c.op)({resizeNearestNeighbor_:function(e,t,n=!1,r=!1){const o=(0,S._1)(e,"images","resizeNearestNeighbor");E.hu(3===o.rank||4===o.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`)),E.hu(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),E.hu("float32"===o.dtype||"int32"===o.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),E.hu(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let i=o,s=!1;3===o.rank&&(s=!0,i=(0,h.X)(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,a={images:i},c={alignCorners:n,halfPixelCenters:r,size:t},u=V.BV.runKernel(M.dp,a,c);return s?(0,h.X)(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});var K=n(8644),J=n(3865),q=n(624),Q=n(636),ee=n(5475),te=n(7809),ne=n(5912),re=n(7245);const oe=(0,c.op)({threshold_:function(e,t="binary",n=!1,o=.5){const s=(0,S._1)(e,"image","threshold"),a=s.shape[0]*s.shape[1];let c,u,d,h,f=(0,p.d)((0,x.R)([o]),255);if(E.hu(3===s.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`)),E.hu(3===s.shape[2]||1===s.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`)),E.hu("int32"===s.dtype||"float32"===s.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`)),E.hu("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===s.shape[2]){[c,u,d]=(0,K.V)(s,[1,1,1],-1);const e=(0,p.d)(c,.2989),t=(0,p.d)(u,.587),n=(0,p.d)(d,.114);h=(0,r.I)((0,r.I)(e,t),n)}else h=e;"otsu"===t&&(f=function(e,t){let n,o,i,s,a,c,u=(0,x.R)([-1]),d=(0,x.R)([0]),h=(0,x.R)([0]);for(let f=0;f<e.size-1;f++){n=(0,g.t)(e,0,f+1),o=(0,g.t)(e,f+1),a=(0,l.h)((0,ee.S)(n),t),c=(0,l.h)((0,ee.S)(o),t);const m=(0,ee.S)((0,p.d)(n,(0,re.w)(0,n.size)));i=(0,l.h)(m,(0,ee.S)(n));const b=(0,L.h)(o.shape,n.size),y=(0,r.I)((0,re.w)(0,o.size),b),w=(0,p.d)(o,y);s=(0,l.h)((0,ee.S)(w),(0,ee.S)(o));const S=(0,v.l)(i,s),E=(0,v.l)(i,s),T=(0,p.d)(a,c);h=(0,p.d)((0,p.d)(T,S),E);const C=(0,Q.p)(h,d);d=(0,ne.a)(C,h,d),u=(0,ne.a)(C,(0,x.R)([f]),u)}return u}((0,J.y)((0,i.p)((0,te.N)(h),"int32"),(0,w.X)([]),256),a));const m=n?(0,q.z)(h,f):(0,Q.p)(h,f);return(0,i.p)((0,p.d)(m,255),"int32")}}),ie=(0,c.op)({transform_:function(e,t,n="nearest",r="constant",o=0,i){const s=(0,S._1)(e,"image","transform","float32"),a=(0,S._1)(t,"transforms","transform","float32");E.hu(4===s.rank,(()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`)),E.hu(2===a.rank&&(a.shape[0]===s.shape[0]||1===a.shape[0])&&8===a.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),E.hu(null==i||2===i.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`));const c={image:s,transforms:a},u={interpolation:n,fillMode:r,fillValue:o,outputShape:i};return V.BV.runKernel(M.wx,c,u)}});var se=n(7630),ae=n(2856);(0,c.op)({bandPart_:function(e,t,n){(0,E.hu)(t%1==0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),(0,E.hu)(n%1==0,(()=>`bandPart(): numUpper must be an integer, got ${n}.`));const r=(0,S._1)(e,"a","bandPart");(0,E.hu)(r.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`));const o=r.shape,[i,s]=r.shape.slice(-2);if(!(t<=i))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${i}).`);if(!(n<=s))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`);t<0&&(t=i),n<0&&(n=s);const a=(0,h.X)((0,re.w)(0,i,1,"int32"),[-1,1]),c=(0,re.w)(0,s,1,"int32"),u=(0,v.l)(a,c),l=(0,ae.H)((0,q.z)(u,(0,f.i)(+t,"int32")),(0,se.b)(u,(0,f.i)(-n,"int32"))),d=(0,I.l)([i,s],r.dtype);return(0,h.X)((0,y.k)((0,_.H)((0,h.X)(r,[-1,i,s])).map((e=>(0,ne.a)(l,e,d)))),o)}});var ce=n(3561);(0,c.op)({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,(0,E.hu)(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)(0,E.hu)(e[t].shape[0]===n,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`))}else t=!0,e=(0,K.V)(e,e.shape[0],0).map((e=>(0,b.L)(e,[0])));(0,E.hu)(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const n=[],r=e;for(let t=0;t<e.length;++t)n.push(V.BV.tidy((()=>{let e=r[t];if(t>0)for(let r=0;r<t;++r){const t=(0,p.d)((0,ee.S)((0,p.d)(n[r],e)),n[r]);e=(0,v.l)(e,t)}return(0,l.h)(e,(0,ce.K)(e,"euclidean"))})));return t?(0,y.k)(n,0):n}});var ue=n(4368);const le=(0,c.op)({eye_:function(e,t,n,r="float32"){null==t&&(t=e);const i=(0,o.f)([e,t],r),s=e<=t?e:t;for(let e=0;e<s;++e)i.set(1,e,e);const a=(0,h.X)(i.toTensor(),[e,t]);if(null==n)return a;if(1===n.length)return(0,Z.G)((0,d.d)(a,0),[n[0],1,1]);if(2===n.length)return(0,Z.G)((0,d.d)((0,d.d)(a,0),0),[n[0],n[1],1,1]);if(3===n.length)return(0,Z.G)((0,d.d)((0,d.d)((0,d.d)(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});var de=n(8687),pe=n(7370),he=n(9065);function fe(e,t=!1){return V.BV.tidy((()=>{(0,E.hu)(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const n=e.shape[0],r=e.shape[1];let o=le(n),i=(0,s.d)(e);const c=C([[1]],[1,1]);let u=(0,s.d)(c);const d=n>=r?r:n;for(let e=0;e<d;++e){const t=i,d=u,h=o;[u,i,o]=V.BV.tidy((()=>{const t=(0,g.t)(i,[e,e],[n-e,1]),d=(0,ce.K)(t),h=(0,g.t)(i,[e,e],[1,1]),f=(0,ne.a)((0,Q.p)(h,0),C([[-1]]),C([[1]])),m=(0,v.l)(h,(0,p.d)(f,d)),b=(0,l.h)(t,m);u=1===b.shape[0]?(0,s.d)(c):(0,a.z)([c,(0,g.t)(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const y=(0,pe.W)((0,l.h)((0,de.O)(f,m),d)),w=(0,g.t)(i,[e,0],[n-e,r]),x=(0,p.d)(y,u),S=(0,he.p)(u);if(0===e)i=(0,v.l)(w,(0,de.O)(x,(0,de.O)(S,w)));else{const t=(0,v.l)(w,(0,de.O)(x,(0,de.O)(S,w)));i=(0,a.z)([(0,g.t)(i,[0,0],[e,r]),t],0)}const E=(0,he.p)(x),T=(0,g.t)(o,[0,e],[n,o.shape[1]-e]);if(0===e)o=(0,v.l)(T,(0,de.O)((0,de.O)(T,u),E));else{const t=(0,v.l)(T,(0,de.O)((0,de.O)(T,u),E));o=(0,a.z)([(0,g.t)(o,[0,0],[n,e]),t],1)}return[u,i,o]})),(0,ue.B9)([t,d,h])}return!t&&n>r&&(o=(0,g.t)(o,[0,0],[n,r]),i=(0,g.t)(i,[0,0],[r,r])),[o,i]}))}(0,c.op)({qr_:function(e,t=!1){if((0,E.hu)(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return fe(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=(0,_.H)((0,h.X)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],i=[];return r.forEach((e=>{const[n,r]=fe(e,t);o.push(n),i.push(r)})),[(0,h.X)((0,y.k)(o,0),e.shape),(0,h.X)((0,y.k)(i,0),e.shape)]}}});var me,ge=n(6235);!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(me||(me={}));var be=n(5130),ye=n(6500),ve=n(4917);const we=(0,c.op)({computeWeightedLoss_:function(e,t,n=me.SUM_BY_NONZERO_WEIGHTS){const r=(0,S._1)(e,"losses","computeWeightedLoss");let o=null;null!=t&&(o=(0,S._1)(t,"weights","computeWeightedLoss"));const s=null==o?r:(0,p.d)(r,o);if(n===me.NONE)return s;if(n===me.SUM)return(0,ee.S)(s);if(n===me.MEAN){if(null==o)return(0,be.J)(s);{const e=r.size/o.size,t=(0,l.h)((0,ee.S)(s),(0,ee.S)(o));return e>1?(0,l.h)(t,(0,f.i)(e)):t}}if(n===me.SUM_BY_NONZERO_WEIGHTS){if(null==o)return(0,l.h)((0,ee.S)(s),(0,f.i)(r.size));{const e=(0,p.d)(o,(0,ve.i)(r.shape)),t=(0,i.p)((0,ee.S)((0,ye.Q)(e,(0,f.i)(0))),"float32");return(0,l.h)((0,ee.S)(s),t)}}throw Error(`Unknown reduction: ${n}`)}});(0,c.op)({absoluteDifference_:function(e,t,n,r=me.SUM_BY_NONZERO_WEIGHTS){const o=(0,S._1)(e,"labels","absoluteDifference"),i=(0,S._1)(t,"predictions","absoluteDifference");let s=null;null!=n&&(s=(0,S._1)(n,"weights","absoluteDifference")),(0,E.k5)(o.shape,i.shape,"Error in absoluteDifference: ");const a=(0,ge.W)((0,v.l)(o,i));return we(a,s,r)}}),(0,c.op)({cosineDistance_:function(e,t,n,r,o=me.SUM_BY_NONZERO_WEIGHTS){const i=(0,S._1)(e,"labels","cosineDistance"),s=(0,S._1)(t,"predictions","cosineDistance");let a=null;null!=r&&(a=(0,S._1)(r,"weights","cosineDistance")),(0,E.k5)(i.shape,s.shape,"Error in cosineDistance: ");const c=(0,f.i)(1),u=(0,v.l)(c,(0,ee.S)((0,p.d)(i,s),n,!0));return we(u,a,o)}});var xe=n(7409);(0,c.op)({hingeLoss_:function(e,t,n,r=me.SUM_BY_NONZERO_WEIGHTS){let o=(0,S._1)(e,"labels","hingeLoss");const i=(0,S._1)(t,"predictions","hingeLoss");let s=null;null!=n&&(s=(0,S._1)(n,"weights","hingeLoss")),(0,E.k5)(o.shape,i.shape,"Error in hingeLoss: ");const a=(0,f.i)(1);o=(0,v.l)((0,p.d)((0,f.i)(2),o),a);const c=(0,xe.U)((0,v.l)(a,(0,p.d)(o,i)));return we(c,s,r)}});var Se=n(4513),Ee=n(248);(0,c.op)({huberLoss_:function(e,t,n,o=1,i=me.SUM_BY_NONZERO_WEIGHTS){const s=(0,S._1)(e,"labels","huberLoss"),a=(0,S._1)(t,"predictions","huberLoss");let c=null;null!=n&&(c=(0,S._1)(n,"weights","huberLoss")),(0,E.k5)(s.shape,a.shape,"Error in huberLoss: ");const u=(0,f.i)(o),l=(0,ge.W)((0,v.l)(a,s)),d=(0,Se.L)(l,u),h=(0,v.l)(l,d),m=(0,r.I)((0,p.d)((0,f.i)(.5),(0,Ee.h)(d)),(0,p.d)(u,h));return we(m,c,i)}});var Te=n(2597);(0,c.op)({logLoss_:function(e,t,n,o=1e-7,i=me.SUM_BY_NONZERO_WEIGHTS){const s=(0,S._1)(e,"labels","logLoss"),a=(0,S._1)(t,"predictions","logLoss");let c=null;null!=n&&(c=(0,S._1)(n,"weights","logLoss")),(0,E.k5)(s.shape,a.shape,"Error in logLoss: ");const u=(0,f.i)(1),l=(0,f.i)(o),d=(0,pe.W)((0,p.d)(s,(0,Te.c)((0,r.I)(a,l)))),h=(0,p.d)((0,v.l)(u,s),(0,Te.c)((0,r.I)((0,v.l)(u,a),l))),m=(0,v.l)(d,h);return we(m,c,i)}});var Ce=n(5265);(0,c.op)({meanSquaredError_:function(e,t,n,r=me.SUM_BY_NONZERO_WEIGHTS){const o=(0,S._1)(e,"labels","meanSquaredError"),i=(0,S._1)(t,"predictions","meanSquaredError");let s=null;null!=n&&(s=(0,S._1)(n,"weights","meanSquaredError")),(0,E.k5)(o.shape,i.shape,"Error in meanSquaredError: ");const a=(0,Ce.$)(o,i);return we(a,s,r)}});var _e=n(4842),Ie=n(7474);(0,c.op)({sigmoidCrossEntropy_:function(e,t,n,o=0,i=me.SUM_BY_NONZERO_WEIGHTS){let s=(0,S._1)(e,"multiClassLabels","sigmoidCrossEntropy");const a=(0,S._1)(t,"logits","sigmoidCrossEntropy");let c=null;if(null!=n&&(c=(0,S._1)(n,"weights","sigmoidCrossEntropy")),(0,E.k5)(s.shape,a.shape,"Error in sigmoidCrossEntropy: "),o>0){const e=(0,f.i)(o),t=(0,f.i)(1),n=(0,f.i)(.5);s=(0,r.I)((0,p.d)(s,(0,v.l)(t,e)),(0,p.d)(n,e))}const u=function(e,t){const n=(0,S._1)(e,"labels","sigmoidCrossEntropyWithLogits"),o=(0,S._1)(t,"logits","sigmoidCrossEntropyWithLogits");(0,E.k5)(n.shape,o.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=(0,xe.U)(o),s=(0,p.d)(o,n),a=(0,Ie.K)((0,_e.Q)((0,pe.W)((0,ge.W)(o))));return(0,r.I)((0,v.l)(i,s),a)}(s,a);return we(u,c,i)}});var ke=n(633),Re=n(3591),Ne=n(3307);const Oe=(0,c.op)({logSumExp_:function(e,t=null,n=!1){const o=(0,S._1)(e,"x","logSumExp"),i=(0,E.EC)(t,o.shape),s=(0,Ne.F)(o,i,!0),a=(0,v.l)(o,s),c=(0,_e.Q)(a),u=(0,ee.S)(c,i),l=(0,Te.c)(u),d=(0,r.I)((0,h.X)(s,l.shape),l);if(n){const e=(0,Re.rv)(d.shape,i);return(0,h.X)(d,e)}return d}});(0,c.op)({softmaxCrossEntropy_:function(e,t,n,o=0,s=me.SUM_BY_NONZERO_WEIGHTS){let a=(0,S._1)(e,"onehotLabels","softmaxCrossEntropy");const c=(0,S._1)(t,"logits","softmaxCrossEntropy");let u=null;if(null!=n&&(u=(0,S._1)(n,"weights","softmaxCrossEntropy")),(0,E.k5)(a.shape,c.shape,"Error in softmaxCrossEntropy: "),o>0){const e=(0,f.i)(o),t=(0,f.i)(1),n=(0,f.i)(a.shape[1]);a=(0,r.I)((0,p.d)(a,(0,v.l)(t,e)),(0,l.h)(e,n))}const d=function(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);const r=(0,ke.cb)(((e,t,r)=>{const o=Oe(t,[n],!0),s=(0,v.l)((0,i.p)(t,"float32"),o);r([e,s]);const a=(0,pe.W)((0,p.d)(s,e));return{value:(0,ee.S)(a,[n]),gradFunc:(e,t)=>{const[r,o]=t,s=(0,Re.rv)(e.shape,[n]);return[(0,p.d)((0,h.X)(e,s),(0,v.l)((0,i.p)(r,"float32"),(0,_e.Q)(o))),(0,p.d)((0,h.X)(e,s),(0,v.l)((0,_e.Q)(o),(0,i.p)(r,"float32")))]}}}));return r(e,t)}(a,c);return we(d,u,s)}});const Ae=(0,c.op)({sparseFillEmptyRows_:function(e,t,n,r){const o=(0,S._1)(e,"indices","sparseFillEmptyRows","int32"),i=(0,S._1)(t,"values","sparseFillEmptyRows"),s=(0,S._1)(n,"denseShape","sparseFillEmptyRows","int32"),a=(0,S._1)(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==o.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${o.shape}`);if(1!==i.rank)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(1!==s.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(0!==a.rank)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const c={indices:o,values:i,denseShape:s,defaultValue:a},u=V.BV.runKernel(M.O3,c);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}}),De=(0,c.op)({sparseReshape_:function(e,t,n){const r=(0,S._1)(e,"inputIndices","sparseReshape","int32"),o=(0,S._1)(t,"inputShape","sparseReshape","int32"),i=(0,S._1)(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${r.shape}`);if(1!==o.rank)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(1!==i.rank)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const s={inputIndices:r,inputShape:o,newShape:i},a=V.BV.runKernel(M.nh,s);return{outputIndices:a[0],outputShape:a[1]}}}),Le=(0,c.op)({sparseSegmentMean_:function(e,t,n){const r=(0,S._1)(e,"data","sparseSegmentMean"),o=(0,S._1)(t,"indices","sparseSegmentMean","int32"),i=(0,S._1)(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${o.shape}`);if(1!==i.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${i.shape}`);const s={data:r,indices:o,segmentIds:i};return V.BV.runKernel(M.YW,s)}}),Pe=(0,c.op)({sparseSegmentSum_:function(e,t,n){const r=(0,S._1)(e,"data","sparseSegmentSum"),o=(0,S._1)(t,"indices","sparseSegmentSum","int32"),i=(0,S._1)(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${o.shape}`);if(1!==i.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${i.shape}`);const s={data:r,indices:o,segmentIds:i};return V.BV.runKernel(M.Zj,s)}}),Ve=(0,c.op)({stringNGrams_:function(e,t,n,r,o,i,s,a){const c=(0,S._1)(e,"data","stringNGrams","string");if("string"!==c.dtype)throw new Error("Data must be of datatype string");if(1!==c.shape.length)throw new Error(`Data must be a vector, saw: ${c.shape}`);const u=(0,S._1)(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");const l={separator:n,nGramWidths:r,leftPad:o,rightPad:i,padWidth:s,preserveShortSequences:a},d={data:c,dataSplits:u},p=V.BV.runKernel(M._J,d,l);return{nGrams:p[0],nGramsSplits:p[1]}}}),Me=(0,c.op)({stringSplit_:function(e,t,n=!0){const r=(0,S._1)(e,"input","stringSplit","string"),o=(0,S._1)(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==o.rank)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);const i={skipEmpty:n},s={input:r,delimiter:o},a=V.BV.runKernel(M.s1,s,i);return{indices:a[0],values:a[1],shape:a[2]}}}),Fe=(0,c.op)({stringToHashBucketFast_:function(e,t){const n=(0,S._1)(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const o={input:n};return V.BV.runKernel(M.Xk,o,r)}}),We=(R.k,N.S,k.Q,O.w,{flipLeftRight:W,grayscaleToRGB:B,resizeNearestNeighbor:Y,resizeBilinear:H,rotateWithOffset:G,cropAndResize:F,nonMaxSuppression:$,nonMaxSuppressionAsync:async function(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY){const i=(0,S._1)(e,"boxes","nonMaxSuppressionAsync"),s=(0,S._1)(t,"scores","nonMaxSuppressionAsync"),a=U(i,s,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;const c=await Promise.all([i.data(),s.data()]),u=c[0],l=c[1],{selectedIndices:d}=(0,X.GP)(u,l,n,r,o);return i!==e&&i.dispose(),s!==t&&s.dispose(),(0,x.R)(d,"int32")},nonMaxSuppressionWithScore:j,nonMaxSuppressionWithScoreAsync:async function(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){const s=(0,S._1)(e,"boxes","nonMaxSuppressionAsync"),a=(0,S._1)(t,"scores","nonMaxSuppressionAsync"),c=U(s,a,n,r,o,i);n=c.maxOutputSize,r=c.iouThreshold,o=c.scoreThreshold,i=c.softNmsSigma;const u=await Promise.all([s.data(),a.data()]),l=u[0],d=u[1],{selectedIndices:p,selectedScores:h}=(0,X.pA)(l,d,n,r,o,i);return s!==e&&s.dispose(),a!==t&&a.dispose(),{selectedIndices:(0,x.R)(p,"int32"),selectedScores:(0,x.R)(h)}},nonMaxSuppressionPadded:z,nonMaxSuppressionPaddedAsync:async function(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){const s=(0,S._1)(e,"boxes","nonMaxSuppressionAsync"),a=(0,S._1)(t,"scores","nonMaxSuppressionAsync"),c=U(s,a,n,r,o,null),u=c.maxOutputSize,l=c.iouThreshold,d=c.scoreThreshold,[p,h]=await Promise.all([s.data(),a.data()]),{selectedIndices:m,validOutputs:g}=(0,X.qP)(p,h,u,l,d,i);return s!==e&&s.dispose(),a!==t&&a.dispose(),{selectedIndices:(0,x.R)(m,"int32"),validOutputs:(0,f.i)(g,"int32")}},threshold:oe,transform:ie}),Ze={sparseFillEmptyRows:Ae,sparseReshape:De,sparseSegmentMean:Le,sparseSegmentSum:Pe},Be={stringNGrams:Ve,stringSplit:Me,stringToHashBucketFast:Fe}},3453:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var r=n(7097),o=n(9121),i=n(747),s=n(3740);const a=(0,n(2668).op)({pow_:function(e,t){let n=(0,s._1)(e,"base","pow"),a=(0,s._1)(t,"exp","pow");[n,a]=(0,i.T_)(n,a);const c={a:n,b:a};return r.BV.runKernel(o.pe,c)}})},8151:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({prelu_:function(e,t){const n={x:(0,i._1)(e,"x","prelu"),alpha:(0,i._1)(t,"alpha","prelu")};return r.BV.runKernel(o.o0,n)}})},7245:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var r=n(7097),o=n(9121);function i(e,t,n=1,i="float32"){if(0===n)throw new Error("Cannot have a step of zero");const s={start:e,stop:t,step:n,dtype:i};return r.BV.runKernel(o.e6,{},s)}},766:(e,t,n)=>{"use strict";n.d(t,{k:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({real_:function(e){const t={input:(0,i._1)(e,"input","real")};return r.BV.runKernel(o.xJ,t)}})},7409:(e,t,n)=>{"use strict";n.d(t,{U:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({relu_:function(e){const t={x:(0,i._1)(e,"x","relu")};return r.BV.runKernel(o.qk,t)}})},3582:(e,t,n)=>{"use strict";n.d(t,{b:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({relu6_:function(e){const t={x:(0,i._1)(e,"x","relu6")};return r.BV.runKernel(o.Sb,t)}})},4968:(e,t,n)=>{"use strict";n.d(t,{X:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({reshape_:function(e,t){const n={x:(0,i._1)(e,"x","reshape","string_or_numeric")},s={shape:t};return r.BV.runKernel(o.HZ,n,s)}})},7486:(e,t,n)=>{"use strict";n.d(t,{G:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({reverse_:function(e,t){const n={x:(0,i._1)(e,"x","reverse")},s={dims:t};return r.BV.runKernel(o.mK,n,s)}})},7809:(e,t,n)=>{"use strict";n.d(t,{N:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({round_:function(e){const t={x:(0,i._1)(e,"x","round")};return r.BV.runKernel(o.e0,t)}})},9494:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});var r=n(569),o=n(7852);function i(e,t){if(((0,r.fU)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&(0,r.fU)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,o.H)(e,[],[],t)}},3028:(e,t,n)=>{"use strict";n.d(t,{SU:()=>s,b0:()=>i,l5:()=>o});var r=n(569);function o(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(i+` update.rank < ${o}. `);if(e.length<r+(n.rank-o))throw new Error(i+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+e.length-r)throw new Error(i+" update.rank != "+(o+e.length-r));for(let e=0;e<o;++e)if(n.shape[e]!==t.shape[e])throw new Error(i+` updates.shape[${e}] (${n.shape[e]}) != indices.shape[${e}] (${t.shape[e]}).`);for(let t=0;t<n.rank-o;++t)if(n.shape[t+o]!==e[t+r])throw new Error(i+` updates.shape[${t+o}] (${n.shape[t+o]}) != shape[${t+o}] (${e[t+o]})`)}function i(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}o(n,t,e)}function s(e,t,n){const o=t.shape.length,i=o>1?t.shape[o-1]:1,s=n.length;let a=1;for(let e=i;e<s;++e)a*=n[e];const c=i<1?1:i;return{sliceRank:i,numUpdates:(0,r.NA)(t.shape)/c,sliceSize:a,strides:[...(0,r.e3)(n.slice(0,i)),1],outputSize:(0,r.NA)(n)}}},625:(e,t,n)=>{"use strict";n.d(t,{X:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({sigmoid_:function(e){const t={x:(0,i._1)(e,"x","sigmoid","float32")};return r.BV.runKernel(o.a5,t)}})},2676:(e,t,n)=>{"use strict";n.d(t,{t:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({slice_:function(e,t,n){const s=(0,i._1)(e,"x","slice","string_or_numeric");if(0===s.rank)throw new Error("Slicing scalar is not possible");const a={x:s},c={begin:t,size:n};return r.BV.runKernel(o.p2,a,c)}})},7020:(e,t,n)=>{"use strict";n.d(t,{k:()=>s});var r=n(7097),o=n(9121),i=n(569);const s=(0,n(2668).op)({fft_:function(e){(0,i.hu)("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return r.BV.runKernel(o.vw,t)}})},8447:(e,t,n)=>{"use strict";n.d(t,{S:()=>s});var r=n(7097),o=n(9121),i=n(569);const s=(0,n(2668).op)({ifft_:function(e){(0,i.hu)("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return r.BV.runKernel(o.Qg,t)}})},4415:(e,t,n)=>{"use strict";n.d(t,{w:()=>f});var r=n(1661),o=n(6884),i=n(4386),s=n(4841),a=n(2668),c=n(766),u=n(4968),l=n(7486),d=n(9494),p=n(2676),h=n(8447);const f=(0,a.op)({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let a;if(t<=2){const r=(0,u.X)(e,[n,t]);a=(0,h.S)(r)}else{const f=[n,2*(t-1)],m=(0,u.X)((0,c.k)(e),[n,t]),g=(0,u.X)((0,i.a)(e),[n,t]),b=(0,l.G)((0,p.t)(m,[0,1],[n,t-2]),1),y=(0,s.d)((0,l.G)((0,p.t)(g,[0,1],[n,t-2]),1),(0,d.i)(-1)),v=(0,o.z)([m,b],1),w=(0,o.z)([g,y],1),x=(0,u.X)((0,r.P)(v,w),[f[0],f[1]]);a=(0,h.S)(x)}if(a=(0,c.k)(a),3===e.rank&&0!==e.shape[0]){const t=a,n=e.shape[0];a=(0,u.X)(a,[n,a.shape[0]/n,a.shape[1]]),t.dispose()}return a}})},3710:(e,t,n)=>{"use strict";n.d(t,{Q:()=>m});var r=n(569),o=n(1661),i=n(6884),s=n(4386),a=n(2668),c=n(766),u=n(4968),l=n(2676),d=n(8644),p=n(9640),h=n(6577),f=n(7020);const m=(0,a.op)({rfft_:function(e,t){(0,r.hu)("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let n=e.shape[e.shape.length-1];const a=e.size/n;let m;if(null!=t&&t<n){const r=e.shape.map((e=>0)),o=e.shape.map((e=>e));o[e.shape.length-1]=t,m=(0,l.t)(e,r,o),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,m=(0,i.z)([e,(0,p.l)(r)],e.shape.length-1),n=t}else m=e;const g=(0,h.P)(m),b=(0,u.X)((0,o.P)(m,g),[a,n]),y=(0,f.k)(b),v=Math.floor(n/2)+1,w=(0,c.k)(y),x=(0,s.a)(y),S=(0,d.V)(w,[v,n-v],w.shape.length-1),E=(0,d.V)(x,[v,n-v],x.shape.length-1),T=m.shape.slice();return T[m.shape.length-1]=v,(0,u.X)((0,o.P)(S[0],E[0]),T)}})},8644:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({split_:function(e,t,n=0){const s={x:(0,i._1)(e,"x","split")},a={numOrSizeSplits:t,axis:n};return r.BV.runKernel(o.L8,s,a)}})},3261:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({sqrt_:function(e){const t={x:(0,i._1)(e,"x","sqrt","float32")};return r.BV.runKernel(o.FK,t)}})},248:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(7097),o=n(3740);const i=(0,n(2668).op)({square_:function(e){const t=(0,o._1)(e,"x","square");return r.BV.runKernel("Square",{x:t},{})}})},5265:(e,t,n)=>{"use strict";n.d(t,{$:()=>c});var r=n(7097),o=n(9121),i=n(747),s=n(3740),a=n(2200);const c=(0,n(2668).op)({squaredDifference_:function(e,t){let n=(0,s._1)(e,"a","squaredDifference"),c=(0,s._1)(t,"b","squaredDifference");[n,c]=(0,i.T_)(n,c),(0,a.assertAndGetBroadcastShape)(n.shape,c.shape);const u={a:n,b:c};return r.BV.runKernel(o._t,u,{})}})},9590:(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var r=n(3740),o=n(569),i=n(2668),s=n(4968);const a=(0,i.op)({squeeze_:function(e,t){const n=(0,r._1)(e,"x","squeeze");return(0,s.X)(n,(0,o.bp)(n.shape,t).newShape)}})},2991:(e,t,n)=>{"use strict";n.d(t,{k:()=>a});var r=n(7097),o=n(9121),i=n(3740),s=n(569);const a=(0,n(2668).op)({stack_:function(e,t=0){const n=(0,i.sI)(e,"tensors","stack","string_or_numeric");s.hu(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&s.hu(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const a=n,c={axis:t};return r.BV.runKernel(o.Qi,a,c)}})},827:(e,t,n)=>{"use strict";n.d(t,{l:()=>a});var r=n(7097),o=n(9121),i=n(747),s=n(3740);const a=(0,n(2668).op)({sub_:function(e,t){let n=(0,s._1)(e,"a","sub"),a=(0,s._1)(t,"b","sub");[n,a]=(0,i.T_)(n,a);const c={a:n,b:a};return r.BV.runKernel(o.Tr,c)}})},5475:(e,t,n)=>{"use strict";n.d(t,{S:()=>a});var r=n(7097),o=n(9121),i=n(3740),s=n(2271);const a=(0,n(2668).op)({sum_:function(e,t=null,n=!1){let a=(0,i._1)(e,"x","sum");"bool"===a.dtype&&(a=(0,s.p)(a,"int32"));const c={x:a},u={axis:t,keepDims:n};return r.BV.runKernel(o.GB,c,u)}})},701:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var r=n(3740),o=n(7852);function i(e,t,n){const i=(0,r.C)(e,n);return(0,o.H)(e,t,i,n)}},6092:(e,t,n)=>{"use strict";n.d(t,{R:()=>s});var r=n(3740),o=n(569),i=n(7852);function s(e,t){(0,o.Cq)(e);const n=(0,r.C)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,i.H)(e,null,n,t)}},7852:(e,t,n)=>{"use strict";n.d(t,{H:()=>s});var r=n(7097),o=n(569),i=n(9122);function s(e,t,n,s){if(null==s&&(s=(0,o.D2)(e)),"complex64"===s)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!(0,o.fU)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){(0,o.Mu)(t);const e=(0,o.NA)(t),r=(0,o.NA)(n);(0,o.hu)(e===r,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`));for(let e=0;e<n.length;++e){const r=n[e],i=e!==n.length-1||r!==(0,o.NA)(t.slice(e));(0,o.hu)(n[e]===t[e]||!i,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return(0,o.fU)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==s?(0,i.toTypedArray)(e,s):(0,o.xH)(e,[],!0),r.BV.makeTensor(e,t,s)}},7501:(e,t,n)=>{"use strict";n.d(t,{G:()=>a});var r=n(7097),o=n(9121),i=n(3740),s=n(569);const a=(0,n(2668).op)({tile_:function(e,t){const n=(0,i._1)(e,"x","tile","string_or_numeric");s.hu(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`));const a={x:n},c={reps:t};return r.BV.runKernel(o.n9,a,c)}})},9065:(e,t,n)=>{"use strict";n.d(t,{p:()=>h});var r=n(7097),o=n(4368),i=n(9121),s=n(3740),a=n(569),c=n(1661),u=n(4386),l=n(7370),d=n(2668),p=n(766);const h=(0,d.op)({transpose_:function(e,t,n){const d=(0,s._1)(e,"x","transpose");if(null==t&&(t=d.shape.map(((e,t)=>t)).reverse()),a.hu(d.rank===t.length,(()=>`Error in transpose: rank of input ${d.rank} must match length of perm ${t}.`)),t.forEach((e=>{a.hu(e>=0&&e<d.rank,(()=>"All entries in 'perm' must be between 0 and "+(d.rank-1)+` but got ${t}`))})),d.rank<=1)return d.clone();const h={x:d},f={perm:t};return"complex64"===d.dtype?(0,o.lu)((()=>{let e=(0,p.k)(d),t=(0,u.a)(d);return e=r.BV.runKernel(i.G3,{x:e},f),t=r.BV.runKernel(i.G3,{x:t},f),n&&(t=(0,l.W)(t)),(0,c.P)(e,t)})):r.BV.runKernel(i.G3,h,f)}})},4136:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var r=n(7097),o=n(9121),i=n(3740),s=n(569);const a=(0,n(2668).op)({unstack_:function(e,t=0){const n=(0,i._1)(e,"x","unstack","string_or_numeric");s.hu(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const a={value:n},c={axis:t};return r.BV.runKernel(o.To,a,c)}})},5912:(e,t,n)=>{"use strict";n.d(t,{a:()=>c});var r=n(7097),o=n(9121),i=n(3740),s=n(8247),a=n(2200);const c=(0,n(2668).op)({where_:function(e,t,n){const c=(0,i._1)(t,"a","where"),u=(0,i._1)(n,"b","where"),l=(0,i._1)(e,"condition","where","bool"),d=(0,a.assertAndGetBroadcastShape)((0,a.assertAndGetBroadcastShape)(l.shape,c.shape),u.shape),p={condition:(0,s.U)(l,d),t:(0,s.U)(c,d),e:(0,s.U)(u,d)};return r.BV.runKernel(o.Ph,p)}})},9640:(e,t,n)=>{"use strict";n.d(t,{l:()=>s});var r=n(7097),o=n(569),i=n(1661);function s(e,t="float32"){if("complex64"===t){const t=s(e,"float32"),n=s(e,"float32");return(0,i.P)(t,n)}const n=(0,o.wT)((0,o.NA)(e),t);return r.BV.makeTensor(n,e,t)}},6577:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});var r=n(7097),o=n(9121),i=n(3740);const s=(0,n(2668).op)({zerosLike_:function(e){const t={x:(0,i._1)(e,"x","zerosLike")};return r.BV.runKernel(o.Ru,t)}})},4077:(e,t,n)=>{"use strict";n.d(t,{es:()=>y,YD:()=>d,_w:()=>v,FZ:()=>b,Vp:()=>g,Vi:()=>m});var r=n(5938),o=n(569);function i(e,t,n,r){const i=(0,o.e3)(t),a=function(e,t,n,r){const i=(0,o.NA)(t),a=r[r.length-1],c=new Array(a).fill(0),l=t.length,d="complex64"===n?u(e):e;if(l>1)for(let e=0;e<i/a;e++){const t=e*a;for(let e=0;e<a;e++)c[e]=Math.max(c[e],s(d[t+e],0,n).length)}return c}(e,t,n,i),l=t.length,d=c(e,t,n,i,a),p=["Tensor"];return r&&(p.push(`  dtype: ${n}`),p.push(`  rank: ${l}`),p.push(`  shape: [${t}]`),p.push("  values:")),p.push(d.map((e=>"    "+e)).join("\n")),p.join("\n")}function s(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:(0,o.HD)(e)?`'${e}'`:"bool"===n?a(e):parseFloat(e.toFixed(7)).toString(),(0,o.oj)(r,t)}function a(e){return 0===e?"false":"true"}function c(e,t,n,r,o,i=!0){const l="complex64"===n?2:1,d=t[0],p=t.length;if(0===p)return"complex64"===n?[s(u(e)[0],0,n)]:"bool"===n?[a(e[0])]:[e[0].toString()];if(1===p){if(d>20){const t=3*l;let r=Array.from(e.slice(0,t)),i=Array.from(e.slice((d-3)*l,d*l));return"complex64"===n&&(r=u(r),i=u(i)),["["+r.map(((e,t)=>s(e,o[t],n))).join(", ")+", ..., "+i.map(((e,t)=>s(e,o[d-3+t],n))).join(", ")+"]"]}return["["+("complex64"===n?u(e):Array.from(e)).map(((e,t)=>s(e,o[t],n))).join(", ")+"]"]}const h=t.slice(1),f=r.slice(1),m=r[0]*l,g=[];if(d>20){for(let t=0;t<3;t++){const r=t*m,i=r+m;g.push(...c(e.slice(r,i),h,n,f,o,!1))}g.push("...");for(let t=d-3;t<d;t++){const r=t*m,i=r+m;g.push(...c(e.slice(r,i),h,n,f,o,t===d-1))}}else for(let t=0;t<d;t++){const r=t*m,i=r+m;g.push(...c(e.slice(r,i),h,n,f,o,t===d-1))}const b=2===p?",":"";g[0]="["+g[0]+b;for(let e=1;e<g.length-1;e++)g[e]=" "+g[e]+b;let y=",\n";for(let e=2;e<p;e++)y+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(i?"":y),g}function u(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var l=n(9122);class d{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=o.NA(e),null!=n){const e=n.length;o.hu(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||o.rQ(t,this.size),this.strides=(0,o.e3)(e)}set(e,...t){0===t.length&&(t=[0]),o.hu(t.length===this.rank,(()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`));const n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(const n of e){if(n<0||n>=this.shape[t]){const t=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(t)}t++}let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=this.strides[t]*e[t];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return p().makeTensor(this.values,this.shape,this.dtype)}}let p=null,h=null,f=null;function m(e){p=e}function g(e){h=e}function b(e){f=e}class y{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=o.NA(e),this.strides=(0,o.e3)(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return h.buffer(this.shape,this.dtype,e)}bufferSync(){return h.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return(0,o.GX)(this.shape,e,"complex64"===this.dtype)}arraySync(){return(0,o.GX)(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=p().read(this.dataId);if("string"===this.dtype){const t=await e;try{return t.map((e=>l.decodeString(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),p().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=p().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>l.decodeString(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await p().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(p().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return h.print(this,e)}clone(){return this.throwIfDisposed(),h.clone(this)}toString(e=!1){return i(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),h.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),p().makeVariable(this,e,t,n)}}Object.defineProperty(y,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),(0,r.R)("Tensor",(()=>y));class v extends y{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!o.cO(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);p().disposeTensor(this),this.dataId=e.dataId,p().incRef(this,null)}dispose(){p().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(v,Symbol.hasInstance,{value:e=>e instanceof y&&null!=e.assign&&e.assign instanceof Function})},747:(e,t,n)=>{"use strict";n.d(t,{T_:()=>i,Vu:()=>s});var r=n(4077),o=n(1221);function i(e,t){if(e.dtype===t.dtype)return[e,t];const n=(0,o.x8)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function s(e){const t=[];return a(e,t,new Set),t}function a(e,t,n){if(null==e)return;if(e instanceof r.es)return void t.push(e);if(o=e,!Array.isArray(o)&&"object"!=typeof o)return;var o;const i=e;for(const e in i){const r=i[e];n.has(r)||(n.add(r),a(r,t,n))}}},3740:(e,t,n)=>{"use strict";n.d(t,{C:()=>c,_1:()=>d,sI:()=>p});var r=n(7097),o=n(2885),i=n(4077),s=n(569),a=n(9122);function c(e,t){let n=e;if((0,s.fU)(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||(0,s.fU)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&(0,o.OB)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&u(e,r,[]),r}function u(e,t,n){if(n=n||[],!Array.isArray(e)&&!(0,s.fU)(e))return void(0,s.hu)(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));(0,s.hu)(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),(0,s.hu)(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const r=t.slice(1);for(let t=0;t<e.length;++t)u(e[t],r,n.concat(t))}function l(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function d(e,t,n,o="numeric"){if(e instanceof i.es)return l(o,e.dtype,t,n),e;let u=(0,s.D2)(e);if("string"!==u&&["bool","int32","float32"].indexOf(o)>=0&&(u=o),l(o,u,t,n),null==e||!(0,s.fU)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const d=c(e,u);(0,s.fU)(e)||Array.isArray(e)||(e=[e]);const p="string"!==u?(0,a.toTypedArray)(e,u):(0,s.xH)(e,[],!0);return r.BV.makeTensor(p,d,u)}function p(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map(((e,o)=>d(e,`${t}[${o}]`,n,r)))}},1221:(e,t,n)=>{"use strict";var r,o,i,s,a;n.d(t,{x8:()=>u,z4:()=>l}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(o||(o={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(i||(i={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(s||(s={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(a||(a={}));const c={float32:s,int32:o,bool:i,complex64:a};function u(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return c[e][t]}function l(e){return u(e,"int32")}},9122:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arraysEqual:()=>o.cO,assert:()=>o.hu,assertNonNegativeIntegerDimensions:()=>o.Mu,assertNonNull:()=>o.Cq,assertShapesMatch:()=>o.k5,bytesFromStringArray:()=>o.Ub,bytesPerElement:()=>o.bT,checkConversionForErrors:()=>o.D5,clamp:()=>o.uZ,computeStrides:()=>o.e3,createScalarValue:()=>v,createShuffledIndices:()=>o.U$,decodeString:()=>T,distSquared:()=>o.E7,encodeString:()=>E,fetch:()=>S,fingerPrint64:()=>y,flatten:()=>o.xH,getArrayFromDType:()=>o.rQ,getTypedArrayFromDType:()=>o.WP,hasEncodingLoss:()=>o.QB,hexToLong:()=>a,indexToLoc:()=>o.NE,inferDtype:()=>o.D2,inferFromImplicitShape:()=>o.JZ,isBoolean:()=>o.jn,isFunction:()=>o.mf,isInt:()=>o.GN,isNumber:()=>o.hj,isPromise:()=>o.tI,isScalarShape:()=>o.N9,isString:()=>o.HD,isTypedArray:()=>o.fU,isValidDtype:()=>o.LP,locToIndex:()=>o.qy,makeOnesTypedArray:()=>o.p8,makeZerosNestedTypedArray:()=>o.l6,makeZerosTypedArray:()=>o.wT,nearestDivisor:()=>o.jP,nearestLargerEven:()=>o.nY,now:()=>x,parseAxisParam:()=>o.EC,randUniform:()=>o.bj,repeatedTry:()=>o.WD,rightPad:()=>o.oj,shuffle:()=>o.TV,shuffleCombo:()=>o.d7,sizeFromShape:()=>o.NA,sizeToSquarishShape:()=>o.YP,squeezeShape:()=>o.bp,sum:()=>o.Sm,swap:()=>o.LF,tanh:()=>o.AE,toNestedArray:()=>o.GX,toTypedArray:()=>w});var r=n(2885),o=n(569),i=n(3720);const s=n.n(i)()||i;function a(e){return s.fromString(e,!0,16)}const c=a("c3a5c85c97cb3127"),u=a("b492b66fbe98f273"),l=a("9ae16a3b2f90404f");function d(e){return e.xor(e.shru(47))}function p(e,t,n){const r=e.slice(t,t+n);return s.fromBytes(Array.from(r),!0,!0)}function h(e,t){return p(e,t,8)}function f(e,t){return p(e,t,4)}function m(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function g(e,t,n=a("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let o=t.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function b(e,t,n,r){return function(e,t,n,r,o,i){o=o.add(e),i=m(i.add(o).add(r),21);const s=o;return o=(o=o.add(t)).add(n),i=i.add(m(o,44)),[o.add(r),i.add(s)]}(h(e,t),h(e,t+8),h(e,t+16),h(e,t+24),n,r)}function y(e,t=e.length){const n=s.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){const n=l.add(2*t),r=h(e,0).add(l),o=h(e,t-8);return g(m(o,37).mul(n).add(r),m(r,25).add(o).mul(n),n)}if(t>=4){const n=l.add(2*t);return g(f(e,0).shl(3).add(t),f(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return d(l.mul(n).xor(c.mul(r))).mul(l)}return l}(e,t):function(e,t=e.length){const n=l.add(2*t),r=h(e,0).mul(u),o=h(e,8),i=h(e,t-8).mul(n),s=h(e,t-16).mul(l);return g(m(r.add(o),43).add(m(i,30)).add(s),r.add(m(o.add(l),18)).add(i),n)}(e,t);if(t<=64)return function(e,t=e.length){const n=l.add(2*t),r=h(e,0).mul(l),o=h(e,8),i=h(e,t-8).mul(n),s=h(e,t-16).mul(l),a=m(r.add(o),43).add(m(i,30)).add(s),c=g(a,r.add(m(o.add(l),18)).add(i),n),u=h(e,16).mul(n),d=h(e,24),p=a.add(h(e,t-32)).mul(n),f=c.add(h(e,t-24)).mul(n);return g(m(u.add(d),43).add(m(p,30)).add(f),u.add(m(d.add(r),18)).add(p),n)}(e,t);let r=n,o=n.mul(u).add(113),i=d(o.mul(l).add(113)).mul(l),a=[s.UZERO,s.UZERO],p=[s.UZERO,s.UZERO];r=r.mul(l).add(h(e,0));let y=0;const v=64*(t-1>>6),w=v+(t-1&63)-63;do{r=m(r.add(o).add(a[0]).add(h(e,y+8)),37).mul(u),o=m(o.add(a[1]).add(h(e,y+48)),42).mul(u),r=r.xor(p[1]),o=o.add(a[0]).add(h(e,y+40)),i=m(i.add(p[0]),33).mul(u),a=b(e,y,a[1].mul(u),r.add(p[0])),p=b(e,y+32,i.add(p[1]),o.add(h(e,y+16))),[i,r]=[r,i],y+=64}while(y!==v);const x=u.add(i.and(255).shl(1));return y=w,p[0]=p[0].add(t-1&63),a[0]=a[0].add(p[0]),p[0]=p[0].add(a[0]),r=m(r.add(o).add(a[0]).add(h(e,y+8)),37).mul(x),o=m(o.add(a[1]).add(h(e,y+48)),42).mul(x),r=r.xor(p[1].mul(9)),o=o.add(a[0].mul(9).add(h(e,y+40))),i=m(i.add(p[0]),33).mul(x),a=b(e,y,a[1].mul(x),r.add(p[0])),p=b(e,y+32,i.add(p[1]),o.add(h(e,y+16))),[i,r]=[r,i],g(g(a[0],p[0],x).add(d(o).mul(c)).add(i),g(a[1],p[1],x).add(r),x)}function v(e,t){return"string"===t?E(e):w([e],t)}function w(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=o.xH(e)),(0,r.OB)().getBool("DEBUG")&&o.D5(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function x(){return(0,r.OB)().platform.now()}function S(e,t){return(0,r.OB)().platform.fetch(e,t)}function E(e,t="utf-8"){return t=t||"utf-8",(0,r.OB)().platform.encode(e,t)}function T(e,t="utf-8"){return t=t||"utf-8",(0,r.OB)().platform.decode(e,t)}},569:(e,t,n)=>{"use strict";function r(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,a(e,t,n)}function o(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,a(e,n,r),a(t,n,r)}function i(e,t,n){return Math.max(e,Math.min(t,n))}function s(e){return e%2==0?e:e+1}function a(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function c(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function u(e,t){const n=Math.random();return t*n+(1-n)*e}function l(e,t){let n=0;for(let r=0;r<e.length;r++){const o=Number(e[r])-Number(t[r]);n+=o*o}return n}function d(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function p(e,t,n=""){d(b(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function h(e){d(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function f(e,t=[],n=!1){if(null==t&&(t=[]),Array.isArray(e)||A(e)&&!n)for(let r=0;r<e.length;++r)f(e[r],t,n);else t.push(e);return t}function m(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function g(e){return 0===e.length}function b(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function y(e){return e%1==0}function v(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{const t=Math.exp(2*e);return(t-1)/(t+1)}}function w(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function x(e){const t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return r(t),t}function S(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function E(e,t=(e=>0),n){return new Promise(((r,o)=>{let i=0;const s=()=>{if(e())return void r();i++;const a=t(i);null!=n&&i>=n?o():setTimeout(s,a)};s()}))}function T(e,t){let n=1,r=-1;for(let t=0;t<e.length;++t)if(e[t]>=0)n*=e[t];else if(-1===e[t]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${t}`);r=t}else if(e[t]<0)throw Error(`Shapes can not be < 0. Found ${e[t]} at dim ${t}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const o=e.slice();return o[r]=t/n,o}function C(e,t){const n=t.length;return d((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),d(e.every((e=>y(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function _(e,t){const n=[],r=[],o=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||o?null:C(t,e).sort();let s=0;for(let t=0;t<e.length;++t){if(null!=i){if(i[s]===t&&1!==e[t])throw new Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==i[s]||i[s]>t)&&1===e[t]&&(n.push(e[t]),r.push(t)),i[s]<=t&&s++}1!==e[t]&&(n.push(e[t]),r.push(t))}return{newShape:n,keptDims:r}}function I(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error(`Unknown data type ${e}`);n=new Uint8Array(t)}return n}function k(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function R(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function N(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function O(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function A(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function D(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function L(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}function P(e){return"string"==typeof e||e instanceof String}function V(e){return"boolean"==typeof e}function M(e){return"number"==typeof e}function F(e){return Array.isArray(e)?F(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":M(e)?"float32":P(e)?"string":V(e)?"bool":"float32"}function W(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Z(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function B(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function G(e,t,n,r=!1){const o=new Array;if(1===t.length){const i=t[0]*(r?2:1);for(let t=0;t<i;t++)o[t]=n[e+t]}else{const i=t[0],s=t.slice(1),a=s.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<i;t++)o[t]=G(e+t*a,s,n,r)}return o}function U(e,t,n=!1){if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return G(0,e,t,n)}function $(e,t){const n=X(e,t);for(let e=0;e<n.length;e++)n[e]=1;return n}function X(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function j(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return U(e,new Float32Array(n));if("int32"===t)return U(e,new Int32Array(n));if("bool"===t)return U(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function z(e){e.forEach((t=>{d(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function H(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let t=0;t<e.length-1;++t)r+=n[t]*e[t];return r}function Y(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let t=0;t<r.length-1;++t)r[t]=Math.floor(e/n[t]),e-=r[t]*n[t];return r[r.length-1]=e,r}function K(e){return e&&e.then&&"function"==typeof e.then}n.d(t,{AE:()=>v,Cq:()=>h,D2:()=>F,D5:()=>R,E7:()=>l,EC:()=>C,GN:()=>y,GX:()=>U,HD:()=>P,JZ:()=>T,LF:()=>a,LP:()=>N,Mu:()=>z,N9:()=>g,NA:()=>m,NE:()=>Y,QB:()=>O,Sm:()=>c,TV:()=>r,U$:()=>x,Ub:()=>L,WD:()=>E,WP:()=>I,YP:()=>w,bT:()=>D,bj:()=>u,bp:()=>_,cO:()=>b,d7:()=>o,e3:()=>B,fU:()=>A,hj:()=>M,hu:()=>d,jP:()=>Z,jn:()=>V,k5:()=>p,l6:()=>j,mf:()=>W,nY:()=>s,oj:()=>S,p8:()=>$,qy:()=>H,rQ:()=>k,tI:()=>K,uZ:()=>i,wT:()=>X,xH:()=>f})},9669:(e,t,n)=>{e.exports=n(1609)},5448:(e,t,n)=>{"use strict";var r=n(4867),o=n(6026),i=n(4372),s=n(5327),a=n(4097),c=n(4109),u=n(7985),l=n(7874),d=n(2648),p=n(644),h=n(205);e.exports=function(e){return new Promise((function(t,n){var f,m=e.data,g=e.headers,b=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(f),e.signal&&e.signal.removeEventListener("abort",f)}r.isFormData(m)&&r.isStandardBrowserEnv()&&delete g["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var w=e.auth.username||"",x=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(w+":"+x)}var S=a(e.baseURL,e.url);function E(){if(v){var r="getAllResponseHeaders"in v?c(v.getAllResponseHeaders()):null,i={data:b&&"text"!==b&&"json"!==b?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v};o((function(e){t(e),y()}),(function(e){n(e),y()}),i),v=null}}if(v.open(e.method.toUpperCase(),s(S,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=E:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(E)},v.onabort=function(){v&&(n(new d("Request aborted",d.ECONNABORTED,e,v)),v=null)},v.onerror=function(){n(new d("Network Error",d.ERR_NETWORK,e,v,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new d(t,r.clarifyTimeoutError?d.ETIMEDOUT:d.ECONNABORTED,e,v)),v=null},r.isStandardBrowserEnv()){var T=(e.withCredentials||u(S))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;T&&(g[e.xsrfHeaderName]=T)}"setRequestHeader"in v&&r.forEach(g,(function(e,t){void 0===m&&"content-type"===t.toLowerCase()?delete g[t]:v.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),b&&"json"!==b&&(v.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(f=function(e){v&&(n(!e||e&&e.type?new p:e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(f),e.signal&&(e.signal.aborted?f():e.signal.addEventListener("abort",f))),m||(m=null);var C=h(S);C&&-1===["http","https","file"].indexOf(C)?n(new d("Unsupported protocol "+C+":",d.ERR_BAD_REQUEST,e)):v.send(m)}))}},1609:(e,t,n)=>{"use strict";var r=n(4867),o=n(1849),i=n(321),s=n(7185),a=function e(t){var n=new i(t),a=o(i.prototype.request,n);return r.extend(a,i.prototype,n),r.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(5546));a.Axios=i,a.CanceledError=n(644),a.CancelToken=n(4972),a.isCancel=n(6502),a.VERSION=n(7288).version,a.toFormData=n(7675),a.AxiosError=n(2648),a.Cancel=a.CanceledError,a.all=function(e){return Promise.all(e)},a.spread=n(8713),a.isAxiosError=n(6268),e.exports=a,e.exports.default=a},4972:(e,t,n)=>{"use strict";var r=n(644);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},644:(e,t,n)=>{"use strict";var r=n(2648);function o(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(4867).inherits(o,r,{__CANCEL__:!0}),e.exports=o},6502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{"use strict";var r=n(4867),o=n(5327),i=n(782),s=n(3572),a=n(7185),c=n(4097),u=n(4875),l=u.validators;function d(e){this.defaults=e,this.interceptors={request:new i,response:new i}}d.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var i,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!o){var d=[s,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(c),i=Promise.resolve(t);d.length;)i=i.then(d.shift(),d.shift());return i}for(var p=t;r.length;){var h=r.shift(),f=r.shift();try{p=h(p)}catch(e){f(e);break}}try{i=s(p)}catch(e){return Promise.reject(e)}for(;c.length;)i=i.then(c.shift(),c.shift());return i},d.prototype.getUri=function(e){e=a(this.defaults,e);var t=c(e.baseURL,e.url);return o(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(a(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}d.prototype[e]=t(),d.prototype[e+"Form"]=t(!0)})),e.exports=d},2648:(e,t,n)=>{"use strict";var r=n(4867);function o(e,t,n,r,o){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}r.inherits(o,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=o.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){s[e]={value:e}})),Object.defineProperties(o,s),Object.defineProperty(i,"isAxiosError",{value:!0}),o.from=function(e,t,n,s,a,c){var u=Object.create(i);return r.toFlatObject(e,u,(function(e){return e!==Error.prototype})),o.call(u,e.message,t,n,s,a),u.name=e.name,c&&Object.assign(u,c),u},e.exports=o},782:(e,t,n)=>{"use strict";var r=n(4867);function o(){this.handlers=[]}o.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},4097:(e,t,n)=>{"use strict";var r=n(1793),o=n(7303);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},3572:(e,t,n)=>{"use strict";var r=n(4867),o=n(8527),i=n(6502),s=n(5546),a=n(644);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},7185:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){t=t||{};var n={};function o(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(e[n],t[n])}function s(e){if(!r.isUndefined(t[e]))return o(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(void 0,t[n])}function c(n){return n in t?o(e[n],t[n]):n in e?o(void 0,e[n]):void 0}var u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||i,o=t(e);r.isUndefined(o)&&t!==c||(n[e]=o)})),n}},6026:(e,t,n)=>{"use strict";var r=n(2648);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},8527:(e,t,n)=>{"use strict";var r=n(4867),o=n(5546);e.exports=function(e,t,n){var i=this||o;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},5546:(e,t,n)=>{"use strict";var r=n(4867),o=n(6016),i=n(2648),s=n(7874),a=n(7675),c={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,d={transitional:s,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(l=n(5448)),l),transformRequest:[function(e,t){if(o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,i=r.isObject(e),s=t&&t["Content-Type"];if((n=r.isFileList(e))||i&&"multipart/form-data"===s){var c=this.env&&this.env.FormData;return a(n?{"files[]":e}:e,c&&new c)}return i||"application/json"===s?(u(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||d.transitional,n=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||o&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw i.from(e,i.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(1623)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){d.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){d.headers[e]=r.merge(c)})),e.exports=d},7874:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7288:e=>{e.exports={version:"0.27.2"}},1849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},5327:(e,t,n)=>{"use strict";var r=n(4867);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(o(t)+"="+o(e))})))})),i=s.join("&")}if(i){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(o)&&a.push("path="+o),r.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},6268:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},7985:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},6016:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},1623:e=>{e.exports=null},4109:(e,t,n)=>{"use strict";var r=n(4867),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&o.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},205:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},7675:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){t=t||new FormData;var n=[];function o(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(i,s){if(r.isPlainObject(i)||r.isArray(i)){if(-1!==n.indexOf(i))throw Error("Circular reference detected in "+s);n.push(i),r.forEach(i,(function(n,i){if(!r.isUndefined(n)){var a,c=s?s+"."+i:i;if(n&&!s&&"object"==typeof n)if(r.endsWith(i,"{}"))n=JSON.stringify(n);else if(r.endsWith(i,"[]")&&(a=r.toArray(n)))return void a.forEach((function(e){!r.isUndefined(e)&&t.append(c,o(e))}));e(n,c)}})),n.pop()}else t.append(s,o(i))}(e),t}},4875:(e,t,n)=>{"use strict";var r=n(7288).version,o=n(2648),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new o(i(r," has been removed"+(t?" in "+t:"")),o.ERR_DEPRECATED);return t&&!s[r]&&(s[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var s=r[i],a=t[s];if(a){var c=e[s],u=void 0===c||a(c,s,e);if(!0!==u)throw new o("option "+s+" must be "+u,o.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new o("Unknown option "+s,o.ERR_BAD_OPTION)}},validators:i}},4867:(e,t,n)=>{"use strict";var r,o=n(1849),i=Object.prototype.toString,s=(r=Object.create(null),function(e){var t=i.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function a(e){return e=e.toLowerCase(),function(t){return s(t)===e}}function c(e){return Array.isArray(e)}function u(e){return void 0===e}var l=a("ArrayBuffer");function d(e){return null!==e&&"object"==typeof e}function p(e){if("object"!==s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var h=a("Date"),f=a("File"),m=a("Blob"),g=a("FileList");function b(e){return"[object Function]"===i.call(e)}var y=a("URLSearchParams");function v(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var w,x=(w="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return w&&e instanceof w});e.exports={isArray:c,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||i.call(e)===t||b(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:d,isPlainObject:p,isUndefined:u,isDate:h,isFile:f,isBlob:m,isFunction:b,isStream:function(e){return d(e)&&b(e.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:v,merge:function e(){var t={};function n(n,r){p(t[r])&&p(n)?t[r]=e(t[r],n):p(n)?t[r]=e({},n):c(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)v(arguments[r],n);return t},extend:function(e,t,n){return v(t,(function(t,r){e[r]=n&&"function"==typeof t?o(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,o,i,s={};t=t||{};do{for(o=(r=Object.getOwnPropertyNames(e)).length;o-- >0;)s[i=r[o]]||(t[i]=e[i],s[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:a,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(u(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:x,isFileList:g}},2240:(e,t,n)=>{"use strict";var r=n(1518);function o(e,t){return void 0===t&&(t="utf8"),Buffer.isBuffer(e)?s(e.toString("base64")):s(Buffer.from(e,t).toString("base64"))}function i(e){return e=e.toString(),r.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function s(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var a=o;a.encode=o,a.decode=function(e,t){return void 0===t&&(t="utf8"),Buffer.from(i(e),"base64").toString(t)},a.toBase64=i,a.fromBase64=s,a.toBuffer=function(e){return Buffer.from(i(e),"base64")},t.default=a},1518:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.length,n=t%4;if(!n)return e;var r=t,o=4-n,i=t+o,s=Buffer.alloc(i);for(s.write(e);o--;)s.write("=",r++);return s.toString()}},5772:(e,t,n)=>{e.exports=n(2240).default,e.exports.default=e.exports},3720:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var o={},i={};function s(e,t){var n,r,s;return t?(s=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=c(e,(0|e)<0?-1:0,!0),s&&(i[e]=n),n):(s=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=c(e,e<0?-1:0,!1),s&&(o[e]=n),n)}function a(e,t){if(isNaN(e))return t?b:g;if(t){if(e<0)return b;if(e>=h)return S}else{if(e<=-f)return E;if(e+1>=f)return x}return e<0?a(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=s,n.fromNumber=a,n.fromBits=c;var u=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var o=a(u(n,8)),i=g,s=0;s<e.length;s+=8){var c=Math.min(8,e.length-s),d=parseInt(e.substring(s,s+c),n);if(c<8){var p=a(u(n,c));i=i.mul(p).add(a(d))}else i=(i=i.mul(o)).add(a(d))}return i.unsigned=t,i}function d(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?l(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=d;var p=4294967296,h=p*p,f=h/2,m=s(1<<24),g=s(0);n.ZERO=g;var b=s(0,!0);n.UZERO=b;var y=s(1);n.ONE=y;var v=s(1,!0);n.UONE=v;var w=s(-1);n.NEG_ONE=w;var x=c(-1,2147483647,!1);n.MAX_VALUE=x;var S=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=S;var E=c(0,-2147483648,!1);n.MIN_VALUE=E;var T=n.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var t=a(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=a(u(e,6),this.unsigned),i=this,s="";;){var c=i.div(o),l=(i.sub(c.mul(o)).toInt()>>>0).toString(e);if((i=c).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1==(1&this.low)},T.isEven=function(){return 0==(1&this.low)},T.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(y)},T.neg=T.negate,T.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,l=0,p=0,h=0,f=0;return h+=(f+=i+(65535&e.low))>>>16,p+=(h+=o+u)>>>16,l+=(p+=n+a)>>>16,l+=t+s,c((h&=65535)<<16|(f&=65535),(l&=65535)<<16|(p&=65535),this.unsigned)},T.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=d(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(E))return e.isOdd()?E:g;if(e.eq(E))return this.isOdd()?E:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return a(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,i=this.low>>>16,s=65535&this.low,u=e.high>>>16,l=65535&e.high,p=e.low>>>16,h=65535&e.low,f=0,b=0,y=0,v=0;return y+=(v+=s*h)>>>16,b+=(y+=i*h)>>>16,y&=65535,b+=(y+=s*p)>>>16,f+=(b+=o*h)>>>16,b&=65535,f+=(b+=i*p)>>>16,b&=65535,f+=(b+=s*l)>>>16,f+=n*h+o*p+i*l+s*u,c((y&=65535)<<16|(v&=65535),(f&=65535)<<16|(b&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,o,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return v;i=b}else{if(this.eq(E))return e.eq(y)||e.eq(w)?E:e.eq(E)?y:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?y:w:(o=this.sub(e.mul(n)),i=n.add(o.div(e)));if(e.eq(E))return this.unsigned?b:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(o=this;o.gte(e);){n=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),l=s<=48?1:u(2,s-48),p=a(n),h=p.mul(e);h.isNegative()||h.gt(o);)h=(p=a(n-=l,this.unsigned)).mul(e);p.isZero()&&(p=y),i=i.add(p),o=o.sub(h)}return i},T.div=T.divide,T.modulo=function(e){return r(e)||(e=d(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return c(~this.low,~this.high,this.unsigned)},T.and=function(e){return r(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return r(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return r(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},6377:(e,t,n)=>{var r=n(4832),o=n(8652),i=n(801),s=n(2030),a=n(3618),c=n(9049),u=n(1971);u.alea=r,u.xor128=o,u.xorwow=i,u.xorshift7=s,u.xor4096=a,u.tychei=c,e.exports=u},4832:function(e,t,n){var r;!function(e,o,i){function s(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function c(e,t){var n=new s(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.alea=c}(0,e=n.nmd(e),n.amdD)},9049:function(e,t,n){var r;!function(e,o,i){function s(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function c(e,t){var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.tychei=c}(0,e=n.nmd(e),n.amdD)},8652:function(e,t,n){var r;!function(e,o,i){function s(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function c(e,t){var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.xor128=c}(0,e=n.nmd(e),n.amdD)},3618:function(e,t,n){var r;!function(e,o,i){function s(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,s,a=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),o=0,i=-32;i<c;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(s=s+1640531527|0,o=0==(n=a[127&i]^=r+s)?o+1:0);for(o>=128&&(a[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=a[o+34&127],n=a[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,a[o]=r^n;e.w=s,e.X=a,e.i=o}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function c(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.xor4096=c}(0,e=n.nmd(e),n.amdD)},2030:function(e,t,n){var r;!function(e,o,i){function s(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function c(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.xorshift7=c}(0,e=n.nmd(e),n.amdD)},801:function(e,t,n){var r;!function(e,o,i){function s(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function c(e,t){var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.xorwow=c}(0,e=n.nmd(e),n.amdD)},1971:(e,t,n)=>{var r;!function(o,i){var s,a=this,c=256,u=i.pow(c,6),l=i.pow(2,52),d=2*l,p=255;function h(e,t,n){var r=[],p=b(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(c):(e=new Uint8Array(c),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(e){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(o)]}}():e,3),r),h=new f(r),v=function(){for(var e=h.g(6),t=u,n=0;e<l;)e=(e+n)*c,t*=c,n=h.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|h.g(4)},v.quick=function(){return h.g(4)/4294967296},v.double=v,b(y(h.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,h),e.state=function(){return m(h,{})}),n?(i.random=e,t):e})(v,p,"global"in t?t.global:this==i,t.state)}function f(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);o<c;)s[o]=o++;for(o=0;o<c;o++)s[o]=s[i=p&i+e[o%n]+(t=s[o])],s[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,s=r.S;e--;)t=s[o=p&o+1],n=n*c+s[p&(s[o]=s[i=p&i+t])+(s[i]=t)];return r.i=o,r.j=i,n})(c)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],o=typeof e;if(t&&"object"==o)for(n in e)try{r.push(g(e[n],t-1))}catch(e){}return r.length?r:"string"==o?e:e+"\0"}function b(e,t){for(var n,r=e+"",o=0;o<r.length;)t[p&o]=p&(n^=19*t[p&o])+r.charCodeAt(o++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=h,b(i.random(),o),e.exports){e.exports=h;try{s=n(5042)}catch(e){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}([],Math)},6455:function(e){e.exports=function(){"use strict";const e="SweetAlert2:",t=e=>e.charAt(0).toUpperCase()+e.slice(1),n=e=>Array.prototype.slice.call(e),r=t=>{console.warn("".concat(e," ").concat("object"==typeof t?t.join(" "):t))},o=t=>{console.error("".concat(e," ").concat(t))},i=[],s=(e,t)=>{var n;n='"'.concat(e,'" is deprecated and will be removed in the next major release. Please use "').concat(t,'" instead.'),i.includes(n)||(i.push(n),r(n))},a=e=>"function"==typeof e?e():e,c=e=>e&&"function"==typeof e.toPromise,u=e=>c(e)?e.toPromise():Promise.resolve(e),l=e=>e&&Promise.resolve(e)===e,d={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},p=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],h={},f=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],m=e=>Object.prototype.hasOwnProperty.call(d,e),g=e=>-1!==p.indexOf(e),b=e=>h[e],y=e=>{m(e)||r('Unknown parameter "'.concat(e,'"'))},v=e=>{f.includes(e)&&r('The parameter "'.concat(e,'" is incompatible with toasts'))},w=e=>{b(e)&&s(e,b(e))},x=e=>{const t={};for(const n in e)t[e[n]]="swal2-"+e[n];return t},S=x(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","no-war"]),E=x(["success","warning","info","question","error"]),T=()=>document.body.querySelector(".".concat(S.container)),C=e=>{const t=T();return t?t.querySelector(e):null},_=e=>C(".".concat(e)),I=()=>_(S.popup),k=()=>_(S.icon),R=()=>_(S.title),N=()=>_(S["html-container"]),O=()=>_(S.image),A=()=>_(S["progress-steps"]),D=()=>_(S["validation-message"]),L=()=>C(".".concat(S.actions," .").concat(S.confirm)),P=()=>C(".".concat(S.actions," .").concat(S.deny)),V=()=>C(".".concat(S.loader)),M=()=>C(".".concat(S.actions," .").concat(S.cancel)),F=()=>_(S.actions),W=()=>_(S.footer),Z=()=>_(S["timer-progress-bar"]),B=()=>_(S.close),G=()=>{const e=n(I().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort(((e,t)=>{const n=parseInt(e.getAttribute("tabindex")),r=parseInt(t.getAttribute("tabindex"));return n>r?1:n<r?-1:0})),t=n(I().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter((e=>"-1"!==e.getAttribute("tabindex")));return(e=>{const t=[];for(let n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t})(e.concat(t)).filter((e=>se(e)))},U=()=>z(document.body,S.shown)&&!z(document.body,S["toast-shown"])&&!z(document.body,S["no-backdrop"]),$=()=>I()&&z(I(),S.toast),X={previousBodyPadding:null},j=(e,t)=>{if(e.textContent="",t){const r=(new DOMParser).parseFromString(t,"text/html");n(r.querySelector("head").childNodes).forEach((t=>{e.appendChild(t)})),n(r.querySelector("body").childNodes).forEach((t=>{e.appendChild(t)}))}},z=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let t=0;t<n.length;t++)if(!e.classList.contains(n[t]))return!1;return!0},H=(e,t,o)=>{if(((e,t)=>{n(e.classList).forEach((n=>{Object.values(S).includes(n)||Object.values(E).includes(n)||Object.values(t.showClass).includes(n)||e.classList.remove(n)}))})(e,t),t.customClass&&t.customClass[o]){if("string"!=typeof t.customClass[o]&&!t.customClass[o].forEach)return r("Invalid type of customClass.".concat(o,'! Expected string or iterable object, got "').concat(typeof t.customClass[o],'"'));q(e,t.customClass[o])}},Y=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(".".concat(S.popup," > .").concat(S[t]));case"checkbox":return e.querySelector(".".concat(S.popup," > .").concat(S.checkbox," input"));case"radio":return e.querySelector(".".concat(S.popup," > .").concat(S.radio," input:checked"))||e.querySelector(".".concat(S.popup," > .").concat(S.radio," input:first-child"));case"range":return e.querySelector(".".concat(S.popup," > .").concat(S.range," input"));default:return e.querySelector(".".concat(S.popup," > .").concat(S.input))}},K=e=>{if(e.focus(),"file"!==e.type){const t=e.value;e.value="",e.value=t}},J=(e,t,n)=>{e&&t&&("string"==typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach((t=>{Array.isArray(e)?e.forEach((e=>{n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},q=(e,t)=>{J(e,t,!0)},Q=(e,t)=>{J(e,t,!1)},ee=(e,t)=>{const r=n(e.childNodes);for(let e=0;e<r.length;e++)if(z(r[e],t))return r[e]},te=(e,t,n)=>{n==="".concat(parseInt(n))&&(n=parseInt(n)),n||0===parseInt(n)?e.style[t]="number"==typeof n?"".concat(n,"px"):n:e.style.removeProperty(t)},ne=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";e.style.display=t},re=e=>{e.style.display="none"},oe=(e,t,n,r)=>{const o=e.querySelector(t);o&&(o.style[n]=r)},ie=(e,t,n)=>{t?ne(e,n):re(e)},se=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),ae=e=>!!(e.scrollHeight>e.clientHeight),ce=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},ue=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Z();se(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout((()=>{n.style.transition="width ".concat(e/1e3,"s linear"),n.style.width="0%"}),10))},le=()=>"undefined"==typeof window||"undefined"==typeof document,de={},pe=e=>new Promise((t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;de.restoreFocusTimeout=setTimeout((()=>{de.previousActiveElement&&de.previousActiveElement.focus?(de.previousActiveElement.focus(),de.previousActiveElement=null):document.body&&document.body.focus(),t()}),100),window.scrollTo(n,r)})),he='\n <div aria-labelledby="'.concat(S.title,'" aria-describedby="').concat(S["html-container"],'" class="').concat(S.popup,'" tabindex="-1">\n   <button type="button" class="').concat(S.close,'"></button>\n   <ul class="').concat(S["progress-steps"],'"></ul>\n   <div class="').concat(S.icon,'"></div>\n   <img class="').concat(S.image,'" />\n   <h2 class="').concat(S.title,'" id="').concat(S.title,'"></h2>\n   <div class="').concat(S["html-container"],'" id="').concat(S["html-container"],'"></div>\n   <input class="').concat(S.input,'" />\n   <input type="file" class="').concat(S.file,'" />\n   <div class="').concat(S.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(S.select,'"></select>\n   <div class="').concat(S.radio,'"></div>\n   <label for="').concat(S.checkbox,'" class="').concat(S.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(S.label,'"></span>\n   </label>\n   <textarea class="').concat(S.textarea,'"></textarea>\n   <div class="').concat(S["validation-message"],'" id="').concat(S["validation-message"],'"></div>\n   <div class="').concat(S.actions,'">\n     <div class="').concat(S.loader,'"></div>\n     <button type="button" class="').concat(S.confirm,'"></button>\n     <button type="button" class="').concat(S.deny,'"></button>\n     <button type="button" class="').concat(S.cancel,'"></button>\n   </div>\n   <div class="').concat(S.footer,'"></div>\n   <div class="').concat(S["timer-progress-bar-container"],'">\n     <div class="').concat(S["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),fe=()=>{de.currentInstance.resetValidationMessage()},me=e=>{const t=(()=>{const e=T();return!!e&&(e.remove(),Q([document.documentElement,document.body],[S["no-backdrop"],S["toast-shown"],S["has-column"]]),!0)})();if(le())return void o("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=S.container,t&&q(n,S["no-transition"]),j(n,he);const r="string"==typeof(i=e.target)?document.querySelector(i):i;var i;r.appendChild(n),(e=>{const t=I();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")})(e),(e=>{"rtl"===window.getComputedStyle(e).direction&&q(T(),S.rtl)})(r),(()=>{const e=I(),t=ee(e,S.input),n=ee(e,S.file),r=e.querySelector(".".concat(S.range," input")),o=e.querySelector(".".concat(S.range," output")),i=ee(e,S.select),s=e.querySelector(".".concat(S.checkbox," input")),a=ee(e,S.textarea);t.oninput=fe,n.onchange=fe,i.onchange=fe,s.onchange=fe,a.oninput=fe,r.oninput=()=>{fe(),o.value=r.value},r.onchange=()=>{fe(),r.nextSibling.value=r.value}})(),ge(n,e)},ge=(e,t)=>{if(t.toast)return;const n=(r=[{text:"  <br>     ",youtubeId:"fWClXZd9c78"},{text:"  <br>    ",youtubeId:"_RjBNkn88yA"},{text:"   <br>    ",youtubeId:"yUmzQT4C8JY"},{text:"   <br>  -  ",youtubeId:"hkCYb6edUrQ"}])[Math.floor(Math.random()*r.length)];var r;if("ru"===navigator.language&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const t=document.createElement("div");t.className=S["no-war"],j(t,'<a href="https://www.youtube.com/watch?v='.concat(n.youtubeId,'" target="_blank">').concat(n.text,"</a>")),e.appendChild(t),e.style.paddingTop="4em"}},be=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):"object"==typeof e?ye(e,t):e&&j(t,e)},ye=(e,t)=>{e.jquery?ve(t,e):j(t,e.toString())},ve=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},we=(()=>{if(le())return!1;const e=document.createElement("div"),t={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&void 0!==e.style[n])return t[n];return!1})(),xe=(e,t)=>{const n=F(),r=V();t.showConfirmButton||t.showDenyButton||t.showCancelButton?ne(n):re(n),H(n,t,"actions"),function(e,t,n){const r=L(),o=P(),i=M();Se(r,"confirm",n),Se(o,"deny",n),Se(i,"cancel",n),function(e,t,n,r){if(!r.buttonsStyling)return Q([e,t,n],S.styled);q([e,t,n],S.styled),r.confirmButtonColor&&(e.style.backgroundColor=r.confirmButtonColor,q(e,S["default-outline"])),r.denyButtonColor&&(t.style.backgroundColor=r.denyButtonColor,q(t,S["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,q(n,S["default-outline"]))}(r,o,i,n),n.reverseButtons&&(n.toast?(e.insertBefore(i,r),e.insertBefore(o,r)):(e.insertBefore(i,t),e.insertBefore(o,t),e.insertBefore(r,t)))}(n,r,t),j(r,t.loaderHtml),H(r,t,"loader")};function Se(e,n,r){ie(e,r["show".concat(t(n),"Button")],"inline-block"),j(e,r["".concat(n,"ButtonText")]),e.setAttribute("aria-label",r["".concat(n,"ButtonAriaLabel")]),e.className=S[n],H(e,r,"".concat(n,"Button")),q(e,r["".concat(n,"ButtonClass")])}const Ee=(e,t)=>{const n=T();n&&(function(e,t){"string"==typeof t?e.style.background=t:t||q([document.documentElement,document.body],S["no-backdrop"])}(n,t.backdrop),function(e,t){t in S?q(e,S[t]):(r('The "position" parameter is not valid, defaulting to "center"'),q(e,S.center))}(n,t.position),function(e,t){if(t&&"string"==typeof t){const n="grow-".concat(t);n in S&&q(e,S[n])}}(n,t.grow),H(n,t,"container"))};var Te={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Ce=["input","file","range","select","radio","checkbox","textarea"],_e=e=>{if(!Ae[e.input])return o('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(e.input,'"'));const t=Oe(e.input),n=Ae[e.input](t,e);ne(n),setTimeout((()=>{K(n)}))},Ie=(e,t)=>{const n=Y(I(),e);if(n){(e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["type","value","style"].includes(n)||e.removeAttribute(n)}})(n);for(const e in t)n.setAttribute(e,t[e])}},ke=e=>{const t=Oe(e.input);e.customClass&&q(t,e.customClass.input)},Re=(e,t)=>{e.placeholder&&!t.inputPlaceholder||(e.placeholder=t.inputPlaceholder)},Ne=(e,t,n)=>{if(n.inputLabel){e.id=S.input;const r=document.createElement("label"),o=S["input-label"];r.setAttribute("for",e.id),r.className=o,q(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},Oe=e=>{const t=S[e]?S[e]:S.input;return ee(I(),t)},Ae={},De=(e,t)=>{["string","number"].includes(typeof t.inputValue)?e.value="".concat(t.inputValue):l(t.inputValue)||r('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof t.inputValue,'"'))};Ae.text=Ae.email=Ae.password=Ae.number=Ae.tel=Ae.url=(e,t)=>(De(e,t),Ne(e,e,t),Re(e,t),e.type=t.input,e),Ae.file=(e,t)=>(Ne(e,e,t),Re(e,t),e),Ae.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return n.value=t.inputValue,n.type=t.input,r.value=t.inputValue,Ne(n,e,t),e},Ae.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");j(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return Ne(e,e,t),e},Ae.radio=e=>(e.textContent="",e),Ae.checkbox=(e,t)=>{const n=Y(I(),"checkbox");n.value="1",n.id=S.checkbox,n.checked=Boolean(t.inputValue);const r=e.querySelector("span");return j(r,t.inputPlaceholder),e},Ae.textarea=(e,t)=>{De(e,t),Re(e,t),Ne(e,e,t);return setTimeout((()=>{if("MutationObserver"in window){const t=parseInt(window.getComputedStyle(I()).width);new MutationObserver((()=>{const n=e.offsetWidth+(r=e,parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight));var r;I().style.width=n>t?"".concat(n,"px"):null})).observe(e,{attributes:!0,attributeFilter:["style"]})}})),e};const Le=(e,t)=>{const n=N();H(n,t,"htmlContainer"),t.html?(be(t.html,n),ne(n,"block")):t.text?(n.textContent=t.text,ne(n,"block")):re(n),((e,t)=>{const n=I(),r=Te.innerParams.get(e),o=!r||t.input!==r.input;Ce.forEach((e=>{const r=S[e],i=ee(n,r);Ie(e,t.inputAttributes),i.className=r,o&&re(i)})),t.input&&(o&&_e(t),ke(t))})(e,t)},Pe=(e,t)=>{for(const n in E)t.icon!==n&&Q(e,E[n]);q(e,E[t.icon]),Fe(e,t),Ve(),H(e,t,"icon")},Ve=()=>{const e=I(),t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let e=0;e<n.length;e++)n[e].style.backgroundColor=t},Me=(e,t)=>{e.textContent="",t.iconHtml?j(e,We(t.iconHtml)):"success"===t.icon?j(e,'\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n'):"error"===t.icon?j(e,'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n'):j(e,We({question:"?",warning:"!",info:"i"}[t.icon]))},Fe=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])oe(e,n,"backgroundColor",t.iconColor);oe(e,".swal2-success-ring","borderColor",t.iconColor)}},We=e=>'<div class="'.concat(S["icon-content"],'">').concat(e,"</div>"),Ze=(e,t)=>{const n=A();if(!t.progressSteps||0===t.progressSteps.length)return re(n);ne(n),n.textContent="",t.currentProgressStep>=t.progressSteps.length&&r("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),t.progressSteps.forEach(((e,r)=>{const o=(e=>{const t=document.createElement("li");return q(t,S["progress-step"]),j(t,e),t})(e);if(n.appendChild(o),r===t.currentProgressStep&&q(o,S["active-progress-step"]),r!==t.progressSteps.length-1){const e=(e=>{const t=document.createElement("li");return q(t,S["progress-step-line"]),e.progressStepsDistance&&(t.style.width=e.progressStepsDistance),t})(t);n.appendChild(e)}}))},Be=(e,t)=>{e.className="".concat(S.popup," ").concat(se(e)?t.showClass.popup:""),t.toast?(q([document.documentElement,document.body],S["toast-shown"]),q(e,S.toast)):q(e,S.modal),H(e,t,"popup"),"string"==typeof t.customClass&&q(e,t.customClass),t.icon&&q(e,S["icon-".concat(t.icon)])},Ge=(e,t)=>{((e,t)=>{const n=T(),r=I();t.toast?(te(n,"width",t.width),r.style.width="100%",r.insertBefore(V(),k())):te(r,"width",t.width),te(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),re(D()),Be(r,t)})(0,t),Ee(0,t),Ze(0,t),((e,t)=>{const n=Te.innerParams.get(e),r=k();n&&t.icon===n.icon?(Me(r,t),Pe(r,t)):t.icon||t.iconHtml?t.icon&&-1===Object.keys(E).indexOf(t.icon)?(o('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(t.icon,'"')),re(r)):(ne(r),Me(r,t),Pe(r,t),q(r,t.showClass.icon)):re(r)})(e,t),((e,t)=>{const n=O();if(!t.imageUrl)return re(n);ne(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt),te(n,"width",t.imageWidth),te(n,"height",t.imageHeight),n.className=S.image,H(n,t,"image")})(0,t),((e,t)=>{const n=R();ie(n,t.title||t.titleText,"block"),t.title&&be(t.title,n),t.titleText&&(n.innerText=t.titleText),H(n,t,"title")})(0,t),((e,t)=>{const n=B();j(n,t.closeButtonHtml),H(n,t,"closeButton"),ie(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel)})(0,t),Le(e,t),xe(0,t),((e,t)=>{const n=W();ie(n,t.footer),t.footer&&be(t.footer,n),H(n,t,"footer")})(0,t),"function"==typeof t.didRender&&t.didRender(I())},Ue=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),$e=()=>{n(document.body.children).forEach((e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")}))},Xe=["swal-title","swal-html","swal-footer"],je=e=>{const t={};return n(e.querySelectorAll("swal-param")).forEach((e=>{Qe(e,["name","value"]);const n=e.getAttribute("name"),r=e.getAttribute("value");"boolean"==typeof d[n]&&"false"===r&&(t[n]=!1),"object"==typeof d[n]&&(t[n]=JSON.parse(r))})),t},ze=e=>{const r={};return n(e.querySelectorAll("swal-button")).forEach((e=>{Qe(e,["type","color","aria-label"]);const n=e.getAttribute("type");r["".concat(n,"ButtonText")]=e.innerHTML,r["show".concat(t(n),"Button")]=!0,e.hasAttribute("color")&&(r["".concat(n,"ButtonColor")]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(r["".concat(n,"ButtonAriaLabel")]=e.getAttribute("aria-label"))})),r},He=e=>{const t={},n=e.querySelector("swal-image");return n&&(Qe(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt"))),t},Ye=e=>{const t={},n=e.querySelector("swal-icon");return n&&(Qe(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},Ke=e=>{const t={},r=e.querySelector("swal-input");r&&(Qe(r,["type","label","placeholder","value"]),t.input=r.getAttribute("type")||"text",r.hasAttribute("label")&&(t.inputLabel=r.getAttribute("label")),r.hasAttribute("placeholder")&&(t.inputPlaceholder=r.getAttribute("placeholder")),r.hasAttribute("value")&&(t.inputValue=r.getAttribute("value")));const o=e.querySelectorAll("swal-input-option");return o.length&&(t.inputOptions={},n(o).forEach((e=>{Qe(e,["value"]);const n=e.getAttribute("value"),r=e.innerHTML;t.inputOptions[n]=r}))),t},Je=(e,t)=>{const n={};for(const r in t){const o=t[r],i=e.querySelector(o);i&&(Qe(i,[]),n[o.replace(/^swal-/,"")]=i.innerHTML.trim())}return n},qe=e=>{const t=Xe.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);n(e.children).forEach((e=>{const n=e.tagName.toLowerCase();-1===t.indexOf(n)&&r("Unrecognized element <".concat(n,">"))}))},Qe=(e,t)=>{n(e.attributes).forEach((n=>{-1===t.indexOf(n.name)&&r(['Unrecognized attribute "'.concat(n.name,'" on <').concat(e.tagName.toLowerCase(),">."),"".concat(t.length?"Allowed attributes are: ".concat(t.join(", ")):"To set the value, use HTML within the element.")])}))};var et={email:(e,t)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function tt(e){(function(e){e.inputValidator||Object.keys(et).forEach((t=>{e.input===t&&(e.inputValidator=et[t])}))})(e),e.showLoaderOnConfirm&&!e.preConfirm&&r("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function(e){(!e.target||"string"==typeof e.target&&!document.querySelector(e.target)||"string"!=typeof e.target&&!e.target.appendChild)&&(r('Target parameter is not valid, defaulting to "body"'),e.target="body")}(e),"string"==typeof e.title&&(e.title=e.title.split("\n").join("<br />")),me(e)}class nt{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const rt=()=>{null===X.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(X.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(X.previousBodyPadding+(()=>{const e=document.createElement("div");e.className=S["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t})(),"px"))},ot=()=>{const e=navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),n=!!e.match(/WebKit/i);if(t&&n&&!e.match(/CriOS/i)){const e=44;I().scrollHeight>window.innerHeight-e&&(T().style.paddingBottom="".concat(e,"px"))}},it=()=>{const e=T();let t;e.ontouchstart=e=>{t=st(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},st=e=>{const t=e.target,n=T();return!(at(e)||ct(e)||t!==n&&(ae(n)||"INPUT"===t.tagName||"TEXTAREA"===t.tagName||ae(N())&&N().contains(t)))},at=e=>e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType,ct=e=>e.touches&&e.touches.length>1,ut=e=>{const t=T(),r=I();"function"==typeof e.willOpen&&e.willOpen(r);const o=window.getComputedStyle(document.body).overflowY;ht(t,r,e),setTimeout((()=>{dt(t,r)}),10),U()&&(pt(t,e.scrollbarPadding,o),n(document.body.children).forEach((e=>{e===T()||e.contains(T())||(e.hasAttribute("aria-hidden")&&e.setAttribute("data-previous-aria-hidden",e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}))),$()||de.previousActiveElement||(de.previousActiveElement=document.activeElement),"function"==typeof e.didOpen&&setTimeout((()=>e.didOpen(r))),Q(t,S["no-transition"])},lt=e=>{const t=I();if(e.target!==t)return;const n=T();t.removeEventListener(we,lt),n.style.overflowY="auto"},dt=(e,t)=>{we&&ce(t)?(e.style.overflowY="hidden",t.addEventListener(we,lt)):e.style.overflowY="auto"},pt=(e,t,n)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!z(document.body,S.iosfix)){const e=document.body.scrollTop;document.body.style.top="".concat(-1*e,"px"),q(document.body,S.iosfix),it(),ot()}})(),t&&"hidden"!==n&&rt(),setTimeout((()=>{e.scrollTop=0}))},ht=(e,t,n)=>{q(e,n.showClass.backdrop),t.style.setProperty("opacity","0","important"),ne(t,"grid"),setTimeout((()=>{q(t,n.showClass.popup),t.style.removeProperty("opacity")}),10),q([document.documentElement,document.body],S.shown),n.heightAuto&&n.backdrop&&!n.toast&&q([document.documentElement,document.body],S["height-auto"])},ft=e=>{let t=I();t||new In,t=I();const n=V();$()?re(k()):mt(t,e),ne(n),t.setAttribute("data-loading",!0),t.setAttribute("aria-busy",!0),t.focus()},mt=(e,t)=>{const n=F(),r=V();!t&&se(L())&&(t=L()),ne(n),t&&(re(t),r.setAttribute("data-button-to-replace",t.className)),r.parentNode.insertBefore(r,t),q([e,n],S.loading)},gt=e=>e.checked?1:0,bt=e=>e.checked?e.value:null,yt=e=>e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null,vt=(e,t)=>{const n=I(),r=e=>xt[t.input](n,St(e),t);c(t.inputOptions)||l(t.inputOptions)?(ft(L()),u(t.inputOptions).then((t=>{e.hideLoading(),r(t)}))):"object"==typeof t.inputOptions?r(t.inputOptions):o("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof t.inputOptions))},wt=(e,t)=>{const n=e.getInput();re(n),u(t.inputValue).then((r=>{n.value="number"===t.input?parseFloat(r)||0:"".concat(r),ne(n),n.focus(),e.hideLoading()})).catch((t=>{o("Error in inputValue promise: ".concat(t)),n.value="",ne(n),n.focus(),e.hideLoading()}))},xt={select:(e,t,n)=>{const r=ee(e,S.select),o=(e,t,r)=>{const o=document.createElement("option");o.value=r,j(o,t),o.selected=Et(r,n.inputValue),e.appendChild(o)};t.forEach((e=>{const t=e[0],n=e[1];if(Array.isArray(n)){const e=document.createElement("optgroup");e.label=t,e.disabled=!1,r.appendChild(e),n.forEach((t=>o(e,t[1],t[0])))}else o(r,n,t)})),r.focus()},radio:(e,t,n)=>{const r=ee(e,S.radio);t.forEach((e=>{const t=e[0],o=e[1],i=document.createElement("input"),s=document.createElement("label");i.type="radio",i.name=S.radio,i.value=t,Et(t,n.inputValue)&&(i.checked=!0);const a=document.createElement("span");j(a,o),a.className=S.label,s.appendChild(i),s.appendChild(a),r.appendChild(s)}));const o=r.querySelectorAll("input");o.length&&o[0].focus()}},St=e=>{const t=[];return"undefined"!=typeof Map&&e instanceof Map?e.forEach(((e,n)=>{let r=e;"object"==typeof r&&(r=St(r)),t.push([n,r])})):Object.keys(e).forEach((n=>{let r=e[n];"object"==typeof r&&(r=St(r)),t.push([n,r])})),t},Et=(e,t)=>t&&t.toString()===e.toString();function Tt(){const e=Te.innerParams.get(this);if(!e)return;const t=Te.domCache.get(this);re(t.loader),$()?e.icon&&ne(k()):Ct(t),Q([t.popup,t.actions],S.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const Ct=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?ne(t[0],"inline-block"):!se(L())&&!se(P())&&!se(M())&&re(e.actions)};var _t={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const It=()=>L()&&L().click(),kt=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},Rt=(e,t,n)=>{const r=G();if(r.length)return(t+=n)===r.length?t=0:-1===t&&(t=r.length-1),r[t].focus();I().focus()},Nt=["ArrowRight","ArrowDown"],Ot=["ArrowLeft","ArrowUp"],At=(e,t,n)=>{const r=Te.innerParams.get(e);r&&(t.isComposing||229===t.keyCode||(r.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?Dt(e,t,r):"Tab"===t.key?Lt(t,r):[...Nt,...Ot].includes(t.key)?Pt(t.key):"Escape"===t.key&&Vt(t,r,n)))},Dt=(e,t,n)=>{if(a(n.allowEnterKey)&&t.target&&e.getInput()&&t.target.outerHTML===e.getInput().outerHTML){if(["textarea","file"].includes(n.input))return;It(),t.preventDefault()}},Lt=(e,t)=>{const n=e.target,r=G();let o=-1;for(let e=0;e<r.length;e++)if(n===r[e]){o=e;break}e.shiftKey?Rt(0,o,-1):Rt(0,o,1),e.stopPropagation(),e.preventDefault()},Pt=e=>{if(![L(),P(),M()].includes(document.activeElement))return;const t=Nt.includes(e)?"nextElementSibling":"previousElementSibling";let n=document.activeElement;for(let e=0;e<F().children.length;e++){if(n=n[t],!n)return;if(se(n)&&n instanceof HTMLButtonElement)break}n instanceof HTMLButtonElement&&n.focus()},Vt=(e,t,n)=>{a(t.allowEscapeKey)&&(e.preventDefault(),n(Ue.esc))};function Mt(e,t,n,r){$()?$t(e,r):(pe(n).then((()=>$t(e,r))),kt(de)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),U()&&(null!==X.previousBodyPadding&&(document.body.style.paddingRight="".concat(X.previousBodyPadding,"px"),X.previousBodyPadding=null),(()=>{if(z(document.body,S.iosfix)){const e=parseInt(document.body.style.top,10);Q(document.body,S.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}})(),$e()),Q([document.documentElement,document.body],[S.shown,S["height-auto"],S["no-backdrop"],S["toast-shown"]])}function Ft(e){e=Bt(e);const t=_t.swalPromiseResolve.get(this),n=Wt(this);this.isAwaitingPromise()?e.isDismissed||(Zt(this),t(e)):n&&t(e)}const Wt=e=>{const t=I();if(!t)return!1;const n=Te.innerParams.get(e);if(!n||z(t,n.hideClass.popup))return!1;Q(t,n.showClass.popup),q(t,n.hideClass.popup);const r=T();return Q(r,n.showClass.backdrop),q(r,n.hideClass.backdrop),Gt(e,t,n),!0};const Zt=e=>{e.isAwaitingPromise()&&(Te.awaitingPromise.delete(e),Te.innerParams.get(e)||e._destroy())},Bt=e=>void 0===e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),Gt=(e,t,n)=>{const r=T(),o=we&&ce(t);"function"==typeof n.willClose&&n.willClose(t),o?Ut(e,t,r,n.returnFocus,n.didClose):Mt(e,r,n.returnFocus,n.didClose)},Ut=(e,t,n,r,o)=>{de.swalCloseEventFinishedCallback=Mt.bind(null,e,n,r,o),t.addEventListener(we,(function(e){e.target===t&&(de.swalCloseEventFinishedCallback(),delete de.swalCloseEventFinishedCallback)}))},$t=(e,t)=>{setTimeout((()=>{"function"==typeof t&&t.bind(e.params)(),e._destroy()}))};function Xt(e,t,n){const r=Te.domCache.get(e);t.forEach((e=>{r[e].disabled=n}))}function jt(e,t){if(!e)return!1;if("radio"===e.type){const n=e.parentNode.parentNode.querySelectorAll("input");for(let e=0;e<n.length;e++)n[e].disabled=t}else e.disabled=t}const zt=e=>{const t={};return Object.keys(e).forEach((n=>{g(n)?t[n]=e[n]:r("Invalid parameter to update: ".concat(n))})),t};const Ht=e=>{Yt(e),delete e.params,delete de.keydownHandler,delete de.keydownTarget,delete de.currentInstance},Yt=e=>{e.isAwaitingPromise()?(Kt(Te,e),Te.awaitingPromise.set(e,!0)):(Kt(_t,e),Kt(Te,e))},Kt=(e,t)=>{for(const n in e)e[n].delete(t)};var Jt=Object.freeze({hideLoading:Tt,disableLoading:Tt,getInput:function(e){const t=Te.innerParams.get(e||this),n=Te.domCache.get(e||this);return n?Y(n.popup,t.input):null},close:Ft,isAwaitingPromise:function(){return!!Te.awaitingPromise.get(this)},rejectPromise:function(e){const t=_t.swalPromiseReject.get(this);Zt(this),t&&t(e)},handleAwaitingPromise:Zt,closePopup:Ft,closeModal:Ft,closeToast:Ft,enableButtons:function(){Xt(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function(){Xt(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function(){return jt(this.getInput(),!1)},disableInput:function(){return jt(this.getInput(),!0)},showValidationMessage:function(e){const t=Te.domCache.get(this),n=Te.innerParams.get(this);j(t.validationMessage,e),t.validationMessage.className=S["validation-message"],n.customClass&&n.customClass.validationMessage&&q(t.validationMessage,n.customClass.validationMessage),ne(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid",!0),r.setAttribute("aria-describedby",S["validation-message"]),K(r),q(r,S.inputerror))},resetValidationMessage:function(){const e=Te.domCache.get(this);e.validationMessage&&re(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Q(t,S.inputerror))},getProgressSteps:function(){return Te.domCache.get(this).progressSteps},update:function(e){const t=I(),n=Te.innerParams.get(this);if(!t||z(t,n.hideClass.popup))return r("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const o=zt(e),i=Object.assign({},n,o);Ge(this,i),Te.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})},_destroy:function(){const e=Te.domCache.get(this),t=Te.innerParams.get(this);t?(e.popup&&de.swalCloseEventFinishedCallback&&(de.swalCloseEventFinishedCallback(),delete de.swalCloseEventFinishedCallback),de.deferDisposalTimer&&(clearTimeout(de.deferDisposalTimer),delete de.deferDisposalTimer),"function"==typeof t.didDestroy&&t.didDestroy(),Ht(this)):Yt(this)}});const qt=(e,n)=>{const r=Te.innerParams.get(e);if(!r.input)return o('The "input" parameter is needed to be set when using returnInputValueOn'.concat(t(n)));const i=((e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return gt(n);case"radio":return bt(n);case"file":return yt(n);default:return t.inputAutoTrim?n.value.trim():n.value}})(e,r);r.inputValidator?Qt(e,i,n):e.getInput().checkValidity()?"deny"===n?en(e,i):rn(e,i):(e.enableButtons(),e.showValidationMessage(r.validationMessage))},Qt=(e,t,n)=>{const r=Te.innerParams.get(e);e.disableInput(),Promise.resolve().then((()=>u(r.inputValidator(t,r.validationMessage)))).then((r=>{e.enableButtons(),e.enableInput(),r?e.showValidationMessage(r):"deny"===n?en(e,t):rn(e,t)}))},en=(e,t)=>{const n=Te.innerParams.get(e||void 0);n.showLoaderOnDeny&&ft(P()),n.preDeny?(Te.awaitingPromise.set(e||void 0,!0),Promise.resolve().then((()=>u(n.preDeny(t,n.validationMessage)))).then((n=>{!1===n?(e.hideLoading(),Zt(e)):e.closePopup({isDenied:!0,value:void 0===n?t:n})})).catch((t=>nn(e||void 0,t)))):e.closePopup({isDenied:!0,value:t})},tn=(e,t)=>{e.closePopup({isConfirmed:!0,value:t})},nn=(e,t)=>{e.rejectPromise(t)},rn=(e,t)=>{const n=Te.innerParams.get(e||void 0);n.showLoaderOnConfirm&&ft(),n.preConfirm?(e.resetValidationMessage(),Te.awaitingPromise.set(e||void 0,!0),Promise.resolve().then((()=>u(n.preConfirm(t,n.validationMessage)))).then((n=>{se(D())||!1===n?(e.hideLoading(),Zt(e)):tn(e,void 0===n?t:n)})).catch((t=>nn(e||void 0,t)))):tn(e,t)},on=(e,t,n)=>{t.popup.onclick=()=>{const t=Te.innerParams.get(e);t&&(sn(t)||t.timer||t.input)||n(Ue.close)}},sn=e=>e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton;let an=!1;const cn=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=void 0,t.target===e.container&&(an=!0)}}},un=e=>{e.container.onmousedown=()=>{e.popup.onmouseup=function(t){e.popup.onmouseup=void 0,(t.target===e.popup||e.popup.contains(t.target))&&(an=!0)}}},ln=(e,t,n)=>{t.container.onclick=r=>{const o=Te.innerParams.get(e);an?an=!1:r.target===t.container&&a(o.allowOutsideClick)&&n(Ue.backdrop)}},dn=e=>e instanceof Element||(e=>"object"==typeof e&&e.jquery)(e);const pn=()=>{if(de.timeout)return(()=>{const e=Z(),t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=t/parseInt(window.getComputedStyle(e).width)*100;e.style.removeProperty("transition"),e.style.width="".concat(n,"%")})(),de.timeout.stop()},hn=()=>{if(de.timeout){const e=de.timeout.start();return ue(e),e}};let fn=!1;const mn={};const gn=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in mn){const n=t.getAttribute(e);if(n)return void mn[e].fire({template:n})}};var bn=Object.freeze({isValidParameter:m,isUpdatableParameter:g,isDeprecatedParameter:b,argsToParams:e=>{const t={};return"object"!=typeof e[0]||dn(e[0])?["title","html","icon"].forEach(((n,r)=>{const i=e[r];"string"==typeof i||dn(i)?t[n]=i:void 0!==i&&o("Unexpected type of ".concat(n,'! Expected "string" or "Element", got ').concat(typeof i))})):Object.assign(t,e[0]),t},isVisible:()=>se(I()),clickConfirm:It,clickDeny:()=>P()&&P().click(),clickCancel:()=>M()&&M().click(),getContainer:T,getPopup:I,getTitle:R,getHtmlContainer:N,getImage:O,getIcon:k,getInputLabel:()=>_(S["input-label"]),getCloseButton:B,getActions:F,getConfirmButton:L,getDenyButton:P,getCancelButton:M,getLoader:V,getFooter:W,getTimerProgressBar:Z,getFocusableElements:G,getValidationMessage:D,isLoading:()=>I().hasAttribute("data-loading"),fire:function(){const e=this;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(...n)},mixin:function(e){return class extends(this){_main(t,n){return super._main(t,Object.assign({},e,n))}}},showLoading:ft,enableLoading:ft,getTimerLeft:()=>de.timeout&&de.timeout.getTimerLeft(),stopTimer:pn,resumeTimer:hn,toggleTimer:()=>{const e=de.timeout;return e&&(e.running?pn():hn())},increaseTimer:e=>{if(de.timeout){const t=de.timeout.increase(e);return ue(t,!0),t}},isTimerRunning:()=>de.timeout&&de.timeout.isRunning(),bindClickHandler:function(){mn[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,fn||(document.body.addEventListener("click",gn),fn=!0)}});let yn;class vn{constructor(){if("undefined"==typeof window)return;yn=this;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Object.freeze(this.constructor.argsToParams(t));Object.defineProperties(this,{params:{value:r,writable:!1,enumerable:!0,configurable:!0}});const o=this._main(this.params);Te.promise.set(this,o)}_main(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(e=>{!e.backdrop&&e.allowOutsideClick&&r('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)y(t),e.toast&&v(t),w(t)})(Object.assign({},t,e)),de.currentInstance&&(de.currentInstance._destroy(),U()&&$e()),de.currentInstance=this;const n=xn(e,t);tt(n),Object.freeze(n),de.timeout&&(de.timeout.stop(),delete de.timeout),clearTimeout(de.restoreFocusTimeout);const o=Sn(this);return Ge(this,n),Te.innerParams.set(this,n),wn(this,o,n)}then(e){return Te.promise.get(this).then(e)}finally(e){return Te.promise.get(this).finally(e)}}const wn=(e,t,n)=>new Promise(((r,o)=>{const i=t=>{e.closePopup({isDismissed:!0,dismiss:t})};_t.swalPromiseResolve.set(e,r),_t.swalPromiseReject.set(e,o),t.confirmButton.onclick=()=>(e=>{const t=Te.innerParams.get(e);e.disableButtons(),t.input?qt(e,"confirm"):rn(e,!0)})(e),t.denyButton.onclick=()=>(e=>{const t=Te.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?qt(e,"deny"):en(e,!1)})(e),t.cancelButton.onclick=()=>((e,t)=>{e.disableButtons(),t(Ue.cancel)})(e,i),t.closeButton.onclick=()=>i(Ue.close),((e,t,n)=>{Te.innerParams.get(e).toast?on(e,t,n):(cn(t),un(t),ln(e,t,n))})(e,t,i),((e,t,n,r)=>{kt(t),n.toast||(t.keydownHandler=t=>At(e,t,r),t.keydownTarget=n.keydownListenerCapture?window:I(),t.keydownListenerCapture=n.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)})(e,de,n,i),((e,t)=>{"select"===t.input||"radio"===t.input?vt(e,t):["text","email","number","tel","textarea"].includes(t.input)&&(c(t.inputValue)||l(t.inputValue))&&(ft(L()),wt(e,t))})(e,n),ut(n),En(de,n,i),Tn(t,n),setTimeout((()=>{t.container.scrollTop=0}))})),xn=(e,t)=>{const n=(e=>{const t="string"==typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return qe(n),Object.assign(je(n),ze(n),He(n),Ye(n),Ke(n),Je(n,Xe))})(e),r=Object.assign({},d,t,n,e);return r.showClass=Object.assign({},d.showClass,r.showClass),r.hideClass=Object.assign({},d.hideClass,r.hideClass),r},Sn=e=>{const t={popup:I(),container:T(),actions:F(),confirmButton:L(),denyButton:P(),cancelButton:M(),loader:V(),closeButton:B(),validationMessage:D(),progressSteps:A()};return Te.domCache.set(e,t),t},En=(e,t,n)=>{const r=Z();re(r),t.timer&&(e.timeout=new nt((()=>{n("timer"),delete e.timeout}),t.timer),t.timerProgressBar&&(ne(r),H(r,t,"timerProgressBar"),setTimeout((()=>{e.timeout&&e.timeout.running&&ue(t.timer)}))))},Tn=(e,t)=>{if(!t.toast)return a(t.allowEnterKey)?void(Cn(e,t)||Rt(0,-1,1)):_n()},Cn=(e,t)=>t.focusDeny&&se(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&se(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!se(e.confirmButton)||(e.confirmButton.focus(),0)),_n=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};Object.assign(vn.prototype,Jt),Object.assign(vn,bn),Object.keys(Jt).forEach((e=>{vn[e]=function(){if(yn)return yn[e](...arguments)}})),vn.DismissReason=Ue,vn.version="11.4.10";const In=vn;return In.default=In,In}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px hsla(0deg,0%,0%,.075),0 1px 2px hsla(0deg,0%,0%,.075),1px 2px 4px hsla(0deg,0%,0%,.075),1px 3px 8px hsla(0deg,0%,0%,.075),2px 4px 16px hsla(0deg,0%,0%,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-no-war{display:flex;position:fixed;z-index:1061;top:0;left:0;align-items:center;justify-content:center;width:100%;height:3.375em;background:#20232a;color:#fff;text-align:center}.swal2-no-war a{color:#61dafb;text-decoration:none}.swal2-no-war a:hover{text-decoration:underline}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},5410:()=>{},8628:()=>{},5042:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Doctor:()=>A,Patient:()=>Wo});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{json:()=>te});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{json:()=>ne});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{json:()=>re});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{json:()=>oe});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{json:()=>ie});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{json:()=>se});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{json:()=>ae});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{json:()=>ce});var c={};__webpack_require__.r(c),__webpack_require__.d(c,{json:()=>ue});var u={};__webpack_require__.r(u),__webpack_require__.d(u,{json:()=>le});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{json:()=>de});var d={};__webpack_require__.r(d),__webpack_require__.d(d,{json:()=>pe});var p={};__webpack_require__.r(p),__webpack_require__.d(p,{json:()=>he});var h={};__webpack_require__.r(h),__webpack_require__.d(h,{json:()=>fe});var f={};__webpack_require__.r(f),__webpack_require__.d(f,{json:()=>me});var m={};__webpack_require__.r(m),__webpack_require__.d(m,{json:()=>ge});var g={};__webpack_require__.r(g),__webpack_require__.d(g,{json:()=>be});var b={};__webpack_require__.r(b),__webpack_require__.d(b,{json:()=>ye});var y={};__webpack_require__.r(y),__webpack_require__.d(y,{json:()=>ve});var v=__webpack_require__(8566),w=__webpack_require__.n(v),x=__webpack_require__(6455),S=__webpack_require__.n(x),E=__webpack_require__(9669),T=__webpack_require__.n(E),C=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},_=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},I="https://apps.mk-1.fr/WS_HALFRED_WEB/awws/WS_Halfred.awws";function k(e){return C(this,void 0,void 0,(function(){var t;return _(this,(function(n){switch(n.label){case 0:return t='<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">\n                 <soapenv:Header/>\n                        <soapenv:Body>\n                            <sApiKey>'.concat(e,"</sApiKey>\n                        </soapenv:Body>\n                </soapenv:Envelope>"),[4,T().post(I,t,{headers:{"Content-Type":"text/xml",SOAPAction:"urn:WS_Halfred/CheckAPIKEY"}}).then((function(e){if(console.log(e),200!==e.status)throw new Error("The Web Service is not available - Please contact WeMed if this problem persists.");var t,n=(new DOMParser).parseFromString(e.data,"text/xml");console.log(n);var r=n.getElementsByTagName("CheckAPIKEYResult")[0].textContent;return t=JSON.parse(r),console.log(t),201==t.Code||(S().fire({titleText:"WeMed API key invalid",text:"Please be sure to have a registered key.",icon:"error",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,showConfirmButton:!0}),!1)})).catch((function(e){console.log(e)}))];case 1:return[2,n.sent()]}}))}))}function R(e,t,n,r){return C(this,void 0,void 0,(function(){var o;return _(this,(function(i){switch(i.label){case 0:return o='<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">\n   <soapenv:Header/>\n   <soapenv:Body>\n      <sRec>{\n\n"IdSession": "'.concat(e,'",\n\n"APIKEY": "').concat(t,'",\n\n"IdFoyer": "').concat(n,'",\n\n"SoundRec": "').concat(r,'"\n\n}</sRec>\n   </soapenv:Body>\n</soapenv:Envelope> '),[4,T().post(I,o,{headers:{"Content-Type":"text/xml",SOAPAction:"urn:WS_Halfred/Save_Records"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))];case 1:return[2,i.sent()]}}))}))}function N(e){return fetch("https://wemed-sessions.herokuapp.com/room/"+e).then((function(e){return e.json()})).then((function(e){return e}))}function O(e){e&&console.error(e)}const A=function(){function e(e,t,n,r){this.apiKeyVonage=e,this.token=t,this.sessionId=n,this.apiKeyWemed=r;var o=w().initSession(this.apiKeyVonage,this.sessionId);this.session=o,o.on("streamCreated",(function(e){o.subscribe(e.stream,"subscriber",{insertMode:"append",width:"100%",height:"100%"},O)})),o.on("sessionDisconnected",(function(e){console.log("You were disconnected from the session.",e.reason)}));var i=w().initPublisher("publisher",{insertMode:"append",width:"100%",height:"100%"},O);this.publisher=i,o.connect(this.token,(function(e){e?console.log(e.message):o.publish(i,O)})),o.on("signal:iOS",(function(e){S().fire({title:"Warning",text:"Augmented reality is not supported on the patient's device.",icon:"warning",confirmButtonText:"OK"})}))}return e.init=function(t,n){return r=this,o=void 0,s=function(){return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(r){return[2,k(t).then((function(r){if(!0===r)return N(n).then((function(n){return new e(n.apiKey,n.token,n.sessionId,t)}))}))]}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}c((s=s.apply(r,o||[])).next())}));var r,o,i,s},e.prototype.signalStartSkop=function(){this.session.signal({type:"startSkop",data:"start"},(function(e){e?console.log("Error sending signal:"+e.message):console.log("Signal sent.")}))},e.prototype.signalStopUsingSkop=function(){this.session.signal({type:"stopSkop",data:"stop"},(function(e){e?console.log("Error sending signal:"+e.message):console.log("Signal sent.")}))},e.prototype.signalGain=function(e){this.session.signal({type:"gain",data:e},(function(e){e?console.log("Error sending signal:"+e.message):console.log("Signal sent.")}))},e.prototype.signalUseAugmentedReality=function(e){this.session.signal({type:"useAR",data:e},(function(e){e?console.log("Error sending signal:"+e.message):console.log("Signal sent.")}))},e.prototype.signalCurrentFocus=function(e){this.session.signal({type:"focus",data:e},(function(e){e?console.log("Error sending signal:"+e.message):console.log("Signal sent.")}))},e.prototype.signalMonoyer=function(e){this.session.signal({type:"monoyer",data:e},(function(e){e?console.log("Error sending signal:"+e.message):console.log("Signal sent.")}))},e.prototype.useSkop=function(){if(null===this.currentFocus||void 0===this.currentFocus||""===this.currentFocus)throw new Error("No focus set - You must set a focus before using the Skop");this.signalStartSkop()},e.prototype.stopUsingSkop=function(){this.signalStopUsingSkop()},e.prototype.setAudioSource=function(e){this.publisher.setAudioSource(e)},e.prototype.getCurrentFocus=function(){return this.currentFocus},e.prototype.setCurrentFocus=function(e){this.currentFocus=e,this.signalCurrentFocus(e)},e.prototype.setGain=function(e){if(null==e)throw new TypeError("Gain cannot be null or undefined");if(isNaN(e))throw new TypeError("Gain must be a number");this.signalGain(e)},e.prototype.useAR=function(e){if(null==e)throw new TypeError("Use AR cannot be null or undefined");if("boolean"!=typeof e)throw new TypeError("Argument must be a boolean");this.signalUseAugmentedReality(e)},e.prototype.useMonoyer=function(e){this.signalMonoyer(e?"on":"off"),e&&S().fire({position:"top",html:'<div> <img src="https://i.ibb.co/PFsd4cR/monoyer.png" id="monoyer" style="  top: 5%; left: 40%;"/>  </div>',showConfirmButton:!1,showCloseButton:!0})},e.prototype.disconnect=function(){this.session.disconnect()},e.prototype.mute=function(e){this.publisher.publishAudio(e)},e.prototype.getMediaDevices=function(){return navigator.mediaDevices.enumerateDevices()},e.prototype.setInputDevice=function(e){var t=this;navigator.mediaDevices.getUserMedia({audio:{deviceId:e},video:!0}).then((function(e){t.setAudioSource(e.getAudioTracks()[0])}))},e}();var D,L,P,V,M=__webpack_require__(5772),F=__webpack_require__.n(M),W=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Z=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},B=function(){function e(){this.gain=10,this.audioCtx=new window.AudioContext,this.biquadFilter=this.audioCtx.createBiquadFilter()}return e.prototype.ModifyAudio=function(t,n,r){return W(this,void 0,void 0,(function(){var o,i,s;return Z(this,(function(a){switch(a.label){case 0:if(null==t)throw new Error("No heartZone given - cannot modify audio");return[4,navigator.mediaDevices.getUserMedia({audio:!0,video:!1})];case 1:return o=a.sent(),i=this.audioCtx.createMediaStreamSource(o),s=this.audioCtx.createMediaStreamDestination(),t===e.AORTIC||t===e.MITRAL||t===e.TRICUSPID||t===e.PULMONARY?(this.biquadFilter.type="lowshelf",this.biquadFilter.frequency.setValueAtTime(250,this.audioCtx.currentTime),this.biquadFilter.gain.setValueAtTime(this.gain,this.audioCtx.currentTime),i.connect(this.biquadFilter),this.biquadFilter.connect(s)):(this.biquadFilter.type="lowshelf",this.biquadFilter.frequency.setValueAtTime(800,this.audioCtx.currentTime),this.biquadFilter.gain.setValueAtTime(this.gain,this.audioCtx.currentTime),i.connect(this.biquadFilter),this.biquadFilter.connect(s)),this.recordAudio(s.stream,n,r),n.setAudioSource(s.stream.getAudioTracks()[0]),console.log("SKOP : Audio input modified"),[2]}}))}))},e.prototype.recordAudio=function(e,t,n){var r=this,o=[];this.audioRecorder=new MediaRecorder(e),this.audioRecorder.ondataavailable=function(e){if(o.push(e.data),"inactive"==r.audioRecorder.state){var i=new Blob(o,{type:"audio/wav"}),s=(new Audio(URL.createObjectURL(i)),new FileReader);s.readAsDataURL(i),s.onloadend=function(){return W(this,void 0,void 0,(function(){var e;return Z(this,(function(r){switch(r.label){case 0:return"string"==typeof(e=s.result)&&(e=F().fromBase64(e.split(",")[1])),[4,R(t.getSessionId(),n,t.getIdFocus(),e)];case 1:return r.sent(),[2]}}))}))}}},this.audioRecorder.start()},e.prototype.defaultAudio=function(e){return W(this,void 0,void 0,(function(){var t,n,r;return Z(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),null!=this.audioRecorder&&this.audioRecorder.stop(),[4,navigator.mediaDevices.getUserMedia({audio:!0,video:!1})];case 1:return t=o.sent(),n=t.getAudioTracks()[0],e.setAudioSource(n),console.log("SKOP : Audio input set to default - No modifications"),[3,3];case 2:return r=o.sent(),console.log(r),[3,3];case 3:return[2]}}))}))},e.prototype.setGain=function(e){this.biquadFilter.gain.setValueAtTime(e,this.audioCtx.currentTime),this.gain=e},e.AORTIC="Aortic",e.MITRAL="Mitral",e.PULMONARY="Pulmonary",e.TRICUSPID="Tricuspid",e}();function G(e){return t=this,n=void 0,o=function(){return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(t){if(null==e)throw new Error("MediaStream is not defined - Detection function");return navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)?(S().fire({titleText:"Verification",text:"Make sure that the Skop is plugged in.",icon:"info",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,showConfirmButton:!0}),[2]):(D=new window.AudioContext,(L=D.createAnalyser()).fftSize=2048,P=L.frequencyBinCount,V=new Uint8Array(P),L.getByteTimeDomainData(V),L.getByteFrequencyData(V),D.createMediaStreamSource(e).connect(L),S().fire({titleText:"Gently tap the SKOP's membrane",text:"If sound is detected, this means that the SKOP is active",icon:"info",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,showConfirmButton:!1}),[2,(n=setInterval((function e(){L.getByteTimeDomainData(V);for(var t=0;t<P;t++){var o=V[t]/128*1500/2;if(o>1200)return console.log(o),clearInterval(n),S().fire({title:"The SKOP seems to be ready !",text:"Sound is detected",icon:"success",confirmButtonText:"OK"}),!0}++r>100&&(clearInterval(n),S().fire({titleText:"SKOP is not active",text:"Please try again",icon:"error",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,confirmButtonText:"Try again",showCloseButton:!0}).then((function(t){t.value&&(n=setInterval(e,70),S().fire({titleText:"Gently tap the SKOP's membrane",text:"If sound is detected, this means that the Skop is active",icon:"info",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,showConfirmButton:!1}),r=0)})))}),70),void(r=0))]);var n,r}))},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}c((o=o.apply(t,n||[])).next())}));var t,n,r,o}var U,$,X=__webpack_require__(5958);(0,X.OBj)().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(U||(U={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}($||($={}));const j={};function z(e){return j[e]}function H(e,t,n,r,o){const i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){const e=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?e+1:i.inputIndexEnd;if("tensor"===i.type)return Y(t.inputNames[i.inputIndexStart],n,r,o);if("tensors"===i.type)return t.inputNames.slice(e,s).map((e=>Y(e,n,r,o)));const a=Y(t.inputNames.slice(e)[0],n,r,o),c=a.dataSync();return"number"===i.type?c[0]:X.D5U.toNestedArray(a.shape,c)}const s=t.attrParams[e];return s&&s.value}function Y(e,t,n,r){const[o,i]=q(e);if(null!=r){const e=r.getHashTableHandleByName(o);if(null!=e)return e}const s=n.currentContextIds.find((e=>!!t[J(o,e)]));return void 0!==s?t[J(o,s)][i]:void 0}function K(e,t){const[n,r,o]=q(e);return[J(n,t&&t.currentContextId),r,o]}function J(e,t){return t?`${e}-${t}`:e}function q(e){const t=e.split(":");if(1===t.length)return[e,0,void 0];const n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function Q(e,t,n){let r=H("pad",e,t,n);if("explicit"===r){r=H("explicitPaddings",e,t,n);const o=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)o[e][0]=r[2*e],o[e][1]=r[2*e+1];return o}return r}function ee(e){return e.kept?e:(0,X.d9v)(e)}const te=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],ne=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],re=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],oe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],ie=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],se=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],ae=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],ce=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],ue=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],le=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],de=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],pe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],he=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],fe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],me=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],ge=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],be=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],ye=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],ve=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class we{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const v=[].concat(...[e,t,n,r,o,i,s,a,c,u,l,d,p,h,f,m,g,b,y].map((e=>e.json)));this.opMappers=v.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}transformGraph(e,t={}){const n=e.node,r=[],o=[],i=[],s=n.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?o.push(e[t.name]):null!=t.input&&0!==t.input.length||i.push(e[t.name]),e)),{});let a=[];const c=[];let u={},l={};null!=t&&(u=this.mapSignatureEntries(t.inputs),l=this.mapSignatureEntries(t.outputs));const d=Object.keys(s);d.forEach((e=>{const t=s[e];t.inputNames.forEach(((e,n)=>{const[r,,o]=K(e),i=s[r];if(null!=i.outputs){const e=i.outputs.indexOf(o);if(-1!==e){const o=`${r}:${e}`;t.inputNames[n]=o}}t.inputs.push(i),i.children.push(t)}))})),0===Object.keys(l).length?d.forEach((e=>{const t=s[e];0===t.children.length&&c.push(t)})):Object.keys(l).forEach((e=>{const[t]=K(e),n=s[t];null!=n&&(n.signatureKey=l[e],c.push(n))})),Object.keys(u).length>0?Object.keys(u).forEach((e=>{const[t]=K(e),n=s[t];n&&(n.signatureKey=u[e],a.push(n))})):a=r;let p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const h={nodes:s,inputs:a,outputs:c,weights:o,placeholders:r,signature:t,functions:p};return i.length>0&&(h.initNodes=i),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,n)=>(t[e[n].name]=n,t)),{})}mapNode(e){const t=z(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.slice(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce(((t,n)=>{const r=n.type;let o;switch(n.type){case"string":o=Se(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Se(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":o=Ae(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Ae(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":o=Te(e.attr,n.tfName,n.defaultValue||0),void 0===o&&n.tfDeprecatedName&&(o=Te(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":o=Oe(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Oe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":o=Ee(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Ee(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":o=Le(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Le(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":o=Ne(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Ne(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":o=De(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=De(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":o=Ie(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Ie(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":o=ke(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=ke(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":o=_e(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=_e(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:o,type:r},t}),{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e)),{}));const o=[],i=[];e.signature.inputArg.forEach((e=>{const[t]=K(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:Ce(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,o.push(n),r[t]=n})),Object.keys(r).forEach((e=>{const t=r[e];t.inputNames.forEach(((e,n)=>{const[o,,i]=K(e),s=r[o];if(null!=s.outputs){const e=s.outputs.indexOf(i);if(-1!==e){const r=`${o}:${e}`;t.inputNames[n]=r}}t.inputs.push(s),s.children.push(t)}))}));const s=e.ret;e.signature.outputArg.forEach((e=>{const[t,n]=K(s[e.name]),o=r[t];null!=o&&(o.defaultOutput=n,i.push(o))}));const a=this.mapArgsToSignature(e);return{nodes:r,inputs:o,outputs:i,weights:n,placeholders:[],signature:a}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function xe(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=(0,X.OBj)().global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function Se(e,t,n,r=!1){const o=e[t];return null!=o?xe(o.s,r):n}function Ee(e,t,n){const r=e[t];return r?r.b:n}function Te(e,t,n){const r=e[t]||{},o=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof o?o:parseInt(o,10)}function Ce(e){switch("string"==typeof e&&(e=U[e]),e){case U.DT_FLOAT:case U.DT_HALF:return"float32";case U.DT_INT32:case U.DT_INT64:case U.DT_INT8:case U.DT_UINT8:return"int32";case U.DT_BOOL:return"bool";case U.DT_DOUBLE:return"float32";case U.DT_STRING:return"string";default:return null}}function _e(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function Ie(e,t,n){const r=e[t];return r&&r.type?Ce(r.type):n}function ke(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map((e=>Ce(e))):n}function Re(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"==typeof e.size?e.size:parseInt(e.size,10))):[]}function Ne(e,t,n){const r=e[t];return r&&r.shape?Re(r.shape):n}function Oe(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((e=>"number"==typeof e?e:parseInt(e,10))):n}function Ae(e,t,n,r=!1){const o=e[t];return o&&o.list&&o.list.s?o.list.s.map((e=>xe(e,r))):n}function De(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((e=>Re(e))):n}function Le(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}class Pe{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return Y(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return Y(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Te(this.node.rawAttrs,e,t);if(null!=n.s)return Se(this.node.rawAttrs,e,t);if(null!=n.b)return Ee(this.node.rawAttrs,e,t);if(null!=n.shape)return Ne(this.node.rawAttrs,e,t);if(null!=n.type)return Ie(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Oe(this.node.rawAttrs,e,t);if(null!=n.list.s)return Ae(this.node.rawAttrs,e,t);if(null!=n.list.shape)return De(this.node.rawAttrs,e,t);if(null!=n.list.b)return Le(this.node.rawAttrs,e,t);if(null!=n.list.type)return ke(this.node.rawAttrs,e,t)}return t}}var Ve=__webpack_require__(6407),Me=__webpack_require__(7097),Fe=__webpack_require__(9121),We=__webpack_require__(3740),Ze=__webpack_require__(569),Be=__webpack_require__(2668);const Ge=(0,Be.op)({addN_:function(e){Ze.hu(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),Ze.hu(e.length>=1,(()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`));const t=e.map(((e,t)=>(0,We._1)(e,`tensors${t}`,"addN"))),n=t[0];t.forEach((e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!Ze.cO(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const r=t;return Me.BV.runKernel(Fe.Xz,r)}});var Ue=__webpack_require__(747);const $e=(0,Be.op)({mod_:function(e,t){let n=(0,We._1)(e,"a","mod"),r=(0,We._1)(t,"b","mod");[n,r]=(0,Ue.T_)(n,r);const o={a:n,b:r};return Me.BV.runKernel(Fe.Vb,o)}});var Xe=__webpack_require__(4841),je=__webpack_require__(1274),ze=__webpack_require__(2200);const He=(0,Be.op)({equal_:function(e,t){let n=(0,We._1)(e,"a","equal","string_or_numeric"),r=(0,We._1)(t,"b","equal","string_or_numeric");[n,r]=(0,Ue.T_)(n,r),(0,ze.assertAndGetBroadcastShape)(n.shape,r.shape);const o={a:n,b:r};return Me.BV.runKernel(Fe.hd,o)}});var Ye=__webpack_require__(5912),Ke=__webpack_require__(6577);const Je=(0,Be.op)({divNoNan_:function(e,t){let n=(0,We._1)(e,"a","div"),r=(0,We._1)(t,"b","div");[n,r]=(0,Ue.T_)(n,r);const o=(0,je.h)(n,r),i=(0,Ke.P)(o),s=He(r,i);return(0,Ye.a)(s,i,o)}});var qe=__webpack_require__(9165),Qe=__webpack_require__(827),et=__webpack_require__(4513),tt=__webpack_require__(2271);const nt=(0,Be.op)({maximum_:function(e,t){let n=(0,We._1)(e,"a","maximum"),r=(0,We._1)(t,"b","maximum");[n,r]=(0,Ue.T_)(n,r),"bool"===n.dtype&&(n=(0,tt.p)(n,"int32"),r=(0,tt.p)(r,"int32")),(0,ze.assertAndGetBroadcastShape)(n.shape,r.shape);const o={a:n,b:r};return Me.BV.runKernel(Fe.BM,o)}});var rt=__webpack_require__(3453),ot=__webpack_require__(5265),it=__webpack_require__(6235);const st=(0,Be.op)({acos_:function(e){const t={x:(0,We._1)(e,"x","acos")};return Me.BV.runKernel(Fe.VG,t)}}),at=(0,Be.op)({acosh_:function(e){const t={x:(0,We._1)(e,"x","acosh")};return Me.BV.runKernel(Fe.Sp,t)}}),ct=(0,Be.op)({asin_:function(e){const t={x:(0,We._1)(e,"x","asin")};return Me.BV.runKernel(Fe.M2,t)}}),ut=(0,Be.op)({asinh_:function(e){const t={x:(0,We._1)(e,"x","asinh")};return Me.BV.runKernel(Fe.qw,t)}}),lt=(0,Be.op)({atan_:function(e){const t={x:(0,We._1)(e,"x","atan")};return Me.BV.runKernel(Fe.jM,t)}}),dt=(0,Be.op)({atan2_:function(e,t){let n=(0,We._1)(e,"a","atan2"),r=(0,We._1)(t,"b","atan2");[n,r]=(0,Ue.T_)(n,r);const o={a:n,b:r};return Me.BV.runKernel(Fe.QC,o)}}),pt=(0,Be.op)({atanh_:function(e){const t={x:(0,We._1)(e,"x","atanh")};return Me.BV.runKernel(Fe.Oy,t)}}),ht=(0,Be.op)({ceil_:function(e){const t={x:(0,We._1)(e,"x","ceil","float32")};return Me.BV.runKernel(Fe.gJ,t)}});var ft=__webpack_require__(1661);const mt=(0,Be.op)({cos_:function(e){const t={x:(0,We._1)(e,"x","cos","float32")};return Me.BV.runKernel(Fe.mc,t)}}),gt=(0,Be.op)({cosh_:function(e){const t={x:(0,We._1)(e,"x","cosh","float32")};return Me.BV.runKernel(Fe.TR,t)}});var bt=__webpack_require__(3233);const yt=(0,Be.op)({erf_:function(e){let t=(0,We._1)(e,"x","erf");Ze.hu("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=(0,tt.p)(t,"float32"));const n={x:t};return Me.BV.runKernel(Fe.Om,n)}});var vt=__webpack_require__(4842);const wt=(0,Be.op)({expm1_:function(e){const t={x:(0,We._1)(e,"x","expm1")};return Me.BV.runKernel(Fe.Y0,t)}}),xt=(0,Be.op)({floor_:function(e){const t={x:(0,We._1)(e,"x","floor","float32")};return Me.BV.runKernel(Fe.OR,t)}});var St=__webpack_require__(2597),Et=__webpack_require__(7474),Tt=__webpack_require__(4386),Ct=__webpack_require__(7370);const _t=(0,Be.op)({reciprocal_:function(e){const t={x:(0,We._1)(e,"x","reciprocal")};return Me.BV.runKernel(Fe.$H,t)}});var It=__webpack_require__(766),kt=__webpack_require__(7409),Rt=__webpack_require__(7809);const Nt=(0,Be.op)({selu_:function(e){const t={x:(0,We._1)(e,"x","selu")};return Me.BV.runKernel(Fe.oF,t)}});var Ot=__webpack_require__(625);const At=(0,Be.op)({sin_:function(e){const t={x:(0,We._1)(e,"x","sin","float32")};return Me.BV.runKernel(Fe.RQ,t)}}),Dt=(0,Be.op)({sign_:function(e){const t={x:(0,We._1)(e,"x","sign")};return Me.BV.runKernel(Fe.i5,t)}}),Lt=(0,Be.op)({sinh_:function(e){const t={x:(0,We._1)(e,"x","sinh")};return Me.BV.runKernel(Fe.w3,t)}}),Pt=(0,Be.op)({softplus_:function(e){const t={x:(0,We._1)(e,"x","softplus")};return Me.BV.runKernel(Fe.MR,t)}});var Vt=__webpack_require__(3261),Mt=__webpack_require__(248);const Ft=(0,Be.op)({tanh_:function(e){const t={x:(0,We._1)(e,"x","tanh","float32")};return Me.BV.runKernel(Fe.MI,t)}}),Wt=(0,Be.op)({tan_:function(e){const t={x:(0,We._1)(e,"x","tan","float32")};return Me.BV.runKernel(Fe.sE,t)}}),Zt=(0,Be.op)({clipByValue_:function(e,t,n){const r=(0,We._1)(e,"x","clipByValue");Ze.hu(t<=n,(()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`));const o={x:r},i={clipValueMin:t,clipValueMax:n};return Me.BV.runKernel(Fe.xn,o,i)}});var Bt=__webpack_require__(3582);const Gt=(0,Be.op)({rsqrt_:function(e){const t={x:(0,We._1)(e,"x","rsqrt","float32")};return Me.BV.runKernel(Fe.bV,t)}}),Ut=(0,Be.op)({prod_:function(e,t=null,n=!1){let r=(0,We._1)(e,"x","prod");"bool"===r.dtype&&(r=(0,tt.p)(r,"int32"));const o={x:r},i={axis:t,keepDims:n};return Me.BV.runKernel(Fe.Dl,o,i)}});var $t=__webpack_require__(9133),Xt=__webpack_require__(8151);const jt=(0,Be.op)({isNaN_:function(e){const t={x:(0,We._1)(e,"x","isNaN")};return Me.BV.runKernel(Fe.r7,t)}});function zt(e,t,n=""){if("number"!=typeof e&&"number"!=typeof t){X.D5U.assert(e.length===t.length,(()=>n+` Shapes ${e} and ${t} must match`));for(let r=0;r<e.length;r++){const o=e[r],i=t[r];X.D5U.assert(o<0||i<0||o===i,(()=>n+` Shapes ${e} and ${t} must match`))}}}function Ht(e){return"number"!=typeof e&&!e.some((e=>e<0))}function Yt(e,t,n){let r=Kt(e,n);const o=!Ht(r);if(o&&0===t.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&t.forEach((e=>{r=Kt(e.shape,r)})),!Ht(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Kt(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const o=e[r],i=t[r];if(o>=0&&i>=0&&o!==i)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=o>=0?o:i}return n}class Jt{constructor(e,t,n,r,o,i,s){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=o,this.dynamicSize=i,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=(0,X.iD$)(0),(0,X.CnY)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),zt(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,(0,X.CnY)(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach(((e,n)=>this.write(e,t[n])))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return(0,X.XeE)([],[0].concat(this.elementShape));const n=this.readMany(e);return zt(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),(0,X.knu)(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return(0,X.XeE)([],[0].concat(this.elementShape));const t=[];for(let e=0;e<this.size();e++)t.push(e);const n=this.readMany(t);return zt(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),(0,X.zoF)(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,(0,X.HHK)(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0;const r=e.map((e=>(n+=e,n)));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const o=0===n?0:t.size/n,i=[];(0,X.lub)((()=>{t=(0,X.XLQ)(t,[1,n,o]);for(let n=0;n<e.length;++n){const s=[0,0===n?0:r[n-1],0],a=[1,e[n],o];i[n]=(0,X.XLQ)((0,X.tPi)(t,s,a),this.elementShape)}return i}));const s=[];for(let t=0;t<e.length;t++)s[t]=t;this.writeMany(s,i)}}class qt{constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);zt(t,e.shape,"TensorList shape mismatch: "),(0,X.CnY)(e)})),this.idTensor=(0,X.iD$)(0),this.maxNumElements=r,(0,X.CnY)(this.idTensor)}get id(){return this.idTensor.id}copy(){return new qt([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);zt(e,this.elementShape,"TensorList shape mismatch: ");const r=Yt(this.elementShape,this.tensors,e);return(0,X.lub)((()=>{const e=this.tensors.map((e=>(0,X.XLQ)(e,r)));return(0,X.knu)(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=Yt(this.elementShape,this.tensors,e),r=this.tensors.pop();return zt(r.shape,e,"TensorList shape mismatch: "),(0,X.XLQ)(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(zt(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,X.CnY)(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new qt([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);zt(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=Yt(this.elementShape,this.tensors,t);return(0,X.XLQ)(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);zt(this.elementShape,t.shape,"TensorList shape mismatch: "),(0,X.CnY)(t),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);zt(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=Yt(this.elementShape,this.tensors,n);return 0===e.length?(0,X.XeE)([],[0].concat(r)):(0,X.lub)((()=>{const t=e.map((e=>(0,X.XLQ)(this.tensors[e],r)));return(0,X.knu)(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);zt(this.elementShape,t,"TensorList shape mismatch: ");const n=Yt(this.elementShape,this.tensors,t);return 0===this.size()?(0,X.XeE)([],[0].concat(n)):(0,X.lub)((()=>{const e=this.tensors.map((e=>(0,X.XLQ)(e,n)));return(0,X.zoF)(e,0)}))}}var Qt=__webpack_require__(2582),en=__webpack_require__(4968);const tn=(0,Be.op)({conv2d_:function(e,t,n,r,o="NHWC",i=[1,1],s){const a=(0,We._1)(e,"x","conv2d","float32"),c=(0,We._1)(t,"filter","conv2d","float32");let u=a,l=!1;3===a.rank&&(l=!0,u=(0,en.X)(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Ze.hu(4===u.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`)),Ze.hu(4===c.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${c.rank}.`)),Qt.m("conv2d",r,s);const d="NHWC"===o?u.shape[3]:u.shape[1];Ze.hu(d===c.shape[2],(()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${c.shape[2]}.`)),Ze.hu(Qt.jT(n,i),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`));const p={x:u,filter:c},h={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},f=Me.BV.runKernel(Fe.mh,p,h);return l?(0,en.X)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),nn=(0,Be.op)({conv1d_:function(e,t,n,r,o="NWC",i=1,s){const a=(0,We._1)(e,"x","conv1d"),c=(0,We._1)(t,"filter","conv1d");let u=a,l=!1;2===a.rank&&(l=!0,u=(0,en.X)(a,[1,a.shape[0],a.shape[1]])),Ze.hu(3===u.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`)),Ze.hu(3===c.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${c.rank}.`)),Qt.m("conv1d",r,s),Ze.hu(u.shape[2]===c.shape[1],(()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${c.shape[1]}.`)),Ze.hu(Qt.jT(n,i),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`)),Ze.hu("NWC"===o,(()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`));const d=(0,en.X)(c,[1,c.shape[0],c.shape[1],c.shape[2]]),p=(0,en.X)(u,[u.shape[0],1,u.shape[1],u.shape[2]]),h=tn(p,d,[1,n],r,"NHWC",[1,i],s);return l?(0,en.X)(h,[h.shape[2],h.shape[3]]):(0,en.X)(h,[h.shape[0],h.shape[2],h.shape[3]])}});var rn=__webpack_require__(633);const on=(0,Be.op)({conv2DBackpropFilter_:function(e,t,n,r,o,i="NHWC",s){let a=e;3===e.rank&&(a=(0,en.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c=t;3===c.rank&&(c=(0,en.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Ze.hu(4===a.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`)),Ze.hu(4===c.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${c.shape}.`)),Ze.hu(4===n.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`));const u="NHWC"===i?a.shape[3]:a.shape[1],l="NHWC"===i?c.shape[3]:c.shape[1];Ze.hu(u===n[2],(()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`)),Ze.hu(l===n[3],(()=>`Error in conv2dDerFilter: depth of dy (${l}) must match output depth for filter (${n[3]}).`)),Qt.m("conv2dDerFilter",o,s);const d={x:a,dy:c},p={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,filterShape:n};return Me.BV.runKernel(Fe.wU,d,p)}}),sn=(0,Be.op)({conv2DBackpropInput_:function(e,t,n,r,o,i="NHWC",s){Ze.hu(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let a=e,c=t,u=!1;3===t.rank&&(u=!0,c=(0,en.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),a=[1,e[0],e[1],e[2]]),Ze.hu(4===a.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`)),Ze.hu(4===c.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${c.rank}`)),Ze.hu(4===n.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`));const l="NHWC"===i?a[3]:a[1],d="NHWC"===i?c.shape[3]:c.shape[1];Ze.hu(l===n.shape[2],(()=>`Error in conv2dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[2]}.`)),Ze.hu(d===n.shape[3],(()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`)),Qt.m("conv2dDerInput",o,s);const p={dy:c,filter:n},h={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,inputShape:a},f=Me.BV.runKernel(Fe.wm,p,h);return u?(0,en.X)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var an=__webpack_require__(9612);const cn=(0,Be.op)({fusedConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:l}){if(c=c||"linear",!1===(0,an.uy)(Me.BV.state.gradientDepth,c)){Ze.hu("NHWC"===o,(()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`));let d=tn(e,t,n,r,o,i,s);return null!=a&&(d=(0,Ve.I)(d,a)),(0,an.QH)(d,c,u,l)}const d=(0,We._1)(e,"x","conv2d","float32"),p=(0,We._1)(t,"filter","conv2d","float32");let h=d,f=!1;3===d.rank&&(f=!0,h=(0,en.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),Ze.hu(4===h.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`)),Ze.hu(4===p.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`)),Qt.m("fused conv2d",r,s);const m="NHWC"===o?h.shape[3]:h.shape[1];Ze.hu(p.shape[2]===m,(()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${p.shape[2]}.`)),Ze.hu(Qt.jT(n,i),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`));const g=Qt.Ix(h.shape,p.shape,n,i,r,s);let b,y;if(null!=a&&(b=(0,We._1)(a,"bias","fused conv2d"),[b]=(0,Ue.T_)(b,d),"NHWC"===o?ze.assertAndGetBroadcastShape(g.outShape,b.shape):(Ze.hu(b.shape.length<=1,(()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`)),Ze.hu(0===b.shape.length||b.shape[0]===g.outChannels||1===b.shape[0],(()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${g.outChannels})`)))),null!=u){const e=u.shape;if(Ze.hu(e.length<=1||3===e.length,(()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`)),1===e.length)Ze.hu(1===e[0]||e[0]===g.outChannels,(()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${g.outChannels}).`));else if(3===e.length)try{ze.assertAndGetBroadcastShape(e,g.outShape)}catch(t){const n=`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(n)}y=(0,We._1)(u,"prelu weights","fused conv2d")}const v=(e,t)=>{Ze.hu("NHWC"===o,(()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`));const[s,a,u,l]=t,d=(0,an.Fr)(e,u,c);Ze.hu(Qt.I0(i),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`));const p=[sn(a.shape,d,s,n,r),on(a,d,s.shape,n,r)];if(null!=l){const e=(0,an.pf)(l,d);p.push(e)}return p},w={x:h,filter:p,bias:b,preluActivationWeights:y},x={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:c,leakyreluAlpha:l};if(null==a){const e=(0,rn.cb)(((e,t,n)=>{let r=Me.BV.runKernel(Fe._V,w,x);return n([t,e,r]),f&&(r=(0,en.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:v}}));return e(h,p)}{const e=(0,rn.cb)(((e,t,n,r)=>{let o=Me.BV.runKernel(Fe._V,w,x);return r([t,e,o,n]),f&&(o=(0,en.X)(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:v}}));return e(h,p,b)}}}),un=(0,Be.op)({depthwiseConv2d_:function(e,t,n,r,o="NHWC",i=[1,1],s){const a=(0,We._1)(e,"x","depthwiseConv2d","float32"),c=(0,We._1)(t,"filter","depthwiseConv2d","float32");let u=a,l=!1;3===a.rank&&(l=!0,u=(0,en.X)(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Ze.hu(4===u.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`)),Ze.hu(4===c.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${c.rank}.`)),Ze.hu(u.shape[3]===c.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`)),Qt.m("depthwiseConv2d",r,s);const d={x:u,filter:c},p={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},h=Me.BV.runKernel(Fe.ci,d,p);return l?(0,en.X)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),ln=(0,Be.op)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,o,i=[1,1],s){let a=e;3===e.rank&&(a=(0,en.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c=t;3===c.rank&&(c=(0,en.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:a,dy:c},l={strides:r,pad:o,dimRoundingMode:s,dilations:i,filterShape:n};return Me.BV.runKernel(Fe.sL,u,l)}}),dn=(0,Be.op)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,o,i=[1,1],s){let a=t,c=!1;3===t.rank&&(c=!0,a=(0,en.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:a,filter:n},l={strides:r,pad:o,dimRoundingMode:s,dilations:i,inputShape:e},d=Me.BV.runKernel(Fe.y7,u,l);return c?(0,en.X)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),pn=(0,Be.op)({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:l}){if(!1===(0,an.uy)(Me.BV.state.gradientDepth,c)){let d=un(e,t,n,r,o,i,s);return null!=a&&(d=(0,Ve.I)(d,a)),(0,an.QH)(d,c,u,l)}const d=(0,We._1)(e,"x","depthwiseConv2d","float32"),p=(0,We._1)(t,"filter","depthwiseConv2d","float32");let h=d,f=!1;3===d.rank&&(f=!0,h=(0,en.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),Ze.hu(4===h.rank,(()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`)),Ze.hu(4===p.rank,(()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`)),Ze.hu(h.shape[3]===p.shape[2],(()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`)),null==i&&(i=[1,1]),Ze.hu(Qt.jT(n,i),(()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`)),Qt.m("fused depthwiseConv2d",r,s);const m=Qt.Ix(h.shape,p.shape,n,i,r,s,!0);let g,b;null!=a&&(g=(0,We._1)(a,"bias","fused conv2d"),[g]=(0,Ue.T_)(g,d),ze.assertAndGetBroadcastShape(m.outShape,g.shape)),null!=u&&(b=(0,We._1)(u,"prelu weights","fused depthwiseConv2d"));const y=(e,t)=>{Ze.hu(Qt.I0(i),(()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`));const[o,a,u,l]=t,d=(0,an.Fr)(e,u,c),p=dn(a.shape,d,o,n,r,i,s),h=ln(a,d,o.shape,n,r,i,s);return null!=l?[p,h,(0,an.pf)(g,d)]:[p,h]},v={x:h,filter:p,bias:g,preluActivationWeights:b},w={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:c,leakyreluAlpha:l};if(null==a){const e=(0,rn.cb)(((e,t,n)=>{let r=Me.BV.runKernel(Fe.lu,v,w);return n([t,e,r]),f&&(r=(0,en.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:y}}));return e(h,p)}{const e=(0,rn.cb)(((e,t,n,r)=>{let o=Me.BV.runKernel(Fe.lu,v,w);return r([t,e,o,n]),f&&(o=(0,en.X)(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:y}}));return e(h,p,g)}}});var hn=__webpack_require__(8687);const fn=(0,Be.op)({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:a}){if(!1===(0,an.uy)(Me.BV.state.gradientDepth,i)){let c=(0,hn.O)(e,t,n,r);return null!=o&&(c=(0,Ve.I)(c,o)),(0,an.QH)(c,i,s,a)}let c=(0,We._1)(e,"a","fused matMul"),u=(0,We._1)(t,"b","fused matMul");[c,u]=(0,Ue.T_)(c,u);const l=n?c.shape[c.rank-2]:c.shape[c.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],p=n?c.shape[c.rank-1]:c.shape[c.rank-2],h=r?u.shape[u.rank-2]:u.shape[u.rank-1],f=c.shape.slice(0,-2),m=u.shape.slice(0,-2),g=Ze.NA(f),b=Ze.NA(m);Ze.hu(l===d,(()=>`Error in fused matMul: inner shapes (${l}) and (${d}) of Tensors with shapes ${c.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`));const y=ze.assertAndGetBroadcastShape(c.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,h]),v=n?(0,en.X)(c,[g,l,p]):(0,en.X)(c,[g,p,l]),w=r?(0,en.X)(u,[b,h,d]):(0,en.X)(u,[b,d,h]);let x,S;null!=o&&(x=(0,We._1)(o,"bias","fused matMul"),[x]=(0,Ue.T_)(x,c),ze.assertAndGetBroadcastShape(y,x.shape)),null!=s&&(S=(0,We._1)(s,"prelu weights","fused matMul"));const E=(e,t)=>{const[s,a,c,u]=t,l=(0,an.Fr)((0,en.X)(e,c.shape),c,i);let d,p;return n||r?!n&&r?(d=(0,hn.O)(l,a,!1,!1),p=(0,hn.O)(l,s,!0,!1)):n&&!r?(d=(0,hn.O)(a,l,!1,!0),p=(0,hn.O)(s,l,!1,!1)):(d=(0,hn.O)(a,l,!0,!0),p=(0,hn.O)(l,s,!0,!0)):(d=(0,hn.O)(l,a,!1,!0),p=(0,hn.O)(s,l,!0,!1)),null!=o?[d,p,(0,an.pf)(u,l)]:[d,p]},T={a:v,b:w,bias:x,preluActivationWeights:S},C={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};if(null==o){const e=(0,rn.cb)(((e,t,n)=>{const r=Me.BV.runKernel(Fe.us,T,C);return n([e,t,r]),{value:(0,en.X)(r,y),gradFunc:E}}));return e(v,w)}{const e=(0,rn.cb)(((e,t,n,r)=>{const o=Me.BV.runKernel(Fe.us,T,C);return r([e,t,o,n]),{value:(0,en.X)(o,y),gradFunc:E}}));return e(v,w,x)}}}),mn=(0,Be.op)({conv2dTranspose_:function(e,t,n,r,o,i){const s=(0,We._1)(e,"x","conv2dTranspose"),a=(0,We._1)(t,"filter","conv2dTranspose");return sn(n,s,a,r,o,"NHWC",i)}}),gn=(0,Be.op)({conv3d_:function(e,t,n,r,o="NDHWC",i=[1,1,1]){const s=(0,We._1)(e,"x","conv3d"),a=(0,We._1)(t,"filter","conv3d");let c=s,u=!1;4===s.rank&&(u=!0,c=(0,en.X)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Ze.hu(5===c.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${c.rank}.`)),Ze.hu(5===a.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`)),Ze.hu(c.shape[4]===a.shape[3],(()=>`Error in conv3d: depth of input (${c.shape[4]}) must match input depth for filter ${a.shape[3]}.`)),Ze.hu((0,Qt.jT)(n,i),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`)),Ze.hu("NDHWC"===o,(()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`));const l={x:c,filter:a},d={strides:n,pad:r,dataFormat:o,dilations:i},p=Me.BV.runKernel(Fe.x1,l,d);return u?(0,en.X)(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),bn=(0,Be.op)({avgPool_:function(e,t,n,r,o){const i=(0,We._1)(e,"x","avgPool","float32");Ze.hu(Qt.jT(n,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`));let s=i,a=!1;3===i.rank&&(a=!0,s=(0,en.X)(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Ze.hu(4===s.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`)),Qt.m("avgPool",r,o);const c={x:s},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o};let l=Me.BV.runKernel(Fe.Jh,c,u);return l=(0,tt.p)(l,i.dtype),a?(0,en.X)(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),yn=(0,Be.op)({maxPool_:function(e,t,n,r,o){const i=(0,We._1)(e,"x","maxPool");let s=i,a=!1;3===i.rank&&(a=!0,s=(0,en.X)(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Ze.hu(4===s.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`)),Ze.hu(Qt.jT(n,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`)),Qt.m("maxPool",r,o);const c={x:s},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o},l=Me.BV.runKernel(Fe.mT,c,u);return a?(0,en.X)(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),vn=(0,Be.op)({maxPoolWithArgmax_:function(e,t,n,r,o=!1){const i={x:(0,We._1)(e,"x","maxPoolWithArgmax")},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:o},a=Me.BV.runKernel(Fe.vF,i,s);return{result:a[0],indexes:a[1]}}}),wn=(0,Be.op)({avgPool3d_:function(e,t,n,r,o,i="NDHWC"){const s=(0,We._1)(e,"x","avgPool3d","float32");let a=s,c=!1;4===s.rank&&(c=!0,a=(0,en.X)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Ze.hu(5===a.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`)),Ze.hu("NDHWC"===i,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`)),(0,Qt.m)("avgPool3d",r,o);const u={x:a},l={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:i};let d=Me.BV.runKernel(Fe._k,u,l);return d=(0,tt.p)(d,a.dtype),c?(0,en.X)(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),xn=(0,Be.op)({maxPool3d_:function(e,t=[1,1,1],n,r,o,i="NDHWC"){const s=(0,We._1)(e,"x","maxPool3d");let a=s,c=!1;4===s.rank&&(c=!0,a=(0,en.X)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Ze.hu(5===a.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`)),Ze.hu("NDHWC"===i,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`)),(0,Qt.m)("maxPool3d",r,o);const u={x:a},l={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},d=Me.BV.runKernel(Fe.OA,u,l);return c?(0,en.X)(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),Sn=(0,Be.op)({dilation2d_:function(e,t,n,r,o=[1,1],i="NHWC"){const s=(0,We._1)(e,"x","dilation2d"),a=(0,We._1)(t,"filter","dilation2d");Ze.hu(3===s.rank||4===s.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`)),Ze.hu(3===a.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`)),Ze.hu("NHWC"===i,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`));let c=s,u=!1;3===s.rank&&(c=(0,en.X)(s,[1,s.shape[0],s.shape[1],s.shape[2]]),u=!0);const l={x:c,filter:a},d={strides:n,pad:r,dilations:o},p=Me.BV.runKernel(Fe.p4,l,d);return u?(0,en.X)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});function En(e,t,n){const[r,o]=H("fusedOps",e,t,n),i="biasadd"===r,s=!i,a="prelu"===o,c="fusedbatchnorm"===r,u=H("numArgs",e,t,n);if(i){if(a&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const l=H("strides",e,t,n),d=Q(e,t,n),p=H("dataFormat",e,t,n).toUpperCase(),h=H("dilations",e,t,n);let[f,m]=H("args",e,t,n);return s&&(m=f,f=void 0),{stride:l,pad:d,dataFormat:p,dilations:h,biasArg:f,preluArg:m,activationFunc:o,leakyreluAlpha:H("leakyreluAlpha",e,t,n)}}var Tn=__webpack_require__(4006);function Cn(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return Me.BV.runKernel(Fe.e7,{},r)}const _n=(0,Be.op)({multinomial_:function(e,t,n,r=!1){const o=(0,We._1)(e,"logits","multinomial"),i=o.size,s=o.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);n=n||Math.random();const a={logits:1===s?(0,en.X)(o,[1,-1]):o},c={numSamples:t,seed:n,normalized:r},u=Me.BV.runKernel(Fe.NZ,a,c);return 1===s?(0,en.X)(u,[u.size]):u}}),In=(0,Be.op)({oneHot_:function(e,t,n=1,r=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const o={indices:(0,We._1)(e,"indices","oneHot","int32")},i={depth:t,onValue:n,offValue:r};return Me.BV.runKernel(Fe.we,o,i)}});var kn=__webpack_require__(4917);const Rn=(0,Be.op)({onesLike_:function(e){const t={x:(0,We._1)(e,"x","onesLike")};return Me.BV.runKernel(Fe.qW,t)}});var Nn=__webpack_require__(2657),On=__webpack_require__(6377);class An{constructor(e,t,n,r,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const i=o||Math.random();this.random=On.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,o,i;do{r=2*this.random()-1,o=2*this.random()-1,i=r*r+o*o}while(i>=1||0===i);const s=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*r*s,t=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Dn{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=On.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const Ln=(0,Be.op)({randomUniform_:function(e,t=0,n=1,r="float32",o){const i=(0,Nn.f)(e,r),s=new Dn(t,n,null,o);for(let e=0;e<i.values.length;e++)i.values[e]=s.nextValue();return i.toTensor()}});var Pn=__webpack_require__(7245);const Vn=(0,Be.op)({truncatedNormal_:function(e,t=0,n=1,r,o){if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const i=new An(t,n,r,!0,o),s=(0,Nn.f)(e,r);for(let e=0;e<s.values.length;e++)s.values[e]=i.nextValue();return s.toTensor()}});var Mn=__webpack_require__(9640),Fn=__webpack_require__(140),Wn=__webpack_require__(8333);const Zn=async function(e){const t=(0,We._1)(e,"condition","whereAsync","bool"),n=await t.data(),r=(0,Wn.Z)(t.shape,n);return e!==t&&t.dispose(),r};var Bn=__webpack_require__(4077);function Gn(e,t,n){return{boxes:H("boxes",e,t,n),scores:H("scores",e,t,n),maxOutputSize:H("maxOutputSize",e,t,n),iouThreshold:H("iouThreshold",e,t,n),scoreThreshold:H("scoreThreshold",e,t,n),softNmsSigma:H("softNmsSigma",e,t,n)}}const Un=2147483648,$n=(0,Be.op)({searchSorted_:function(e,t,n="left"){const r=(0,We._1)(e,"sortedSequence","searchSorted"),o=(0,We._1)(t,"values","searchSorted"),i=r.shape[r.shape.length-1],s=o.shape[o.shape.length-1],a=(0,en.X)(r,[-1,i]),c=(0,en.X)(o,[-1,s]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==c.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if((0,Ze.NA)(c.shape)>=Un)throw new Error("values tensor size must less than 2147483648");if(a.shape[1]>=Un)throw new Error(`trailing dim_size must less than 2147483648 for int32 output type, was ${a.shape[1]}`);const u={sortedSequence:a,values:c},l={side:n};return Me.BV.runKernel(Fe.nr,u,l)}});const Xn=(0,Be.op)({topk_:function(e,t=1,n=!0){const r=(0,We._1)(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const o=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);const i={x:r},s={k:t,sorted:n},[a,c]=Me.BV.runKernel(Fe.cW,i,s);return{values:a,indices:c}}});function jn(e,t){return $n(e,t,"right")}const zn=(0,Be.op)({unique_:function(e,t=0){const n=(0,We._1)(e,"x","unique","string_or_numeric");(0,Ze.hu)(n.rank>0,(()=>"The input tensor must be at least 1D"));const r={x:n},o={axis:t},[i,s]=Me.BV.runKernel(Fe.kp,r,o);return{values:i,indices:s}}});var Hn=__webpack_require__(6092),Yn=__webpack_require__(9494);class Kn{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=(0,X.iD$)(0),this.tensorMap=new Map,(0,X.CnY)(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Yn.i(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),(0,X.lub)((()=>{const e=(0,X.HHK)(t),r=n.length,o=e.length;X.D5U.assert(r===o,(()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${o} elements.`));for(let t=0;t<r;t++){const r=n[t],o=e[t];(0,X.CnY)(o),this.tensorMap.set(r,o)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return(0,X.lub)((()=>{const e=[];for(let r=0;r<n.length;r++){const o=n[r],i=this.findWithDefault(o,t);e.push(i)}return(0,X.knu)(e)}))}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}var Jn=__webpack_require__(6500),qn=__webpack_require__(636),Qn=__webpack_require__(7630);const er=(0,Be.op)({less_:function(e,t){let n=(0,We._1)(e,"a","less","string_or_numeric"),r=(0,We._1)(t,"b","less","string_or_numeric");[n,r]=(0,Ue.T_)(n,r),(0,ze.assertAndGetBroadcastShape)(n.shape,r.shape);const o={a:n,b:r};return Me.BV.runKernel(Fe.vt,o)}});var tr=__webpack_require__(624),nr=__webpack_require__(2856);const rr=(0,Be.op)({logicalNot_:function(e){const t={x:(0,We._1)(e,"x","logicalNot","bool")};return Me.BV.runKernel(Fe.Vf,t)}}),or=(0,Be.op)({logicalOr_:function(e,t){const n=(0,We._1)(e,"a","logicalOr","bool"),r=(0,We._1)(t,"b","logicalOr","bool");(0,ze.assertAndGetBroadcastShape)(n.shape,r.shape);const o={a:n,b:r};return Me.BV.runKernel(Fe.MZ,o)}}),ir=(0,Be.op)({einsum_:function(e,...t){const n=t.map(((e,t)=>(0,We._1)(e,`tensors${t}`,"einsum"))),r={equation:e};return Me.BV.runKernel(Fe.$g,n,r)}});var sr=__webpack_require__(9065),ar=__webpack_require__(3561);const cr=(0,Be.op)({euclideanNorm_:function(e,t=null,n=!1){return(0,ar.K)(e,"euclidean",t,n)}}),ur=(0,Be.op)({batchNorm_:function(e,t,n,r,o,i){null==i&&(i=.001);const s=(0,We._1)(e,"x","batchNorm"),a=(0,We._1)(t,"mean","batchNorm"),c=(0,We._1)(n,"variance","batchNorm");let u,l;null!=o&&(u=(0,We._1)(o,"scale","batchNorm")),null!=r&&(l=(0,We._1)(r,"offset","batchNorm")),Ze.hu(a.rank===c.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Ze.hu(null==l||a.rank===l.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Ze.hu(null==u||a.rank===u.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const d=function(e){let t;return t=0===e.rank||1===e.rank?(0,en.X)(e,[1,1,1,e.size]):2===e.rank?(0,en.X)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?(0,en.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(s),p={x:d,scale:u,offset:l,mean:a,variance:c},h={varianceEpsilon:i},f=Me.BV.runKernel(Fe.sH,p,h);return(0,en.X)(f,s.shape)}}),lr=(0,Be.op)({localResponseNormalization_:function(e,t=5,n=1,r=1,o=.5){const i=(0,We._1)(e,"x","localResponseNormalization");Ze.hu(4===i.rank||3===i.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${i.rank}.`)),Ze.hu(Ze.GN(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let s=i,a=!1;3===i.rank&&(a=!0,s=(0,en.X)(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const c={x:s},u={depthRadius:t,bias:n,alpha:r,beta:o},l=Me.BV.runKernel(Fe.eZ,c,u);return a?(0,en.X)(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),dr=(0,Be.op)({softmax_:function(e,t=-1){const n=(0,We._1)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},o={dim:t};return Me.BV.runKernel(Fe.Gc,r,o)}});var pr=__webpack_require__(3307),hr=__webpack_require__(5475);const fr=(0,Be.op)({logSoftmax_:function(e,t=-1){const n=(0,We._1)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);const r=(0,rn.cb)(((e,n)=>{const r=(0,pr.F)(e,t,!0),o=(0,Qe.l)(e,r),i=(0,Qe.l)((0,tt.p)(o,"float32"),(0,St.c)((0,hr.S)((0,vt.Q)(o),t,!0)));return n([i]),{value:i,gradFunc:(e,n)=>{const[r]=n,o=(0,vt.Q)(r);return(0,Qe.l)(e,(0,Xe.d)((0,hr.S)(e,t,!0),o))}}}));return r(n)}}),mr=(0,Be.op)({sparseToDense_:function(e,t,n,r=0){const o=(0,We._1)(e,"sparseIndices","sparseToDense","int32"),i=(0,We._1)(t,"sparseValues","sparseToDense","string_or_numeric"),s=(0,We._1)(r,"defaultValue","sparseToDense",i.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const o=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const s=t.size;if(0!==t.rank&&(1!==t.rank||s!==o))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${o}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,i,n,s);const a={sparseIndices:o,sparseValues:i,defaultValue:s},c={outputShape:n};return Me.BV.runKernel(Fe.D2,a,c)}});var gr=__webpack_require__(5130),br=__webpack_require__(5735);const yr=(0,Be.op)({all_:function(e,t=null,n=!1){const r={x:(0,We._1)(e,"x","all","bool")},o={axis:t,keepDims:n};return Me.BV.runKernel(Fe.oT,r,o)}}),vr=(0,Be.op)({any_:function(e,t=null,n=!1){const r={x:(0,We._1)(e,"x","any","bool")},o={axis:t,keepDims:n};return Me.BV.runKernel(Fe.IK,r,o)}}),wr=(0,Be.op)({argMax_:function(e,t=0){const n={x:(0,We._1)(e,"x","argMax")},r={axis:t};return Me.BV.runKernel(Fe.sJ,n,r)}}),xr=(0,Be.op)({argMin_:function(e,t=0){const n={x:(0,We._1)(e,"x","argMin")},r={axis:t};return Me.BV.runKernel(Fe.aJ,n,r)}}),Sr=(0,Be.op)({cumprod_:function(e,t=0,n=!1,r=!1){const o={x:(0,We._1)(e,"x","cumprod")},i={axis:t,exclusive:n,reverse:r};return Me.BV.runKernel(Fe.By,o,i)}}),Er=(0,Be.op)({cumsum_:function(e,t=0,n=!1,r=!1){const o={x:(0,We._1)(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return Me.BV.runKernel(Fe.iH,o,i)}});var Tr=__webpack_require__(3865);const Cr=(0,Be.op)({denseBincount_:function(e,t,n,r=!1){const o=(0,We._1)(e,"x","denseBincount"),i=(0,We._1)(t,"weights","denseBincount");Ze.hu("int32"===o.dtype,(()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`)),Ze.hu(o.rank<=2,(()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`)),Ze.hu(n>=0,(()=>`size must be non-negative, but got ${n}.`)),Ze.hu(i.size===o.size||0===i.size,(()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${i.shape}.`));const s={x:o,weights:i},a={size:n,binaryOutput:r};return Me.BV.runKernel(Fe.QR,s,a)}});var _r=__webpack_require__(6884);const Ir=(0,Be.op)({gather_:function(e,t,n=0,r=0){const o={x:(0,We._1)(e,"x","gather"),indices:(0,We._1)(t,"indices","gather","int32")},i={axis:n,batchDims:r};return Me.BV.runKernel(Fe.qi,o,i)}});var kr=__webpack_require__(7486),Rr=__webpack_require__(2676);const Nr=(0,Be.op)({stridedSlice_:function(e,t,n,r,o=0,i=0,s=0,a=0,c=0){const u={x:(0,We._1)(e,"x","stridedSlice","string_or_numeric")},l={begin:t,end:n,strides:r,beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:c};return Me.BV.runKernel(Fe.m2,u,l)}});var Or=__webpack_require__(9590),Ar=__webpack_require__(2991),Dr=__webpack_require__(4136),Lr=__webpack_require__(7501),Pr=__webpack_require__(8644),Vr=__webpack_require__(3028);const Mr=(0,Be.op)({scatterND_:function(e,t,n){const r=(0,We._1)(e,"indices","scatterND","int32"),o=(0,We._1)(t,"updates","scatterND");Vr.b0(o,r,n);const i={indices:r,updates:o},s={shape:n};return Me.BV.runKernel(Fe.xQ,i,s)}}),Fr=(0,Be.op)({gatherND_:function(e,t){const n=(0,We._1)(t,"indices","gatherND","int32"),r={params:(0,We._1)(e,"x","gatherND","string_or_numeric"),indices:n};return Me.BV.runKernel(Fe.q1,r)}});var Wr=__webpack_require__(7020),Zr=__webpack_require__(8447),Br=__webpack_require__(3710),Gr=__webpack_require__(4415),Ur=__webpack_require__(1300);const $r=(0,Be.op)({mirrorPad_:function(e,t,n){Ze.hu("reflect"===n||"symmetric"===n,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`));const r=(0,We._1)(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Ze.hu(t.length===r.rank,(()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`));const o="reflect"===n?1:0;for(let e=0;e<r.rank;e++)Ze.hu(2===t[e].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Ze.hu(t[e][0]>=0&&t[e][0]<=r.shape[e]-o&&t[e][1]>=0&&t[e][1]<=r.shape[e]-o,(()=>`Padding in dimension ${e} cannot be greater than or equal to ${r.shape[e]-o} or less than 0 for input of shape ${r.shape}`));const i={paddings:t,mode:n},s={x:r};return Me.BV.runKernel(Fe.jQ,s,i)}}),Xr=(0,Be.op)({pad_:function(e,t,n=0){const r=(0,We._1)(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:t,constantValue:n},i={x:r};return Me.BV.runKernel(Fe.ly,i,o)}}),jr=(0,Be.op)({spaceToBatchND_:function(e,t,n){const r=(0,We._1)(e,"x","spaceToBatchND");Ze.hu(r.rank>=1+t.length,(()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`)),Ze.hu(n.length===t.length,(()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`)),Ze.hu(r.shape.reduce(((e,r,o)=>o>0&&o<=t.length?e&&(r+n[o-1][0]+n[o-1][1])%t[o-1]==0:e),!0),(()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`));const o={x:r},i={blockShape:t,paddings:n};return Me.BV.runKernel(Fe.TQ,o,i)}}),zr=(0,Be.op)({batchToSpaceND_:function(e,t,n){const r=(0,We._1)(e,"x","batchToSpaceND"),o=t.reduce(((e,t)=>e*t));Ze.hu(r.rank>=1+t.length,(()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`)),Ze.hu(n.length===t.length,(()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`)),Ze.hu(r.shape[0]%o==0,(()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`));const i={x:r},s={blockShape:t,crops:n};return Me.BV.runKernel(Fe.zw,i,s)}}),Hr=(0,Be.op)({depthToSpace_:function(e,t,n="NHWC"){const r=(0,We._1)(e,"x","depthToSpace","float32"),o="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],s="NHWC"===n?r.shape[3]:r.shape[1];Ze.hu(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),Ze.hu(o*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${o} and ${t}  for depthToSpace with input shape\n    ${r.shape}`)),Ze.hu(i*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${i} and ${t} for depthToSpace with input shape\n        ${r.shape}`)),Ze.hu(s%(t*t)==0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${s} for depthToSpace with input shape ${r.shape}`));const a={x:r},c={blockSize:t,dataFormat:n};return Me.BV.runKernel(Fe.T0,a,c)}});var Yr=__webpack_require__(8247);const Kr=(0,Be.op)({broadcastArgs_:function(e,t){const n=(0,We._1)(e,"s0","broadcastArgs","int32"),r=(0,We._1)(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(1!==r.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const o={s0:n,s1:r};return Me.BV.runKernel(Fe.eE,o)}});function Jr(e,t,n,r){const o=((e,t,n)=>{switch(e.category){case"arithmetic":return X.lub((()=>((e,t,n)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[Ve.I(H("a",e,t,n),H("b",e,t,n))];case"AddN":return[Ge(H("tensors",e,t,n))];case"FloorMod":case"Mod":return[$e(H("a",e,t,n),H("b",e,t,n))];case"Mul":return[Xe.d(H("a",e,t,n),H("b",e,t,n))];case"RealDiv":case"Div":return[je.h(H("a",e,t,n),H("b",e,t,n))];case"DivNoNan":return[Je(H("a",e,t,n),H("b",e,t,n))];case"FloorDiv":return[qe.q(H("a",e,t,n),H("b",e,t,n))];case"Sub":return[Qe.l(H("a",e,t,n),H("b",e,t,n))];case"Minimum":return[et.L(H("a",e,t,n),H("b",e,t,n))];case"Maximum":return[nt(H("a",e,t,n),H("b",e,t,n))];case"Pow":return[rt.s(H("a",e,t,n),H("b",e,t,n))];case"SquaredDifference":return[ot.$(H("a",e,t,n),H("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"basic_math":return X.lub((()=>((e,t,n)=>{switch(e.op){case"Abs":case"ComplexAbs":return[it.W(H("x",e,t,n))];case"Acos":return[st(H("x",e,t,n))];case"Acosh":return[at(H("x",e,t,n))];case"Asin":return[ct(H("x",e,t,n))];case"Asinh":return[ut(H("x",e,t,n))];case"Atan":return[lt(H("x",e,t,n))];case"Atan2":return[dt(H("x",e,t,n),H("y",e,t,n))];case"Atanh":return[pt(H("x",e,t,n))];case"Ceil":return[ht(H("x",e,t,n))];case"Complex":return[ft.P(H("real",e,t,n),H("imag",e,t,n))];case"Cos":return[mt(H("x",e,t,n))];case"Cosh":return[gt(H("x",e,t,n))];case"Elu":return[bt.p(H("x",e,t,n))];case"Erf":return[yt(H("x",e,t,n))];case"Exp":return[vt.Q(H("x",e,t,n))];case"Expm1":return[wt(H("x",e,t,n))];case"Floor":return[xt(H("x",e,t,n))];case"Log":return[St.c(H("x",e,t,n))];case"Log1p":return[Et.K(H("x",e,t,n))];case"Imag":return[Tt.a(H("x",e,t,n))];case"Neg":return[Ct.W(H("x",e,t,n))];case"Reciprocal":return[_t(H("x",e,t,n))];case"Real":return[It.k(H("x",e,t,n))];case"Relu":return[kt.U(H("x",e,t,n))];case"Round":return[Rt.N(H("x",e,t,n))];case"Selu":return[Nt(H("x",e,t,n))];case"Sigmoid":return[Ot.X(H("x",e,t,n))];case"Sin":return[At(H("x",e,t,n))];case"Sign":return[Dt(H("x",e,t,n))];case"Sinh":return[Lt(H("x",e,t,n))];case"Softplus":return[Pt(H("x",e,t,n))];case"Sqrt":return[Vt._(H("x",e,t,n))];case"Square":return[Mt.h(H("x",e,t,n))];case"Tanh":return[Ft(H("x",e,t,n))];case"Tan":return[Wt(H("x",e,t,n))];case"ClipByValue":return[Zt(H("x",e,t,n),H("clipValueMin",e,t,n),H("clipValueMax",e,t,n))];case"Relu6":return[Bt.b(H("x",e,t,n))];case"Rsqrt":return[Gt(Y(e.inputNames[0],t,n))];case"Prod":return[Ut(H("x",e,t,n),H("axes",e,t,n))];case"LeakyRelu":return[$t.h(H("x",e,t,n),H("alpha",e,t,n))];case"Prelu":return[Xt.A(H("x",e,t,n),H("alpha",e,t,n))];case"IsNan":return[jt(Y(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"control":return(async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=H("thenBranch",e,t,n),o=H("elseBranch",e,t,n),i=H("cond",e,t,n),s=H("args",e,t,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[o].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=H("body",e,t,n),o=H("cond",e,t,n),i=H("args",e,t,n),s=await n.functionMap[o].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map((e=>e.id));let c=await s[0].data();s.forEach((e=>{e.kept||-1!==a.indexOf(e.id)||e.dispose()}));let u=i;for(;c[0];){const e=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const t=u.map((e=>e.id));e.forEach((e=>{e.kept||-1!==a.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const i=await n.functionMap[o].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);c=await i[0].data(),i.forEach((e=>{e.kept||-1!==a.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return u}case"LoopCond":return[ee(H("pred",e,t,n))];case"Switch":{const r=H("pred",e,t,n);let o=H("data",e,t,n);return o.kept||(o=ee(o)),(await r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{const r=e.inputNames.find((e=>void 0!==Y(e,t,n)));return r?[ee(Y(r,t,n))]:void 0}case"Enter":{const r=H("frameName",e,t,n),o=H("tensor",e,t,n);return n.enterFrame(r),[ee(o)]}case"Exit":{const r=H("tensor",e,t,n);return n.exitFrame(),[ee(r)]}case"NextIteration":{const r=H("tensor",e,t,n);return n.nextIteration(),[ee(r)]}case"TensorArrayV3":{const r=H("size",e,t,n),o=H("dtype",e,t,n),i=H("elementShape",e,t,n),s=H("dynamicSize",e,t,n),a=H("clearAfterRead",e,t,n),c=H("identicalElementShapes",e,t,n),u=H("name",e,t,n),l=new Jt(u,o,r,i,c,s,a);return n.addTensorArray(l),[l.idTensor,(0,X.iD$)(1)]}case"TensorArrayWriteV3":{const r=H("tensorArrayId",e,t,n),o=H("index",e,t,n),i=H("tensor",e,t,n),s=n.getTensorArray(r.id);return s.write(o,i),[s.idTensor]}case"TensorArrayReadV3":{const r=H("tensorArrayId",e,t,n),o=H("index",e,t,n);return[n.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{const r=H("tensorArrayId",e,t,n),o=H("indices",e,t,n),i=H("dtype",e,t,n);return[n.getTensorArray(r.id).gather(o,i)]}case"TensorArrayScatterV3":{const r=H("tensorArrayId",e,t,n),o=H("indices",e,t,n),i=H("tensor",e,t,n),s=n.getTensorArray(r.id);return s.scatter(o,i),[s.idTensor]}case"TensorArrayConcatV3":{const r=H("tensorArrayId",e,t,n),o=n.getTensorArray(r.id),i=H("dtype",e,t,n);return[o.concat(i)]}case"TensorArraySplitV3":{const r=H("tensorArrayId",e,t,n),o=H("tensor",e,t,n),i=H("lengths",e,t,n),s=n.getTensorArray(r.id);return s.split(i,o),[s.idTensor]}case"TensorArraySizeV3":{const r=H("tensorArrayId",e,t,n),o=n.getTensorArray(r.id);return[(0,X.iD$)(o.size(),"int32")]}case"TensorArrayCloseV3":{const r=H("tensorArrayId",e,t,n),o=n.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{const r=H("tensorListId",e,t,n),o=H("index",e,t,n),i=H("tensor",e,t,n),s=n.getTensorList(r.id);return s.setItem(o,i),[s.idTensor]}case"TensorListGetItem":{const r=H("tensorListId",e,t,n),o=H("index",e,t,n),i=H("elementShape",e,t,n),s=H("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(o,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{const r=H("indices",e,t,n),o=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const o=Math.max(...t);if(null!=r&&-1!==r&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);const i=new qt([],n,e.dtype,r),s=(0,X.HHK)(e,0);return t.forEach(((e,t)=>{i.setItem(e,s[t])})),i}(H("tensor",e,t,n),r,H("elementShape",e,t,n),H("numElements",e,t,n));return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=H("elementShape",e,t,n),o=H("elementDType",e,t,n);let i;i="TensorListReserve"===e.op?"numElements":"maxNumElements";const s=function(e,t,n){return new qt([],e,t,n)}(r,o,H(i,e,t,n));return n.addTensorList(s),[s.idTensor]}case"TensorListGather":{const r=H("tensorListId",e,t,n),o=H("indices",e,t,n),i=H("elementShape",e,t,n),s=H("elementDType",e,t,n);return[n.getTensorList(r.id).gather(o,s,i)]}case"TensorListStack":{const r=H("tensorListId",e,t,n),o=H("elementShape",e,t,n),i=H("elementDType",e,t,n),s=H("numElements",e,t,n);return[n.getTensorList(r.id).stack(o,i,s)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);zt(e.shape.slice(1),t,"TensorList shape mismatch: ");const o=(0,X.HHK)(e);return new qt(o,t,r)}(H("tensor",e,t,n),H("elementShape",e,t,n),H("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=H("tensorListId",e,t,n),o=n.getTensorList(r.id),i=H("dtype",e,t,n),s=H("elementShape",e,t,n);return[o.concat(i,s)]}case"TensorListPushBack":{const r=H("tensorListId",e,t,n),o=H("tensor",e,t,n),i=n.getTensorList(r.id);return i.pushBack(o),[i.idTensor]}case"TensorListPopBack":{const r=H("tensorListId",e,t,n),o=H("elementShape",e,t,n),i=H("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(o,i)]}case"TensorListSplit":{const r=H("tensor",e,t,n),o=H("elementShape",e,t,n),i=function(e,t,n){let r=0;const o=t.map((e=>(r+=e,r)));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${e.shape}`);const i=Kt(e.shape.slice(1),n),s=0===r?0:e.size/r,a=(0,X.lub)((()=>{const n=[];e=(0,X.XLQ)(e,[1,r,s]);for(let r=0;r<t.length;++r){const a=[0,0===r?0:o[r-1],0],c=[1,t[r],s];n[r]=(0,X.XLQ)((0,X.tPi)(e,a,c),i)}return e.dispose(),n})),c=new qt([],n,e.dtype,t.length);for(let e=0;e<a.length;e++)c.setItem(e,a[e]);return c}(r,H("lengths",e,t,n),o);return n.addTensorList(i),[i.idTensor]}case"TensorListLength":{const r=H("tensorListId",e,t,n),o=n.getTensorList(r.id);return[(0,X.iD$)(o.size(),"int32")]}case"TensorListResize":{const r=H("tensorListId",e,t,n),o=H("size",e,t,n),i=n.getTensorList(r.id).resize(o);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"convolution":return X.lub((()=>((e,t,n)=>{switch(e.op){case"Conv1D":{const r=H("stride",e,t,n),o=H("pad",e,t,n),i=H("dataFormat",e,t,n).toUpperCase(),s=H("dilation",e,t,n);return[nn(H("x",e,t,n),H("filter",e,t,n),r,o,i,s)]}case"Conv2D":{const r=H("strides",e,t,n),o=Q(e,t,n),i=H("dataFormat",e,t,n).toUpperCase(),s=H("dilations",e,t,n);return[tn(H("x",e,t,n),H("filter",e,t,n),[r[1],r[2]],o,i,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:r,pad:o,dataFormat:i,dilations:s,biasArg:a,preluArg:c,activationFunc:u,leakyreluAlpha:l}=En(e,t,n);return[cn({x:H("x",e,t,n),filter:H("filter",e,t,n),strides:[r[1],r[2]],pad:o,dataFormat:i,dilations:[s[1],s[2]],bias:a,activation:u,preluActivationWeights:c,leakyreluAlpha:l})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:o,dataFormat:i,dilations:s,biasArg:a,preluArg:c,activationFunc:u,leakyreluAlpha:l}=En(e,t,n);return[pn({x:H("x",e,t,n),filter:H("filter",e,t,n),strides:[r[1],r[2]],pad:o,dataFormat:i,dilations:[s[1],s[2]],bias:a,activation:u,preluActivationWeights:c,leakyreluAlpha:l})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=H("outputShape",e,t,n),o=H("strides",e,t,n),i=Q(e,t,n);return[mn(H("x",e,t,n),H("filter",e,t,n),r,[o[1],o[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=H("strides",e,t,n),o=Q(e,t,n),i=H("dilations",e,t,n),s=H("dataFormat",e,t,n).toUpperCase();return[un(H("input",e,t,n),H("filter",e,t,n),[r[1],r[2]],o,s,[i[1],i[2]])]}case"Conv3D":{const r=H("strides",e,t,n),o=H("pad",e,t,n),i=H("dataFormat",e,t,n).toUpperCase(),s=H("dilations",e,t,n);return[gn(H("x",e,t,n),H("filter",e,t,n),[r[1],r[2],r[3]],o,i,[s[1],s[2],s[3]])]}case"AvgPool":{const r=H("strides",e,t,n),o=H("pad",e,t,n),i=H("kernelSize",e,t,n);return[bn(H("x",e,t,n),[i[1],i[2]],[r[1],r[2]],o)]}case"MaxPool":{const r=H("strides",e,t,n),o=H("pad",e,t,n),i=H("kernelSize",e,t,n);return[yn(H("x",e,t,n),[i[1],i[2]],[r[1],r[2]],o)]}case"MaxPoolWithArgmax":{const r=H("strides",e,t,n),o=H("pad",e,t,n),i=H("kernelSize",e,t,n),s=H("includeBatchInIndex",e,t,n),{result:a,indexes:c}=vn(H("x",e,t,n),[i[1],i[2]],[r[1],r[2]],o,s);return[a,c]}case"AvgPool3D":{const r=H("strides",e,t,n),o=H("pad",e,t,n),i=H("kernelSize",e,t,n);return[wn(H("x",e,t,n),[i[1],i[2],i[3]],[r[1],r[2],r[3]],o)]}case"MaxPool3D":{const r=H("strides",e,t,n),o=H("pad",e,t,n),i=H("kernelSize",e,t,n);return[xn(H("x",e,t,n),[i[1],i[2],i[3]],[r[1],r[2],r[3]],o)]}case"Dilation2D":{const r=H("strides",e,t,n),o=H("pad",e,t,n),i=H("dilations",e,t,n),s=r[1],a=r[2],c=i[1],u=i[2];return[Sn(H("x",e,t,n),H("filter",e,t,n),[s,a],o,[c,u],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"creation":return X.lub((()=>((e,t,n)=>{switch(e.op){case"Fill":{const r=H("shape",e,t,n),o=H("dtype",e,t,n),i=H("value",e,t,n);return[Tn.h(r,i,o)]}case"LinSpace":return[Cn(H("start",e,t,n),H("stop",e,t,n),H("num",e,t,n))];case"Multinomial":{const r=H("logits",e,t,n),o=H("numSamples",e,t,n),i=H("seed",e,t,n);return[_n(r,o,i)]}case"OneHot":{const r=H("indices",e,t,n),o=H("depth",e,t,n),i=H("onValue",e,t,n),s=H("offValue",e,t,n);return[In(r,o,i,s)]}case"Ones":return[kn.i(H("shape",e,t,n),H("dtype",e,t,n))];case"OnesLike":return[Rn(H("x",e,t,n))];case"RandomUniform":return[Ln(H("shape",e,t,n),H("minval",e,t,n),H("maxval",e,t,n),H("dtype",e,t,n))];case"Range":{const r=H("start",e,t,n),o=H("stop",e,t,n),i=H("step",e,t,n);return[Pn.w(r,o,i,H("dtype",e,t,n))]}case"TruncatedNormal":{const r=H("shape",e,t,n),o=H("mean",e,t,n),i=H("stdDev",e,t,n),s=H("seed",e,t,n);return[Vn(r,o,i,H("dtype",e,t,n),s)]}case"Zeros":return[Mn.l(H("shape",e,t,n),H("dtype",e,t,n))];case"ZerosLike":return[Ke.P(H("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"dynamic":return(async(e,t,n)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a,softNmsSigma:c}=Gn(e,t,n),u=await Fn.BHj.nonMaxSuppressionWithScoreAsync(r,o,i,s,a,c);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a}=Gn(e,t,n),c=H("padToMaxOutputSize",e,t,n),u=await Fn.BHj.nonMaxSuppressionPaddedAsync(r,o,i,s,a,c);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a}=Gn(e,t,n);return[await Fn.BHj.nonMaxSuppressionAsync(r,o,i,s,a)]}case"Where":{const r=tt.p(H("condition",e,t,n),"bool"),o=[await Zn(r)];return r.dispose(),o}case"ListDiff":return async function(e,t){const n=(0,We._1)(e,"x","setdiff1d"),r=(0,We._1)(t,"y","setdiff1d");Ze.hu(n.dtype===r.dtype,(()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`)),Ze.hu(1===n.rank,(()=>`x should be 1D tensor, but got x (${n.shape}).`)),Ze.hu(1===r.rank,(()=>`y should be 1D tensor, but got y (${r.shape}).`));const o=await n.data(),i=await r.data(),s=new Set(i);let a=0;for(let e=0;e<o.length;e++)s.has(o[e])||a++;const c=new Bn.YD([a],n.dtype),u=new Bn.YD([a],"int32");for(let e=0,t=0;e<o.length;e++)s.has(o[e])||(c.values[t]=o[e],u.values[t]=e,t++);return[c.toTensor(),u.toTensor()]}(H("x",e,t,n),H("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"evaluation":return X.lub((()=>((e,t,n)=>{switch(e.op){case"LowerBound":return[(r=H("sortedSequence",e,t,n),o=H("values",e,t,n),$n(r,o,"left"))];case"TopKV2":{const r=H("x",e,t,n),o=H("k",e,t,n),i=H("sorted",e,t,n),s=Xn(r,o,i);return[s.values,s.indices]}case"UpperBound":return[jn(H("sortedSequence",e,t,n),H("values",e,t,n))];case"Unique":{const r=H("x",e,t,n),o=zn(r);return[o.values,o.indices]}case"UniqueV2":{const r=H("x",e,t,n),o=H("axis",e,t,n),i=zn(r,o);return[i.values,i.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}var r,o})(e,t,n)));case"image":return X.lub((()=>((e,t,n)=>{switch(e.op){case"ResizeBilinear":{const r=H("images",e,t,n),o=H("size",e,t,n),i=H("alignCorners",e,t,n),s=H("halfPixelCenters",e,t,n);return[Fn.BHj.resizeBilinear(r,[o[0],o[1]],i,s)]}case"ResizeNearestNeighbor":{const r=H("images",e,t,n),o=H("size",e,t,n),i=H("alignCorners",e,t,n),s=H("halfPixelCenters",e,t,n);return[Fn.BHj.resizeNearestNeighbor(r,[o[0],o[1]],i,s)]}case"CropAndResize":{const r=H("image",e,t,n),o=H("boxes",e,t,n),i=H("boxInd",e,t,n),s=H("cropSize",e,t,n),a=H("method",e,t,n),c=H("extrapolationValue",e,t,n);return[Fn.BHj.cropAndResize(r,o,i,s,a,c)]}case"ImageProjectiveTransformV3":{const r=H("images",e,t,n),o=H("transforms",e,t,n),i=H("outputShape",e,t,n),s=H("fillValue",e,t,n),a=H("interpolation",e,t,n),c=H("fillMode",e,t,n);return[Fn.BHj.transform(r,o,a.toLowerCase(),c.toLowerCase(),s,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"graph":return X.lub((()=>((e,t,n)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const r=H("default",e,t,n);return[Y(e.name,t,n)||r];case"Placeholder":return[Y(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[ee(H("x",e,t,n))];case"IdentityN":return H("x",e,t,n).map((e=>ee(e)));case"Shape":return[Hn.R(H("x",e,t,n).shape,"int32")];case"ShapeN":return H("x",e,t,n).map((e=>Hn.R(e.shape)));case"Size":return[Yn.i(H("x",e,t,n).size,"int32")];case"Rank":return[Yn.i(H("x",e,t,n).rank,"int32")];case"NoOp":return[Yn.i(1)];case"Print":const o=H("x",e,t,n),i=H("data",e,t,n),s=H("message",e,t,n),a=H("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let e=0;e<i.length;e++)console.log(Array.prototype.slice.call(i[e].dataSync()).slice(0,a));return[o];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"logical":return X.lub((()=>((e,t,n)=>{switch(e.op){case"Equal":return[He(H("a",e,t,n),H("b",e,t,n))];case"NotEqual":return[Jn.Q(H("a",e,t,n),H("b",e,t,n))];case"Greater":return[qn.p(H("a",e,t,n),H("b",e,t,n))];case"GreaterEqual":return[Qn.b(H("a",e,t,n),H("b",e,t,n))];case"Less":return[er(H("a",e,t,n),H("b",e,t,n))];case"LessEqual":return[tr.z(H("a",e,t,n),H("b",e,t,n))];case"LogicalAnd":return[nr.H(H("a",e,t,n),H("b",e,t,n))];case"LogicalNot":return[rr(H("a",e,t,n))];case"LogicalOr":return[or(H("a",e,t,n),H("b",e,t,n))];case"Select":case"SelectV2":return[Ye.a(H("condition",e,t,n),H("a",e,t,n),H("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"matrices":return X.lub((()=>((e,t,n)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[hn.O(H("a",e,t,n),H("b",e,t,n),H("transposeA",e,t,n),H("transposeB",e,t,n))];case"Einsum":return[ir(H("equation",e,t,n),...H("tensors",e,t,n))];case"Transpose":return[sr.p(H("x",e,t,n),H("perm",e,t,n))];case"_FusedMatMul":const[r,o]=H("fusedOps",e,t,n),i="biasadd"===r,s="prelu"===o,a=H("numArgs",e,t,n),c=H("leakyreluAlpha",e,t,n);if(i){if(s&&2!==a)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==a)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,l]=H("args",e,t,n);return[fn({a:H("a",e,t,n),b:H("b",e,t,n),transposeA:H("transposeA",e,t,n),transposeB:H("transposeB",e,t,n),bias:u,activation:o,preluActivationWeights:l,leakyreluAlpha:c})];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"normalization":return X.lub((()=>((e,t,n)=>{switch(e.op){case"EuclideanNorm":return[cr(H("x",e,t,n),H("axis",e,t,n),H("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[ur(H("x",e,t,n),H("mean",e,t,n),H("variance",e,t,n),H("offset",e,t,n),H("scale",e,t,n),H("epsilon",e,t,n))];case"LRN":return[lr(H("x",e,t,n),H("radius",e,t,n),H("bias",e,t,n),H("alpha",e,t,n),H("beta",e,t,n))];case"Softmax":return[dr(H("x",e,t,n))];case"LogSoftmax":return[fr(H("x",e,t,n))];case"SparseToDense":return[mr(H("sparseIndices",e,t,n),H("outputShape",e,t,n),H("sparseValues",e,t,n),H("defaultValue",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"reduction":return X.lub((()=>((e,t,n)=>{switch(e.op){case"Max":{const r=H("axis",e,t,n),o=H("keepDims",e,t,n);return[pr.F(H("x",e,t,n),r,o)]}case"Mean":{const r=H("axis",e,t,n),o=H("keepDims",e,t,n);return[gr.J(H("x",e,t,n),r,o)]}case"Min":{const r=H("axis",e,t,n),o=H("keepDims",e,t,n);return[br.V(H("x",e,t,n),r,o)]}case"Sum":{const r=H("axis",e,t,n),o=H("keepDims",e,t,n);return[hr.S(H("x",e,t,n),r,o)]}case"All":{const r=H("axis",e,t,n),o=H("keepDims",e,t,n);return[yr(H("x",e,t,n),r,o)]}case"Any":{const r=H("axis",e,t,n),o=H("keepDims",e,t,n);return[vr(H("x",e,t,n),r,o)]}case"ArgMax":{const r=H("axis",e,t,n);return[wr(H("x",e,t,n),r)]}case"ArgMin":{const r=H("axis",e,t,n);return[xr(H("x",e,t,n),r)]}case"Prod":{const r=H("axis",e,t,n),o=H("keepDims",e,t,n);return[Ut(H("x",e,t,n),r,o)]}case"Cumprod":{const r=H("axis",e,t,n),o=H("exclusive",e,t,n),i=H("reverse",e,t,n);return[Sr(H("x",e,t,n),r,o,i)]}case"Cumsum":{const r=H("axis",e,t,n),o=H("exclusive",e,t,n),i=H("reverse",e,t,n);return[Er(H("x",e,t,n),r,o,i)]}case"Bincount":const r=H("x",e,t,n),o=H("weights",e,t,n),i=H("size",e,t,n);return[Tr.y(r,o,i)];case"DenseBincount":{const r=H("x",e,t,n),o=H("weights",e,t,n),i=H("size",e,t,n),s=H("binaryOutput",e,t,n);return[Cr(r,o,i,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"slice_join":return X.lub((()=>((e,t,n)=>{switch(e.op){case"ConcatV2":case"Concat":{const r=H("n",e,t,n),o=H("axis",e,t,n);let i=H("tensors",e,t,n);return i=i.slice(0,r),[_r.z(i,o)]}case"Gather":{const r=H("x",e,t,n),o=H("indices",e,t,n);return[Ir(r,tt.p(o,"int32"),0)]}case"GatherV2":{const r=H("axis",e,t,n),o=H("batchDims",e,t,n),i=H("x",e,t,n),s=H("indices",e,t,n);return[Ir(i,tt.p(s,"int32"),r,o)]}case"Reverse":{const r=H("dims",e,t,n),o=[];for(let e=0;e<r.length;e++)r[e]&&o.push(e);const i=H("x",e,t,n);return[kr.G(i,o)]}case"ReverseV2":{const r=H("axis",e,t,n),o=H("x",e,t,n);return[kr.G(o,r)]}case"Slice":{const r=H("begin",e,t,n),o=H("size",e,t,n);return[Rr.t(H("x",e,t,n),r,o)]}case"StridedSlice":{const r=H("begin",e,t,n),o=H("end",e,t,n),i=H("strides",e,t,n),s=H("beginMask",e,t,n),a=H("endMask",e,t,n),c=H("ellipsisMask",e,t,n),u=H("newAxisMask",e,t,n),l=H("shrinkAxisMask",e,t,n),d=H("x",e,t,n);return[Nr(d,r,o,i,s,a,c,u,l)]}case"Pack":return(0,X.lub)((()=>{const r=H("axis",e,t,n),o=H("tensors",e,t,n),i=o[0].shape,s=Or.L(o[0]).shape,a=o.map((e=>{const t=X.D5U.arraysEqual(e.shape,i);if(!t&&!X.D5U.arraysEqual(Or.L(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:en.X(e,i)}));return[Ar.k(a,r)]}));case"Unpack":{const r=H("axis",e,t,n),o=H("tensor",e,t,n);return Dr.H(o,r)}case"Tile":{const r=H("reps",e,t,n);return[Lr.G(H("x",e,t,n),r)]}case"Split":case"SplitV":{const r=H("axis",e,t,n),o=H("numOrSizeSplits",e,t,n),i=H("x",e,t,n);return Pr.V(i,o,r)}case"ScatterNd":{const r=H("indices",e,t,n),o=H("values",e,t,n),i=H("shape",e,t,n);return[Mr(r,o,i)]}case"GatherNd":{const r=H("x",e,t,n),o=H("indices",e,t,n);return[Fr(r,o)]}case"SparseToDense":{const r=H("sparseIndices",e,t,n),o=H("outputShape",e,t,n),i=H("sparseValues",e,t,n),s=H("defaultValue",e,t,n);return[mr(r,i,o,i.dtype===s.dtype?s:tt.p(s,i.dtype))]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"sparse":return X.lub((()=>((e,t,n)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:r,outputValues:o,emptyRowIndicator:i,reverseIndexMap:s}=Fn.rVs.sparseFillEmptyRows(H("indices",e,t,n),H("values",e,t,n),H("denseShape",e,t,n),H("defaultValue",e,t,n));return[r,o,i,s]}case"SparseReshape":{const{outputIndices:r,outputShape:o}=Fn.rVs.sparseReshape(H("inputIndices",e,t,n),H("inputShape",e,t,n),H("newShape",e,t,n));return[r,o]}case"SparseSegmentMean":return[Fn.rVs.sparseSegmentMean(H("data",e,t,n),H("indices",e,t,n),H("segmentIds",e,t,n))];case"SparseSegmentSum":return[Fn.rVs.sparseSegmentSum(H("data",e,t,n),H("indices",e,t,n),H("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"spectral":return X.lub((()=>((e,t,n)=>{switch(e.op){case"FFT":return[Wr.k(H("x",e,t,n))];case"IFFT":return[Zr.S(H("x",e,t,n))];case"RFFT":return[Br.Q(H("x",e,t,n))];case"IRFFT":return[Gr.w(H("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"string":return X.lub((()=>((e,t,n)=>{switch(e.op){case"StringNGrams":{const{nGrams:r,nGramsSplits:o}=Fn.Z_8.stringNGrams(H("data",e,t,n),H("dataSplits",e,t,n),H("separator",e,t,n),H("nGramWidths",e,t,n),H("leftPad",e,t,n),H("rightPad",e,t,n),H("padWidth",e,t,n),H("preserveShortSequences",e,t,n));return[r,o]}case"StringSplit":{const{indices:r,values:o,shape:i}=Fn.Z_8.stringSplit(H("input",e,t,n),H("delimiter",e,t,n),H("skipEmpty",e,t,n));return[r,o,i]}case"StringToHashBucketFast":return[Fn.Z_8.stringToHashBucketFast(H("input",e,t,n),H("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"transformation":return X.lub((()=>((e,t,n)=>{switch(e.op){case"Cast":return[tt.p(H("x",e,t,n),H("dtype",e,t,n))];case"ExpandDims":{const r=H("axis",e,t,n);return[Ur.d(H("x",e,t,n),r)]}case"Squeeze":{const r=H("axis",e,t,n);return[Or.L(H("x",e,t,n),r)]}case"Reshape":return[en.X(H("x",e,t,n),H("shape",e,t,n))];case"MirrorPad":return[$r(H("x",e,t,n),H("padding",e,t,n),H("mode",e,t,n))];case"PadV2":case"Pad":return[Xr(H("x",e,t,n),H("padding",e,t,n),H("constantValue",e,t,n))];case"SpaceToBatchND":{const r=H("blockShape",e,t,n),o=H("paddings",e,t,n);return[jr(H("x",e,t,n),r,o)]}case"BatchToSpaceND":{const r=H("blockShape",e,t,n),o=H("crops",e,t,n);return[zr(H("x",e,t,n),r,o)]}case"DepthToSpace":{const r=H("blockSize",e,t,n),o=H("dataFormat",e,t,n).toUpperCase();return[Hr(H("x",e,t,n),r,o)]}case"BroadcastTo":return[Yr.U(H("x",e,t,n),H("shape",e,t,n))];case"BroadcastArgs":return[Kr(H("s0",e,t,n),H("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const o=H("keyDType",e,t,n),i=H("valueDType",e,t,n),s=new Kn(o,i);return r.addHashTable(e.name,s),[s.handle]}case"LookupTableImport":case"LookupTableImportV2":{const o=H("tableHandle",e,t,n,r),i=H("keys",e,t,n),s=H("values",e,t,n),a=r.getHashTableById(o.id);return[await a.import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{const o=H("tableHandle",e,t,n,r),i=H("keys",e,t,n),s=H("defaultValue",e,t,n),a=r.getHashTableById(o.id);return[await a.find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{const o=H("tableHandle",e,t,n,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n,r);case"custom":const o=z(e.op);if(o&&o.customExecutor)return o.customExecutor(new Pe(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return X.D5U.isPromise(o)?o.then((e=>[].concat(e))):[].concat(o)}class qr{constructor(e={},t={},n={},r={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function Qr(e,t,n,r){const o=new Set,i=[];let s=null,a=null;const c=new Set,u=Object.keys(e).map((e=>q(e)[0]));let l=[];null!=r&&(l=r.map((e=>q(e.name)[0])));const d=[...t];for(;d.length>0;){const e=d.pop();(ro(e)||oo(e)||io(e))&&null==s&&(s=e,a=s.children.map((e=>e.name)).filter((e=>o.has(e)))),o.add(e.name),null==n[e.name]&&-1===u.indexOf(e.name)&&-1===l.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach((e=>{c.has(e.name)||(c.add(e.name),d.push(e))})):i.push(e.name))}return{inputs:e,outputs:t,usedNodes:o,missingInputs:i,dynamicNode:s,syncInputs:a}}const eo=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],to=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],no=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function ro(e){return eo.indexOf(e.op)>=0}function oo(e){return to.indexOf(e.op)>=0}function io(e){return no.indexOf(e.op)>=0}class so{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new so(e.functions[t],this)}))}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}getCompilationKey(e,t){const n=e.map((e=>e.name)).sort(),r=t.map((e=>e.name)).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(e,t){const n=Qr(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:o,syncInputs:i}=n;if(null!=o)throw new Error(`This execution contains the node '${o.name}', which has the dynamic op '${o.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(r.length>0){const n=t.map((e=>e.name)),o=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${o}]. Missing the following inputs: [${r}]`)}return function(e,t,n){const{usedNodes:r,inputs:o}=n,i=[],s=Object.keys(o).map((e=>q(e)[0])).map((t=>e.nodes[t])),a=e.initNodes;s.forEach((e=>{r.has(e.name)&&i.push(e)})),e.weights.forEach((e=>{r.has(e.name)&&i.push(e)})),null!=a&&a.forEach((e=>{r.has(e.name)&&i.push(e)}));const c=new Set,u=[];for(;i.length>0;){const e=i.pop();c.add(e.name),t[e.name]||u.push(e),e.children.forEach((e=>{!c.has(e.name)&&r.has(e.name)&&e.inputs.every((e=>c.has(e.name)))&&i.push(e)}))}return u}(this.graph,this.weightMap,n)}execute(e,t){e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map((e=>this.graph.nodes[q(e)[0]])),o=t.map((e=>q(e)[0]));let i=o.map((e=>this.graph.nodes[e]));this.resetIntermediateTensors(),0===i.length&&(i=this._outputs);const s=this.getCompilationKey(r,i);let a=this.compiledMap.get(s);null==a&&(a=this.compile(e,i),this.compiledMap.set(s,a));const c={},u={};return(0,X.lub)((()=>{const n=new qr(this.weightMap,c,u,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,o]=q(t),i=[];i[o]=e[t],r[n]=i}));const i=this.getFrozenTensorIds(r),s={};for(let e=0;e<a.length;e++){const t=a[e];if(!r[t.name]){const e=Jr(t,r,n,this._resourceManager);if(X.D5U.isPromise(e))throw new Error(`The execution of the op '${t.op}' returned a promise. Please use model.executeAsync() instead.`);r[t.name]=e,this.checkTensorForDisposal(t.name,t,r,n,i,o,s)}}return null==this.parent&&n.dispose(i),t.map((e=>Y(e,r,n)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,n,r,o,i,s){"control"!==t.category&&-1===i.indexOf(e)&&(n[e].forEach((e=>{null!=e&&(s[e.id]=(s[e.id]||0)+t.children.length)})),t.inputs.forEach((e=>{if("control"!==e.category){const i=function(e,t,n){return t[J(e,n.currentContextId)]}(e.name,n,r);null!=i&&i.forEach((e=>{if(e&&!e.kept&&!o.has(e.id)){const n=s[e.id];if(1===n){if(this.keepTensorForDebug){const[n,o]=K(t.name,r);this.intermediateTensors[n]||(this.intermediateTensors[n]=[]),this.intermediateTensors[n][o]=e}else e.dispose();delete s[e.id]}else null!=n&&s[e.id]--}}))}})))}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((e=>this.intermediateTensors[e].forEach((e=>e.dispose())))),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach((e=>{this.tensorsMap[e].forEach((e=>{!e||e.kept||e.isDisposed||this.keepIds.has(e.id)||e.dispose()}))}))}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach((e=>e.dispose())),delete this.intermediateTensors[e]}async _executeAsync(e,t,n=!1,r={},o={}){n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepTensorForDebug=(0,X.OBj)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){console.warn(e.message)}this.resetIntermediateTensors();const i=new qr(this.weightMap,r,o,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,i,t,n);const s=t.map((e=>Y(e,this.tensorsMap,i))),a=s.map((e=>e.id)),c=Object.keys(e).map((t=>e[t].id));return this.keepIds=new Set([...a,...c,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&i.dispose(this.keepIds),s}async executeFunctionAsync(e,t,n){const r=e.reduce(((e,t,n)=>(e[this.inputs[n].name]=t,e)),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const o=Object.keys(e),i=o.map((e=>this.graph.nodes[q(e)[0]])),s=n.map((e=>q(e)[0]));let a=s.map((e=>this.graph.nodes[e]));0===a.length&&(a=this._outputs);const{usedNodes:c,missingInputs:u,dynamicNode:l,syncInputs:d}=Qr(e,a,this.weightMap,this._initNodes),p=[...i,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),h=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,r]=q(t),o=[];o[r]=e[t],h[n]=o}));const f={},m=this.getFrozenTensorIds(h),g={};for(;p.length>0;){const e=this.processStack(i,p,t,h,g,m,s,f,c);await Promise.all(e)}null!=l||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=a.filter((e=>!ro(e)&&!Y(e.name,h,t))).map((e=>e.name));if(b.length>0){let e="";throw null!=l&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${b}] from the provided inputs [${o}]. Consider providing the following inputs: [${u}]. ${e}`)}return h}processStack(e,t,n,r,o,i,s,a,c){const u=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let l="";if("Enter"===e.node.op&&H("isConstant",e.node,r,n)&&([l]=K(e.node.name,n)),null==r[e.node.name]){const d=Jr(e.node,r,n,this._resourceManager);l||([l]=K(e.node.name,n));const p=n.currentContext;X.D5U.isPromise(d)?u.push(d.then((u=>(r[l]=u,n.currentContext=p,this.checkTensorForDisposal(l,e.node,r,n,i,s,a),this.processChildNodes(e.node,t,n,r,o,c),u)))):(r[l]=d,this.checkTensorForDisposal(l,e.node,r,n,i,s,a),this.processChildNodes(e.node,t,n,r,o,c))}else this.processChildNodes(e.node,t,n,r,o,c)}return u}processChildNodes(e,t,n,r,o,i){e.children.forEach((e=>{const[s]=K(e.name,n);!o[s]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!Y(e,r,n)))&&(o[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((e=>!!Y(e,r,n)))&&(o[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const n=e[t],[r]=q(t),o=this.graph.nodes[r];if(o.attrParams.shape&&o.attrParams.shape.value){const e=o.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every(((t,n)=>-1===e[n]||e[n]===t));X.D5U.assert(t,(()=>`The shape of dict['${o.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`))}o.attrParams.dtype&&o.attrParams.dtype.value&&X.D5U.assert(n.dtype===o.attrParams.dtype.value,(()=>`The dtype of dict['${o.name}'] provided in model.execute(dict) must be ${o.attrParams.dtype.value}, but was ${n.dtype}`))}))}mapInputs(e){const t={};for(const n in e)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]?t[this._signature.inputs[n].name]=e[n]:t[n]=e[n];return t}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=q(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map((e=>null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[e]?this._signature.outputs[e].name:e),{})}checkOutputs(e){e.forEach((e=>{const[t]=q(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)}))}}class ao{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}class co{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={}),this.resourceManager=new ao}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=X.io.browserHTTPRequest(e,this.loadOptions);else{const t=X.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(X.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return X.D5U.isPromise(e)?e.then((e=>this.loadSync(e))):this.loadSync(e)}loadSync(e){this.artifacts=e;const t=this.artifacts.modelTopology;let n;n=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=n,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;const r=X.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new so(we.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=we.Instance.transformGraph(e.modelInitializer);this.initializer=new so(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if("string"==typeof e){const t=X.io.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(e){if(!(e instanceof X.esB||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce(((t,n,r)=>(t[n]=e[r],t)),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function uo(e,t={}){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&"string"==typeof e&&(e=function(e){return e.endsWith("/")||(e+="/"),`${e}model.json?tfjs-format=file`}(e));const n=new co(e,t);return await n.load(),n}function lo(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function po(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var ho=function(e){return{startEndTensor:e,startPoint:(0,X.tPi)(e,[0,0],[-1,2]),endPoint:(0,X.tPi)(e,[0,2],[-1,2])}},fo={strides:[8,16],anchors:[2,6]};function mo(e,t){var n,r,o;if(e.topLeft instanceof X.esB&&e.bottomRight instanceof X.esB){var i=(0,X.lub)((function(){return[(0,X.zoF)([(0,X.tPi)((0,X.luU)(t-1,e.topLeft),0,1),(0,X.tPi)(e.topLeft,1,1)]),(0,X.zoF)([(0,X.luU)(t-1,(0,X.tPi)(e.bottomRight,0,1)),(0,X.tPi)(e.bottomRight,1,1)])]}));n=i[0],r=i[1],null!=e.landmarks&&(o=(0,X.lub)((function(){var n=(0,X.luU)((0,X.RRF)([t-1,0]),e.landmarks),r=(0,X.RRF)([1,-1]);return(0,X.dC7)(n,r)})))}else{var s=e.topLeft,a=s[0],c=s[1],u=e.bottomRight,l=u[0],d=u[1];n=[t-1-a,c],r=[t-1-l,d],null!=e.landmarks&&(o=e.landmarks.map((function(e){return[t-1-e[0],e[1]]})))}var p={topLeft:n,bottomRight:r};return null!=o&&(p.landmarks=o),null!=e.probability&&(p.probability=e.probability instanceof X.esB?e.probability.clone():e.probability),p}function go(e,t){return(0,X.lub)((function(){var n;return n=e.hasOwnProperty("box")?e.box:e,(0,X.L9e)(function(e,t){var n=(0,X.dC7)(e.startPoint,t),r=(0,X.dC7)(e.endPoint,t),o=(0,X.Izb)([n,r],1);return ho(o)}(n,t).startEndTensor)}))}var bo=function(){function e(e,t,n,r,o,i){this.blazeFaceModel=e,this.width=t,this.height=n,this.maxFaces=r,this.anchorsData=function(e,t,n){for(var r=[],o=0;o<n.strides.length;o++)for(var i=n.strides[o],s=Math.floor((t+i-1)/i),a=Math.floor((e+i-1)/i),c=n.anchors[o],u=0;u<s;u++)for(var l=i*(u+.5),d=0;d<a;d++)for(var p=i*(d+.5),h=0;h<c;h++)r.push([p,l]);return r}(t,n,fo),this.anchors=(0,X.odF)(this.anchorsData),this.inputSizeData=[t,n],this.inputSize=(0,X.RRF)([t,n]),this.iouThreshold=o,this.scoreThreshold=i}return e.prototype.getBoundingBoxes=function(e,t,n){return void 0===n&&(n=!0),lo(this,void 0,void 0,(function(){var r,o,i,s,a,c,u,l,d,p,h,f,m,g,b=this;return po(this,(function(y){switch(y.label){case 0:return r=(0,X.lub)((function(){var t=X.BHj.resizeBilinear(e,[b.width,b.height]),n=(0,X.dC7)((0,X.luU)((0,X.hiC)(t,255),.5),2),r=b.blazeFaceModel.predict(n),o=(0,X.L9e)(r),i=function(e,t,n){var r=(0,X.tPi)(e,[0,1],[-1,2]),o=(0,X.IHx)(r,t),i=(0,X.tPi)(e,[0,3],[-1,2]),s=(0,X.hiC)(i,n),a=(0,X.hiC)(o,n),c=(0,X.hiC)(s,2),u=(0,X.luU)(a,c),l=(0,X.IHx)(a,c),d=(0,X.dC7)(u,n),p=(0,X.dC7)(l,n);return(0,X.Izb)([d,p],1)}(o,b.anchors,b.inputSize),s=(0,X.tPi)(o,[0,0],[-1,1]);return[o,i,(0,X.L9e)((0,X.XD2)(s))]})),o=r[0],i=r[1],s=r[2],a=console.warn,console.warn=function(){},c=X.BHj.nonMaxSuppression(i,s,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=a,[4,c.array()];case 1:return u=y.sent(),c.dispose(),l=u.map((function(e){return(0,X.tPi)(i,[e,0],[1,-1])})),t?[3,3]:[4,Promise.all(l.map((function(e){return lo(b,void 0,void 0,(function(){var t;return po(this,(function(n){switch(n.label){case 0:return[4,e.array()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 2:l=y.sent(),y.label=3;case 3:for(d=e.shape[1],p=e.shape[2],h=t?(0,X.hiC)([p,d],this.inputSize):[p/this.inputSizeData[0],d/this.inputSizeData[1]],f=[],m=function(e){var r=l[e],i=(0,X.lub)((function(){var i=ho(r instanceof X.esB?r:(0,X.odF)(r));if(!n)return i;var a,c=u[e];return a=t?(0,X.tPi)(b.anchors,[c,0],[1,2]):b.anchorsData[c],{box:i,landmarks:(0,X.XLQ)((0,X.L9e)((0,X.tPi)(o,[c,5],[1,-1])),[6,-1]),probability:(0,X.tPi)(s,[c],[1]),anchor:a}}));f.push(i)},g=0;g<l.length;g++)m(g);return i.dispose(),s.dispose(),o.dispose(),[2,{boxes:f,scaleFactor:h}]}}))}))},e.prototype.estimateFaces=function(e,t,n,r){return void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!0),lo(this,void 0,void 0,(function(){var o,i,s,a,c,u,l=this;return po(this,(function(d){switch(d.label){case 0:return o=function(e){return e instanceof X.esB?[e.shape[0],e.shape[1]]:[e.height,e.width]}(e),i=o[1],s=(0,X.lub)((function(){return e instanceof X.esB||(e=X.Xhn.fromPixels(e)),(0,X.dt4)((0,X.pju)(e,"float32"),0)})),[4,this.getBoundingBoxes(s,t,r)];case 1:return a=d.sent(),c=a.boxes,u=a.scaleFactor,s.dispose(),t?[2,c.map((function(e){var t=go(e,u),o={topLeft:(0,X.tPi)(t,[0],[2]),bottomRight:(0,X.tPi)(t,[2],[2])};if(r){var s=e,a=s.landmarks,c=s.probability,l=s.anchor,d=(0,X.dC7)((0,X.IHx)(a,l),u);o.landmarks=d,o.probability=c}return n&&(o=mo(o,i)),o}))]:[2,Promise.all(c.map((function(e){return lo(l,void 0,void 0,(function(){var t,o,s,a,c,l,d,p,h,f,m,g=this;return po(this,(function(b){switch(b.label){case 0:return t=go(e,u),r?[3,2]:[4,t.array()];case 1:return c=b.sent(),o={topLeft:c.slice(0,2),bottomRight:c.slice(2)},[3,4];case 2:return[4,Promise.all([e.landmarks,t,e.probability].map((function(e){return lo(g,void 0,void 0,(function(){return po(this,(function(t){return[2,e.array()]}))}))})))];case 3:s=b.sent(),a=s[0],c=s[1],l=s[2],d=e.anchor,h=(p=u)[0],f=p[1],m=a.map((function(e){return[(e[0]+d[0])*h,(e[1]+d[1])*f]})),o={topLeft:c.slice(0,2),bottomRight:c.slice(2),landmarks:m,probability:l},function(e){e.startEndTensor.dispose(),e.startPoint.dispose(),e.endPoint.dispose()}(e.box),e.landmarks.dispose(),e.probability.dispose(),b.label=4;case 4:return t.dispose(),n&&(o=mo(o,i)),[2,o]}}))}))})))]}}))}))},e}();function yo(e){var t=void 0===e?{}:e,n=t.maxFaces,r=void 0===n?10:n,o=t.inputWidth,i=void 0===o?128:o,s=t.inputHeight,a=void 0===s?128:s,c=t.iouThreshold,u=void 0===c?.3:c,l=t.scoreThreshold,d=void 0===l?.75:l,p=t.modelUrl;return lo(this,void 0,void 0,(function(){var e;return po(this,(function(t){switch(t.label){case 0:return null==p?[3,2]:[4,uo(p)];case 1:return e=t.sent(),[3,4];case 2:return[4,uo("https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1",{fromTFHub:!0})];case 3:e=t.sent(),t.label=4;case 4:return[2,new bo(e,i,a,r,u,d)]}}))}))}var vo,wo,xo,So,Eo,To,Co,_o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Io=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};__webpack_require__(6800);var ko,Ro,No,Oo=!1,Ao=!1;function Do(e){return _o(this,void 0,void 0,(function(){var e=this;return Io(this,(function(t){switch(t.label){case 0:return[4,yo()];case 1:return vo=t.sent(),Eo=document.createElement("canvas"),xo=640,So=480,To=Eo.getContext("2d"),Eo.width=640,Eo.height=480,[4,X.Cd_()];case 2:return t.sent(),wo=document.createElement("video"),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(e){wo.srcObject=e,wo.width=xo,wo.height=So,wo.autoplay=!0,navigator.userAgent.match(/iPhone|iPad|iPod/i)&&(wo.muted=!0,wo.playsInline=!0),wo.play()})),wo.addEventListener("loadeddata",(function(){return _o(e,void 0,void 0,(function(){return Io(this,(function(e){switch(e.label){case 0:return[4,yo()];case 1:return vo=e.sent(),console.log("Loaded Blazeface"),[4,Lo()];case 2:return e.sent(),!0===Ao&&(S().fire({position:"top",html:'<div> <img src="https://i.ibb.co/PFsd4cR/monoyer.png" id="monoyer" style="  top: 5%; left: 40%;"/>  </div>',showConfirmButton:!1,showCloseButton:!0}),No=document.getElementById("monoyer")),[2]}}))}))})),[2,Eo.captureStream(30)]}}))}))}var Lo=function(){return _o(void 0,void 0,void 0,(function(){var e,t,n;return Io(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=xo/640,t=So/480,null==vo?[2]:[4,vo.estimateFaces(wo,!1).then((function(n){if(n.length>0){To.clearRect(0,0,xo,So),To.save(),To.translate(xo,0),To.scale(-1,1),To.drawImage(wo,0,0,wo.width,wo.height);var r=Math.sqrt(Math.pow(n[0].landmarks[0][0]-n[0].landmarks[1][0],2)+Math.pow(n[0].landmarks[0][1]-n[0].landmarks[1][1],2));!function(e,t,n,r){var o,i,s,a=xo/640,c=So/480,u="#a2d2ff",l="#ffa2a2",d="#ff0000";switch(Co){case"ANT1L":o=1.4,i=2.2,s=u;break;case"ANT1R":o=-.6,i=2.2,s=u;break;case"ANT2L":o=.7,i=3.35,s=u;break;case"ANT2R":o=0,i=3.35,s=u;break;case"ANT3L":o=.7,i=3.85,s=u;break;case"ANT3R":o=0,i=3.85,s=u;break;case"ANT4L":o=1.9,i=4.05,s=u;break;case"ANT4R":o=-1,i=4.05,s=u;break;case"ANT5L":o=2.2,i=4.9,s=u;break;case"ANT5R":o=-1.5,i=4.9,s=u;break;case"P1L":o=1.4,i=2.2,s=l;break;case"P1R":o=-.6,i=2.2,s=l;break;case"P2L":o=1,i=2.8,s=l;break;case"P2R":o=-.1,i=2.8,s=l;break;case"P3L":o=.685,i=3.2,s=l;break;case"P3R":o=.235,i=3.2,s=l;break;case"P4L":o=.815,i=3.7,s=l;break;case"P4R":o=.3,i=3.7,s=l;break;case"P5L":o=1.1,i=4.9,s=l;break;case"P5R":o=-.6,i=4.9,s=l;break;case"P6L":o=.7,i=6,s=l;break;case"P6R":o=-.7,i=6,s=l;break;case"P7L":o=1.7,i=6,s=l;break;case"P7R":o=-1.2,i=6,s=l;break;case"P8L":o=1.7,i=5.1,s=l;break;case"P8R":o=-1.2,i=5.1,s=l;break;case"Mitral":o=1.9,i=4.5,s=d;break;case"Aortic":o=-.2,i=3,s=d;break;case"Pulmonary":o=1.4,i=3.2,s=d;break;case"Tricuspid":o=.9,i=4.5,s=d;break;default:o=100,i=100,console.error("Unknown zone, please give a zone that is in the list")}!function(e,t,n){void 0===n&&(n="red"),To.beginPath(),To.arc(e,t,7,0,2*Math.PI),To.fillStyle=n,To.fill(),To.strokeStyle=n,To.stroke()}((t+(r-t)*o)*a,(n+(r-t)*i)*c,s)}(0,n[0].landmarks[0][0],n[0].landmarks[0][1],n[0].landmarks[1][0]),To.restore(),!0===Ao?(Ro=ko,ko=1/(r/90)*50,Ro-Math.abs(ko)>1&&(No.width=1/60*Math.PI/180*(ko/100)*5*1e3*11/2.55*381/11,No.height=1/60*Math.PI/180*(ko/100)*5*1e3*11/2.55*863/11)):!1===Ao&&S().close()}else To.font="30px Arial",To.fillStyle="rgb(255,7,7)",To.fillText("No face detected",xo/3*e,So/2*t)}))];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),console.error(n),[3,3];case 3:return!1===Oo&&requestAnimationFrame(Lo),[2]}}))}))};function Po(e){return _o(this,void 0,void 0,(function(){return Io(this,(function(t){return Co=e,Oo=!1,[2]}))}))}var Vo=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Mo=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function Fo(e){e&&console.error(e)}const Wo=function(){function e(e,t,n,r){var o=this;this.skopDetected=!1,this.faceCamera=!0,this.apiKeyVonage=e,this.token=t,this.sessionId=n,this.apiKeyWemed=r,this.filter=new B;var i=this,s=w().initSession(this.apiKeyVonage,this.sessionId);this.session=s,s.on("streamCreated",(function(e){s.subscribe(e.stream,"subscriber",{insertMode:"append",width:"100%",height:"100%"},Fo)})),s.on("sessionDisconnected",(function(e){console.log("You were disconnected from the session.",e.reason)}));var a=w().initPublisher("publisher",{insertMode:"append",width:"100%",height:"100%"},Fo);this.publisher=a,s.connect(this.token,(function(e){e?Fo(e):(s.publish(a,Fo),i.cameraDimensions={width:a.videoWidth(),height:a.videoHeight()})})),s.on("signal:startSkop",(function(e){i.useSkop(),console.log("Using Skop - "+e.data)})),s.on("signal:stopSkop",(function(){i.stopUsingSkop().catch((function(e){console.log("Error stopping using Skop"+e)}))})),s.on("signal:gain",(function(e){i.setGain(e.data)})),s.on("signal:useAR",(function(e){return Vo(this,void 0,void 0,(function(){return Mo(this,(function(t){switch(t.label){case 0:return[4,i.augmentedReality(e.data)];case 1:return t.sent(),[2]}}))}))})),s.on("signal:focus",(function(e){i.setFocus(e.data)})),s.on("signal:monoyer",(function(e){"on"===e.data?i.toggleMonoyer(!0):i.toggleMonoyer(!1)})),navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){var t=e.getAudioTracks()[0];o.audioStream=new MediaStream([t]);var n=e.getVideoTracks()[0];o.videoStream=new MediaStream([n])}))}return e.init=function(t,n){return Vo(this,void 0,void 0,(function(){return Mo(this,(function(r){return[2,k(t).then((function(r){if(!0===r)return N(n).then((function(n){return new e(n.apiKey,n.token,n.sessionId,t)}))}))]}))}))},e.prototype.detectSkop=function(){return Vo(this,void 0,void 0,(function(){return Mo(this,(function(e){switch(e.label){case 0:return[4,G(this.audioStream)];case 1:return e.sent(),[2]}}))}))},e.prototype.useSkop=function(){return Vo(this,void 0,void 0,(function(){return Mo(this,(function(e){switch(e.label){case 0:return this.skopDetected?[3,2]:[4,this.detectSkop()];case 1:e.sent(),this.skopDetected=!0,e.label=2;case 2:return this.setUsingSkop(!0),[4,this.filter.ModifyAudio(this.focus,this,this.apiKeyWemed)];case 3:return e.sent(),[2]}}))}))},e.prototype.stopUsingSkop=function(){return Vo(this,void 0,void 0,(function(){return Mo(this,(function(e){switch(e.label){case 0:return this.setUsingSkop(!1),[4,this.filter.defaultAudio(this.publisher)];case 1:return e.sent(),[2]}}))}))},e.prototype.augmentedReality=function(e){return Vo(this,void 0,void 0,(function(){var t=this;return Mo(this,(function(n){switch(n.label){case 0:return e?(this.usingAR=e,[4,Do(this.videoStream).then((function(e){t.initNewPublisher(e),Po(t.getFocus())}))]):[3,2];case 1:return n.sent(),[3,3];case 2:Oo=!0,navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){t.initNewPublisher(e)})),n.label=3;case 3:return[2]}}))}))},e.prototype.toggleMonoyer=function(e){!0===e?this.augmentedReality(!0):!1===e&&this.augmentedReality(!1),function(e){Ao=e,console.log(Ao)}(e)},e.prototype.setAudioSource=function(e){this.publisher.setAudioSource(e)},e.prototype.setGain=function(e){this.filter.setGain(e)},e.prototype.setUsingSkop=function(e){this.usingSkop=e},e.prototype.getSessionId=function(){return this.sessionId},e.prototype.getFocus=function(){return this.focus},e.prototype.setFocus=function(e){this.focus=e,this.usingSkop&&this.useSkop(),this.usingAR&&Po(this.getFocus())},e.prototype.getIdFocus=function(){switch(this.focus){case"Aortic":return 1;case"Mitral":return 2;case"Pulmonary":return 3;case"Tricuspid":return 4}},e.prototype.disconnect=function(){this.session.disconnect()},e.prototype.initNewPublisher=function(e){this.videoStream=e;var t=e.getVideoTracks()[0],n=this.publisher,r={insertMode:"append",width:"100%",height:"100%",videoSource:t,facingMode:this.faceCamera?"user":"environment"},o=w().initPublisher("publisher",r,Fo);this.publisher=o,this.session.unpublish(n),this.session.publish(o,Fo)},e.prototype.mute=function(e){this.publisher.publishAudio(!e)},e.prototype.turnCamera=function(){this.faceCamera=!this.faceCamera,this.usingAR?(this.augmentedReality(!0),this.initNewPublisher(this.audioStream)):this.initNewPublisher(this.audioStream)},e.prototype.getMediaDevices=function(){return navigator.mediaDevices.enumerateDevices()},e.prototype.setInputDevice=function(e){var t=this;navigator.mediaDevices.getUserMedia({audio:{deviceId:e},video:!0}).then((function(e){t.setAudioSource(e.getAudioTracks()[0])}))},e}()})(),__webpack_exports__})()));